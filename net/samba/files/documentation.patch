diff --git a/docs/manpages/cifsdd.8 b/docs/manpages/cifsdd.8
new file mode 100644
index 0000000000..0168e828f4
--- /dev/null
+++ b/docs/manpages/cifsdd.8
@@ -0,0 +1,104 @@
+'\" t
+.\"     Title: cifsdd
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "CIFSDD" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+cifsdd \- convert and copy a file over SMB
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+cifsdd [OPERAND]\&.\&.\&.
+	
+.HP \w'\ 'u
+cifsdd OPTION
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+Copy a file, converting and formatting according to the operands\&.
+.PP
+bs=BYTES
+.RS 4
+read and write up to BYTES bytes at a time (default: 4096)
+.RE
+.PP
+ibs=BYTES
+.RS 4
+read up to BYTES bytes at a time (default: 4096)
+.RE
+.PP
+obs=BYTES
+.RS 4
+write BYTES bytes at a time (default: 4096)
+.RE
+.PP
+if=FILE
+.RS 4
+read from FILE instead of stdin
+.RE
+.PP
+of=FILE
+.RS 4
+write to FILE instead of stdout
+.RE
+.PP
+count=N
+.RS 4
+copy only N input blocks
+.RE
+.PP
+seek=N
+.RS 4
+skip N obs\-sized blocks at start of output
+.RE
+.PP
+skip=N
+.RS 4
+skip N ibs\-sized blocks at start of input
+.RE
+.PP
+direct
+.RS 4
+use direct I/O for data
+.RE
+.PP
+sync
+.RS 4
+use synchronous writes
+.RE
+.PP
+oplock
+.RS 4
+take oplocks on the input and output files
+.RE
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The cifsdd manpage was written by Andreas Schneider\&.
diff --git a/docs/manpages/dbwrap_tool.1 b/docs/manpages/dbwrap_tool.1
new file mode 100644
index 0000000000..8df26084bf
--- /dev/null
+++ b/docs/manpages/dbwrap_tool.1
@@ -0,0 +1,329 @@
+'\" t
+.\"     Title: dbwrap_tool
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "DBWRAP_TOOL" "1" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+dbwrap_tool \- low level TDB/CTDB manipulation tool using the dbwrap interface
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+dbwrap_tool [\-?|\-\-help] [\-\-usage] [\-\-persistent] [\-\-non\-persistent] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] {<database>} {<operation>} [<key>\ [<type>\ [<value>]]]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The dbwrap_tool program is used to read and manipulate TDB/CTDB databases using the dbwrap interface\&.
+.PP
+The following database operations are available:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+fetch: fetch a record
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+store: create or modify a record
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+delete: remove a record
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+exists: test for existence of a record
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+erase: remove all records
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+listkeys: list all available records
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+listwatchers: list processes, which are waiting for changes in a record
+.RE
+.sp
+.RE
+.PP
+The following types are available:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+int32: signed 32bit integer
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+uint32: unsigned 32bit integer
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+string: "hello world"
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+hex: hex strings like "68656C6C6F20776F726C6400" ("hello world")
+.RE
+.sp
+.RE
+.SH "OPTIONS"
+.PP
+\-\-persistent
+.RS 4
+Open the database as a persistent database\&.
+.sp
+Exactly one of \-\-persistent and \-\-non\-persistent must be specified\&.
+.RE
+.PP
+\-\-non\-persistent
+.RS 4
+Open the database as a non\-persistent database\&.
+.sp
+Caveat: opening a database as non\-persistent when there is currently no other opener will wipe the database\&.
+.sp
+Exactly one of \-\-persistent and \-\-non\-persistent must be specified\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.SH "COMMANDS"
+.SS "fetch"
+.HP \w'\ 'u
+dbwrap_tool <database> fetch <key> <type>
+		
+.SS "store"
+.HP \w'\ 'u
+dbwrap_tool <database> store <key> <type> <value>
+		
+.SS "delete"
+.HP \w'\ 'u
+dbwrap_tool <database> delete <key>
+		
+.SS "exists"
+.HP \w'\ 'u
+dbwrap_tool <database> exists <key>
+		
+.SS "erase"
+.HP \w'\ 'u
+dbwrap_tool <database> erase 
+.SS "listkeys"
+.HP \w'\ 'u
+dbwrap_tool <database> listkeys
+		
+.SS "listwatchers"
+.HP \w'\ 'u
+dbwrap_tool <database> listwatchers
+		
+.SH "EXAMPLES"
+.PP
+List all keys from winbindd_idmap\&.tdb
+.RS 4
+dbwrap_tool
+\-\-persistent winbindd_idmap\&.tdb listkeys
+.RE
+.PP
+Fetch record with key "USER HWM" as uint32
+.RS 4
+dbwrap_tool
+\-\-persistent winbindd_idmap\&.tdb fetch "USER HWM" uint32
+.RE
+.PP
+Remove record with key "USER HWM"
+.RS 4
+dbwrap_tool
+\-\-persistent winbindd_idmap\&.tdb remove "USER HWM"
+.RE
+.PP
+Store and overwrite record "USER HWM" with value 214
+.RS 4
+uint32:
+dbwrap_tool
+\-\-persistent winbindd_idmap\&.tdb store "USER HWM" uint32 214
+hex:
+dbwrap_tool
+\-\-persistent winbindd_idmap\&.tdb store "USER HWM" hex D6000000
+.RE
+.SH "NOTES"
+.PP
+Use with caution!
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbd\fR(8),
+\fBsamba\fR(7)
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The dbwrap_tool manpage was written by Bjoern Baumbach\&.
diff --git a/docs/manpages/eventlogadm.8 b/docs/manpages/eventlogadm.8
new file mode 100644
index 0000000000..31adad6a74
--- /dev/null
+++ b/docs/manpages/eventlogadm.8
@@ -0,0 +1,345 @@
+'\" t
+.\"     Title: eventlogadm
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "EVENTLOGADM" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+eventlogadm \- push records into the Samba event log store
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+eventlogadm [\fB\-s\fR] [\fB\-d\fR] [\fB\-h\fR] \fB\-o\fR\ addsource\ \fIEVENTLOG\fR\ \fISOURCENAME\fR\ \fIMSGFILE\fR
+.HP \w'\ 'u
+eventlogadm [\fB\-s\fR] [\fB\-d\fR] [\fB\-h\fR] \fB\-o\fR\ write\ \fIEVENTLOG\fR
+.HP \w'\ 'u
+eventlogadm [\fB\-s\fR] [\fB\-d\fR] [\fB\-h\fR] \fB\-o\fR\ dump\ \fIEVENTLOG\fR\ \fIRECORD_NUMBER\fR
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(1)
+suite\&.
+.PP
+eventlogadm
+is a filter that accepts formatted event log records on standard input and writes them to the Samba event log store\&. Windows client can then manipulate these record using the usual administration tools\&.
+.SH "OPTIONS"
+.PP
+\fB\-s\fR \fIFILENAME\fR
+.RS 4
+The
+\-s
+option causes
+eventlogadm
+to load the configuration file given as FILENAME instead of the default one used by Samba\&.
+.RE
+.PP
+\fB\-d\fR
+.RS 4
+The
+\-d
+option causes
+eventlogadm
+to emit debugging information\&.
+.RE
+.PP
+\fB\-o\fR addsource \fIEVENTLOG\fR \fISOURCENAME\fR \fIMSGFILE\fR
+.RS 4
+The
+\-o addsource
+option creates a new event log source\&.
+.RE
+.PP
+\fB\-o\fR write \fIEVENTLOG\fR
+.RS 4
+The
+\-o write
+reads event log records from standard input and writes them to the Samba event log store named by EVENTLOG\&.
+.RE
+.PP
+\fB\-o\fR dump \fIEVENTLOG\fR \fIRECORD_NUMBER\fR
+.RS 4
+The
+\-o dump
+reads event log records from a EVENTLOG tdb and dumps them to standard output on screen\&.
+.RE
+.PP
+\fB\-h\fR
+.RS 4
+Print usage information\&.
+.RE
+.SH "EVENTLOG RECORD FORMAT"
+.PP
+For the write operation,
+eventlogadm
+expects to be able to read structured records from standard input\&. These records are a sequence of lines, with the record key and data separated by a colon character\&. Records are separated by at least one or more blank line\&.
+.PP
+The event log record field are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+LEN
+\- This field should be 0, since
+eventlogadm
+will calculate this value\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+RS1
+\- This must be the value 1699505740\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+RCN
+\- This field should be 0\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TMG
+\- The time the eventlog record was generated; format is the number of seconds since 00:00:00 January 1, 1970, UTC\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TMW
+\- The time the eventlog record was written; format is the number of seconds since 00:00:00 January 1, 1970, UTC\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+EID
+\- The eventlog ID\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ETP
+\- The event type \-\- one of "INFO", "ERROR", "WARNING", "AUDIT SUCCESS" or "AUDIT FAILURE"\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ECT
+\- The event category; this depends on the message file\&. It is primarily used as a means of filtering in the eventlog viewer\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+RS2
+\- This field should be 0\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+CRN
+\- This field should be 0\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+USL
+\- This field should be 0\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SRC
+\- This field contains the source name associated with the event log\&. If a message file is used with an event log, there will be a registry entry for associating this source name with a message file DLL\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SRN
+\- The name of the machine on which the eventlog was generated\&. This is typically the host name\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+STR
+\- The text associated with the eventlog\&. There may be more than one string in a record\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+DAT
+\- This field should be left unset\&.
+.RE
+.SH "EXAMPLES"
+.PP
+An example of the record format accepted by
+eventlogadm:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	LEN: 0
+	RS1: 1699505740
+	RCN: 0
+	TMG: 1128631322
+	TMW: 1128631322
+	EID: 1000
+	ETP: INFO
+	ECT: 0
+	RS2: 0
+	CRN: 0
+	USL: 0
+	SRC: cron
+	SRN: dmlinux
+	STR: (root) CMD ( rm \-f /var/spool/cron/lastrun/cron\&.hourly)
+	DAT:
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Set up an eventlog source, specifying a message file DLL:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	eventlogadm \-o addsource Application MyApplication | \e\e
+	    	%SystemRoot%/system32/MyApplication\&.dll
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Filter messages from the system log into an event log:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	tail \-f /var/log/messages | \e\e
+		my_program_to_parse_into_eventlog_records | \e\e
+	      	eventlogadm SystemLogEvents
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/idmap_ad.8 b/docs/manpages/idmap_ad.8
new file mode 100644
index 0000000000..1745aa48c5
--- /dev/null
+++ b/docs/manpages/idmap_ad.8
@@ -0,0 +1,106 @@
+'\" t
+.\"     Title: idmap_ad
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "IDMAP_AD" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+idmap_ad \- Samba\*(Aqs idmap_ad Backend for Winbind
+.SH "DESCRIPTION"
+.PP
+The idmap_ad plugin provides a way for Winbind to read id mappings from an AD server that uses RFC2307/SFU schema extensions\&. This module implements only the "idmap" API, and is READONLY\&. Mappings must be provided in advance by the administrator by adding the uidNumber attributes for users and gidNumber attributes for groups in the AD\&. Winbind will only map users that have a uidNumber and whose primary group have a gidNumber attribute set\&. It is however recommended that all groups in use have gidNumber attributes assigned, otherwise they are not working\&.
+.PP
+Currently, the
+\fIad\fR
+backend does not work as the default idmap backend, but one has to configure it separately for each domain for which one wants to use it, using disjoint ranges\&. One usually needs to configure a writeable default idmap range, using for example the
+\fItdb\fR
+or
+\fIldap\fR
+backend, in order to be able to map the BUILTIN sids and possibly other trusted domains\&. The writeable default config is also needed in order to be able to create group mappings\&. This catch\-all default idmap configuration should have a range that is disjoint from any explicitly configured domain with idmap backend
+\fIad\fR\&. See the example below\&.
+.SH "IDMAP OPTIONS"
+.PP
+range = low \- high
+.RS 4
+Defines the available matching UID and GID range for which the backend is authoritative\&. Note that the range acts as a filter\&. If specified any UID or GID stored in AD that fall outside the range is ignored and the corresponding map is discarded\&. It is intended as a way to avoid accidental UID/GID overlaps between local and remotely defined IDs\&.
+.RE
+.PP
+schema_mode = <rfc2307 | sfu | sfu20>
+.RS 4
+Defines the schema that idmap_ad should use when querying Active Directory regarding user and group information\&. This can be either the RFC2307 schema support included in Windows 2003 R2 or the Service for Unix (SFU) schema\&. For SFU 3\&.0 or 3\&.5 please choose "sfu", for SFU 2\&.0 please choose "sfu20"\&. Please note that the behavior of primary group membership is controlled by the
+\fIunix_primary_group\fR
+option\&.
+.RE
+.PP
+unix_primary_group = yes/no
+.RS 4
+Defines whether the user\*(Aqs primary group is fetched from the SFU attributes or the AD primary group\&. If set to
+\fIyes\fR
+the primary group membership is fetched from the LDAP attributes (gidNumber)\&. If set to
+\fIno\fR
+the primary group membership is calculated via the "primaryGroupID" LDAP attribute\&.
+.sp
+Default: no
+.RE
+.PP
+unix_nss_info = yes/no
+.RS 4
+If set to
+\fIyes\fR
+winbind will retrieve the login shell and home directory from the LDAP attributes\&. If set to
+\fIno\fR
+or the AD LDAP entry lacks the SFU attributes the options
+\fItemplate shell\fR
+and
+\fItemplate homedir\fR
+are used\&.
+.sp
+Default: no
+.RE
+.SH "EXAMPLES"
+.PP
+The following example shows how to retrieve idmappings from our principal and trusted AD domains\&. If trusted domains are present id conflicts must be resolved beforehand, there is no guarantee on the order conflicting mappings would be resolved at this point\&. This example also shows how to leave a small non conflicting range for local id allocation that may be used in internal backends like BUILTIN\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	workgroup = CORP
+
+	idmap config * : backend = tdb
+	idmap config * : range = 1000000\-1999999
+
+	idmap config CORP : backend  = ad
+	idmap config CORP : range = 1000\-999999
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/idmap_autorid.8 b/docs/manpages/idmap_autorid.8
new file mode 100644
index 0000000000..06bcd22cde
--- /dev/null
+++ b/docs/manpages/idmap_autorid.8
@@ -0,0 +1,148 @@
+'\" t
+.\"     Title: idmap_autorid
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "IDMAP_AUTORID" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+idmap_autorid \- Samba\*(Aqs idmap_autorid Backend for Winbind
+.SH "DESCRIPTION"
+.PP
+The idmap_autorid backend provides a way to use an algorithmic mapping scheme to map UIDs/GIDs and SIDs that is more deterministic than idmap_tdb and easier to configure than idmap_rid\&.
+.PP
+The module works similar to idmap_rid, but it automatically configures the range to be used for each domain, so there is no need to specify a specific range for each domain in the forest, the only configuration that is needed is the range of uid/gids that shall be used for user/group mappings and an optional size of the ranges to be used\&.
+.PP
+The mappings of which domain is mapped to which range is stored in autorid\&.tdb, thus you should backup this database regularly\&.
+.PP
+Due to the algorithm being used, it is the module that is most easy to use as it only requires a minimal configuration\&.
+.SH "IDMAP OPTIONS"
+.PP
+range = low \- high
+.RS 4
+Defines the available matching uid and gid range for which the backend is authoritative\&. Note that the range acts as a filter\&. If algorithmically determined UID or GID fall outside the range, they are ignored and the corresponding map is discarded\&. It is intended as a way to avoid accidental UID/GID overlaps between local and remotely defined IDs\&.
+.RE
+.PP
+rangesize = numberofidsperdomain
+.RS 4
+Defines the number of uids/gids available per domain range\&. The minimum needed value is 2000\&. SIDs with RIDs larger than this value will be mapped into extension ranges depending upon number of available ranges\&. If the autorid backend runs out of available ranges, mapping requests for new domains (or new extension ranges for domains already known) are ignored and the corresponding map is discarded\&.
+.sp
+Example: with rangesize set to 10000, users/groups with a RID up to 10000 will be put into the first range for the domain\&. When attempting to map the an object with a RID of 25000, an extension range will be allocated that will then be used to map all RIDs from 20000\-29999\&.
+.sp
+One range will be used for local users and groups and for non\-domain well\-known SIDs like Everyone (S\-1\-1\-0) or Creator Owner (S\-1\-3\-0)\&. A chosen list of well\-known SIDs will be preallocated on first start to create deterministic mappings for those\&.
+.sp
+Thus the number of local users and groups that can be created is limited by this option as well\&. If you plan to create a large amount of local users or groups, you will need set this parameter accordingly\&.
+.sp
+The default value is 100000\&.
+.RE
+.PP
+read only = [ yes | no ]
+.RS 4
+Turn the module into read\-only mode\&. No new ranges will be allocated nor will new mappings be created in the idmap pool\&. Defaults to no\&.
+.RE
+.PP
+ignore builtin = [ yes | no ]
+.RS 4
+Ignore any mapping requests for the BUILTIN domain\&. Defaults to no\&.
+.RE
+.SH "THE MAPPING FORMULAS"
+.PP
+The Unix ID for a RID is calculated this way:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+			ID =  REDUCED RID + IDMAP RANGE LOW VALUE + RANGE NUMBER * RANGE SIZE
+		
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+where REDUCED RID = RID % RANGE_SIZE and a DOMAIN RANGE INDEX = RID / RANGE_SIZE is used together with the domain sid to determine the RANGE NUMBER (stored in the database)\&.
+.PP
+Correspondingly, the formula for calculating the RID for a given Unix ID is this:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+			RID = (ID \- LOW ID) % RANGE SIZE + DOMAIN RANGE INDEX * RANGE SIZE
+		
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Where the DOMAIN RANGE INDEX is retrieved from the database along with the domain sid by the RANGE NUMBER = (ID \- LOW ID) / RANGE SIZE \&.
+.SH "EXAMPLES"
+.PP
+This example shows you the minimal configuration that will work for the principal domain and 19 trusted domains / range extensions\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	security = ads
+	workgroup = CUSTOMER
+	realm = CUSTOMER\&.COM
+
+	idmap config * : backend = autorid
+	idmap config * : range = 1000000\-1999999
+
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+This example shows how to configure idmap_autorid as default for all domains with a potentially large amount of users plus a specific configuration for a trusted domain that uses the SFU mapping scheme\&. Please note that idmap ranges and sfu ranges are not allowed to overlap\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	security = ads
+	workgroup = CUSTOMER
+	realm = CUSTOMER\&.COM
+
+	idmap config * : backend = autorid
+	idmap config * : range = 1000000\-19999999
+	idmap config * : rangesize = 1000000
+
+	idmap config TRUSTED : backend  = ad
+	idmap config TRUSTED : range    = 50000 \- 99999
+	idmap config TRUSTED : schema_mode = sfu
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/idmap_hash.8 b/docs/manpages/idmap_hash.8
new file mode 100644
index 0000000000..f0880f3679
--- /dev/null
+++ b/docs/manpages/idmap_hash.8
@@ -0,0 +1,65 @@
+'\" t
+.\"     Title: idmap_hash
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "IDMAP_HASH" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+idmap_hash \- DO NOT USE THIS BACKEND
+.SH "DESCRIPTION"
+.PP
+DO NOT USE THIS PLUGIN The idmap_hash plugin implements a hashing algorithm used to map SIDs for domain users and groups to 31\-bit uids and gids, respectively\&. This plugin also implements the nss_info API and can be used to support a local name mapping files if enabled via the "winbind normalize names" and "winbind nss info" parameters in smb\&.conf\&. The module divides the range into subranges for each domain that is being handled by the idmap config\&. The module needs the complete UID and GID range to be able to map all SIDs\&. The lowest value for the range should be the smallest ID available in the system\&. This is normally 1000\&. The highest ID should be set to 2147483647\&. A smaller range will lead to issues because of the hashing algorithm used\&. The overall range to map all SIDs is 0 \- 2147483647\&. Any range smaller than 0 \- 2147483647 will filter some SIDs\&. As we can normally only start with 1000, we are not able to map 1000 SIDs\&. This already can lead to issues\&. The smaller the range the less SIDs can be mapped\&. We do not recommend to use this plugin\&. It will be removed in a future release of Samba\&.
+.SH "IDMAP OPTIONS"
+.PP
+name_map
+.RS 4
+Specifies the absolute path to the name mapping file used by the nss_info API\&. Entries in the file are of the form "\fIunix name\fR
+=
+\fIqualified domain name\fR"\&. Mapping of both user and group names is supported\&.
+.RE
+.SH "EXAMPLES"
+.PP
+The following example utilizes the idmap_hash plugin for the idmap and nss_info information\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	idmap config * : backend = hash
+	idmap config * : range = 1000\-2147483647
+
+	winbind nss info = hash
+	winbind normalize names = yes
+	idmap_hash:name_map = /etc/samba/name_map\&.cfg
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/idmap_ldap.8 b/docs/manpages/idmap_ldap.8
new file mode 100644
index 0000000000..a7b7eb0c68
--- /dev/null
+++ b/docs/manpages/idmap_ldap.8
@@ -0,0 +1,106 @@
+'\" t
+.\"     Title: idmap_ldap
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "IDMAP_LDAP" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+idmap_ldap \- Samba\*(Aqs idmap_ldap Backend for Winbind
+.SH "DESCRIPTION"
+.PP
+The idmap_ldap plugin provides a means for Winbind to store and retrieve SID/uid/gid mapping tables in an LDAP directory service\&.
+.PP
+In contrast to read only backends like idmap_rid, it is an allocating backend: This means that it needs to allocate new user and group IDs in order to create new mappings\&.
+.SH "IDMAP OPTIONS"
+.PP
+ldap_base_dn = DN
+.RS 4
+Defines the directory base suffix to use for SID/uid/gid mapping entries\&. If not defined, idmap_ldap will default to using the "ldap idmap suffix" option from smb\&.conf\&.
+.RE
+.PP
+ldap_user_dn = DN
+.RS 4
+Defines the user DN to be used for authentication\&. The secret for authenticating this user should be stored with net idmap secret (see
+\fBnet\fR(8))\&. If absent, the ldap credentials from the ldap passdb configuration are used, and if these are also absent, an anonymous bind will be performed as last fallback\&.
+.RE
+.PP
+ldap_url = ldap://server/
+.RS 4
+Specifies the LDAP server to use for SID/uid/gid map entries\&. If not defined, idmap_ldap will assume that ldap://localhost/ should be used\&.
+.RE
+.PP
+range = low \- high
+.RS 4
+Defines the available matching uid and gid range for which the backend is authoritative\&.
+.RE
+.SH "EXAMPLES"
+.PP
+The following example shows how an ldap directory is used as the default idmap backend\&. It also configures the idmap range and base directory suffix\&. The secret for the ldap_user_dn has to be set with "net idmap secret \*(Aq*\*(Aq password"\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	idmap config * : backend      = ldap
+	idmap config * : range        = 1000000\-1999999
+	idmap config * : ldap_url     = ldap://localhost/
+	idmap config * : ldap_base_dn = ou=idmap,dc=example,dc=com
+	idmap config * : ldap_user_dn = cn=idmap_admin,dc=example,dc=com
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+This example shows how ldap can be used as a readonly backend while tdb is the default backend used to store the mappings\&. It adds an explicit configuration for some domain DOM1, that uses the ldap idmap backend\&. Note that a range disjoint from the default range is used\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	# "backend = tdb" is redundant here since it is the default
+	idmap config * : backend = tdb
+	idmap config * : range = 1000000\-1999999
+
+	idmap config DOM1 : backend = ldap
+	idmap config DOM1 : range = 2000000\-2999999
+	idmap config DOM1 : read only = yes
+	idmap config DOM1 : ldap_url = ldap://server/
+	idmap config DOM1 : ldap_base_dn = ou=idmap,dc=dom1,dc=example,dc=com
+	idmap config DOM1 : ldap_user_dn = cn=idmap_admin,dc=dom1,dc=example,dc=com
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "NOTE"
+.PP
+In order to use authentication against ldap servers you may need to provide a DN and a password\&. To avoid exposing the password in plain text in the configuration file we store it into a security store\&. The "net idmap " command is used to store a secret for the DN specified in a specific idmap domain\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/idmap_nss.8 b/docs/manpages/idmap_nss.8
new file mode 100644
index 0000000000..7bdd2610c7
--- /dev/null
+++ b/docs/manpages/idmap_nss.8
@@ -0,0 +1,56 @@
+'\" t
+.\"     Title: idmap_nss
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "IDMAP_NSS" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+idmap_nss \- Samba\*(Aqs idmap_nss Backend for Winbind
+.SH "DESCRIPTION"
+.PP
+The idmap_nss plugin provides a means to map Unix users and groups to Windows accounts\&. This provides a simple means of ensuring that the SID for a Unix user named jsmith is reported as the one assigned to DOMAIN\ejsmith which is necessary for reporting ACLs on files and printers stored on a Samba member server\&.
+.SH "EXAMPLES"
+.PP
+This example shows how to use idmap_nss to obtain the local account ID\*(Aqs for its own domain (SAMBA) from NSS, whilst allocating new mappings for the default domain (*) and any trusted domains\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	idmap config * : backend = tdb
+	idmap config * : range = 1000000\-1999999
+
+	idmap config SAMBA : backend  = nss
+	idmap config SAMBA : range = 1000\-999999
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/idmap_rfc2307.8 b/docs/manpages/idmap_rfc2307.8
new file mode 100644
index 0000000000..e2d4efab1e
--- /dev/null
+++ b/docs/manpages/idmap_rfc2307.8
@@ -0,0 +1,118 @@
+'\" t
+.\"     Title: idmap_rfc2307
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "IDMAP_RFC2307" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+idmap_rfc2307 \- Samba\*(Aqs idmap_rfc2307 Backend for Winbind
+.SH "DESCRIPTION"
+.PP
+The idmap_rfc2307 plugin provides a way for winbind to read id mappings from records in an LDAP server as defined in RFC 2307\&. The LDAP server can be stand\-alone or the LDAP server provided by the AD server\&. An AD server is always required to provide the mapping between name and SID, and the LDAP server is queried for the mapping between name and uid/gid\&. This module implements only the "idmap" API, and is READONLY\&.
+.PP
+Mappings must be provided in advance by the administrator by creating the user accounts in the Active Directory server and the posixAccount and posixGroup objects in the LDAP server\&. The names in the Active Directory server and in the LDAP server have to be the same\&.
+.PP
+This id mapping approach allows the reuse of existing LDAP authentication servers that store records in the RFC 2307 format\&.
+.PP
+When connecting to the LDAP server provided by an AD server, the parameter
+\m[blue]\fBldap ssl ads\fR\m[]
+determines whether SSL should be used\&. When using a stand\-alone LDAP server,
+\m[blue]\fBldap ssl\fR\m[]
+applies\&.
+.SH "IDMAP OPTIONS"
+.PP
+range = low \- high
+.RS 4
+Defines the available matching UID and GID range for which the backend is authoritative\&. Note that the range acts as a filter\&. If specified any UID or GID stored in AD that fall outside the range is ignored and the corresponding map is discarded\&. It is intended as a way to avoid accidental UID/GID overlaps between local and remotely defined IDs\&.
+.RE
+.PP
+ldap_server = <ad | stand\-alone >
+.RS 4
+Defines the type of LDAP server to use\&. This can either be the LDAP server provided by the Active Directory server (ad) or a stand\-alone LDAP server\&.
+.RE
+.PP
+bind_path_user
+.RS 4
+Specifies the search base where user objects can be found in the LDAP server\&.
+.RE
+.PP
+bind_path_group
+.RS 4
+Specifies the search base where group objects can be found in the LDAP server\&.
+.RE
+.PP
+user_cn = <yes | no>
+.RS 4
+Query cn attribute instead of uid attribute for the user name in LDAP\&. This option is not required, the default is no\&.
+.RE
+.PP
+realm
+.RS 4
+Append @realm to cn for groups (and users if user_cn is set) in LDAP queries\&. This option is not required, the default is not to append the realm\&.
+.RE
+.PP
+ldap_domain
+.RS 4
+When using the LDAP server in the Active Directory server, this allows one to specify the domain where to access the Active Directory server\&. This allows using trust relationships while keeping all RFC 2307 records in one place\&. This parameter is optional, the default is to access the AD server in the current domain to query LDAP records\&.
+.RE
+.PP
+ldap_url
+.RS 4
+When using a stand\-alone LDAP server, this parameter specifies the ldap URL for accessing the LDAP server\&.
+.RE
+.PP
+ldap_user_dn
+.RS 4
+Defines the user DN to be used for authentication\&. The secret for authenticating this user should be stored with net idmap secret (see
+\fBnet\fR(8))\&. If absent, an anonymous bind will be performed\&.
+.RE
+.SH "EXAMPLES"
+.PP
+The following example shows how to retrieve id mappings from a stand\-alone LDAP server\&. This example also shows how to leave a small non conflicting range for local id allocation that may be used in internal backends like BUILTIN\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	idmap config * : backend = tdb
+	idmap config * : range = 1000000\-1999999
+
+	idmap config DOMAIN : backend = rfc2307
+	idmap config DOMAIN : range = 2000000\-2999999
+	idmap config DOMAIN : ldap_server = stand\-alone
+	idmap config DOMAIN : ldap_url = ldap://ldap1\&.example\&.com
+	idmap config DOMAIN : ldap_user_dn = cn=ldapmanager,dc=example,dc=com
+	idmap config DOMAIN : bind_path_user = ou=People,dc=example,dc=com
+	idmap config DOMAIN : bind_path_group = ou=Group,dc=example,dc=com
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/idmap_rid.8 b/docs/manpages/idmap_rid.8
new file mode 100644
index 0000000000..c448740cb9
--- /dev/null
+++ b/docs/manpages/idmap_rid.8
@@ -0,0 +1,111 @@
+'\" t
+.\"     Title: idmap_rid
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "IDMAP_RID" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+idmap_rid \- Samba\*(Aqs idmap_rid Backend for Winbind
+.SH "DESCRIPTION"
+.PP
+The idmap_rid backend provides a way to use an algorithmic mapping scheme to map UIDs/GIDs and SIDs\&. No database is required in this case as the mapping is deterministic\&.
+.PP
+Currently, there should to be an explicit idmap configuration for each domain that should use the idmap_rid backend, using disjoint ranges\&.
+.PP
+NOTE: The idmap_rid backend can NOT bet used as the default backend\&. One usually needs to define a writeable default idmap range, using a backend like
+\fItdb\fR
+or
+\fIldap\fR
+that can create unix ids, in order to be able to map the BUILTIN sids and other domains, and also in order to be able to create group mappings\&. See the example below\&.
+.SH "IDMAP OPTIONS"
+.PP
+range = low \- high
+.RS 4
+Defines the available matching uid and gid range for which the backend is authoritative\&. Note that the range acts as a filter\&. If algorithmically determined UID or GID fall outside the range, they are ignored and the corresponding map is discarded\&. It is intended as a way to avoid accidental UID/GID overlaps between local and remotely defined IDs\&.
+.RE
+.PP
+base_rid = INTEGER
+.RS 4
+Defines the base integer used to build SIDs out of a UID or a GID, and to rebase the UID or GID to be obtained from a SID\&. This means SIDs with a RID less than the base rid are filtered\&. The default is not to restrict the allowed rids at all, i\&.e\&. a base_rid value of 0\&.
+.sp
+Use of this parameter is deprecated\&.
+.RE
+.SH "THE MAPPING FORMULAS"
+.PP
+The Unix ID for a RID is calculated this way:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+			ID = RID \- BASE_RID + LOW_RANGE_ID\&.
+		
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Correspondingly, the formula for calculating the RID for a given Unix ID is this:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+			RID = ID + BASE_RID \- LOW_RANGE_ID\&.
+		
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+.SH "EXAMPLES"
+.PP
+This example shows how to configure two domains with idmap_rid, the principal domain and a trusted domain, leaving the default id mapping scheme at tdb\&. The example also demonstrates the use of the base_rid parameter for the trusted domain\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	security = domain
+	workgroup = MAIN
+
+	idmap config * : backend        = tdb
+	idmap config * : range          = 1000000\-1999999
+
+	idmap config MAIN : backend     = rid
+	idmap config MAIN : range       = 10000 \- 49999
+
+	idmap config TRUSTED : backend  = rid
+	idmap config TRUSTED : range    = 50000 \- 99999
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/idmap_script.8 b/docs/manpages/idmap_script.8
new file mode 100644
index 0000000000..5a40484e0e
--- /dev/null
+++ b/docs/manpages/idmap_script.8
@@ -0,0 +1,153 @@
+'\" t
+.\"     Title: idmap_script
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "IDMAP_SCRIPT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+idmap_script \- Samba\*(Aqs idmap_script Backend for Winbind
+.SH "DESCRIPTION"
+.PP
+The idmap_script plugin is a substitute for the idmap_tdb2 backend used by winbindd for storing SID/uid/gid mapping tables in clustered environments with Samba and CTDB\&. It is a read only backend that uses a script to perform mapping\&.
+.PP
+It was developed out of the idmap_tdb2 back end and does not store SID/uid/gid mappings in a TDB, since the winbind_cache tdb will store the mappings once they are provided\&.
+.SH "IDMAP OPTIONS"
+.PP
+range = low \- high
+.RS 4
+Defines the available matching uid and gid range for which the backend is authoritative\&.
+.RE
+.PP
+script
+.RS 4
+This option can be used to configure an external program for performing id mappings\&.
+.RE
+.SH "IDMAP SCRIPT"
+.PP
+The tdb2 idmap backend supports an external program for performing id mappings through the smb\&.conf option
+\fIidmap config * : script\fR
+or its deprecated legacy form
+\fIidmap : script\fR\&.
+.PP
+The mappings obtained by the script are then stored in the idmap tdb2 database instead of mappings created by the incrementing id counters\&. It is therefore important that the script covers the complete range of SIDs that can be passed in for SID to Unix ID mapping, since otherwise SIDs unmapped by the script might get mapped to IDs that had previously been mapped by the script\&.
+.PP
+The script should accept the following command line options\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	SIDTOID S\-1\-xxxx
+	IDTOSID UID xxxx
+	IDTOSID GID xxxx
+	IDTOSID XID xxxx
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+And it should return one of the following responses as a single line of text\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	UID:yyyy
+	GID:yyyy
+	XID:yyyy
+	SID:ssss
+	ERR:yyyy
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+XID indicates that the ID returned should be both a UID and a GID\&. That is, it requests an ID_TYPE_BOTH, but it is ultimately up to the script whether or not it can honor that request\&. It can choose to return a UID or a GID mapping only\&.
+.SH "EXAMPLES"
+.PP
+This example shows how script is used as a the default idmap backend using an external program via the script parameter:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	idmap config * : backend = script
+	idmap config * : range = 1000000\-2000000
+	idmap config * : script = /usr/local/samba/bin/idmap_script\&.sh
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+This shows a simple script to partially perform the task:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	#!/bin/sh
+	#
+	# Uncomment this if you want some logging
+	#echo $@ >> /tmp/idmap\&.sh\&.log
+	if [ "$1" == "SIDTOID" ]
+	then
+		# Note\&. The number returned has to be within the range defined
+		#echo "Sending UID:1000005" >> /tmp/idmap\&.sh\&.log
+		echo "UID:1000005"
+		exit 0
+	else
+		#echo "Sending ERR: No idea what to do" >> /tmp/idmap\&.sh\&.log
+		echo "ERR: No idea what to do"
+		exit 1
+	fi
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Clearly, this script is not enough, as it should probably use wbinfo to determine if an incoming SID is a user or group SID and then look up the mapping in a table or use some other mechanism for mapping SIDs to UIDs and etc\&.
+.PP
+Please be aware that the script is called with the _NO_WINBINDD environment variable set to 1\&. This prevents recursive calls into winbind from the script both via explicit calls to wbinfo and via implicit calls via nss_winbind\&. For example a call to
+ls \-l
+could trigger such an infinite recursion\&.
+.PP
+It is safe to call
+wbinfo \-n
+and
+wbinfo \-s
+from within an idmap script\&. To do so, the script must unset the _NO_WINBINDD environment variable right before the call to
+wbinfo
+and set it to 1 again right after
+wbinfo
+has returned to protect against the recursion\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/idmap_tdb.8 b/docs/manpages/idmap_tdb.8
new file mode 100644
index 0000000000..30e1792228
--- /dev/null
+++ b/docs/manpages/idmap_tdb.8
@@ -0,0 +1,62 @@
+'\" t
+.\"     Title: idmap_tdb
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "IDMAP_TDB" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+idmap_tdb \- Samba\*(Aqs idmap_tdb Backend for Winbind
+.SH "DESCRIPTION"
+.PP
+The idmap_tdb plugin is the default backend used by winbindd for storing SID/uid/gid mapping tables\&.
+.PP
+In contrast to read only backends like idmap_rid, it is an allocating backend: This means that it needs to allocate new user and group IDs in order to create new mappings\&.
+.SH "IDMAP OPTIONS"
+.PP
+range = low \- high
+.RS 4
+Defines the available matching uid and gid range for which the backend is authoritative\&.
+.RE
+.SH "EXAMPLES"
+.PP
+This example shows how tdb is used as a the default idmap backend\&. This configured range is used for uid and gid allocation\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	# "backend = tdb" is redundant here since it is the default
+	idmap config * : backend = tdb
+	idmap config * : range = 1000000\-2000000
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/idmap_tdb2.8 b/docs/manpages/idmap_tdb2.8
new file mode 100644
index 0000000000..ffce0d331c
--- /dev/null
+++ b/docs/manpages/idmap_tdb2.8
@@ -0,0 +1,121 @@
+'\" t
+.\"     Title: idmap_tdb2
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "IDMAP_TDB2" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+idmap_tdb2 \- Samba\*(Aqs idmap_tdb2 Backend for Winbind
+.SH "DESCRIPTION"
+.PP
+The idmap_tdb2 plugin is a substitute for the default idmap_tdb backend used by winbindd for storing SID/uid/gid mapping tables in clustered environments with Samba and CTDB\&.
+.PP
+In contrast to read only backends like idmap_rid, it is an allocating backend: This means that it needs to allocate new user and group IDs in order to create new mappings\&.
+.SH "IDMAP OPTIONS"
+.PP
+range = low \- high
+.RS 4
+Defines the available matching uid and gid range for which the backend is authoritative\&.
+.RE
+.PP
+script
+.RS 4
+This option can be used to configure an external program for performing id mappings instead of using the tdb counter\&. The mappings are then stored int tdb2 idmap database\&. For details see the section on IDMAP SCRIPT below\&.
+.RE
+.SH "IDMAP SCRIPT"
+.PP
+The tdb2 idmap backend supports an external program for performing id mappings through the smb\&.conf option
+\fIidmap config * : script\fR
+or its deprecated legacy form
+\fIidmap : script\fR\&.
+.PP
+The mappings obtained by the script are then stored in the idmap tdb2 database instead of mappings created by the incrementing id counters\&. It is therefore important that the script covers the complete range of SIDs that can be passed in for SID to Unix ID mapping, since otherwise SIDs unmapped by the script might get mapped to IDs that had previously been mapped by the script\&.
+.PP
+The script should accept the following command line options\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	SIDTOID S\-1\-xxxx
+	IDTOSID UID xxxx
+	IDTOSID GID xxxx
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+And it should return one of the following responses as a single line of text\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	UID:yyyy
+	GID:yyyy
+	SID:yyyy
+	ERR:yyyy
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "EXAMPLES"
+.PP
+This example shows how tdb2 is used as a the default idmap backend\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	idmap config * : backend = tdb2
+	idmap config * : range = 1000000\-2000000
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+This example shows how tdb2 is used as a the default idmap backend using an external program via the script parameter:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	idmap config * : backend = tdb2
+	idmap config * : range = 1000000\-2000000
+	idmap config * : script = /usr/local/samba/bin/idmap_script\&.sh
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/libsmbclient.7 b/docs/manpages/libsmbclient.7
new file mode 100644
index 0000000000..35d593705a
--- /dev/null
+++ b/docs/manpages/libsmbclient.7
@@ -0,0 +1,94 @@
+'\" t
+.\"     Title: libsmbclient
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: 7
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "LIBSMBCLIENT" "7" "09/20/2021" "Samba 4\&.15\&.0" "7"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+libsmbclient \- An extension library for browsers and that can be used as a generic browsing API\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+.PP
+Browser URL:
+smb://[[[domain:]user[:password@]]server[/share[/path[/file]]]] [?options]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+libsmbclient
+is a library toolset that permits applications to manipulate CIFS/SMB network resources using many of the standards POSIX functions available for manipulating local UNIX/Linux files\&. It permits much more than just browsing, files can be opened and read or written, permissions changed, file times modified, attributes and ACL\*(Aqs can be manipulated, and so on\&. Of course, its functionality includes all the capabilities commonly called browsing\&.
+.PP
+libsmbclient
+can not be used directly from the command line, instead it provides an extension of the capabilities of tools such as file managers and browsers\&. This man page describes the configuration options for this tool so that the user may obtain greatest utility of use\&.
+.SH "OPTIONS"
+.PP
+What the URLs mean:
+.PP
+smb://
+.RS 4
+Shows all workgroups or domains that are visible in the network\&. The behavior matches that of the Microsoft Windows Explorer\&.
+.sp
+The method of locating the list of workgroups (domains also) varies depending on the setting of the context variable
+(context\->options\&.browse_max_lmb_count)\&. It is the responsibility of the application that calls this library to set this to a sensible value\&. This is a compile\-time option\&. This value determines the maximum number of local master browsers to query for the list of workgroups\&. In order to ensure that the list is complete for those present on the network, all master browsers must be queried\&. If there are a large number of workgroups on the network, the time spent querying will be significant\&. For small networks (just a few workgroups), it is suggested to set this value to 0, instructing libsmbclient to query all local master browsers\&. In an environment that has many workgroups a more reasonable setting may be around 3\&.
+.RE
+.PP
+smb://name/
+.RS 4
+This command causes libsmbclient to perform a name look\-up\&. If the NAME<1D> or NAME<1B> exists (workgroup name), libsmbclient will list all servers in the workgroup (or domain)\&. Otherwise, a name look\-up for the NAME<20> (machine name) will be performed, and the list of shared resources on the server will be displayed\&.
+.RE
+.PP
+When libsmbclient is invoked by an application it searches for a directory called
+\&.smb
+in the $HOME directory that is specified in the users shell environment\&. It then searches for a file called
+smb\&.conf
+which, if present, will fully over\-ride the system
+/etc/samba/smb\&.conf
+file\&. If instead libsmbclient finds a file called
+~/\&.smb/smb\&.conf\&.append, it will read the system
+/etc/samba/smb\&.conf
+and then append the contents of the
+~/\&.smb/smb\&.conf\&.append
+to it\&.
+.PP
+libsmbclient
+will check the users shell environment for the
+USER
+parameter and will use its value when if the
+user
+parameter was not included in the URL\&.
+.SH "PROGRAMMERS GUIDE"
+.PP
+Watch this space for future updates\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The libsmbclient manpage page was written by John H Terpstra\&.
diff --git a/docs/manpages/lmhosts.5 b/docs/manpages/lmhosts.5
new file mode 100644
index 0000000000..1d555e7c0c
--- /dev/null
+++ b/docs/manpages/lmhosts.5
@@ -0,0 +1,123 @@
+'\" t
+.\"     Title: lmhosts
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: File Formats and Conventions
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "LMHOSTS" "5" "09/20/2021" "Samba 4\&.15\&.0" "File Formats and Conventions"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+lmhosts \- The Samba NetBIOS hosts file
+.SH "SYNOPSIS"
+.PP
+lmhosts
+is the
+\fBsamba\fR(7)
+NetBIOS name to IP address mapping file\&.
+.SH "DESCRIPTION"
+.PP
+This file is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+lmhosts
+is the
+\fISamba \fR
+NetBIOS name to IP address mapping file\&. It is very similar to the
+/etc/hosts
+file format, except that the hostname component must correspond to the NetBIOS naming format\&.
+.SH "FILE FORMAT"
+.PP
+It is an ASCII file containing one line for NetBIOS name\&. The two fields on each line are separated from each other by white space\&. Any entry beginning with \*(Aq#\*(Aq is ignored\&. Each line in the lmhosts file contains the following information:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+IP Address \- in dotted decimal format\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+NetBIOS Name \- This name format is a maximum fifteen character host name, with an optional trailing \*(Aq#\*(Aq character followed by the NetBIOS name type as two hexadecimal digits\&.
+.sp
+If the trailing \*(Aq#\*(Aq is omitted then the given IP address will be returned for all names that match the given name, whatever the NetBIOS name type in the lookup\&.
+.RE
+.sp
+.RE
+.PP
+An example follows:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+#
+# Sample Samba lmhosts file\&.
+#
+192\&.9\&.200\&.1	TESTPC
+192\&.9\&.200\&.20	NTSERVER#20
+192\&.9\&.200\&.21	SAMBASERVER
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Contains three IP to NetBIOS name mappings\&. The first and third will be returned for any queries for the names "TESTPC" and "SAMBASERVER" respectively, whatever the type component of the NetBIOS name requested\&.
+.PP
+The second mapping will be returned only when the "0x20" name type for a name "NTSERVER" is queried\&. Any other name type will not be resolved\&.
+.PP
+The default location of the
+lmhosts
+file is in the same directory as the
+\fBsmb.conf\fR(5)
+file\&.
+.SH "FILES"
+.PP
+lmhosts is loaded from the configuration directory\&. This is usually
+/etc/samba
+or
+/usr/local/samba/lib\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbclient\fR(1),
+\fBsmb.conf\fR(5), and
+\fBsmbpasswd\fR(8)
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/log2pcap.1 b/docs/manpages/log2pcap.1
new file mode 100644
index 0000000000..2ace075331
--- /dev/null
+++ b/docs/manpages/log2pcap.1
@@ -0,0 +1,124 @@
+'\" t
+.\"     Title: log2pcap
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "LOG2PCAP" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+log2pcap \- Extract network traces from Samba log files
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+log2pcap [\-h] [\-q] [logfile] [pcap_file]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+log2pcap
+reads in a samba log file and generates a pcap file (readable by most sniffers, such as ethereal or tcpdump) based on the packet dumps in the log file\&.
+.PP
+The log file must have a
+\fIlog level\fR
+of at least
+\fB5\fR
+to get the SMB header/parameters right,
+\fB10\fR
+to get the first 512 data bytes of the packet and
+\fB50\fR
+to get the whole packet\&.
+.SH "OPTIONS"
+.PP
+\-h
+.RS 4
+If this parameter is specified the output file will be a hex dump, in a format that is readable by the
+text2pcap
+utility\&.
+.RE
+.PP
+\-q
+.RS 4
+Be quiet\&. No warning messages about missing or incomplete data will be given\&.
+.RE
+.PP
+logfile
+.RS 4
+Samba log file\&. log2pcap will try to read the log from stdin if the log file is not specified\&.
+.RE
+.PP
+pcap_file
+.RS 4
+Name of the output file to write the pcap (or hexdump) data to\&. If this argument is not specified, output data will be written to stdout\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.SH "EXAMPLES"
+.PP
+Extract all network traffic from all samba log files:
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
+			$ log2pcap < /var/log/* > trace\&.pcap
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Convert to pcap using text2pcap:
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
+	$ log2pcap \-h samba\&.log | text2pcap \-T 139,139 \- trace\&.pcap
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "BUGS"
+.PP
+Only SMB data is extracted from the samba logs, no LDAP, NetBIOS lookup or other data\&.
+.PP
+The generated TCP and IP headers don\*(Aqt contain a valid checksum\&.
+.SH "SEE ALSO"
+.PP
+\fBtext2pcap\fR(1),
+\fBethereal\fR(1)
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+This manpage was written by Jelmer Vernooij\&.
diff --git a/docs/manpages/mdsearch.1 b/docs/manpages/mdsearch.1
new file mode 100644
index 0000000000..326b58d559
--- /dev/null
+++ b/docs/manpages/mdsearch.1
@@ -0,0 +1,357 @@
+'\" t
+.\"     Title: mdsearch
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "MDSEARCH" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+mdsearch \- Run Spotlight searches against an SMB server
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+mdfine {server} {sharename} {query} [\-p,\ \-\-path=STRING] [\-L,\ \-\-live] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER] [\-O|\-\-socket\-options=SOCKETOPTIONS] [\-m|\-\-max\-protocol=MAXPROTOCOL] [\-n|\-\-netbiosname=NETBIOSNAME] [\-\-netbios\-scope=SCOPE] [\-W|\-\-workgroup=WORKGROUP] [\-\-realm=REALM] [\-U|\-\-user=[DOMAIN/]USERNAME[%PASSWORD]] [\-N|\-\-no\-pass] [\-\-password=STRING] [\-\-pw\-nt\-hash] [\-A|\-\-authentication\-file=FILE] [\-P|\-\-machine\-pass] [\-\-simple\-bind\-dn=DN] [\-\-use\-kerberos=desired|required|off] [\-\-use\-krb5\-ccache=CCACHE] [\-\-use\-winbind\-ccache] [\-\-client\-protection=sign|encrypt|off] [\-V|\-\-version]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(1)
+suite\&.
+.PP
+mdsearch is a simple utility to run Spotlight searches against an SMB server that runs the Spotlight
+\fImdssvc\fR
+RPC service\&.
+.SH "OPTIONS"
+.PP
+server
+.RS 4
+The SMB server name or IP address to connect to\&.
+.RE
+.PP
+sharename
+.RS 4
+The name of a share on the server\&.
+.RE
+.PP
+query
+.RS 4
+The query expression syntax is a simplified form of filename globbing familiar to shell users\&. Queries have the following format:
+.sp
+attribute=="value"
+.sp
+For queries against a Samba server with Spotlight enabled using the Elasticsearch backend, the list of supported metadata attributes is given by the JSON attribute mapping file, typically installed at
+/usr/share/samba/mdssvc/elasticsearch_mappings\&.json
+.RE
+.PP
+\-p PATH, \-\-path=PATH
+.RS 4
+Server side path to search, defaults to
+\fI"/"\fR
+.RE
+.PP
+\-L, \-\-live
+.RS 4
+Query remains running\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-U|\-\-user=[DOMAIN\e]USERNAME[%PASSWORD]
+.RS 4
+Sets the SMB username or username and password\&.
+.sp
+If %PASSWORD is not specified, the user will be prompted\&. The client will first check the
+\fBUSER\fR
+environment variable (which is also permitted to also contain the password seperated by a %), then the
+\fBLOGNAME\fR
+variable (which is not permitted to contain a password) and if either exists, the value is used\&. If these environmental variables are not found, the username found in a Kerberos Credentials cache may be used\&.
+.sp
+A third option is to use a credentials file which contains the plaintext of the username and password\&. This option is mainly provided for scripts where the admin does not wish to pass the credentials on the command line or via environment variables\&. If this method is used, make certain that the permissions on the file restrict access from unwanted users\&. See the
+\fI\-A\fR
+for more details\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-N|\-\-no\-pass
+.RS 4
+If specified, this parameter suppresses the normal password prompt from the client to the user\&. This is useful when accessing a service that does not require a password\&.
+.sp
+Unless a password is specified on the command line or this parameter is specified, the client will request a password\&.
+.sp
+If a password is specified on the command line and this option is also defined the password on the command line will be silently ignored and no password will be used\&.
+.RE
+.PP
+\-\-password
+.RS 4
+Specify the password on the commandline\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+If \-\-password is not specified, the tool will check the
+\fBPASSWD\fR
+environment variable, followed by
+\fBPASSWD_FD\fR
+which is expected to contain an open file descriptor (FD) number\&.
+.sp
+Finally it will check
+\fBPASSWD_FILE\fR
+(containing a file path to be opened)\&. The file should only contain the password\&. Make certain that the permissions on the file restrict access from unwanted users!
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-\-pw\-nt\-hash
+.RS 4
+The supplied password is the NT hash\&.
+.RE
+.PP
+\-A|\-\-authentication\-file=filename
+.RS 4
+This option allows you to specify a file from which to read the username and password used in the connection\&. The format of the file is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+				username = <value>
+				password = <value>
+				domain   = <value>
+			
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Make certain that the permissions on the file restrict access from unwanted users!
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Use stored machine account password\&.
+.RE
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind\&.
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-use\-krb5\-ccache=CCACHE
+.RS 4
+Specifies the credential cache location for Kerberos authentication\&.
+.sp
+This will set \-\-use\-kerberos=required too\&.
+.RE
+.PP
+\-\-use\-winbind\-ccache
+.RS 4
+Try to use the credential cache by winbind\&.
+.RE
+.PP
+\-\-client\-protection=sign|encrypt|off
+.RS 4
+Sets the connection protection the client tool should use\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient protection\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.sp
+In case you need more fine grained control you can use:
+\-\-option=clientsmbencrypt=OPTION,
+\-\-option=clientipcsigning=OPTION,
+\-\-option=clientsigning=OPTION\&.
+.RE
+.SH "EXAMPLES"
+.PP
+Search all indexed metadata attributes, exact match:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+      \*(Aq*=="Samba"\*(Aq
+    
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Search all indexed metadata attributes, prefix match:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+      \*(Aq*=="Samba*"\*(Aq
+    
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Search by filename:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+      \*(AqkMDItemFSName=="Samba*"\*(Aq
+    
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Search by date:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+      \*(AqkMDItemFSContentChangeDate<$time\&.iso(2018\-10\-01T10:00:00Z)\*(Aq
+    
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Search files\*(Aqs content:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+      \*(AqkMDItemTextContent=="Samba*"\*(Aq
+    
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Expressions:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+      kMDItemFSName=="Samba*"||kMDItemTextContent=="Tango*"\*(Aq
+    
+.fi
+.if n \{\
+.RE
+.\}
+.SH "SEE ALSO"
+.PP
+File Metadata Search Programming Guide
+https://developer\&.apple\&.com/library/archive/documentation/Carbon/Conceptual/SpotlightQuery/Concepts/Introduction\&.html
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The mdsearch manpage was written by Ralph Boehme\&.
diff --git a/docs/manpages/mvxattr.1 b/docs/manpages/mvxattr.1
new file mode 100644
index 0000000000..3d6fb58e94
--- /dev/null
+++ b/docs/manpages/mvxattr.1
@@ -0,0 +1,84 @@
+'\" t
+.\"     Title: mvxattr
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "MVXATTR" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+mvxattr \- Recursively rename extended attributes
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+mvxattr {\-s\ STRING,\ \-\-from=STRING} {\-d\ STRING,\ \-\-to=STRING} [\-l,\ \-\-follow\-symlinks] [\-p,\ \-\-print] [\-v,\ \-\-verbose] [\-f,\ \-\-force] {PATH\ [PATH\ \&.\&.\&.]}
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(1)
+suite\&.
+.PP
+mvxattr is a simple utility to recursively rename extended attributes\&.
+.PP
+By default all symlinks are ignored, use
+\fB\-l\fR
+to follow them\&.
+.SH "OPTIONS"
+.PP
+\-s STRING, \-\-from=STRING
+.RS 4
+Source xattr name
+.RE
+.PP
+\-d STRING, \-\-to=STRING
+.RS 4
+Destination xattr name
+.RE
+.PP
+\-l, \-\-follow\-symlinks
+.RS 4
+Follow symlinks, the default is to ignore them\&.
+.RE
+.PP
+\-p, \-\-print
+.RS 4
+Print files where the xattr got renamed\&.
+.RE
+.PP
+\-v, \-\-verbose
+.RS 4
+Print files as they are checked\&.
+.RE
+.PP
+\-f, \-\-force
+.RS 4
+Force overwriting of destination xattr\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The mvxattr manpage was written by Ralph Boehme\&.
diff --git a/docs/manpages/net.8 b/docs/manpages/net.8
new file mode 100644
index 0000000000..ef9ef4a117
--- /dev/null
+++ b/docs/manpages/net.8
@@ -0,0 +1,2530 @@
+'\" t
+.\"     Title: net
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "NET" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+net \- Tool for administration of Samba and remote CIFS servers\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+net {<ads|rap|rpc>} [\-h|\-\-help] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER] [\-O|\-\-socket\-options=SOCKETOPTIONS] [\-m|\-\-max\-protocol=MAXPROTOCOL] [\-n|\-\-netbiosname=NETBIOSNAME] [\-\-netbios\-scope=SCOPE] [\-W|\-\-workgroup=WORKGROUP] [\-\-realm=REALM] [\-U|\-\-user=[DOMAIN/]USERNAME[%PASSWORD]] [\-N|\-\-no\-pass] [\-\-password=STRING] [\-\-pw\-nt\-hash] [\-A|\-\-authentication\-file=FILE] [\-P|\-\-machine\-pass] [\-\-simple\-bind\-dn=DN] [\-\-use\-kerberos=desired|required|off] [\-\-use\-krb5\-ccache=CCACHE] [\-\-use\-winbind\-ccache] [\-\-client\-protection=sign|encrypt|off] [\-V|\-\-version] [\-w|\-\-target\-workgroup\ workgroup] [\-I|\-\-ipaddress\ ip\-address] [\-p|\-\-port\ port] [\-\-myname] [\-S|\-\-server\ server] [\-\-long] [\-v|\-\-verbose] [\-f|\-\-force] [\-\-request\-timeout\ seconds] [\-t|\-\-timeout\ seconds] [\-i|\-\-stdin]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The Samba net utility is meant to work just like the net utility available for windows and DOS\&. The first argument should be used to specify the protocol to use when executing a certain command\&. ADS is used for ActiveDirectory, RAP is using for old (Win9x/NT3) clients and RPC can be used for NT4 and Windows 2000\&. If this argument is omitted, net will try to determine it automatically\&. Not all commands are available on all protocols\&.
+.SH "OPTIONS"
+.PP
+\-w|\-\-target\-workgroup target\-workgroup
+.RS 4
+Sets target workgroup or domain\&. You have to specify either this option or the IP address or the name of a server\&.
+.RE
+.PP
+\-I|\-\-ipaddress ip\-address
+.RS 4
+IP address of target server to use\&. You have to specify either this option or a target workgroup or a target server\&.
+.RE
+.PP
+\-p|\-\-port port
+.RS 4
+Port on the target server to connect to (usually 139 or 445)\&. Defaults to trying 445 first, then 139\&.
+.RE
+.PP
+\-S|\-\-server server
+.RS 4
+Name of target server\&. You should specify either this option or a target workgroup or a target IP address\&.
+.RE
+.PP
+\-l|\-\-long
+.RS 4
+When listing data, give more information on each item\&.
+.RE
+.PP
+\-v|\-\-verbose
+.RS 4
+When listing data, give more verbose information on each item\&.
+.RE
+.PP
+\-f|\-\-force
+.RS 4
+Enforcing a net command\&.
+.RE
+.PP
+\-\-request\-timeout 30
+.RS 4
+Let client requests timeout after 30 seconds the default is 10 seconds\&.
+.RE
+.PP
+\-t|\-\-timeout 30
+.RS 4
+Set timeout for client operations to 30 seconds\&.
+.RE
+.PP
+\-i|\-\-stdin
+.RS 4
+Take input for net commands from standard input\&.
+.RE
+.PP
+\-T|\-\-test
+.RS 4
+Only test command sequence, dry\-run\&.
+.RE
+.PP
+\-F|\-\-flags FLAGS
+.RS 4
+Pass down integer flags to a net subcommand\&.
+.RE
+.PP
+\-C|\-\-comment COMMENT
+.RS 4
+Pass down a comment string to a net subcommand\&.
+.RE
+.PP
+\-\-myname MYNAME
+.RS 4
+Use MYNAME as a requester name for a net subcommand\&.
+.RE
+.PP
+\-c|\-\-container CONTAINER
+.RS 4
+Use a specific AD container for net ads operations\&.
+.RE
+.PP
+\-M|\-\-maxusers MAXUSERS
+.RS 4
+Fill in the maxusers field in net rpc share operations\&.
+.RE
+.PP
+\-r|\-\-reboot
+.RS 4
+Reboot a remote machine after a command has been successfully executed (e\&.g\&. in remote join operations)\&.
+.RE
+.PP
+\-\-force\-full\-repl
+.RS 4
+When calling "net rpc vampire keytab" this option enforces a full re\-creation of the generated keytab file\&.
+.RE
+.PP
+\-\-single\-obj\-repl
+.RS 4
+When calling "net rpc vampire keytab" this option allows one to replicate just a single object to the generated keytab file\&.
+.RE
+.PP
+\-\-clean\-old\-entries
+.RS 4
+When calling "net rpc vampire keytab" this option allows one to cleanup old entries from the generated keytab file\&.
+.RE
+.PP
+\-\-db
+.RS 4
+Define dbfile for "net idmap" commands\&.
+.RE
+.PP
+\-\-lock
+.RS 4
+Activates locking of the dbfile for "net idmap check" command\&.
+.RE
+.PP
+\-a|\-\-auto
+.RS 4
+Activates noninteractive mode in "net idmap check"\&.
+.RE
+.PP
+\-\-repair
+.RS 4
+Activates repair mode in "net idmap check"\&.
+.RE
+.PP
+\-\-acls
+.RS 4
+Includes ACLs to be copied in "net rpc share migrate"\&.
+.RE
+.PP
+\-\-attrs
+.RS 4
+Includes file attributes to be copied in "net rpc share migrate"\&.
+.RE
+.PP
+\-\-timestamps
+.RS 4
+Includes timestamps to be copied in "net rpc share migrate"\&.
+.RE
+.PP
+\-X|\-\-exclude DIRECTORY
+.RS 4
+Allows one to exclude directories when copying with "net rpc share migrate"\&.
+.RE
+.PP
+\-\-destination SERVERNAME
+.RS 4
+Defines the target servername of migration process (defaults to localhost)\&.
+.RE
+.PP
+\-L|\-\-local
+.RS 4
+Sets the type of group mapping to local (used in "net groupmap set")\&.
+.RE
+.PP
+\-D|\-\-domain
+.RS 4
+Sets the type of group mapping to domain (used in "net groupmap set")\&.
+.RE
+.PP
+\-N|\-\-ntname NTNAME
+.RS 4
+Sets the ntname of a group mapping (used in "net groupmap set")\&.
+.RE
+.PP
+\-\-rid RID
+.RS 4
+Sets the rid of a group mapping (used in "net groupmap set")\&.
+.RE
+.PP
+\-\-reg\-version REG_VERSION
+.RS 4
+Assume database version {n|1,2,3} (used in "net registry check")\&.
+.RE
+.PP
+\-o|\-\-output FILENAME
+.RS 4
+Output database file (used in "net registry check")\&.
+.RE
+.PP
+\-\-wipe
+.RS 4
+Create a new database from scratch (used in "net registry check")\&.
+.RE
+.PP
+\-\-precheck PRECHECK_DB_FILENAME
+.RS 4
+Defines filename for database prechecking (used in "net registry import")\&.
+.RE
+.PP
+\-\-no\-dns\-updates
+.RS 4
+Do not perform DNS updates as part of "net ads join"\&.
+.RE
+.PP
+\-\-keep\-account
+.RS 4
+Prevent the machine account removal as part of "net ads leave"\&.
+.RE
+.PP
+\-\-json
+.RS 4
+Report results in JSON format for "net ads info" and "net ads lookup"\&.
+.RE
+.PP
+\-\-recursive
+.RS 4
+Traverse a directory hierarchy\&.
+.RE
+.PP
+\-\-continue
+.RS 4
+Continue traversing a directory hierarchy in case conversion of one file fails\&.
+.RE
+.PP
+\-\-follow\-symlinks
+.RS 4
+Follow symlinks encountered while traversing a directory\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER
+.RS 4
+This option is used to determine what naming services and in what order to resolve host names to IP addresses\&. The option takes a space\-separated string of different name resolution options\&. The best ist to wrap the whole \-\-name\-resolve=NAME\-RESOLVE\-ORDER into quotes\&.
+.sp
+The options are: "lmhosts", "host", "wins" and "bcast"\&. They cause names to be resolved as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBlmhosts\fR: Lookup an IP address in the Samba lmhosts file\&. If the line in lmhosts has no name type attached to the NetBIOS name (see the
+\fBlmhosts\fR(5)
+for details) then any name type matches for lookup\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBhost\fR: Do a standard host name to IP address resolution, using the system
+/etc/hosts, NIS, or DNS lookups\&. This method of name resolution is operating system dependent, for instance on IRIX or Solaris this may be controlled by the
+/etc/nsswitch\&.conf
+file)\&. Note that this method is only used if the NetBIOS name type being queried is the 0x20 (server) name type, otherwise it is ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwins\fR: Query a name with the IP address listed in the
+\fIwins server\fR
+parameter\&. If no WINS server has been specified this method will be ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBbcast\fR: Do a broadcast on each of the known local interfaces listed in the
+\fIinterfaces\fR
+parameter\&. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet\&.
+.RE
+.sp
+.RE
+If this parameter is not set then the name resolve order defined in the
+smb\&.conf
+file parameter (\m[blue]\fBname resolve order\fR\m[]) will be used\&.
+.sp
+The default order is lmhosts, host, wins, bcast\&. Without this parameter or any entry in the
+\m[blue]\fBname resolve order\fR\m[]
+parameter of the
+smb\&.conf
+file, the name resolution methods will be attempted in this order\&.
+.RE
+.PP
+\-O|\-\-socket\-options=SOCKETOPTIONS
+.RS 4
+TCP socket options to set on the client socket\&. See the socket options parameter in the
+smb\&.conf
+manual page for the list of valid options\&.
+.RE
+.PP
+\-m|\-\-max\-protocol=MAXPROTOCOL
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported by the client\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient max protocol\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-n|\-\-netbiosname=NETBIOSNAME
+.RS 4
+This option allows you to override the NetBIOS name that Samba uses for itself\&. This is identical to setting the
+\m[blue]\fBnetbios name\fR\m[]
+parameter in the
+smb\&.conf
+file\&. However, a command line setting will take precedence over settings in
+smb\&.conf\&.
+.RE
+.PP
+\-\-netbios\-scope=SCOPE
+.RS 4
+This specifies a NetBIOS scope that
+nmblookup
+will use to communicate with when generating NetBIOS names\&. For details on the use of NetBIOS scopes, see rfc1001\&.txt and rfc1002\&.txt\&. NetBIOS scopes are
+\fIvery\fR
+rarely used, only set this parameter if you are the system administrator in charge of all the NetBIOS systems you communicate with\&.
+.RE
+.PP
+\-W|\-\-workgroup=WORKGROUP
+.RS 4
+Set the SMB domain of the username\&. This overrides the default domain which is the domain defined in smb\&.conf\&. If the domain specified is the same as the servers NetBIOS name, it causes the client to log on using the servers local SAM (as opposed to the Domain SAM)\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBworkgroup\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-r|\-\-realm=REALM
+.RS 4
+Set the realm for the domain\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBrealm\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-U|\-\-user=[DOMAIN\e]USERNAME[%PASSWORD]
+.RS 4
+Sets the SMB username or username and password\&.
+.sp
+If %PASSWORD is not specified, the user will be prompted\&. The client will first check the
+\fBUSER\fR
+environment variable (which is also permitted to also contain the password seperated by a %), then the
+\fBLOGNAME\fR
+variable (which is not permitted to contain a password) and if either exists, the value is used\&. If these environmental variables are not found, the username found in a Kerberos Credentials cache may be used\&.
+.sp
+A third option is to use a credentials file which contains the plaintext of the username and password\&. This option is mainly provided for scripts where the admin does not wish to pass the credentials on the command line or via environment variables\&. If this method is used, make certain that the permissions on the file restrict access from unwanted users\&. See the
+\fI\-A\fR
+for more details\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-N|\-\-no\-pass
+.RS 4
+If specified, this parameter suppresses the normal password prompt from the client to the user\&. This is useful when accessing a service that does not require a password\&.
+.sp
+Unless a password is specified on the command line or this parameter is specified, the client will request a password\&.
+.sp
+If a password is specified on the command line and this option is also defined the password on the command line will be silently ignored and no password will be used\&.
+.RE
+.PP
+\-\-password
+.RS 4
+Specify the password on the commandline\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+If \-\-password is not specified, the tool will check the
+\fBPASSWD\fR
+environment variable, followed by
+\fBPASSWD_FD\fR
+which is expected to contain an open file descriptor (FD) number\&.
+.sp
+Finally it will check
+\fBPASSWD_FILE\fR
+(containing a file path to be opened)\&. The file should only contain the password\&. Make certain that the permissions on the file restrict access from unwanted users!
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-\-pw\-nt\-hash
+.RS 4
+The supplied password is the NT hash\&.
+.RE
+.PP
+\-A|\-\-authentication\-file=filename
+.RS 4
+This option allows you to specify a file from which to read the username and password used in the connection\&. The format of the file is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+				username = <value>
+				password = <value>
+				domain   = <value>
+			
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Make certain that the permissions on the file restrict access from unwanted users!
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Use stored machine account password\&.
+.RE
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind\&.
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-use\-krb5\-ccache=CCACHE
+.RS 4
+Specifies the credential cache location for Kerberos authentication\&.
+.sp
+This will set \-\-use\-kerberos=required too\&.
+.RE
+.PP
+\-\-use\-winbind\-ccache
+.RS 4
+Try to use the credential cache by winbind\&.
+.RE
+.PP
+\-\-client\-protection=sign|encrypt|off
+.RS 4
+Sets the connection protection the client tool should use\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient protection\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.sp
+In case you need more fine grained control you can use:
+\-\-option=clientsmbencrypt=OPTION,
+\-\-option=clientipcsigning=OPTION,
+\-\-option=clientsigning=OPTION\&.
+.RE
+.SH "COMMANDS"
+.SS "CHANGESECRETPW"
+.PP
+This command allows the Samba machine account password to be set from an external application to a machine account password that has already been stored in Active Directory\&. DO NOT USE this command unless you know exactly what you are doing\&. The use of this command requires that the force flag (\-f) be used also\&. There will be NO command prompt\&. Whatever information is piped into stdin, either by typing at the command line or otherwise, will be stored as the literal machine password\&. Do NOT use this without care and attention as it will overwrite a legitimate machine password without warning\&. YOU HAVE BEEN WARNED\&.
+.SS "TIME"
+.PP
+The
+NET TIME
+command allows you to view the time on a remote server or synchronise the time on the local server with the time on the remote server\&.
+.SS "TIME"
+.PP
+Without any options, the
+NET TIME
+command displays the time on the remote server\&. The remote server must be specified with the \-S option\&.
+.SS "TIME SYSTEM"
+.PP
+Displays the time on the remote server in a format ready for
+/bin/date\&. The remote server must be specified with the \-S option\&.
+.SS "TIME SET"
+.PP
+Tries to set the date and time of the local server to that on the remote server using
+/bin/date\&. The remote server must be specified with the \-S option\&.
+.SS "TIME ZONE"
+.PP
+Displays the timezone in hours from GMT on the remote server\&. The remote server must be specified with the \-S option\&.
+.SS "[RPC|ADS] JOIN [TYPE] [\-\-no\-dns\-updates] [\-U username[%password]] [dnshostname=FQDN] [createupn=UPN] [createcomputer=OU] [machinepass=PASS] [osName=string osVer=string] [options]"
+.PP
+Join a domain\&. If the account already exists on the server, and [TYPE] is MEMBER, the machine will attempt to join automatically\&. (Assuming that the machine has been created in server manager) Otherwise, a password will be prompted for, and a new account may be created\&.
+.PP
+[TYPE] may be PDC, BDC or MEMBER to specify the type of server joining the domain\&.
+.PP
+[FQDN] (ADS only) set the dnsHostName attribute during the join\&. The default format is netbiosname\&.dnsdomain\&.
+.PP
+[UPN] (ADS only) set the principalname attribute during the join\&. The default format is host/netbiosname@REALM\&.
+.PP
+[OU] (ADS only) Precreate the computer account in a specific OU\&. The OU string reads from top to bottom without RDNs, and is delimited by a \*(Aq/\*(Aq\&. Please note that \*(Aq\e\*(Aq is used for escape by both the shell and ldap, so it may need to be doubled or quadrupled to pass through, and it is not used as a delimiter\&.
+.PP
+[PASS] (ADS only) Set a specific password on the computer account being created by the join\&.
+.PP
+[osName=string osVer=String] (ADS only) Set the operatingSystem and operatingSystemVersion attribute during the join\&. Both parameters must be specified for either to take effect\&.
+.SS "[RPC] OLDJOIN [options]"
+.PP
+Join a domain\&. Use the OLDJOIN option to join the domain using the old style of domain joining \- you need to create a trust account in server manager first\&.
+.SS "[RPC|ADS] USER"
+.SS "[RPC|ADS] USER"
+.PP
+List all users
+.SS "[RPC|ADS] USER DELETE target"
+.PP
+Delete specified user
+.SS "[RPC|ADS] USER INFO target"
+.PP
+List the domain groups of the specified user\&.
+.SS "[RPC|ADS] USER RENAME oldname newname"
+.PP
+Rename specified user\&.
+.SS "[RPC|ADS] USER ADD name [password] [-F user flags] [-C comment]"
+.PP
+Add specified user\&.
+.SS "[RPC|ADS] GROUP"
+.SS "[RPC|ADS] GROUP [misc options] [targets]"
+.PP
+List user groups\&.
+.SS "[RPC|ADS] GROUP DELETE name [misc. options]"
+.PP
+Delete specified group\&.
+.SS "[RPC|ADS] GROUP ADD name [-C comment]"
+.PP
+Create specified group\&.
+.SS "[ADS] LOOKUP"
+.PP
+Lookup the closest Domain Controller in our domain and retrieve server information about it\&.
+.SS "[RAP|RPC] SHARE"
+.SS "[RAP|RPC] SHARE [misc. options] [targets]"
+.PP
+Enumerates all exported resources (network shares) on target server\&.
+.SS "[RAP|RPC] SHARE ADD name=serverpath [-C comment] [-M maxusers] [targets]"
+.PP
+Adds a share from a server (makes the export active)\&. Maxusers specifies the number of users that can be connected to the share simultaneously\&.
+.SS "SHARE DELETE sharename"
+.PP
+Delete specified share\&.
+.SS "[RPC|RAP] FILE"
+.SS "[RPC|RAP] FILE"
+.PP
+List all open files on remote server\&.
+.SS "[RPC|RAP] FILE CLOSE fileid"
+.PP
+Close file with specified
+\fIfileid\fR
+on remote server\&.
+.SS "[RPC|RAP] FILE INFO fileid"
+.PP
+Print information on specified
+\fIfileid\fR\&. Currently listed are: file\-id, username, locks, path, permissions\&.
+.SS "[RAP|RPC] FILE USER user"
+.PP
+List files opened by specified
+\fIuser\fR\&. Please note that
+net rap file user
+does not work against Samba servers\&.
+.SS "SESSION"
+.SS "RAP SESSION"
+.PP
+Without any other options, SESSION enumerates all active SMB/CIFS sessions on the target server\&.
+.SS "RAP SESSION DELETE|CLOSE CLIENT_NAME"
+.PP
+Close the specified sessions\&.
+.SS "RAP SESSION INFO CLIENT_NAME"
+.PP
+Give a list with all the open files in specified session\&.
+.SS "RAP SERVER \fIDOMAIN\fR"
+.PP
+List all servers in specified domain or workgroup\&. Defaults to local domain\&.
+.SS "RAP DOMAIN"
+.PP
+Lists all domains and workgroups visible on the current network\&.
+.SS "RAP PRINTQ"
+.SS "RAP PRINTQ INFO QUEUE_NAME"
+.PP
+Lists the specified print queue and print jobs on the server\&. If the
+\fIQUEUE_NAME\fR
+is omitted, all queues are listed\&.
+.SS "RAP PRINTQ DELETE JOBID"
+.PP
+Delete job with specified id\&.
+.SS "RAP VALIDATE \fIuser\fR [\fIpassword\fR]"
+.PP
+Validate whether the specified user can log in to the remote server\&. If the password is not specified on the commandline, it will be prompted\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+.PP
+Currently NOT implemented\&.
+.sp .5v
+.RE
+.SS "RAP GROUPMEMBER"
+.SS "RAP GROUPMEMBER LIST GROUP"
+.PP
+List all members of the specified group\&.
+.SS "RAP GROUPMEMBER DELETE GROUP USER"
+.PP
+Delete member from group\&.
+.SS "RAP GROUPMEMBER ADD GROUP USER"
+.PP
+Add member to group\&.
+.SS "RAP ADMIN \fIcommand\fR"
+.PP
+Execute the specified
+\fIcommand\fR
+on the remote server\&. Only works with OS/2 servers\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+.PP
+Currently NOT implemented\&.
+.sp .5v
+.RE
+.SS "RAP SERVICE"
+.SS "RAP SERVICE START NAME [arguments...]"
+.PP
+Start the specified service on the remote server\&. Not implemented yet\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+.PP
+Currently NOT implemented\&.
+.sp .5v
+.RE
+.SS "RAP SERVICE STOP"
+.PP
+Stop the specified service on the remote server\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+.PP
+Currently NOT implemented\&.
+.sp .5v
+.RE
+.SS "RAP PASSWORD \fIUSER\fR \fIOLDPASS\fR \fINEWPASS\fR"
+.PP
+Change password of
+\fIUSER\fR
+from
+\fIOLDPASS\fR
+to
+\fINEWPASS\fR\&.
+.SS "LOOKUP"
+.SS "LOOKUP HOST HOSTNAME [TYPE]"
+.PP
+Lookup the IP address of the given host with the specified type (netbios suffix)\&. The type defaults to 0x20 (workstation)\&.
+.SS "LOOKUP LDAP [DOMAIN]"
+.PP
+Give IP address of LDAP server of specified
+\fIDOMAIN\fR\&. Defaults to local domain\&.
+.SS "LOOKUP KDC [REALM]"
+.PP
+Give IP address of KDC for the specified
+\fIREALM\fR\&. Defaults to local realm\&.
+.SS "LOOKUP DC [DOMAIN]"
+.PP
+Give IP\*(Aqs of Domain Controllers for specified
+\fI DOMAIN\fR\&. Defaults to local domain\&.
+.SS "LOOKUP MASTER DOMAIN"
+.PP
+Give IP of master browser for specified
+\fIDOMAIN\fR
+or workgroup\&. Defaults to local domain\&.
+.SS "LOOKUP NAME [NAME]"
+.PP
+Lookup username\*(Aqs sid and type for specified
+\fINAME\fR
+.SS "LOOKUP SID [SID]"
+.PP
+Give sid\*(Aqs name and type for specified
+\fISID\fR
+.SS "LOOKUP DSGETDCNAME [NAME] [FLAGS] [SITENAME]"
+.PP
+Give Domain Controller information for specified domain
+\fINAME\fR
+.SS "CACHE"
+.PP
+Samba uses a general caching interface called \*(Aqgencache\*(Aq\&. It can be controlled using \*(AqNET CACHE\*(Aq\&.
+.PP
+All the timeout parameters support the suffixes:
+.RS 4
+s \- Seconds
+.RE
+.RS 4
+m \- Minutes
+.RE
+.RS 4
+h \- Hours
+.RE
+.RS 4
+d \- Days
+.RE
+.RS 4
+w \- Weeks
+.RE
+.SS "CACHE ADD key data time-out"
+.PP
+Add specified key+data to the cache with the given timeout\&.
+.SS "CACHE DEL key"
+.PP
+Delete key from the cache\&.
+.SS "CACHE SET key data time-out"
+.PP
+Update data of existing cache entry\&.
+.SS "CACHE SEARCH PATTERN"
+.PP
+Search for the specified pattern in the cache data\&.
+.SS "CACHE LIST"
+.PP
+List all current items in the cache\&.
+.SS "CACHE FLUSH"
+.PP
+Remove all the current items from the cache\&.
+.SS "GETLOCALSID [DOMAIN]"
+.PP
+Prints the SID of the specified domain, or if the parameter is omitted, the SID of the local server\&.
+.SS "SETLOCALSID S\-1\-5\-21\-x\-y\-z"
+.PP
+Sets SID for the local server to the specified SID\&.
+.SS "GETDOMAINSID"
+.PP
+Prints the local machine SID and the SID of the current domain\&.
+.SS "SETDOMAINSID"
+.PP
+Sets the SID of the current domain\&.
+.SS "GROUPMAP"
+.PP
+Manage the mappings between Windows group SIDs and UNIX groups\&. Common options include:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+unixgroup \- Name of the UNIX group
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ntgroup \- Name of the Windows NT group (must be resolvable to a SID
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+rid \- Unsigned 32\-bit integer
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+sid \- Full SID in the form of "S\-1\-\&.\&.\&."
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+type \- Type of the group; either \*(Aqdomain\*(Aq, \*(Aqlocal\*(Aq, or \*(Aqbuiltin\*(Aq
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+comment \- Freeform text description of the group
+.RE
+.sp
+.RE
+.SS "GROUPMAP ADD"
+.PP
+Add a new group mapping entry:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+net groupmap add {rid=int|sid=string} unixgroup=string \e
+	[type={domain|local}] [ntgroup=string] [comment=string]
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+
+.SS "GROUPMAP DELETE"
+.PP
+Delete a group mapping entry\&. If more than one group name matches, the first entry found is deleted\&.
+.PP
+net groupmap delete {ntgroup=string|sid=SID}
+.SS "GROUPMAP MODIFY"
+.PP
+Update an existing group entry\&.
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
+net groupmap modify {ntgroup=string|sid=SID} [unixgroup=string] \e
+       [comment=string] [type={domain|local}]
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+
+.SS "GROUPMAP LIST"
+.PP
+List existing group mapping entries\&.
+.PP
+net groupmap list [verbose] [ntgroup=string] [sid=SID]
+.SS "MAXRID"
+.PP
+Prints out the highest RID currently in use on the local server (by the active \*(Aqpassdb backend\*(Aq)\&.
+.SS "RPC INFO"
+.PP
+Print information about the domain of the remote server, such as domain name, domain sid and number of users and groups\&.
+.SS "[RPC|ADS] TESTJOIN"
+.PP
+Check whether participation in a domain is still valid\&.
+.SS "[RPC|ADS] CHANGETRUSTPW"
+.PP
+Force change of domain trust password\&.
+.SS "RPC TRUSTDOM"
+.SS "RPC TRUSTDOM ADD DOMAIN"
+.PP
+Add a interdomain trust account for
+\fIDOMAIN\fR\&. This is in fact a Samba account named
+\fIDOMAIN$\fR
+with the account flag
+\fB\*(AqI\*(Aq\fR
+(interdomain trust account)\&. This is required for incoming trusts to work\&. It makes Samba be a trusted domain of the foreign (trusting) domain\&. Users of the Samba domain will be made available in the foreign domain\&. If the command is used against localhost it has the same effect as
+smbpasswd \-a \-i DOMAIN\&. Please note that both commands expect a appropriate UNIX account\&.
+.SS "RPC TRUSTDOM DEL DOMAIN"
+.PP
+Remove interdomain trust account for
+\fIDOMAIN\fR\&. If it is used against localhost it has the same effect as
+smbpasswd \-x DOMAIN$\&.
+.SS "RPC TRUSTDOM ESTABLISH DOMAIN"
+.PP
+Establish a trust relationship to a trusted domain\&. Interdomain account must already be created on the remote PDC\&. This is required for outgoing trusts to work\&. It makes Samba be a trusting domain of a foreign (trusted) domain\&. Users of the foreign domain will be made available in our domain\&. You\*(Aqll need winbind and a working idmap config to make them appear in your system\&.
+.SS "RPC TRUSTDOM REVOKE DOMAIN"
+.PP
+Abandon relationship to trusted domain
+.SS "RPC TRUSTDOM LIST"
+.PP
+List all interdomain trust relationships\&.
+.SS "RPC TRUST"
+.SS "RPC TRUST CREATE"
+.PP
+Create a trust object by calling lsaCreateTrustedDomainEx2\&. The can be done on a single server or on two servers at once with the possibility to use a random trust password\&.
+.PP
+\fBOptions:\fR
+.PP
+otherserver
+.RS 4
+Domain controller of the second domain
+.RE
+.PP
+otheruser
+.RS 4
+Admin user in the second domain
+.RE
+.PP
+otherdomainsid
+.RS 4
+SID of the second domain
+.RE
+.PP
+other_netbios_domain
+.RS 4
+NetBIOS (short) name of the second domain
+.RE
+.PP
+otherdomain
+.RS 4
+DNS (full) name of the second domain
+.RE
+.PP
+trustpw
+.RS 4
+Trust password
+.RE
+.PP
+\fBExamples:\fR
+.PP
+Create a trust object on srv1\&.dom1\&.dom for the domain dom2
+.RS 4
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+net rpc trust create \e
+    otherdomainsid=S\-x\-x\-xx\-xxxxxxxxxx\-xxxxxxxxxx\-xxxxxxxxx \e
+    other_netbios_domain=dom2 \e
+    otherdomain=dom2\&.dom \e
+    trustpw=12345678 \e
+    \-S srv1\&.dom1\&.dom
+.fi
+.if n \{\
+.RE
+.\}
+.RE
+.PP
+Create a trust relationship between dom1 and dom2
+.RS 4
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+net rpc trust create \e
+    otherserver=srv2\&.dom2\&.test \e
+    otheruser=dom2adm \e
+    \-S srv1\&.dom1\&.dom
+.fi
+.if n \{\
+.RE
+.\}
+.RE
+.SS "RPC TRUST DELETE"
+.PP
+Delete a trust object by calling lsaDeleteTrustedDomain\&. The can be done on a single server or on two servers at once\&.
+.PP
+\fBOptions:\fR
+.PP
+otherserver
+.RS 4
+Domain controller of the second domain
+.RE
+.PP
+otheruser
+.RS 4
+Admin user in the second domain
+.RE
+.PP
+otherdomainsid
+.RS 4
+SID of the second domain
+.RE
+.PP
+\fBExamples:\fR
+.PP
+Delete a trust object on srv1\&.dom1\&.dom for the domain dom2
+.RS 4
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+net rpc trust delete \e
+    otherdomainsid=S\-x\-x\-xx\-xxxxxxxxxx\-xxxxxxxxxx\-xxxxxxxxx \e
+    \-S srv1\&.dom1\&.dom
+.fi
+.if n \{\
+.RE
+.\}
+.RE
+.PP
+Delete a trust relationship between dom1 and dom2
+.RS 4
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+net rpc trust delete \e
+    otherserver=srv2\&.dom2\&.test \e
+    otheruser=dom2adm \e
+    \-S srv1\&.dom1\&.dom
+.fi
+.if n \{\
+.RE
+.\}
+.RE
+.SS ""
+.SS "RPC RIGHTS"
+.PP
+This subcommand is used to view and manage Samba\*(Aqs rights assignments (also referred to as privileges)\&. There are three options currently available:
+\fIlist\fR,
+\fIgrant\fR, and
+\fIrevoke\fR\&. More details on Samba\*(Aqs privilege model and its use can be found in the Samba\-HOWTO\-Collection\&.
+.SS "RPC ABORTSHUTDOWN"
+.PP
+Abort the shutdown of a remote server\&.
+.SS "RPC SHUTDOWN [\-t timeout] [\-r] [\-f] [\-C message]"
+.PP
+Shut down the remote server\&.
+.PP
+\-r
+.RS 4
+Reboot after shutdown\&.
+.RE
+.PP
+\-f
+.RS 4
+Force shutting down all applications\&.
+.RE
+.PP
+\-t timeout
+.RS 4
+Timeout before system will be shut down\&. An interactive user of the system can use this time to cancel the shutdown\&.
+.RE
+.PP
+\-C message
+.RS 4
+Display the specified message on the screen to announce the shutdown\&.
+.RE
+.SS "RPC SAMDUMP"
+.PP
+Print out sam database of remote server\&. You need to run this against the PDC, from a Samba machine joined as a BDC\&.
+.SS "RPC VAMPIRE"
+.PP
+Export users, aliases and groups from remote server to local server\&. You need to run this against the PDC, from a Samba machine joined as a BDC\&. This vampire command cannot be used against an Active Directory, only against an NT4 Domain Controller\&.
+.SS "RPC VAMPIRE KEYTAB"
+.PP
+Dump remote SAM database to local Kerberos keytab file\&.
+.SS "RPC VAMPIRE LDIF"
+.PP
+Dump remote SAM database to local LDIF file or standard output\&.
+.SS "RPC GETSID"
+.PP
+Fetch domain SID and store it in the local
+secrets\&.tdb\&.
+.SS "ADS GPO"
+.SS "ADS GPO APPLY <USERNAME|MACHINENAME> "
+.PP
+Apply GPOs for a username or machine name\&. Either username or machine name should be provided to the command, not both\&.
+.SS "ADS GPO GETGPO [GPO]"
+.PP
+List specified GPO\&.
+.SS "ADS GPO LINKADD [LINKDN] [GPODN]"
+.PP
+Link a container to a GPO\&.
+\fILINKDN\fR
+Container to link to a GPO\&.
+\fIGPODN\fR
+GPO to link container to\&. DNs must be provided properly escaped\&. See RFC 4514 for details\&.
+.SS "ADS GPO LINKGET [CONTAINER]"
+.PP
+Lists gPLink of a containter\&.
+.SS "ADS GPO LIST <USERNAME|MACHINENAME> "
+.PP
+Lists all GPOs for a username or machine name\&. Either username or machine name should be provided to the command, not both\&.
+.SS "ADS GPO LISTALL"
+.PP
+Lists all GPOs on a DC\&.
+.SS "ADS GPO REFRESH [USERNAME] [MACHINENAME]"
+.PP
+Lists all GPOs assigned to an account and download them\&.
+\fIUSERNAME\fR
+User to refresh GPOs for\&.
+\fIMACHINENAME\fR
+Machine to refresh GPOs for\&.
+.SS "ADS DNS"
+.SS "ADS DNS REGISTER [HOSTNAME [IP [IP.....]]]"
+.PP
+Add host dns entry to Active Directory\&.
+.SS "ADS DNS UNREGISTER <HOSTNAME>"
+.PP
+Remove host dns entry from Active Directory\&.
+.SS "ADS LEAVE [\-\-keep\-account]"
+.PP
+Make the remote host leave the domain it is part of\&.
+.SS "ADS STATUS"
+.PP
+Print out status of machine account of the local machine in ADS\&. Prints out quite some debug info\&. Aimed at developers, regular users should use
+NET ADS TESTJOIN\&.
+.SS "ADS PRINTER"
+.SS "ADS PRINTER INFO [PRINTER] [SERVER]"
+.PP
+Lookup info for
+\fIPRINTER\fR
+on
+\fISERVER\fR\&. The printer name defaults to "*", the server name defaults to the local host\&.
+.SS "ADS PRINTER PUBLISH PRINTER"
+.PP
+Publish specified printer using ADS\&.
+.SS "ADS PRINTER REMOVE PRINTER"
+.PP
+Remove specified printer from ADS directory\&.
+.SS "ADS SEARCH \fIEXPRESSION\fR \fIATTRIBUTES\&.\&.\&.\fR"
+.PP
+Perform a raw LDAP search on a ADS server and dump the results\&. The expression is a standard LDAP search expression, and the attributes are a list of LDAP fields to show in the results\&.
+.PP
+Example:
+\fBnet ads search \*(Aq(objectCategory=group)\*(Aq sAMAccountName\fR
+.SS "ADS DN \fIDN\fR \fI(attributes)\fR"
+.PP
+Perform a raw LDAP search on a ADS server and dump the results\&. The DN standard LDAP DN, and the attributes are a list of LDAP fields to show in the result\&.
+.PP
+Example:
+\fBnet ads dn \*(AqCN=administrator,CN=Users,DC=my,DC=domain\*(Aq SAMAccountName\fR
+.SS "ADS KEYTAB \fICREATE\fR"
+.PP
+Creates a new keytab file if one doesn\*(Aqt exist with default entries\&. Default entries are kerberos principals created from the machinename of the client, the UPN (if it exists) and any Windows SPN(s) associated with the computer AD account for the client\&. If a keytab file already exists then only missing kerberos principals from the default entries are added\&. No changes are made to the computer AD account\&.
+.SS "ADS KEYTAB \fIADD\fR \fI(principal | machine | serviceclass | windows SPN\fR"
+.PP
+Adds a new keytab entry, the entry can be either;
+.PP
+kerberos principal
+.RS 4
+A kerberos principal (identified by the presence of \*(Aq@\*(Aq) is just added to the keytab file\&.
+.RE
+.PP
+machinename
+.RS 4
+A machinename (identified by the trailing \*(Aq$\*(Aq) is used to create a a kerberos principal \*(Aqmachinename@realm\*(Aq which is added to the keytab file\&.
+.RE
+.PP
+serviceclass
+.RS 4
+A serviceclass (such as \*(Aqcifs\*(Aq, \*(Aqhtml\*(Aq etc\&.) is used to create a pair of kerberos principals \*(Aqserviceclass/fully_qualified_dns_name@realm\*(Aq & \*(Aqserviceclass/netbios_name@realm\*(Aq which are added to the keytab file\&.
+.RE
+.PP
+Windows SPN
+.RS 4
+A Windows SPN is of the format \*(Aqserviceclass/host:port\*(Aq, it is used to create a kerberos principal \*(Aqserviceclass/host@realm\*(Aq which will be written to the keytab file\&.
+.RE
+.PP
+Unlike old versions no computer AD objects are modified by this command\&. To preserve the bevhaviour of older clients \*(Aqnet ads keytab ad_update_ads\*(Aq is available\&.
+.SS "ADS KEYTAB \fIADD_UPDATE_ADS\fR \fI(principal | machine | serviceclass | windows SPN\fR"
+.PP
+Adds a new keytab entry (see section for net ads keytab add)\&. In addition to adding entries to the keytab file corrosponding Windows SPNs are created from the entry passed to this command\&. These SPN(s) added to the AD computer account object associated with the client machine running this command for the following entry types;
+.PP
+serviceclass
+.RS 4
+A serviceclass (such as \*(Aqcifs\*(Aq, \*(Aqhtml\*(Aq etc\&.) is used to create a pair of Windows SPN(s) \*(Aqparam/full_qualified_dns\*(Aq & \*(Aqparam/netbios_name\*(Aq which are added to the AD computer account object for this client\&.
+.RE
+.PP
+Windows SPN
+.RS 4
+A Windows SPN is of the format \*(Aqserviceclass/host:port\*(Aq, it is added as passed to the AD computer account object for this client\&.
+.RE
+.SS "ADS setspn \fISETSPN LIST [machine]\fR"
+.PP
+Lists the Windows SPNs stored in the \*(Aqmachine\*(Aq Windows AD Computer object\&. If \*(Aqmachine\*(Aq is not specified then computer account for this client is used instead\&.
+.SS "ADS setspn \fISETSPN ADD SPN [machine]\fR"
+.PP
+Adds the specified Windows SPN to the \*(Aqmachine\*(Aq Windows AD Computer object\&. If \*(Aqmachine\*(Aq is not specified then computer account for this client is used instead\&.
+.SS "ADS setspn \fISETSPN DELETE SPN [machine]\fR"
+.PP
+DELETE the specified Window SPN from the \*(Aqmachine\*(Aq Windows AD Computer object\&. If \*(Aqmachine\*(Aq is not specified then computer account for this client is used instead\&.
+.SS "ADS WORKGROUP"
+.PP
+Print out workgroup name for specified kerberos realm\&.
+.SS "ADS ENCTYPES"
+.PP
+List, modify or delete the value of the "msDS\-SupportedEncryptionTypes" attribute of an account in AD\&.
+.PP
+This attribute allows one to control which Kerberos encryption types are used for the generation of initial and service tickets\&. The value consists of an integer bitmask with the following values:
+.PP
+0x00000001 DES\-CBC\-CRC
+.PP
+0x00000002 DES\-CBC\-MD5
+.PP
+0x00000004 RC4\-HMAC
+.PP
+0x00000008 AES128\-CTS\-HMAC\-SHA1\-96
+.PP
+0x00000010 AES256\-CTS\-HMAC\-SHA1\-96
+.SS "ADS ENCTYPES LIST \fI<ACCOUNTNAME>\fR"
+.PP
+List the value of the "msDS\-SupportedEncryptionTypes" attribute of a given account\&.
+.PP
+Example:
+\fBnet ads enctypes list Computername\fR
+.SS "ADS ENCTYPES SET \fI<ACCOUNTNAME>\fR \fI[enctypes]\fR"
+.PP
+Set the value of the "msDS\-SupportedEncryptionTypes" attribute of the LDAP object of ACCOUNTNAME to a given value\&. If the value is omitted, the value is set to 31 which enables all the currently supported encryption types\&.
+.PP
+Example:
+\fBnet ads enctypes set Computername 24\fR
+.SS "ADS ENCTYPES DELETE \fI<ACCOUNTNAME>\fR"
+.PP
+Deletes the "msDS\-SupportedEncryptionTypes" attribute of the LDAP object of ACCOUNTNAME\&.
+.PP
+Example:
+\fBnet ads enctypes set Computername 24\fR
+.SS "SAM CREATEBUILTINGROUP <NAME>"
+.PP
+(Re)Create a BUILTIN group\&. Only a wellknown set of BUILTIN groups can be created with this command\&. This is the list of currently recognized group names: Administrators, Users, Guests, Power Users, Account Operators, Server Operators, Print Operators, Backup Operators, Replicator, RAS Servers, Pre\-Windows 2000 compatible Access\&. This command requires a running Winbindd with idmap allocation properly configured\&. The group gid will be allocated out of the winbindd range\&.
+.SS "SAM CREATELOCALGROUP <NAME>"
+.PP
+Create a LOCAL group (also known as Alias)\&. This command requires a running Winbindd with idmap allocation properly configured\&. The group gid will be allocated out of the winbindd range\&.
+.SS "SAM DELETELOCALGROUP <NAME>"
+.PP
+Delete an existing LOCAL group (also known as Alias)\&.
+.SS "SAM MAPUNIXGROUP <NAME>"
+.PP
+Map an existing Unix group and make it a Domain Group, the domain group will have the same name\&.
+.SS "SAM UNMAPUNIXGROUP <NAME>"
+.PP
+Remove an existing group mapping entry\&.
+.SS "SAM ADDMEM <GROUP> <MEMBER>"
+.PP
+Add a member to a Local group\&. The group can be specified only by name, the member can be specified by name or SID\&.
+.SS "SAM DELMEM <GROUP> <MEMBER>"
+.PP
+Remove a member from a Local group\&. The group and the member must be specified by name\&.
+.SS "SAM LISTMEM <GROUP>"
+.PP
+List Local group members\&. The group must be specified by name\&.
+.SS "SAM LIST <users|groups|localgroups|builtin|workstations> [verbose]"
+.PP
+List the specified set of accounts by name\&. If verbose is specified, the rid and description is also provided for each account\&.
+.SS "SAM RIGHTS LIST"
+.PP
+List all available privileges\&.
+.SS "SAM RIGHTS GRANT <NAME> <PRIVILEGE>"
+.PP
+Grant one or more privileges to a user\&.
+.SS "SAM RIGHTS REVOKE <NAME> <PRIVILEGE>"
+.PP
+Revoke one or more privileges from a user\&.
+.SS "SAM SHOW <NAME>"
+.PP
+Show the full DOMAIN\e\eNAME the SID and the type for the corresponding account\&.
+.SS "SAM SET HOMEDIR <NAME> <DIRECTORY>"
+.PP
+Set the home directory for a user account\&.
+.SS "SAM SET PROFILEPATH <NAME> <PATH>"
+.PP
+Set the profile path for a user account\&.
+.SS "SAM SET COMMENT <NAME> <COMMENT>"
+.PP
+Set the comment for a user or group account\&.
+.SS "SAM SET FULLNAME <NAME> <FULL NAME>"
+.PP
+Set the full name for a user account\&.
+.SS "SAM SET LOGONSCRIPT <NAME> <SCRIPT>"
+.PP
+Set the logon script for a user account\&.
+.SS "SAM SET HOMEDRIVE <NAME> <DRIVE>"
+.PP
+Set the home drive for a user account\&.
+.SS "SAM SET WORKSTATIONS <NAME> <WORKSTATIONS>"
+.PP
+Set the workstations a user account is allowed to log in from\&.
+.SS "SAM SET DISABLE <NAME>"
+.PP
+Set the "disabled" flag for a user account\&.
+.SS "SAM SET PWNOTREQ <NAME>"
+.PP
+Set the "password not required" flag for a user account\&.
+.SS "SAM SET AUTOLOCK <NAME>"
+.PP
+Set the "autolock" flag for a user account\&.
+.SS "SAM SET PWNOEXP <NAME>"
+.PP
+Set the "password do not expire" flag for a user account\&.
+.SS "SAM SET PWDMUSTCHANGENOW <NAME> [yes|no]"
+.PP
+Set or unset the "password must change" flag for a user account\&.
+.SS "SAM POLICY LIST"
+.PP
+List the available account policies\&.
+.SS "SAM POLICY SHOW <account policy>"
+.PP
+Show the account policy value\&.
+.SS "SAM POLICY SET <account policy> <value>"
+.PP
+Set a value for the account policy\&. Valid values can be: "forever", "never", "off", or a number\&.
+.SS "SAM PROVISION"
+.PP
+Only available if ldapsam:editposix is set and winbindd is running\&. Properly populates the ldap tree with the basic accounts (Administrator) and groups (Domain Users, Domain Admins, Domain Guests) on the ldap tree\&.
+.SS "IDMAP DUMP <local tdb file name>"
+.PP
+Dumps the mappings contained in the local tdb file specified\&. This command is useful to dump only the mappings produced by the idmap_tdb backend\&.
+.SS "IDMAP RESTORE [input file]"
+.PP
+Restore the mappings from the specified file or stdin\&.
+.SS "IDMAP SET SECRET <DOMAIN> <secret>"
+.PP
+Store a secret for the specified domain, used primarily for domains that use idmap_ldap as a backend\&. In this case the secret is used as the password for the user DN used to bind to the ldap server\&.
+.SS "IDMAP SET RANGE <RANGE> <SID> [index] [\-\-db=<DB>]"
+.PP
+Store a domain\-range mapping for a given domain (and index) in autorid database\&.
+.SS "IDMAP SET CONFIG <config> [\-\-db=<DB>]"
+.PP
+Update CONFIG entry in autorid database\&.
+.SS "IDMAP GET RANGE <SID> [index] [\-\-db=<DB>]"
+.PP
+Get the range for a given domain and index from autorid database\&.
+.SS "IDMAP GET RANGES [<SID>] [\-\-db=<DB>]"
+.PP
+Get ranges for all domains or for one identified by given SID\&.
+.SS "IDMAP GET CONFIG [\-\-db=<DB>]"
+.PP
+Get CONFIG entry from autorid database\&.
+.SS "IDMAP DELETE MAPPING [\-f] [\-\-db=<DB>] <ID>"
+.PP
+Delete a mapping sid <\-> gid or sid <\-> uid from the IDMAP database\&. The mapping is given by <ID> which may either be a sid: S\-x\-\&.\&.\&., a gid: "GID number" or a uid: "UID number"\&. Use \-f to delete an invalid partial mapping <ID> \-> xx
+.PP
+Use "smbcontrol all idmap \&.\&.\&." to notify running smbd instances\&. See the
+\fBsmbcontrol\fR(1)
+manpage for details\&.
+.SS "IDMAP DELETE RANGE [\-f] [\-\-db=<TDB>] <RANGE>|(<SID> [<INDEX>])"
+.PP
+Delete a domain range mapping identified by \*(AqRANGE\*(Aq or "domain SID and INDEX" from autorid database\&. Use \-f to delete invalid mappings\&.
+.SS "IDMAP DELETE RANGES [\-f] [\-\-db=<TDB>] <SID>"
+.PP
+Delete all domain range mappings for a domain identified by SID\&. Use \-f to delete invalid mappings\&.
+.SS "IDMAP CHECK [\-v] [\-r] [\-a] [\-T] [\-f] [\-l] [\-\-db=<DB>]"
+.PP
+Check and repair the IDMAP database\&. If no option is given a read only check of the database is done\&. Among others an interactive or automatic repair mode may be chosen with one of the following options:
+.PP
+\-r|\-\-repair
+.RS 4
+Interactive repair mode, ask a lot of questions\&.
+.RE
+.PP
+\-a|\-\-auto
+.RS 4
+Noninteractive repair mode, use default answers\&.
+.RE
+.PP
+\-v|\-\-verbose
+.RS 4
+Produce more output\&.
+.RE
+.PP
+\-f|\-\-force
+.RS 4
+Try to apply changes, even if they do not apply cleanly\&.
+.RE
+.PP
+\-T|\-\-test
+.RS 4
+Dry run, show what changes would be made but don\*(Aqt touch anything\&.
+.RE
+.PP
+\-l|\-\-lock
+.RS 4
+Lock the database while doing the check\&.
+.RE
+.PP
+\-\-db <DB>
+.RS 4
+Check the specified database\&.
+.RE
+.PP
+.RS 4
+.RE
+It reports about the finding of the following errors:
+.PP
+Missing reverse mapping:
+.RS 4
+A record with mapping A\->B where there is no B\->A\&. Default action in repair mode is to "fix" this by adding the reverse mapping\&.
+.RE
+.PP
+Invalid mapping:
+.RS 4
+A record with mapping A\->B where B\->C\&. Default action is to "delete" this record\&.
+.RE
+.PP
+Missing or invalid HWM:
+.RS 4
+A high water mark is not at least equal to the largest ID in the database\&. Default action is to "fix" this by setting it to the largest ID found +1\&.
+.RE
+.PP
+Invalid record:
+.RS 4
+Something we failed to parse\&. Default action is to "edit" it in interactive and "delete" it in automatic mode\&.
+.RE
+.SS "USERSHARE"
+.PP
+Starting with version 3\&.0\&.23, a Samba server now supports the ability for non\-root users to add user defined shares to be exported using the "net usershare" commands\&.
+.PP
+To set this up, first set up your smb\&.conf by adding to the [global] section: usershare path = /usr/local/samba/lib/usershares Next create the directory /usr/local/samba/lib/usershares, change the owner to root and set the group owner to the UNIX group who should have the ability to create usershares, for example a group called "serverops"\&. Set the permissions on /usr/local/samba/lib/usershares to 01770\&. (Owner and group all access, no access for others, plus the sticky bit, which means that a file in that directory can be renamed or deleted only by the owner of the file)\&. Finally, tell smbd how many usershares you will allow by adding to the [global] section of smb\&.conf a line such as : usershare max shares = 100\&. To allow 100 usershare definitions\&. Now, members of the UNIX group "serverops" can create user defined shares on demand using the commands below\&.
+.PP
+The usershare commands are:
+.RS 4
+net usershare add sharename path [comment [acl] [guest_ok=[y|n]]] \- to add or change a user defined share\&.
+.RE
+.RS 4
+net usershare delete sharename \- to delete a user defined share\&.
+.RE
+.RS 4
+net usershare info [\-l|\-\-long] [wildcard sharename] \- to print info about a user defined share\&.
+.RE
+.RS 4
+net usershare list [\-l|\-\-long] [wildcard sharename] \- to list user defined shares\&.
+.RE
+.SS "USERSHARE ADD sharename path [comment] [acl] [guest_ok=[y|n]]"
+.PP
+Add or replace a new user defined share, with name "sharename"\&.
+.PP
+"path" specifies the absolute pathname on the system to be exported\&. Restrictions may be put on this, see the global smb\&.conf parameters: "usershare owner only", "usershare prefix allow list", and "usershare prefix deny list"\&.
+.PP
+The optional "comment" parameter is the comment that will appear on the share when browsed to by a client\&.
+.PP
+The optional "acl" field specifies which users have read and write access to the entire share\&. Note that guest connections are not allowed unless the smb\&.conf parameter "usershare allow guests" has been set\&. The definition of a user defined share acl is: "user:permission", where user is a valid username on the system and permission can be "F", "R", or "D"\&. "F" stands for "full permissions", ie\&. read and write permissions\&. "D" stands for "deny" for a user, ie\&. prevent this user from accessing this share\&. "R" stands for "read only", ie\&. only allow read access to this share (no creation of new files or directories or writing to files)\&.
+.PP
+The default if no "acl" is given is "Everyone:R", which means any authenticated user has read\-only access\&.
+.PP
+The optional "guest_ok" has the same effect as the parameter of the same name in smb\&.conf, in that it allows guest access to this user defined share\&. This parameter is only allowed if the global parameter "usershare allow guests" has been set to true in the smb\&.conf\&.
+
+
+There is no separate command to modify an existing user defined share,
+just use the "net usershare add [sharename]" command using the same
+sharename as the one you wish to modify and specify the new options
+you wish\&. The Samba smbd daemon notices user defined share modifications
+at connect time so will see the change immediately, there is no need
+to restart smbd on adding, deleting or changing a user defined share\&.
+.SS "USERSHARE DELETE sharename"
+.PP
+Deletes the user defined share by name\&. The Samba smbd daemon immediately notices this change, although it will not disconnect any users currently connected to the deleted share\&.
+.SS "USERSHARE INFO [-l|--long] [wildcard sharename]"
+.PP
+Get info on user defined shares owned by the current user matching the given pattern, or all users\&.
+.PP
+net usershare info on its own dumps out info on the user defined shares that were created by the current user, or restricts them to share names that match the given wildcard pattern (\*(Aq*\*(Aq matches one or more characters, \*(Aq?\*(Aq matches only one character)\&. If the \*(Aq\-l\*(Aq or \*(Aq\-\-long\*(Aq option is also given, it prints out info on user defined shares created by other users\&.
+.PP
+The information given about a share looks like: [foobar] path=/home/jeremy comment=testme usershare_acl=Everyone:F guest_ok=n And is a list of the current settings of the user defined share that can be modified by the "net usershare add" command\&.
+.SS "USERSHARE LIST [-l|--long] wildcard sharename"
+.PP
+List all the user defined shares owned by the current user matching the given pattern, or all users\&.
+.PP
+net usershare list on its own list out the names of the user defined shares that were created by the current user, or restricts the list to share names that match the given wildcard pattern (\*(Aq*\*(Aq matches one or more characters, \*(Aq?\*(Aq matches only one character)\&. If the \*(Aq\-l\*(Aq or \*(Aq\-\-long\*(Aq option is also given, it includes the names of user defined shares created by other users\&.
+.SS "[RPC] CONF"
+.PP
+Starting with version 3\&.2\&.0, a Samba server can be configured by data stored in registry\&. This configuration data can be edited with the new "net conf" commands\&. There is also the possibility to configure a remote Samba server by enabling the RPC conf mode and specifying the address of the remote server\&.
+.PP
+The deployment of this configuration data can be activated in two levels from the
+\fIsmb\&.conf\fR
+file: Share definitions from registry are activated by setting
+\fIregistry shares\fR
+to
+\(lqyes\(rq
+in the [global] section and global configuration options are activated by setting
+\m[blue]\fBinclude = registry\fR\m[]
+in the [global] section for a mixed configuration or by setting
+\m[blue]\fBconfig backend = registry\fR\m[]
+in the [global] section for a registry\-only configuration\&. See the
+\fBsmb.conf\fR(5)
+manpage for details\&.
+.PP
+The conf commands are:
+.RS 4
+net [rpc] conf list \- Dump the complete configuration in smb\&.conf like
+format\&.
+.RE
+.RS 4
+net [rpc] conf import \- Import configuration from file in smb\&.conf
+format\&.
+.RE
+.RS 4
+net [rpc] conf listshares \- List the registry shares\&.
+.RE
+.RS 4
+net [rpc] conf drop \- Delete the complete configuration from
+registry\&.
+.RE
+.RS 4
+net [rpc] conf showshare \- Show the definition of a registry share\&.
+.RE
+.RS 4
+net [rpc] conf addshare \- Create a new registry share\&.
+.RE
+.RS 4
+net [rpc] conf delshare \- Delete a registry share\&.
+.RE
+.RS 4
+net [rpc] conf setparm \- Store a parameter\&.
+.RE
+.RS 4
+net [rpc] conf getparm \- Retrieve the value of a parameter\&.
+.RE
+.RS 4
+net [rpc] conf delparm \- Delete a parameter\&.
+.RE
+.RS 4
+net [rpc] conf getincludes \- Show the includes of a share definition\&.
+.RE
+.RS 4
+net [rpc] conf setincludes \- Set includes for a share\&.
+.RE
+.RS 4
+net [rpc] conf delincludes \- Delete includes from a share definition\&.
+.RE
+.SS "[RPC] CONF LIST"
+.PP
+Print the configuration data stored in the registry in a smb\&.conf\-like format to standard output\&.
+.SS "[RPC] CONF IMPORT [--test|-T] filename [section]"
+.PP
+This command imports configuration from a file in smb\&.conf format\&. If a section encountered in the input file is present in registry, its contents is replaced\&. Sections of registry configuration that have no counterpart in the input file are not affected\&. If you want to delete these, you will have to use the "net conf drop" or "net conf delshare" commands\&. Optionally, a section may be specified to restrict the effect of the import command to that specific section\&. A test mode is enabled by specifying the parameter "\-T" on the commandline\&. In test mode, no changes are made to the registry, and the resulting configuration is printed to standard output instead\&.
+.SS "[RPC] CONF LISTSHARES"
+.PP
+List the names of the shares defined in registry\&.
+.SS "[RPC] CONF DROP"
+.PP
+Delete the complete configuration data from registry\&.
+.SS "[RPC] CONF SHOWSHARE sharename"
+.PP
+Show the definition of the share or section specified\&. It is valid to specify "global" as sharename to retrieve the global configuration options from registry\&.
+.SS "[RPC] CONF ADDSHARE sharename path [writeable={y|N} [guest_ok={y|N} [comment]]] "
+.PP
+Create a new share definition in registry\&. The sharename and path have to be given\&. The share name may
+\fInot\fR
+be "global"\&. Optionally, values for the very common options "writeable", "guest ok" and a "comment" may be specified\&. The same result may be obtained by a sequence of "net conf setparm" commands\&.
+.SS "[RPC] CONF DELSHARE sharename"
+.PP
+Delete a share definition from registry\&.
+.SS "[RPC] CONF SETPARM section parameter value"
+.PP
+Store a parameter in registry\&. The section may be global or a sharename\&. The section is created if it does not exist yet\&.
+.SS "[RPC] CONF GETPARM section parameter"
+.PP
+Show a parameter stored in registry\&.
+.SS "[RPC] CONF DELPARM section parameter"
+.PP
+Delete a parameter stored in registry\&.
+.SS "[RPC] CONF GETINCLUDES section"
+.PP
+Get the list of includes for the provided section (global or share)\&.
+.PP
+Note that due to the nature of the registry database and the nature of include directives, the includes need special treatment: Parameters are stored in registry by the parameter name as valuename, so there is only ever one instance of a parameter per share\&. Also, a specific order like in a text file is not guaranteed\&. For all real parameters, this is perfectly ok, but the include directive is rather a meta parameter, for which, in the smb\&.conf text file, the place where it is specified between the other parameters is very important\&. This can not be achieved by the simple registry smbconf data model, so there is one ordered list of includes per share, and this list is evaluated after all the parameters of the share\&.
+.PP
+Further note that currently, only files can be included from registry configuration\&. In the future, there will be the ability to include configuration data from other registry keys\&.
+.SS "[RPC] CONF SETINCLUDES section [filename]+"
+.PP
+Set the list of includes for the provided section (global or share) to the given list of one or more filenames\&. The filenames may contain the usual smb\&.conf macros like %I\&.
+.SS "[RPC] CONF DELINCLUDES section"
+.PP
+Delete the list of includes from the provided section (global or share)\&.
+.SS "REGISTRY"
+.PP
+Manipulate Samba\*(Aqs registry\&.
+.PP
+The registry commands are:
+.RS 4
+net registry enumerate   \- Enumerate registry keys and values\&.
+.RE
+.RS 4
+net registry enumerate_recursive \- Enumerate registry key and its subkeys\&.
+.RE
+.RS 4
+net registry createkey   \- Create a new registry key\&.
+.RE
+.RS 4
+net registry deletekey   \- Delete a registry key\&.
+.RE
+.RS 4
+net registry deletekey_recursive \- Delete a registry key with subkeys\&.
+.RE
+.RS 4
+net registry getvalue    \- Print a registry value\&.
+.RE
+.RS 4
+net registry getvalueraw \- Print a registry value (raw format)\&.
+.RE
+.RS 4
+net registry setvalue    \- Set a new registry value\&.
+.RE
+.RS 4
+net registry increment   \- Increment a DWORD registry value under a lock\&.
+.RE
+.RS 4
+net registry deletevalue \- Delete a registry value\&.
+.RE
+.RS 4
+net registry getsd       \- Get security descriptor\&.
+.RE
+.RS 4
+net registry getsd_sdd1  \- Get security descriptor in sddl format\&.
+.RE
+.RS 4
+net registry setsd_sdd1  \- Set security descriptor from sddl format
+string\&.
+.RE
+.RS 4
+net registry import      \- Import a registration entries (\&.reg) file\&.
+.RE
+.RS 4
+net registry export      \- Export a registration entries (\&.reg) file\&.
+.RE
+.RS 4
+net registry convert     \- Convert a registration entries (\&.reg) file\&.
+.RE
+.RS 4
+net registry check       \- Check and repair a registry database\&.
+.RE
+.SS "REGISTRY ENUMERATE key "
+.PP
+Enumerate subkeys and values of
+\fIkey\fR\&.
+.SS "REGISTRY ENUMERATE_RECURSIVE key "
+.PP
+Enumerate values of
+\fIkey\fR
+and its subkeys\&.
+.SS "REGISTRY CREATEKEY key "
+.PP
+Create a new
+\fIkey\fR
+if not yet existing\&.
+.SS "REGISTRY DELETEKEY key "
+.PP
+Delete the given
+\fIkey\fR
+and its values from the registry, if it has no subkeys\&.
+.SS "REGISTRY DELETEKEY_RECURSIVE key "
+.PP
+Delete the given
+\fIkey\fR
+and all of its subkeys and values from the registry\&.
+.SS "REGISTRY GETVALUE key name"
+.PP
+Output type and actual value of the value
+\fIname\fR
+of the given
+\fIkey\fR\&.
+.SS "REGISTRY GETVALUERAW key name"
+.PP
+Output the actual value of the value
+\fIname\fR
+of the given
+\fIkey\fR\&.
+.SS "REGISTRY SETVALUE key name type value ..."
+.PP
+Set the value
+\fIname\fR
+of an existing
+\fIkey\fR\&.
+\fItype\fR
+may be one of
+\fIsz\fR,
+\fImulti_sz\fR
+or
+\fIdword\fR\&. In case of
+\fImulti_sz\fR
+\fIvalue\fR
+may be given multiple times\&.
+.SS "REGISTRY INCREMENT key name [inc]"
+.PP
+Increment the DWORD value
+\fIname\fR
+of
+\fIkey\fR
+by
+\fIinc\fR
+while holding a g_lock\&.
+\fIinc\fR
+defaults to 1\&.
+.SS "REGISTRY DELETEVALUE key name"
+.PP
+Delete the value
+\fIname\fR
+of the given
+\fIkey\fR\&.
+.SS "REGISTRY GETSD key"
+.PP
+Get the security descriptor of the given
+\fIkey\fR\&.
+.SS "REGISTRY GETSD_SDDL key"
+.PP
+Get the security descriptor of the given
+\fIkey\fR
+as a Security Descriptor Definition Language (SDDL) string\&.
+.SS "REGISTRY SETSD_SDDL keysd"
+.PP
+Set the security descriptor of the given
+\fIkey\fR
+from a Security Descriptor Definition Language (SDDL) string
+\fIsd\fR\&.
+.SS "REGISTRY IMPORT file [--precheck <check-file>] [opt]"
+.PP
+Import a registration entries (\&.reg)
+\fIfile\fR\&.
+.PP
+The following options are available:
+.PP
+\-\-precheck \fIcheck\-file\fR
+.RS 4
+This is a mechanism to check the existence or non\-existence of certain keys or values specified in a precheck file before applying the import file\&. The import file will only be applied if the precheck succeeds\&.
+.sp
+The check\-file follows the normal registry file syntax with the following semantics:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+<value name>=<value> checks whether the value exists and has the given value\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+<value name>=\- checks whether the value does not exist\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+[key] checks whether the key exists\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+[\-key] checks whether the key does not exist\&.
+.RE
+.sp
+.RE
+.RE
+.SS "REGISTRY EXPORT keyfile[opt]"
+.PP
+Export a
+\fIkey\fR
+to a registration entries (\&.reg)
+\fIfile\fR\&.
+.SS "REGISTRY CONVERT in out [[inopt] outopt]"
+.PP
+Convert a registration entries (\&.reg) file
+\fIin\fR\&.
+.SS "REGISTRY CHECK [-ravTl] [-o <ODB>] [--wipe] [<DB>]"
+.PP
+Check and repair the registry database\&. If no option is given a read only check of the database is done\&. Among others an interactive or automatic repair mode may be chosen with one of the following options
+.PP
+\-r|\-\-repair
+.RS 4
+Interactive repair mode, ask a lot of questions\&.
+.RE
+.PP
+\-a|\-\-auto
+.RS 4
+Noninteractive repair mode, use default answers\&.
+.RE
+.PP
+\-v|\-\-verbose
+.RS 4
+Produce more output\&.
+.RE
+.PP
+\-T|\-\-test
+.RS 4
+Dry run, show what changes would be made but don\*(Aqt touch anything\&.
+.RE
+.PP
+\-l|\-\-lock
+.RS 4
+Lock the database while doing the check\&.
+.RE
+.PP
+\-\-reg\-version={1,2,3}
+.RS 4
+Specify the format of the registry database\&. If not given it defaults to the value of the binary or, if an registry\&.tdb is explicitly stated at the commandline, to the value found in the INFO/version record\&.
+.RE
+.PP
+[\-\-db] <DB>
+.RS 4
+Check the specified database\&.
+.RE
+.PP
+\-o|\-\-output <ODB>
+.RS 4
+Create a new registry database <ODB> instead of modifying the input\&. If <ODB> is already existing \-\-wipe may be used to overwrite it\&.
+.RE
+.PP
+\-\-wipe
+.RS 4
+Replace the registry database instead of modifying the input or overwrite an existing output database\&.
+.RE
+.PP
+.RS 4
+.RE
+.SS "EVENTLOG"
+.PP
+Starting with version 3\&.4\&.0 net can read, dump, import and export native win32 eventlog files (usually *\&.evt)\&. evt files are used by the native Windows eventviewer tools\&.
+.PP
+The import and export of evt files can only succeed when
+\fIeventlog list\fR
+is used in
+\fIsmb\&.conf\fR
+file\&. See the
+\fBsmb.conf\fR(5)
+manpage for details\&.
+.PP
+The eventlog commands are:
+.RS 4
+net eventlog dump \- Dump a eventlog *\&.evt file on the screen\&.
+.RE
+.RS 4
+net eventlog import \- Import a eventlog *\&.evt into the samba internal
+tdb based representation of eventlogs\&.
+.RE
+.RS 4
+net eventlog export \- Export the samba internal tdb based representation
+of eventlogs into an eventlog *\&.evt file\&.
+.RE
+.SS "EVENTLOG DUMP filename"
+.PP
+Prints a eventlog *\&.evt file to standard output\&.
+.SS "EVENTLOG IMPORT filename eventlog"
+.PP
+Imports a eventlog *\&.evt file defined by
+\fIfilename\fR
+into the samba internal tdb representation of eventlog defined by
+\fIeventlog\fR\&.
+\fIeventlog\fR
+needs to part of the
+\fIeventlog list\fR
+defined in smb\&.conf\&. See the
+\fBsmb.conf\fR(5)
+manpage for details\&.
+.SS "EVENTLOG EXPORT filename eventlog"
+.PP
+Exports the samba internal tdb representation of eventlog defined by
+\fIeventlog\fR
+to a eventlog *\&.evt file defined by
+\fIfilename\fR\&.
+\fIeventlog\fR
+needs to part of the
+\fIeventlog list\fR
+defined in smb\&.conf\&. See the
+\fBsmb.conf\fR(5)
+manpage for details\&.
+.SS "DOM"
+.PP
+Starting with version 3\&.2\&.0 Samba has support for remote join and unjoin APIs, both client and server\-side\&. Windows supports remote join capabilities since Windows 2000\&.
+.PP
+In order for Samba to be joined or unjoined remotely an account must be used that is either member of the Domain Admins group, a member of the local Administrators group or a user that is granted the SeMachineAccountPrivilege privilege\&.
+.PP
+The client side support for remote join is implemented in the net dom commands which are:
+.RS 4
+net dom join \- Join a remote computer into a domain\&.
+.RE
+.RS 4
+net dom unjoin \- Unjoin a remote computer from a domain\&.
+.RE
+.RS 4
+net dom renamecomputer \- Renames a remote computer joined to a domain\&.
+.RE
+.SS "DOM JOIN	domain=DOMAIN ou=OU account=ACCOUNT password=PASSWORD reboot"
+.PP
+Joins a computer into a domain\&. This command supports the following additional parameters:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIDOMAIN\fR
+can be a NetBIOS domain name (also known as short domain name) or a DNS domain name for Active Directory Domains\&. As in Windows, it is also possible to control which Domain Controller to use\&. This can be achieved by appending the DC name using the \e separator character\&. Example: MYDOM\eMYDC\&. The
+\fIDOMAIN\fR
+parameter cannot be NULL\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIOU\fR
+can be set to a RFC 1779 LDAP DN, like
+\fIou=mymachines,cn=Users,dc=example,dc=com\fR
+in order to create the machine account in a non\-default LDAP container\&. This optional parameter is only supported when joining Active Directory Domains\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIACCOUNT\fR
+defines a domain account that will be used to join the machine to the domain\&. This domain account needs to have sufficient privileges to join machines\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIPASSWORD\fR
+defines the password for the domain account defined with
+\fIACCOUNT\fR\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIREBOOT\fR
+is an optional parameter that can be set to reboot the remote machine after successful join to the domain\&.
+.RE
+.sp
+.RE
+.PP
+Note that you also need to use standard net parameters to connect and authenticate to the remote machine that you want to join\&. These additional parameters include: \-S computer and \-U user\&.
+.PP
+Example: net dom join \-S xp \-U XP\e\eadministrator%secret domain=MYDOM account=MYDOM\e\eadministrator password=topsecret reboot\&.
+.PP
+This example would connect to a computer named XP as the local administrator using password secret, and join the computer into a domain called MYDOM using the MYDOM domain administrator account and password topsecret\&. After successful join, the computer would reboot\&.
+.SS "DOM UNJOIN account=ACCOUNT password=PASSWORD reboot"
+.PP
+Unjoins a computer from a domain\&. This command supports the following additional parameters:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIACCOUNT\fR
+defines a domain account that will be used to unjoin the machine from the domain\&. This domain account needs to have sufficient privileges to unjoin machines\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIPASSWORD\fR
+defines the password for the domain account defined with
+\fIACCOUNT\fR\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIREBOOT\fR
+is an optional parameter that can be set to reboot the remote machine after successful unjoin from the domain\&.
+.RE
+.sp
+.RE
+.PP
+Note that you also need to use standard net parameters to connect and authenticate to the remote machine that you want to unjoin\&. These additional parameters include: \-S computer and \-U user\&.
+.PP
+Example: net dom unjoin \-S xp \-U XP\e\eadministrator%secret account=MYDOM\e\eadministrator password=topsecret reboot\&.
+.PP
+This example would connect to a computer named XP as the local administrator using password secret, and unjoin the computer from the domain using the MYDOM domain administrator account and password topsecret\&. After successful unjoin, the computer would reboot\&.
+.SS "DOM RENAMECOMPUTER newname=NEWNAME account=ACCOUNT password=PASSWORD reboot"
+.PP
+Renames a computer that is joined to a domain\&. This command supports the following additional parameters:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fINEWNAME\fR
+defines the new name of the machine in the domain\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIACCOUNT\fR
+defines a domain account that will be used to rename the machine in the domain\&. This domain account needs to have sufficient privileges to rename machines\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIPASSWORD\fR
+defines the password for the domain account defined with
+\fIACCOUNT\fR\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIREBOOT\fR
+is an optional parameter that can be set to reboot the remote machine after successful rename in the domain\&.
+.RE
+.sp
+.RE
+.PP
+Note that you also need to use standard net parameters to connect and authenticate to the remote machine that you want to rename in the domain\&. These additional parameters include: \-S computer and \-U user\&.
+.PP
+Example: net dom renamecomputer \-S xp \-U XP\e\eadministrator%secret newname=XPNEW account=MYDOM\e\eadministrator password=topsecret reboot\&.
+.PP
+This example would connect to a computer named XP as the local administrator using password secret, and rename the joined computer to XPNEW using the MYDOM domain administrator account and password topsecret\&. After successful rename, the computer would reboot\&.
+.SS "G_LOCK"
+.PP
+Manage global locks\&.
+.SS "G_LOCK DO lockname timeout command"
+.PP
+Execute a shell command under a global lock\&. This might be useful to define the order in which several shell commands will be executed\&. The locking information is stored in a file called
+g_lock\&.tdb\&. In setups with CTDB running, the locking information will be available on all cluster nodes\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fILOCKNAME\fR
+defines the name of the global lock\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fITIMEOUT\fR
+defines the timeout\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fICOMMAND\fR
+defines the shell command to execute\&.
+.RE
+.SS "G_LOCK LOCKS"
+.PP
+Print a list of all currently existing locknames\&.
+.SS "G_LOCK DUMP lockname"
+.PP
+Dump the locking table of a certain global lock\&.
+.SS "TDB"
+.PP
+Print information from tdb records\&.
+.SS "TDB LOCKING key [DUMP]"
+.PP
+List sharename, filename and number of share modes for a record from locking\&.tdb\&. With the optional DUMP options, dump the complete record\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIKEY\fR
+Key of the tdb record as hex string\&.
+.RE
+.SS "vfs"
+.PP
+Access shared filesystem through the VFS\&.
+.SS "vfs stream2abouble [--recursive] [--verbose] [--continue] [--follow-symlinks] share path"
+.PP
+Convert file streams to AppleDouble files\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIshare\fR
+A Samba share\&.
+.RE
+.sp
+.RE
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIpath\fR
+A relative path of something in the Samba share\&. "\&." can be used for the root directory of the share\&.
+.RE
+.sp
+.RE
+.PP
+Options:
+.PP
+\-\-recursive
+.RS 4
+Traverse a directory hierarchy\&.
+.RE
+.PP
+\-\-verbose
+.RS 4
+Verbose output\&.
+.RE
+.PP
+\-\-continue
+.RS 4
+Continue traversing a directory hierarchy if a single conversion fails\&.
+.RE
+.PP
+\-\-follow\-symlinks
+.RS 4
+Follow symlinks encountered while traversing a directory\&.
+.RE
+.SS "vfs getntacl share path"
+.PP
+Display the security descriptor of a file or directory\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIshare\fR
+A Samba share\&.
+.RE
+.sp
+.RE
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIpath\fR
+A relative path of something in the Samba share\&. "\&." can be used for the root directory of the share\&.
+.RE
+.SS "OFFLINEJOIN"
+.PP
+Starting with version 4\&.15 Samba has support for offline join APIs\&. Windows supports offline join capabilities since Windows 7 and Windows 2008 R2\&.
+.PP
+The following offline commands are implemented:
+.RS 4
+net offlinejoin provision \- Provisions a machine account in AD\&.
+.RE
+.RS 4
+net offlinejoin requestodj \- Requests a domain offline join\&.
+.RE
+.SS "OFFLINEJOIN PROVISION domain=DOMAIN machine_name=MACHINE_NAME machine_account_ou=MACHINE_ACCOUNT_OU dcname=DCNAME defpwd reuse savefile=FILENAME printblob"
+.PP
+Provisions a machine account in AD\&. This command needs network connectivity to the domain controller to succeed\&. This command supports the following additional parameters:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIDOMAIN\fR
+can be a NetBIOS domain name (also known as short domain name) or a DNS domain name for Active Directory Domains\&. The
+\fIDOMAIN\fR
+parameter cannot be NULL\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIMACHINE_NAME\fR
+defines the machine account name that will be provisioned in AD\&. The
+\fIMACHINE_NAME\fR
+parameter cannot be NULL\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIMACHINE_ACCOUNT_OU\fR
+can be set to a RFC 1779 LDAP DN, like
+\fIou=mymachines,cn=Users,dc=example,dc=com\fR
+in order to create the machine account in a non\-default LDAP container\&. This optional parameter is only supported when joining Active Directory Domains\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIDCNAME\fR
+defines a specific domain controller for creating the machine account in AD\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIDEFPWD\fR
+is an optional parameter that can be set to enforce using the default machine account password\&. The use of this parameter is not recommended as the default machine account password can be easily guessed\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIREUSE\fR
+is an optional parameter that can be set to enforce reusing an exisiting machine account in AD\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fISAVEFILE\fR
+is an optional parameter to store the generated provisioning data on disk\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIPRINTBLOB\fR
+is an optional parameter to print the generated provisioning data on stdout\&.
+.RE
+.sp
+.RE
+.PP
+Example: net offlinejoin provision \-U administrator%secret domain=MYDOM machine_name=MYHOST savefile=provisioning\&.txt
+.SS "OFFLINEJOIN REQUESTODJ loadfile=FILENAME"
+.PP
+Requests an offline domain join by providing file\-based provisioning data\&. This command supports the following additional parameters:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fILOADFILE\fR
+is a required parameter to load the provisioning from a file\&.
+.RE
+.sp
+.RE
+.PP
+Example: net offlinejoin requestodj \-U administrator%secret loadfile=provisioning\&.txt
+.SS "HELP [COMMAND]"
+.PP
+Gives usage information for the specified command\&.
+.SH "VERSION"
+.PP
+This man page is complete for version 3 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The net manpage was written by Jelmer Vernooij\&.
diff --git a/docs/manpages/nmbd.8 b/docs/manpages/nmbd.8
new file mode 100644
index 0000000000..84b1455e8e
--- /dev/null
+++ b/docs/manpages/nmbd.8
@@ -0,0 +1,304 @@
+'\" t
+.\"     Title: nmbd
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "NMBD" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+nmbd \- NetBIOS name server to provide NetBIOS over IP naming services to clients
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+nmbd [\-D|\-\-daemon] [\-i|\-\-interactive] [\-F|\-\-foreground] [\-\-no\-process\-group] [\-b|\-\-build\-options] [\-p\ <port\ number(s)>] [\-P\ <profiling\ level>] [\-d\ <debug\ level>] [\-\-debug\-stdout] [\-\-configfile=<configuration\ file>] [\-\-option=<name>=<value>] [\-l|\-\-log\-basename\ <log\ directory>] [\-\-leak\-report] [\-\-leak\-report\-full] [\-V|\-\-version]
+.SH "DESCRIPTION"
+.PP
+This program is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+nmbd
+is a server that understands and can reply to NetBIOS over IP name service requests, like those produced by SMB/CIFS clients such as Windows 95/98/ME, Windows NT, Windows 2000, Windows XP and LanManager clients\&. It also participates in the browsing protocols which make up the Windows "Network Neighborhood" view\&.
+.PP
+SMB/CIFS clients, when they start up, may wish to locate an SMB/CIFS server\&. That is, they wish to know what IP number a specified host is using\&.
+.PP
+Amongst other services,
+nmbd
+will listen for such requests, and if its own NetBIOS name is specified it will respond with the IP number of the host it is running on\&. Its "own NetBIOS name" is by default the primary DNS name of the host it is running on, but this can be overridden by the
+\m[blue]\fBnetbios name\fR\m[]
+in
+smb\&.conf\&. Thus
+nmbd
+will reply to broadcast queries for its own name(s)\&. Additional names for
+nmbd
+to respond on can be set via parameters in the
+\fBsmb.conf\fR(5)
+configuration file\&.
+.PP
+nmbd
+can also be used as a WINS (Windows Internet Name Server) server\&. What this basically means is that it will act as a WINS database server, creating a database from name registration requests that it receives and replying to queries from clients for these names\&.
+.PP
+In addition,
+nmbd
+can act as a WINS proxy, relaying broadcast queries from clients that do not understand how to talk the WINS protocol to a WINS server\&.
+.SH "OPTIONS"
+.PP
+\-D|\-\-daemon
+.RS 4
+If specified, this parameter causes
+nmbd
+to operate as a daemon\&. That is, it detaches itself and runs in the background, fielding requests on the appropriate port\&. By default,
+nmbd
+will operate as a daemon if launched from a command shell\&. nmbd can also be operated from the
+inetd
+meta\-daemon, although this is not recommended\&.
+.RE
+.PP
+\-F|\-\-foreground
+.RS 4
+If specified, this parameter causes the main
+nmbd
+process to not daemonize, i\&.e\&. double\-fork and disassociate with the terminal\&. Child processes are still created as normal to service each connection request, but the main process does not exit\&. This operation mode is suitable for running
+nmbd
+under process supervisors such as
+supervise
+and
+svscan
+from Daniel J\&. Bernstein\*(Aqs
+daemontools
+package, or the AIX process monitor\&.
+.RE
+.PP
+\-i|\-\-interactive
+.RS 4
+If this parameter is specified it causes the server to run "interactively", not as a daemon, even if the server is executed on the command line of a shell\&. Setting this parameter negates the implicit daemon mode when run from the command line\&.
+nmbd
+also logs to standard output, as if the
+\fB\-S\fR
+parameter had been given\&.
+.RE
+.PP
+\-H|\-\-hosts <filename>
+.RS 4
+NetBIOS lmhosts file\&. The lmhosts file is a list of NetBIOS names to IP addresses that is loaded by the nmbd server and used via the name resolution mechanism
+\m[blue]\fBname resolve order\fR\m[]
+described in
+\fBsmb.conf\fR(5)
+to resolve any NetBIOS name queries needed by the server\&. Note that the contents of this file are
+\fINOT\fR
+used by
+nmbd
+to answer any name queries\&. Adding a line to this file affects name NetBIOS resolution from this host
+\fIONLY\fR\&.
+.sp
+The default path to this file is compiled into Samba as part of the build process\&. Common defaults are
+/usr/local/samba/lib/lmhosts,
+/usr/samba/lib/lmhosts
+or
+/etc/samba/lmhosts\&. See the
+\fBlmhosts\fR(5)
+man page for details on the contents of this file\&.
+.RE
+.PP
+\-p|\-\-port <UDP port number>
+.RS 4
+UDP port number is a positive integer value\&. This option changes the default UDP port number (normally 137) that
+nmbd
+responds to name queries on\&. Don\*(Aqt use this option unless you are an expert, in which case you won\*(Aqt need help!
+.RE
+.PP
+\-\-no\-process\-group
+.RS 4
+Do not create a new process group for nmbd\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL, \-\-debug\-stdout
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 0\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+This will redirect debug output to STDOUT\&. By default server daemons are logging to a log file\&.
+.RE
+.PP
+\-\-configfile=CONFIGFILE
+.RS 4
+The file specified contains the configuration details required by the server\&. The information in this file includes server\-specific information such as what printcap file to use, as well as descriptions of all the services that the server is to provide\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.SH "FILES"
+.PP
+/etc/inetd\&.conf
+.RS 4
+If the server is to be run by the
+inetd
+meta\-daemon, this file must contain suitable startup information for the meta\-daemon\&.
+.RE
+.PP
+/etc/rc
+.RS 4
+or whatever initialization script your system uses)\&.
+.sp
+If running the server as a daemon at startup, this file will need to contain an appropriate startup sequence for the server\&.
+.RE
+.PP
+/etc/services
+.RS 4
+If running the server via the meta\-daemon
+inetd, this file must contain a mapping of service name (e\&.g\&., netbios\-ssn) to service port (e\&.g\&., 139) and protocol type (e\&.g\&., tcp)\&.
+.RE
+.PP
+/usr/local/samba/lib/smb\&.conf
+.RS 4
+This is the default location of the
+\fBsmb.conf\fR(5)
+server configuration file\&. Other common places that systems install this file are
+/usr/samba/lib/smb\&.conf
+and
+/etc/samba/smb\&.conf\&.
+.sp
+When run as a WINS server (see the
+\m[blue]\fBwins support\fR\m[]
+parameter in the
+\fBsmb.conf\fR(5)
+man page),
+nmbd
+will store the WINS database in the file
+wins\&.dat
+in the
+var/locks
+directory configured under wherever Samba was configured to install itself\&.
+.sp
+If
+nmbd
+is acting as a
+\fI browse master\fR
+(see the
+\m[blue]\fBlocal master\fR\m[]
+parameter in the
+\fBsmb.conf\fR(5)
+man page,
+nmbd
+will store the browsing database in the file
+browse\&.dat
+in the
+var/locks
+directory configured under wherever Samba was configured to install itself\&.
+.RE
+.SH "SIGNALS"
+.PP
+To shut down an
+nmbd
+process it is recommended that SIGKILL (\-9)
+\fINOT\fR
+be used, except as a last resort, as this may leave the name database in an inconsistent state\&. The correct way to terminate
+nmbd
+is to send it a SIGTERM (\-15) signal and wait for it to die on its own\&.
+.PP
+nmbd
+will accept SIGHUP, which will cause it to dump out its namelists into the file
+namelist\&.debug
+in the
+/usr/local/samba/var/locks
+directory (or the
+var/locks
+directory configured under wherever Samba was configured to install itself)\&. This will also cause
+nmbd
+to dump out its server database in the
+log\&.nmb
+file\&. Additionally, the signal will cause reloading
+nmbd
+configuration\&.
+.PP
+Instead of sending a SIGHUP signal, a request to dump namelists into the file and reload a configuration file may be sent using
+\fBsmbcontrol\fR(1)
+program\&.
+.PP
+The debug log level of nmbd may be raised or lowered using
+\fBsmbcontrol\fR(1)
+(SIGUSR[1|2] signals are no longer used since Samba 2\&.2)\&. This is to allow transient problems to be diagnosed, whilst still running at a normally low log level\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBinetd\fR(8),
+\fBsmbd\fR(8),
+\fBsmb.conf\fR(5),
+\fBsmbclient\fR(1),
+\fBtestparm\fR(1), and the Internet RFC\*(Aqs
+rfc1001\&.txt,
+rfc1002\&.txt\&. In addition the CIFS (formerly SMB) specification is available as a link from the Web page
+https://www\&.samba\&.org/cifs/\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/nmblookup.1 b/docs/manpages/nmblookup.1
new file mode 100644
index 0000000000..c3f74d83b5
--- /dev/null
+++ b/docs/manpages/nmblookup.1
@@ -0,0 +1,341 @@
+'\" t
+.\"     Title: nmblookup
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "NMBLOOKUP" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+nmblookup \- NetBIOS over TCP/IP client used to lookup NetBIOS names
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+nmblookup [\-M|\-\-master\-browser] [\-\-recursion] [\-S|\-\-status] [\-r|\-\-root\-port] [\-A|\-\-lookup\-by\-ip] [\-B|\-\-broadcast=BROADCAST\-ADDRESS] [\-U|\-\-unicast=UNICAST\-ADDRESS] [\-T|\-\-translate] [\-f|\-\-flags] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER] [\-O|\-\-socket\-options=SOCKETOPTIONS] [\-m|\-\-max\-protocol=MAXPROTOCOL] [\-n|\-\-netbiosname=NETBIOSNAME] [\-\-netbios\-scope=SCOPE] [\-W|\-\-workgroup=WORKGROUP] [\-\-realm=REALM] {name}
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+nmblookup
+is used to query NetBIOS names and map them to IP addresses in a network using NetBIOS over TCP/IP queries\&. The options allow the name queries to be directed at a particular IP broadcast area or to a particular machine\&. All queries are done over UDP\&.
+.SH "OPTIONS"
+.PP
+\-M|\-\-master\-browser
+.RS 4
+Searches for a master browser by looking up the NetBIOS
+\fIname\fR
+with a type of
+\fB0x1d\fR\&. If
+\fI name\fR
+is "\-" then it does a lookup on the special name
+\fB__MSBROWSE__\fR\&. Please note that in order to use the name "\-", you need to make sure "\-" isn\*(Aqt parsed as an argument, e\&.g\&. use :
+\fBnmblookup \-M \-\- \-\fR\&.
+.RE
+.PP
+\-\-recursion
+.RS 4
+Set the recursion desired bit in the packet to do a recursive lookup\&. This is used when sending a name query to a machine running a WINS server and the user wishes to query the names in the WINS server\&. If this bit is unset the normal (broadcast responding) NetBIOS processing code on a machine is used instead\&. See RFC1001, RFC1002 for details\&.
+.RE
+.PP
+\-S|\-\-status
+.RS 4
+Once the name query has returned an IP address then do a node status query as well\&. A node status query returns the NetBIOS names registered by a host\&.
+.RE
+.PP
+\-r|\-\-root\-port
+.RS 4
+Try and bind to UDP port 137 to send and receive UDP datagrams\&. The reason for this option is a bug in Windows 95 where it ignores the source port of the requesting packet and only replies to UDP port 137\&. Unfortunately, on most UNIX systems root privilege is needed to bind to this port, and in addition, if the
+\fBnmbd\fR(8)
+daemon is running on this machine it also binds to this port\&.
+.RE
+.PP
+\-A|\-\-lookup\-by\-ip
+.RS 4
+Interpret
+\fIname\fR
+as an IP Address and do a node status query on this address\&.
+.RE
+.PP
+\-B|\-\-broadcast <broadcast address>
+.RS 4
+Send the query to the given broadcast address\&. Without this option the default behavior of nmblookup is to send the query to the broadcast address of the network interfaces as either auto\-detected or defined in the
+\fIinterfaces\fR
+parameter of the
+\fBsmb.conf\fR(5)
+file\&.
+.RE
+.PP
+\-U|\-\-unicast <unicast address>
+.RS 4
+Do a unicast query to the specified address or host
+\fIunicast address\fR\&. This option (along with the
+\fI\-R\fR
+option) is needed to query a WINS server\&.
+.RE
+.PP
+\-T|\-\-translate
+.RS 4
+This causes any IP addresses found in the lookup to be looked up via a reverse DNS lookup into a DNS name, and printed out before each
+.sp
+\fIIP address \&.\&.\&.\&. NetBIOS name\fR
+.sp
+pair that is the normal output\&.
+.RE
+.PP
+\-f|\-\-flags
+.RS 4
+Show which flags apply to the name that has been looked up\&. Possible answers are zero or more of: Response, Authoritative, Truncated, Recursion_Desired, Recursion_Available, Broadcast\&.
+.RE
+.PP
+name
+.RS 4
+This is the NetBIOS name being queried\&. Depending upon the previous options this may be a NetBIOS name or IP address\&. If a NetBIOS name then the different name types may be specified by appending \*(Aq#<type>\*(Aq to the name\&. This name may also be \*(Aq*\*(Aq, which will return all registered names within a broadcast area\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER
+.RS 4
+This option is used to determine what naming services and in what order to resolve host names to IP addresses\&. The option takes a space\-separated string of different name resolution options\&. The best ist to wrap the whole \-\-name\-resolve=NAME\-RESOLVE\-ORDER into quotes\&.
+.sp
+The options are: "lmhosts", "host", "wins" and "bcast"\&. They cause names to be resolved as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBlmhosts\fR: Lookup an IP address in the Samba lmhosts file\&. If the line in lmhosts has no name type attached to the NetBIOS name (see the
+\fBlmhosts\fR(5)
+for details) then any name type matches for lookup\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBhost\fR: Do a standard host name to IP address resolution, using the system
+/etc/hosts, NIS, or DNS lookups\&. This method of name resolution is operating system dependent, for instance on IRIX or Solaris this may be controlled by the
+/etc/nsswitch\&.conf
+file)\&. Note that this method is only used if the NetBIOS name type being queried is the 0x20 (server) name type, otherwise it is ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwins\fR: Query a name with the IP address listed in the
+\fIwins server\fR
+parameter\&. If no WINS server has been specified this method will be ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBbcast\fR: Do a broadcast on each of the known local interfaces listed in the
+\fIinterfaces\fR
+parameter\&. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet\&.
+.RE
+.sp
+.RE
+If this parameter is not set then the name resolve order defined in the
+smb\&.conf
+file parameter (\m[blue]\fBname resolve order\fR\m[]) will be used\&.
+.sp
+The default order is lmhosts, host, wins, bcast\&. Without this parameter or any entry in the
+\m[blue]\fBname resolve order\fR\m[]
+parameter of the
+smb\&.conf
+file, the name resolution methods will be attempted in this order\&.
+.RE
+.PP
+\-O|\-\-socket\-options=SOCKETOPTIONS
+.RS 4
+TCP socket options to set on the client socket\&. See the socket options parameter in the
+smb\&.conf
+manual page for the list of valid options\&.
+.RE
+.PP
+\-m|\-\-max\-protocol=MAXPROTOCOL
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported by the client\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient max protocol\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-n|\-\-netbiosname=NETBIOSNAME
+.RS 4
+This option allows you to override the NetBIOS name that Samba uses for itself\&. This is identical to setting the
+\m[blue]\fBnetbios name\fR\m[]
+parameter in the
+smb\&.conf
+file\&. However, a command line setting will take precedence over settings in
+smb\&.conf\&.
+.RE
+.PP
+\-\-netbios\-scope=SCOPE
+.RS 4
+This specifies a NetBIOS scope that
+nmblookup
+will use to communicate with when generating NetBIOS names\&. For details on the use of NetBIOS scopes, see rfc1001\&.txt and rfc1002\&.txt\&. NetBIOS scopes are
+\fIvery\fR
+rarely used, only set this parameter if you are the system administrator in charge of all the NetBIOS systems you communicate with\&.
+.RE
+.PP
+\-W|\-\-workgroup=WORKGROUP
+.RS 4
+Set the SMB domain of the username\&. This overrides the default domain which is the domain defined in smb\&.conf\&. If the domain specified is the same as the servers NetBIOS name, it causes the client to log on using the servers local SAM (as opposed to the Domain SAM)\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBworkgroup\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-r|\-\-realm=REALM
+.RS 4
+Set the realm for the domain\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBrealm\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.SH "EXAMPLES"
+.PP
+nmblookup
+can be used to query a WINS server (in the same way
+nslookup
+is used to query DNS servers)\&. To query a WINS server,
+nmblookup
+must be called like this:
+.PP
+nmblookup \-U server \-R \*(Aqname\*(Aq
+.PP
+For example, running :
+.PP
+nmblookup \-U samba\&.org \-R \*(AqIRIX#1B\*(Aq
+.PP
+would query the WINS server samba\&.org for the domain master browser (1B name type) for the IRIX workgroup\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBnmbd\fR(8),
+\fBsamba\fR(7), and
+\fBsmb.conf\fR(5)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/ntlm_auth.1 b/docs/manpages/ntlm_auth.1
new file mode 100644
index 0000000000..0264807b1f
--- /dev/null
+++ b/docs/manpages/ntlm_auth.1
@@ -0,0 +1,458 @@
+'\" t
+.\"     Title: ntlm_auth
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "NTLM_AUTH" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+ntlm_auth \- tool to allow external access to Winbind\*(Aqs NTLM authentication function
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+ntlm_auth
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+ntlm_auth
+is a helper utility that authenticates users using NT/LM authentication\&. It returns 0 if the users is authenticated successfully and 1 if access was denied\&. ntlm_auth uses winbind to access the user and authentication data for a domain\&. This utility is only intended to be used by other programs (currently
+Squid
+and
+mod_ntlm_winbind)
+.SH "OPERATIONAL REQUIREMENTS"
+.PP
+The
+\fBwinbindd\fR(8)
+daemon must be operational for many of these commands to function\&.
+.PP
+Some of these commands also require access to the directory
+winbindd_privileged
+in
+$LOCKDIR\&. This should be done either by running this command as root or providing group access to the
+winbindd_privileged
+directory\&. For security reasons, this directory should not be world\-accessable\&.
+.SH "OPTIONS"
+.PP
+\-\-helper\-protocol=PROTO
+.RS 4
+Operate as a stdio\-based helper\&. Valid helper protocols are:
+.PP
+squid\-2\&.4\-basic
+.RS 4
+Server\-side helper for use with Squid 2\&.4\*(Aqs basic (plaintext) authentication\&.
+.RE
+.PP
+squid\-2\&.5\-basic
+.RS 4
+Server\-side helper for use with Squid 2\&.5\*(Aqs basic (plaintext) authentication\&.
+.RE
+.PP
+squid\-2\&.5\-ntlmssp
+.RS 4
+Server\-side helper for use with Squid 2\&.5\*(Aqs NTLMSSP authentication\&.
+.sp
+Requires access to the directory
+winbindd_privileged
+in
+$LOCKDIR\&. The protocol used is described here:
+http://devel\&.squid\-cache\&.org/ntlm/squid_helper_protocol\&.html\&. This protocol has been extended to allow the NTLMSSP Negotiate packet to be included as an argument to the
+YR
+command\&. (Thus avoiding loss of information in the protocol exchange)\&.
+.RE
+.PP
+ntlmssp\-client\-1
+.RS 4
+Client\-side helper for use with arbitrary external programs that may wish to use Samba\*(Aqs NTLMSSP authentication knowledge\&.
+.sp
+This helper is a client, and as such may be run by any user\&. The protocol used is effectively the reverse of the previous protocol\&. A
+YR
+command (without any arguments) starts the authentication exchange\&.
+.RE
+.PP
+gss\-spnego
+.RS 4
+Server\-side helper that implements GSS\-SPNEGO\&. This uses a protocol that is almost the same as
+squid\-2\&.5\-ntlmssp, but has some subtle differences that are undocumented outside the source at this stage\&.
+.sp
+Requires access to the directory
+winbindd_privileged
+in
+$LOCKDIR\&.
+.RE
+.PP
+gss\-spnego\-client
+.RS 4
+Client\-side helper that implements GSS\-SPNEGO\&. This also uses a protocol similar to the above helpers, but is currently undocumented\&.
+.RE
+.PP
+ntlm\-server\-1
+.RS 4
+Server\-side helper protocol, intended for use by a RADIUS server or the \*(Aqwinbind\*(Aq plugin for pppd, for the provision of MSCHAP and MSCHAPv2 authentication\&.
+.sp
+This protocol consists of lines in the form:
+Parameter: value
+and
+Parameter:: Base64\-encode value\&. The presence of a single period
+\&.
+indicates that one side has finished supplying data to the other\&. (Which in turn could cause the helper to authenticate the user)\&.
+.sp
+Currently implemented parameters from the external program to the helper are:
+.PP
+Username
+.RS 4
+The username, expected to be in Samba\*(Aqs
+\m[blue]\fBunix charset\fR\m[]\&.
+.PP
+Examples:
+.RS 4
+Username: bob
+.sp
+Username:: Ym9i
+.RE
+.RE
+.PP
+NT\-Domain
+.RS 4
+The user\*(Aqs domain, expected to be in Samba\*(Aqs
+\m[blue]\fBunix charset\fR\m[]\&.
+.PP
+Examples:
+.RS 4
+NT\-Domain: WORKGROUP
+.sp
+NT\-Domain:: V09SS0dST1VQ
+.RE
+.RE
+.PP
+Full\-Username
+.RS 4
+The fully qualified username, expected to be in Samba\*(Aqs
+\m[blue]\fBunix charset\fR\m[]
+and qualified with the
+\m[blue]\fBwinbind separator\fR\m[]\&.
+.PP
+Examples:
+.RS 4
+Full\-Username: WORKGROUP\ebob
+.sp
+Full\-Username:: V09SS0dST1VQYm9i
+.RE
+.RE
+.PP
+LANMAN\-Challenge
+.RS 4
+The 8 byte
+LANMAN Challenge
+value, generated randomly by the server, or (in cases such as MSCHAPv2) generated in some way by both the server and the client\&.
+.PP
+Examples:
+.RS 4
+LANMAN\-Challenge: 0102030405060708
+.RE
+.RE
+.PP
+LANMAN\-Response
+.RS 4
+The 24 byte
+LANMAN Response
+value, calculated from the user\*(Aqs password and the supplied
+LANMAN Challenge\&. Typically, this is provided over the network by a client wishing to authenticate\&.
+.PP
+Examples:
+.RS 4
+LANMAN\-Response: 0102030405060708090A0B0C0D0E0F101112131415161718
+.RE
+.RE
+.PP
+NT\-Response
+.RS 4
+The >= 24 byte
+NT Response
+calculated from the user\*(Aqs password and the supplied
+LANMAN Challenge\&. Typically, this is provided over the network by a client wishing to authenticate\&.
+.PP
+Examples:
+.RS 4
+NT\-Response: 0102030405060708090A0B0C0D0E0F10111213141516171
+.RE
+.RE
+.PP
+Password
+.RS 4
+The user\*(Aqs password\&. This would be provided by a network client, if the helper is being used in a legacy situation that exposes plaintext passwords in this way\&.
+.PP
+Examples:
+.RS 4
+Password: samba2
+.sp
+Password:: c2FtYmEy
+.RE
+.RE
+.PP
+Request\-User\-Session\-Key
+.RS 4
+Upon successful authentication, return the user session key associated with the login\&.
+.PP
+Examples:
+.RS 4
+Request\-User\-Session\-Key: Yes
+.RE
+.RE
+.PP
+Request\-LanMan\-Session\-Key
+.RS 4
+Upon successful authentication, return the LANMAN session key associated with the login\&.
+.PP
+Examples:
+.RS 4
+Request\-LanMan\-Session\-Key: Yes
+.RE
+.RE
+.RE
+.sp
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBWarning\fR
+.ps -1
+.br
+Implementers should take care to base64 encode any data (such as usernames/passwords) that may contain malicious user data, such as a newline\&. They may also need to decode strings from the helper, which likewise may have been base64 encoded\&.
+.sp .5v
+.RE
+.RE
+.PP
+\-\-username=USERNAME
+.RS 4
+Specify username of user to authenticate
+.RE
+.PP
+\-\-domain=DOMAIN
+.RS 4
+Specify domain of user to authenticate
+.RE
+.PP
+\-\-workstation=WORKSTATION
+.RS 4
+Specify the workstation the user authenticated from
+.RE
+.PP
+\-\-challenge=STRING
+.RS 4
+NTLM challenge (in HEXADECIMAL)
+.RE
+.PP
+\-\-lm\-response=RESPONSE
+.RS 4
+LM Response to the challenge (in HEXADECIMAL)
+.RE
+.PP
+\-\-nt\-response=RESPONSE
+.RS 4
+NT or NTLMv2 Response to the challenge (in HEXADECIMAL)
+.RE
+.PP
+\-\-password=PASSWORD
+.RS 4
+User\*(Aqs plaintext password
+.sp
+If not specified on the command line, this is prompted for when required\&.
+.sp
+For the NTLMSSP based server roles, this parameter specifies the expected password, allowing testing without winbindd operational\&.
+.RE
+.PP
+\-\-request\-lm\-key
+.RS 4
+Retrieve LM session key
+.RE
+.PP
+\-\-request\-nt\-key
+.RS 4
+Request NT key
+.RE
+.PP
+\-\-diagnostics
+.RS 4
+Perform Diagnostics on the authentication chain\&. Uses the password from
+\-\-password
+or prompts for one\&.
+.RE
+.PP
+\-\-require\-membership\-of={SID|Name}
+.RS 4
+Require that a user be a member of specified group (either name or SID) for authentication to succeed\&.
+.RE
+.PP
+\-\-pam\-winbind\-conf=FILENAME
+.RS 4
+Define the path to the pam_winbind\&.conf file\&.
+.RE
+.PP
+\-\-target\-hostname=HOSTNAME
+.RS 4
+Define the target hostname\&.
+.RE
+.PP
+\-\-target\-service=SERVICE
+.RS 4
+Define the target service\&.
+.RE
+.PP
+\-\-use\-cached\-creds
+.RS 4
+Whether to use credentials cached by winbindd\&.
+.RE
+.PP
+\-\-allow\-mschapv2
+.RS 4
+Explicitly allow MSCHAPv2\&.
+.RE
+.PP
+\-\-offline\-logon
+.RS 4
+Allow offline logons for plain text auth\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.SH "EXAMPLE SETUP"
+.PP
+To setup ntlm_auth for use by squid 2\&.5, with both basic and NTLMSSP authentication, the following should be placed in the
+squid\&.conf
+file\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+auth_param ntlm program ntlm_auth \-\-helper\-protocol=squid\-2\&.5\-ntlmssp
+auth_param basic program ntlm_auth \-\-helper\-protocol=squid\-2\&.5\-basic
+auth_param basic children 5
+auth_param basic realm Squid proxy\-caching web server
+auth_param basic credentialsttl 2 hours
+.fi
+.if n \{\
+.RE
+.\}
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+.PP
+This example assumes that ntlm_auth has been installed into your path, and that the group permissions on
+winbindd_privileged
+are as described above\&.
+.sp .5v
+.RE
+.PP
+To setup ntlm_auth for use by squid 2\&.5 with group limitation in addition to the above example, the following should be added to the
+squid\&.conf
+file\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+auth_param ntlm program ntlm_auth \-\-helper\-protocol=squid\-2\&.5\-ntlmssp \-\-require\-membership\-of=\*(AqWORKGROUP\eDomain Users\*(Aq
+auth_param basic program ntlm_auth \-\-helper\-protocol=squid\-2\&.5\-basic \-\-require\-membership\-of=\*(AqWORKGROUP\eDomain Users\*(Aq
+.fi
+.if n \{\
+.RE
+.\}
+.SH "TROUBLESHOOTING"
+.PP
+If you\*(Aqre experiencing problems with authenticating Internet Explorer running under MS Windows 9X or Millennium Edition against ntlm_auth\*(Aqs NTLMSSP authentication helper (\-\-helper\-protocol=squid\-2\&.5\-ntlmssp), then please read
+the Microsoft Knowledge Base article #239869 and follow instructions described there\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The ntlm_auth manpage was written by Jelmer Vernooij and Andrew Bartlett\&.
diff --git a/docs/manpages/pam_winbind.8 b/docs/manpages/pam_winbind.8
new file mode 100644
index 0000000000..4505a0b9c2
--- /dev/null
+++ b/docs/manpages/pam_winbind.8
@@ -0,0 +1,218 @@
+'\" t
+.\"     Title: pam_winbind
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: 8
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "PAM_WINBIND" "8" "09/20/2021" "Samba 4\&.15\&.0" "8"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+pam_winbind \- PAM module for Winbind
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+pam_winbind is a PAM module that can authenticate users against the local domain by talking to the Winbind daemon\&.
+.SH "SYNOPSIS"
+.PP
+Edit the PAM system config /etc/pam\&.d/service and modify it as the following example shows:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+			    \&.\&.\&.
+			    auth      required        pam_env\&.so
+			    auth      sufficient      pam_unix2\&.so
+			+++ auth      required        pam_winbind\&.so  use_first_pass
+			    account   requisite       pam_unix2\&.so
+			+++ account   required        pam_winbind\&.so  use_first_pass
+			+++ password  sufficient      pam_winbind\&.so
+			    password  requisite       pam_pwcheck\&.so  cracklib
+			    password  required        pam_unix2\&.so    use_authtok
+			    session   required        pam_unix2\&.so
+			+++ session   required        pam_winbind\&.so
+			    \&.\&.\&.
+		
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Make sure that pam_winbind is one of the first modules in the session part\&. It may retrieve kerberos tickets which are needed by other modules\&.
+.SH "OPTIONS"
+.PP
+pam_winbind supports several options which can either be set in the PAM configuration files or in the pam_winbind configuration file situated at
+/etc/security/pam_winbind\&.conf\&. Options from the PAM configuration file take precedence to those from the configuration file\&. See
+\fBpam_winbind.conf\fR(5)
+for further details\&.
+.PP
+debug
+.RS 4
+Gives debugging output to syslog\&.
+.RE
+.PP
+debug_state
+.RS 4
+Gives detailed PAM state debugging output to syslog\&.
+.RE
+.PP
+require_membership_of=[SID or NAME]
+.RS 4
+If this option is set, pam_winbind will only succeed if the user is a member of the given SID or NAME\&. A SID can be either a group\-SID, an alias\-SID or even an user\-SID\&. It is also possible to give a NAME instead of the SID\&. That name must have the form:
+\fIMYDOMAIN\emygroup\fR
+or
+\fIMYDOMAIN\emyuser\fR
+(where \*(Aq\e\*(Aq character corresponds to the value of
+\fIwinbind separator\fR
+parameter)\&. It is also possible to use a UPN in the form
+\fIuser@REALM\fR
+or
+\fIgroup@REALM\fR\&. pam_winbind will, in that case, lookup the SID internally\&. Note that NAME may not contain any spaces\&. It is thus recommended to only use SIDs\&. You can verify the list of SIDs a user is a member of with
+wbinfo \-\-user\-sids=SID\&.
+.sp
+This option must only be specified on a auth module declaration, as it only operates in conjunction with password authentication\&.
+.RE
+.PP
+use_first_pass
+.RS 4
+By default, pam_winbind tries to get the authentication token from a previous module\&. If no token is available it asks the user for the old password\&. With this option, pam_winbind aborts with an error if no authentication token from a previous module is available\&.
+.RE
+.PP
+try_first_pass
+.RS 4
+Same as the use_first_pass option (previous item), except that if the primary password is not valid, PAM will prompt for a password\&.
+.RE
+.PP
+use_authtok
+.RS 4
+Set the new password to the one provided by the previously stacked password module\&. If this option is not set pam_winbind will ask the user for the new password\&.
+.RE
+.PP
+try_authtok
+.RS 4
+Same as the use_authtok option (previous item), except that if the new password is not valid, PAM will prompt for a password\&.
+.RE
+.PP
+krb5_auth
+.RS 4
+pam_winbind can authenticate using Kerberos when winbindd is talking to an Active Directory domain controller\&. Kerberos authentication must be enabled with this parameter\&. When Kerberos authentication can not succeed (e\&.g\&. due to clock skew), winbindd will fallback to samlogon authentication over MSRPC\&. When this parameter is used in conjunction with
+\fIwinbind refresh tickets\fR, winbind will keep your Ticket Granting Ticket (TGT) up\-to\-date by refreshing it whenever necessary\&.
+.RE
+.PP
+krb5_ccache_type=[type]
+.RS 4
+When pam_winbind is configured to try kerberos authentication by enabling the
+\fIkrb5_auth\fR
+option, it can store the retrieved Ticket Granting Ticket (TGT) in a credential cache\&. The type of credential cache can be controlled with this option\&. The supported values are:
+\fIKCM\fR
+or
+\fIKEYRING\fR
+(when supported by the system\*(Aqs Kerberos library and operating system),
+\fIFILE\fR
+and
+\fIDIR\fR
+(when the DIR type is supported by the system\*(Aqs Kerberos library)\&. In case of FILE a credential cache in the form of /tmp/krb5cc_UID will be created \- in case of DIR you NEED to specify a directory which must exist, the UID directory will be created in the specified directory\&. In all cases UID is replaced with the numeric user id\&. Check the details of the Kerberos implementation\&.
+.sp
+When using the KEYRING type, the supported mechanism is
+\(lqKEYRING:persistent:UID\(rq, which uses the Linux kernel keyring to store credentials on a per\-UID basis\&. KEYRING has limitations\&. For example, it is secure kernel memory, so bulk storage of credentials is not possible\&.
+.sp
+When using the KCM type, the supported mechanism is
+\(lqKCM:UID\(rq, which uses a Kerberos credential manager to store credentials on a per\-UID basis similar to KEYRING\&. This is the recommended choice on latest Linux distributions that offer a Kerberos Credential Manager\&. If not, we suggest to use KEYRING, as those are the most secure and predictable method\&.
+.sp
+It is also possible to define custom filepaths and use the "%u" pattern in order to substitute the numeric user id\&. Examples:
+.PP
+krb5_ccache_type = DIR:/run/user/%u/krb5cc
+.RS 4
+This will create a credential cache file in the specified directory\&.
+.RE
+.PP
+krb5_ccache_type = FILE:/tmp/krb5cc_%u
+.RS 4
+This will create a credential cache file\&.
+.RE
+.sp
+Leave empty to just do kerberos authentication without having a ticket cache after the logon has succeeded\&. This setting is empty by default\&.
+.RE
+.PP
+cached_login
+.RS 4
+Winbind allows one to logon using cached credentials when
+\fIwinbind offline logon\fR
+is enabled\&. To use this feature from the PAM module this option must be set\&.
+.RE
+.PP
+silent
+.RS 4
+Do not emit any messages\&.
+.RE
+.PP
+mkhomedir
+.RS 4
+Create homedirectory for a user on\-the\-fly, option is valid in PAM session block\&.
+.RE
+.PP
+warn_pwd_expire
+.RS 4
+Defines number of days before pam_winbind starts to warn about passwords that are going to expire\&. Defaults to 14 days\&.
+.RE
+.SH "PAM DATA EXPORTS"
+.PP
+This section describes the data exported in the PAM stack which could be used in other PAM modules\&.
+.PP
+PAM_WINBIND_HOMEDIR
+.RS 4
+This is the Windows Home Directory set in the profile tab in the user settings on the Active Directory Server\&. This could be a local path or a directory on a share mapped to a drive\&.
+.RE
+.PP
+PAM_WINBIND_LOGONSCRIPT
+.RS 4
+The path to the logon script which should be executed if a user logs in\&. This is normally a relative path to the script stored on the server\&.
+.RE
+.PP
+PAM_WINBIND_LOGONSERVER
+.RS 4
+This exports the Active Directory server we are authenticating against\&. This can be used as a variable later\&.
+.RE
+.PP
+PAM_WINBIND_PROFILEPATH
+.RS 4
+This is the profile path set in the profile tab in the user settings\&. Normally the home directory is synced with this directory on a share\&.
+.RE
+.SH "SEE ALSO"
+.PP
+\fBpam_winbind.conf\fR(5),
+\fBwbinfo\fR(1),
+\fBwinbindd\fR(8),
+\fBsmb.conf\fR(5)
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of Samba\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+This manpage was written by Jelmer Vernooij and Guenther Deschner\&.
diff --git a/docs/manpages/pam_winbind.conf.5 b/docs/manpages/pam_winbind.conf.5
new file mode 100644
index 0000000000..64eee7d4fd
--- /dev/null
+++ b/docs/manpages/pam_winbind.conf.5
@@ -0,0 +1,156 @@
+'\" t
+.\"     Title: pam_winbind.conf
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: 5
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "PAM_WINBIND\&.CONF" "5" "09/20/2021" "Samba 4\&.15\&.0" "5"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+pam_winbind.conf \- Configuration file of PAM module for Winbind
+.SH "DESCRIPTION"
+.PP
+This configuration file is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+pam_winbind\&.conf is the configuration file for the pam_winbind PAM module\&. See
+\fBpam_winbind\fR(8)
+for further details\&.
+.SH "SYNOPSIS"
+.PP
+The pam_winbind\&.conf configuration file is a classic ini\-style configuration file\&. There is only one section (global) where various options are defined\&.
+.SH "OPTIONS"
+.PP
+pam_winbind supports several options which can either be set in the PAM configuration files or in the pam_winbind configuration file situated at
+/etc/security/pam_winbind\&.conf\&. Options from the PAM configuration file take precedence to those from the pam_winbind\&.conf configuration file\&.
+.PP
+debug = yes|no
+.RS 4
+Gives debugging output to syslog\&. Defaults to "no"\&.
+.RE
+.PP
+debug_state = yes|no
+.RS 4
+Gives detailed PAM state debugging output to syslog\&. Defaults to "no"\&.
+.RE
+.PP
+require_membership_of = [SID or NAME]
+.RS 4
+If this option is set, pam_winbind will only succeed if the user is a member of the given SID or NAME\&. A SID can be either a group\-SID, an alias\-SID or even an user\-SID\&. It is also possible to give a NAME instead of the SID\&. That name must have the form:
+\fIMYDOMAIN\emygroup\fR
+or
+\fIMYDOMAIN\emyuser\fR
+(where \*(Aq\e\*(Aq character corresponds to the value of
+\fIwinbind separator\fR
+parameter)\&. It is also possible to use a UPN in the form
+\fIuser@REALM\fR
+or
+\fIgroup@REALM\fR\&. pam_winbind will, in that case, lookup the SID internally\&. Note that NAME may not contain any spaces\&. It is thus recommended to only use SIDs\&. You can verify the list of SIDs a user is a member of with
+wbinfo \-\-user\-sids=SID\&. This setting is empty by default\&.
+.sp
+This option only operates during password authentication, and will not restrict access if a password is not required for any reason (such as SSH key\-based login)\&.
+.RE
+.PP
+try_first_pass = yes|no
+.RS 4
+By default, pam_winbind tries to get the authentication token from a previous module\&. If no token is available it asks the user for the old password\&. With this option, pam_winbind aborts with an error if no authentication token from a previous module is available\&. If a primary password is not valid, PAM will prompt for a password\&. Default to "no"\&.
+.RE
+.PP
+krb5_auth = yes|no
+.RS 4
+pam_winbind can authenticate using Kerberos when winbindd is talking to an Active Directory domain controller\&. Kerberos authentication must be enabled with this parameter\&. When Kerberos authentication can not succeed (e\&.g\&. due to clock skew), winbindd will fallback to samlogon authentication over MSRPC\&. When this parameter is used in conjunction with
+\fIwinbind refresh tickets\fR, winbind will keep your Ticket Granting Ticket (TGT) up\-to\-date by refreshing it whenever necessary\&. Defaults to "no"\&.
+.RE
+.PP
+krb5_ccache_type = [type]
+.RS 4
+When pam_winbind is configured to try kerberos authentication by enabling the
+\fIkrb5_auth\fR
+option, it can store the retrieved Ticket Granting Ticket (TGT) in a credential cache\&. The type of credential cache can be controlled with this option\&. The supported values are:
+\fIKCM\fR
+or
+\fIKEYRING\fR
+(when supported by the system\*(Aqs Kerberos library and operating system),
+\fIFILE\fR
+and
+\fIDIR\fR
+(when the DIR type is supported by the system\*(Aqs Kerberos library)\&. In case of FILE a credential cache in the form of /tmp/krb5cc_UID will be created \- in case of DIR you NEED to specify a directory\&. UID is replaced with the numeric user id\&. The UID directory is being created\&. The path up to the directory should already exist\&. Check the details of the Kerberos implmentation\&.
+.sp
+When using the KEYRING type, the supported mechanism is
+\(lqKEYRING:persistent:UID\(rq, which uses the Linux kernel keyring to store credentials on a per\-UID basis\&. The KEYRING has its limitations\&. As it is secure kernel memory, for example bulk sorage of credentils is for not possible\&.
+.sp
+When using th KCM type, the supported mechanism is
+\(lqKCM:UID\(rq, which uses a Kerberos credential manaager to store credentials on a per\-UID basis similar to KEYRING\&. This is the recommended choice on latest Linux distributions, offering a Kerberos Credential Manager\&. If not we suggest to use KEYRING as those are the most secure and predictable method\&.
+.sp
+It is also possible to define custom filepaths and use the "%u" pattern in order to substitute the numeric user id\&. Examples:
+.PP
+krb5_ccache_type = DIR:/run/user/%u/krb5cc
+.RS 4
+This will create a credential cache file in the specified directory\&.
+.RE
+.PP
+krb5_ccache_type = FILE:/tmp/krb5cc_%u
+.RS 4
+This will create a credential cache file\&.
+.RE
+.sp
+Leave empty to just do kerberos authentication without having a ticket cache after the logon has succeeded\&. This setting is empty by default\&.
+.RE
+.PP
+cached_login = yes|no
+.RS 4
+Winbind allows one to logon using cached credentials when
+\fIwinbind offline logon\fR
+is enabled\&. To use this feature from the PAM module this option must be set\&. Defaults to "no"\&.
+.RE
+.PP
+silent = yes|no
+.RS 4
+Do not emit any messages\&. Defaults to "no"\&.
+.RE
+.PP
+mkhomedir = yes|no
+.RS 4
+Create homedirectory for a user on\-the\-fly, option is valid in PAM session block\&. Defaults to "no"\&.
+.RE
+.PP
+warn_pwd_expire = days
+.RS 4
+Defines number of days before pam_winbind starts to warn about passwords that are going to expire\&. Defaults to 14 days\&.
+.RE
+.SH "SEE ALSO"
+.PP
+\fBpam_winbind\fR(8),
+\fBwbinfo\fR(1),
+\fBwinbindd\fR(8),
+\fBsmb.conf\fR(5)
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of Samba\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+This manpage was written by Jelmer Vernooij and Guenther Deschner\&.
diff --git a/docs/manpages/pdbedit.8 b/docs/manpages/pdbedit.8
new file mode 100644
index 0000000000..e0724e654e
--- /dev/null
+++ b/docs/manpages/pdbedit.8
@@ -0,0 +1,647 @@
+'\" t
+.\"     Title: pdbedit
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "PDBEDIT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+pdbedit \- manage the SAM database (Database of Samba Users)
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+pdbedit [\-L|\-\-list] [\-v|\-\-verbose] [\-w|\-\-smbpasswd\-style] [\-u|\-\-user=USER] [\-N|\-\-account\-desc=STRING] [\-f|\-\-fullname=STRING] [\-h|\-\-homedir=STRING] [\-D|\-\-drive=STRING] [\-S|\-\-script=STRING] [\-p|\-\-profile=STRING] [\-I|\-\-domain=STRING] [\-U|\-\-user\ SID=STRING] [\-M|\-\-machine\ SID=STRING] [\-a|\-\-create] [\-r|\-\-modify] [\-m|\-\-machine] [\-x|\-\-delete] [\-b|\-\-backend=STRING] [\-i|\-\-import=STRING] [\-e|\-\-export=STRING] [\-g|\-\-group] [\-y|\-\-policies] [\-\-policies\-reset] [\-P|\-\-account\-policy=STRING] [\-C|\-\-value=LONG] [\-c|\-\-account\-control=STRING] [\-\-force\-initialized\-passwords] [\-z|\-\-bad\-password\-count\-reset] [\-Z|\-\-logon\-hours\-reset] [\-\-time\-format=STRING] [\-t|\-\-password\-from\-stdin] [\-K|\-\-kickoff\-time=STRING] [\-\-set\-nt\-hash=STRING] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The pdbedit program is used to manage the users accounts stored in the sam database and can only be run by root\&.
+.PP
+The pdbedit tool uses the passdb modular interface and is independent from the kind of users database used (currently there are smbpasswd, ldap, nis+ and tdb based and more can be added without changing the tool)\&.
+.PP
+There are five main ways to use pdbedit: adding a user account, removing a user account, modifying a user account, listing user accounts, importing users accounts\&.
+.SH "OPTIONS"
+.PP
+\-L|\-\-list
+.RS 4
+This option lists all the user accounts present in the users database\&. This option prints a list of user/uid pairs separated by the \*(Aq:\*(Aq character\&.
+.sp
+Example:
+pdbedit \-L
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+sorce:500:Simo Sorce
+samba:45:Test User
+.fi
+.if n \{\
+.RE
+.\}
+.RE
+.PP
+\-v|\-\-verbose
+.RS 4
+This option enables the verbose listing format\&. It causes pdbedit to list the users in the database, printing out the account fields in a descriptive format\&. Used together with \-w also shows passwords hashes\&.
+.sp
+Example:
+pdbedit \-L \-v
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
+username:       sorce
+user ID/Group:  500/500
+user RID/GRID:  2000/2001
+Full Name:      Simo Sorce
+Home Directory: \e\eBERSERKER\esorce
+HomeDir Drive:  H:
+Logon Script:   \e\eBERSERKER\enetlogon\esorce\&.bat
+Profile Path:   \e\eBERSERKER\eprofile
+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
+username:       samba
+user ID/Group:  45/45
+user RID/GRID:  1090/1091
+Full Name:      Test User
+Home Directory: \e\eBERSERKER\esamba
+HomeDir Drive:  
+Logon Script:   
+Profile Path:   \e\eBERSERKER\eprofile
+.fi
+.if n \{\
+.RE
+.\}
+.RE
+.PP
+\-w|\-\-smbpasswd\-style
+.RS 4
+This option sets the "smbpasswd" listing format\&. It will make pdbedit list the users in the database, printing out the account fields in a format compatible with the
+smbpasswd
+file format\&. (see the
+\fBsmbpasswd\fR(5)
+for details)\&. Instead used together with (\-v) displays the passwords hashes in verbose output\&.
+.sp
+Example:
+pdbedit \-L \-w
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+sorce:500:508818B733CE64BEAAD3B435B51404EE:
+          D2A2418EFC466A8A0F6B1DBB5C3DB80C:
+          [UX         ]:LCT\-00000000:
+samba:45:0F2B255F7B67A7A9AAD3B435B51404EE:
+          BC281CE3F53B6A5146629CD4751D3490:
+          [UX         ]:LCT\-3BFA1E8D:
+.fi
+.if n \{\
+.RE
+.\}
+.RE
+.PP
+\-u|\-\-user username
+.RS 4
+This option specifies the username to be used for the operation requested (listing, adding, removing)\&. It is
+\fIrequired\fR
+in add, remove and modify operations and
+\fIoptional\fR
+in list operations\&.
+.RE
+.PP
+\-f|\-\-fullname fullname
+.RS 4
+This option can be used while adding or modifying a user account\&. It will specify the user\*(Aqs full name\&.
+.sp
+Example:
+\-f "Simo Sorce"
+.RE
+.PP
+\-h|\-\-homedir homedir
+.RS 4
+This option can be used while adding or modifying a user account\&. It will specify the user\*(Aqs home directory network path\&.
+.sp
+Example:
+\-h "\e\e\e\eBERSERKER\e\esorce"
+.RE
+.PP
+\-D|\-\-drive drive
+.RS 4
+This option can be used while adding or modifying a user account\&. It will specify the windows drive letter to be used to map the home directory\&.
+.sp
+Example:
+\-D "H:"
+.RE
+.PP
+\-S|\-\-script script
+.RS 4
+This option can be used while adding or modifying a user account\&. It will specify the user\*(Aqs logon script path\&.
+.sp
+Example:
+\-S "\e\e\e\eBERSERKER\e\enetlogon\e\esorce\&.bat"
+.RE
+.PP
+\-\-set\-nt\-hash
+.RS 4
+This option can be used while modifying a user account\&. It will set the user\*(Aqs password using the nt\-hash value given as hexadecimal string\&. Useful to synchronize passwords\&.
+.sp
+Example:
+\-\-set\-nt\-hash 8846F7EAEE8FB117AD06BDD830B7586C
+.RE
+.PP
+\-p|\-\-profile profile
+.RS 4
+This option can be used while adding or modifying a user account\&. It will specify the user\*(Aqs profile directory\&.
+.sp
+Example:
+\-p "\e\e\e\eBERSERKER\e\enetlogon"
+.RE
+.PP
+\-M|\*(Aq\-\-machine SID\*(Aq SID|rid
+.RS 4
+This option can be used while adding or modifying a machine account\&. It will specify the machines\*(Aq new primary group SID (Security Identifier) or rid\&.
+.sp
+Example:
+\-M S\-1\-5\-21\-2447931902\-1787058256\-3961074038\-1201
+.RE
+.PP
+\-U|\*(Aq\-\-user SID\*(Aq SID|rid
+.RS 4
+This option can be used while adding or modifying a user account\&. It will specify the users\*(Aq new SID (Security Identifier) or rid\&.
+.sp
+Example:
+\-U S\-1\-5\-21\-2447931902\-1787058256\-3961074038\-5004
+.sp
+Example:
+\*(Aq\-\-user SID\*(Aq S\-1\-5\-21\-2447931902\-1787058256\-3961074038\-5004
+.sp
+Example:
+\-U 5004
+.sp
+Example:
+\*(Aq\-\-user SID\*(Aq 5004
+.RE
+.PP
+\-c|\-\-account\-control account\-control
+.RS 4
+This option can be used while adding or modifying a user account\&. It will specify the users\*(Aq account control property\&. Possible flags are listed below\&.
+.sp
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+N: No password required
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+D: Account disabled
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+H: Home directory required
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+T: Temporary duplicate of other account
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+U: Regular user account
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+M: MNS logon user account
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+W: Workstation Trust Account
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+S: Server Trust Account
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+L: Automatic Locking
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+X: Password does not expire
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+I: Domain Trust Account
+.RE
+.sp
+.RE
+.sp
+Example:
+\-c "[X ]"
+.RE
+.PP
+\-K|\-\-kickoff\-time
+.RS 4
+This option is used to modify the kickoff time for a certain user\&. Use "never" as argument to set the kickoff time to unlimited\&.
+.sp
+Example:
+pdbedit \-K never user
+.RE
+.PP
+\-a|\-\-create
+.RS 4
+This option is used to add a user into the database\&. This command needs a user name specified with the \-u switch\&. When adding a new user, pdbedit will also ask for the password to be used\&.
+.sp
+Example:
+pdbedit \-a \-u sorce
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+new password:
+retype new password
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+pdbedit does not call the unix password synchronization script if
+\m[blue]\fBunix password sync\fR\m[]
+has been set\&. It only updates the data in the Samba user database\&.
+.sp
+If you wish to add a user and synchronise the password that immediately, use
+smbpasswd\*(Aqs
+\fB\-a\fR
+option\&.
+.sp .5v
+.RE
+.RE
+.PP
+\-t|\-\-password\-from\-stdin
+.RS 4
+This option causes pdbedit to read the password from standard input, rather than from /dev/tty (like the
+passwd(1)
+program does)\&. The password has to be submitted twice and terminated by a newline each\&.
+.RE
+.PP
+\-r|\-\-modify
+.RS 4
+This option is used to modify an existing user in the database\&. This command needs a user name specified with the \-u switch\&. Other options can be specified to modify the properties of the specified user\&. This flag is kept for backwards compatibility, but it is no longer necessary to specify it\&.
+.RE
+.PP
+\-m|\-\-machine
+.RS 4
+This option may only be used in conjunction with the
+\fI\-a\fR
+option\&. It will make pdbedit to add a machine trust account instead of a user account (\-u username will provide the machine name)\&.
+.sp
+Example:
+pdbedit \-a \-m \-u w2k\-wks
+.RE
+.PP
+\-x|\-\-delete
+.RS 4
+This option causes pdbedit to delete an account from the database\&. It needs a username specified with the \-u switch\&.
+.sp
+Example:
+pdbedit \-x \-u bob
+.RE
+.PP
+\-i|\-\-import passdb\-backend
+.RS 4
+Use a different passdb backend to retrieve users than the one specified in smb\&.conf\&. Can be used to import data into your local user database\&.
+.sp
+This option will ease migration from one passdb backend to another\&.
+.sp
+Example:
+pdbedit \-i smbpasswd:/etc/smbpasswd\&.old
+.RE
+.PP
+\-e|\-\-export passdb\-backend
+.RS 4
+Exports all currently available users to the specified password database backend\&.
+.sp
+This option will ease migration from one passdb backend to another and will ease backing up\&.
+.sp
+Example:
+pdbedit \-e smbpasswd:/root/samba\-users\&.backup
+.RE
+.PP
+\-g|\-\-group
+.RS 4
+If you specify
+\fI\-g\fR, then
+\fI\-i in\-backend \-e out\-backend\fR
+applies to the group mapping instead of the user database\&.
+.sp
+This option will ease migration from one passdb backend to another and will ease backing up\&.
+.RE
+.PP
+\-b|\-\-backend passdb\-backend
+.RS 4
+Use a different default passdb backend\&.
+.sp
+Example:
+pdbedit \-b xml:/root/pdb\-backup\&.xml \-l
+.RE
+.PP
+\-P|\-\-account\-policy account\-policy
+.RS 4
+Display an account policy
+.sp
+Valid policies are: minimum password age, reset count minutes, disconnect time, user must logon to change password, password history, lockout duration, min password length, maximum password age and bad lockout attempt\&.
+.sp
+Example:
+pdbedit \-P "bad lockout attempt"
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+account policy value for bad lockout attempt is 0
+.fi
+.if n \{\
+.RE
+.\}
+.RE
+.PP
+\-C|\-\-value account\-policy\-value
+.RS 4
+Sets an account policy to a specified value\&. This option may only be used in conjunction with the
+\fI\-P\fR
+option\&.
+.sp
+Example:
+pdbedit \-P "bad lockout attempt" \-C 3
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+account policy value for bad lockout attempt was 0
+account policy value for bad lockout attempt is now 3
+.fi
+.if n \{\
+.RE
+.\}
+.RE
+.PP
+\-y|\-\-policies
+.RS 4
+If you specify
+\fI\-y\fR, then
+\fI\-i in\-backend \-e out\-backend\fR
+applies to the account policies instead of the user database\&.
+.sp
+This option will allow one to migrate account policies from their default tdb\-store into a passdb backend, e\&.g\&. an LDAP directory server\&.
+.sp
+Example:
+pdbedit \-y \-i tdbsam: \-e ldapsam:ldap://my\&.ldap\&.host
+.RE
+.PP
+\-\-force\-initialized\-passwords
+.RS 4
+This option forces all users to change their password upon next login\&.
+.RE
+.PP
+\-N|\-\-account\-desc description
+.RS 4
+This option can be used while adding or modifying a user account\&. It will specify the user\*(Aqs description field\&.
+.sp
+Example:
+\-N "test description"
+.RE
+.PP
+\-Z|\-\-logon\-hours\-reset
+.RS 4
+This option can be used while adding or modifying a user account\&. It will reset the user\*(Aqs allowed logon hours\&. A user may login at any time afterwards\&.
+.sp
+Example:
+\-Z
+.RE
+.PP
+\-z|\-\-bad\-password\-count\-reset
+.RS 4
+This option can be used while adding or modifying a user account\&. It will reset the stored bad login counter from a specified user\&.
+.sp
+Example:
+\-z
+.RE
+.PP
+\-\-policies\-reset
+.RS 4
+This option can be used to reset the general password policies stored for a domain to their default values\&.
+.sp
+Example:
+\-\-policies\-reset
+.RE
+.PP
+\-I|\-\-domain
+.RS 4
+This option can be used while adding or modifying a user account\&. It will specify the user\*(Aqs domain field\&.
+.sp
+Example:
+\-I "MYDOMAIN"
+.RE
+.PP
+\-\-time\-format
+.RS 4
+This option is currently not being used\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.SH "NOTES"
+.PP
+This command may be used only by root\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbpasswd\fR(5),
+\fBsamba\fR(7)
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The pdbedit manpage was written by Simo Sorce and Jelmer Vernooij\&.
diff --git a/docs/manpages/profiles.1 b/docs/manpages/profiles.1
new file mode 100644
index 0000000000..d954c1532f
--- /dev/null
+++ b/docs/manpages/profiles.1
@@ -0,0 +1,136 @@
+'\" t
+.\"     Title: profiles
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "PROFILES" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+profiles \- A utility to report and change SIDs in registry files
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+profiles [\-c|\-\-change\-sid=STRING] [\-n|\-\-new\-sid=STRING] [\-v|\-\-verbose] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] {FILE}
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+profiles
+is a utility that reports and changes SIDs in windows registry files\&. It currently only supports NT\&.
+.SH "OPTIONS"
+.PP
+file
+.RS 4
+Registry file to view or edit\&.
+.RE
+.PP
+\-v,\-\-verbose
+.RS 4
+Increases verbosity of messages\&.
+.RE
+.PP
+\-c SID1 \-n SID2, \-\-change\-sid SID1 \-\-new\-sid SID2
+.RS 4
+Change all occurrences of SID1 in
+file
+by SID2\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The profiles man page was written by Jelmer Vernooij\&.
diff --git a/docs/manpages/rpcclient.1 b/docs/manpages/rpcclient.1
new file mode 100644
index 0000000000..017f900f87
--- /dev/null
+++ b/docs/manpages/rpcclient.1
@@ -0,0 +1,1961 @@
+'\" t
+.\"     Title: rpcclient
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "RPCCLIENT" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+rpcclient \- tool for executing client side MS\-RPC functions
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+rpcclient [\-c|\-\-command=COMMANDS] [\-I|\-\-dest\-ip=IP] [\-p|\-\-port=PORT] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER] [\-O|\-\-socket\-options=SOCKETOPTIONS] [\-m|\-\-max\-protocol=MAXPROTOCOL] [\-n|\-\-netbiosname=NETBIOSNAME] [\-\-netbios\-scope=SCOPE] [\-W|\-\-workgroup=WORKGROUP] [\-\-realm=REALM] [\-U|\-\-user=[DOMAIN/]USERNAME[%PASSWORD]] [\-N|\-\-no\-pass] [\-\-password=STRING] [\-\-pw\-nt\-hash] [\-A|\-\-authentication\-file=FILE] [\-P|\-\-machine\-pass] [\-\-simple\-bind\-dn=DN] [\-\-use\-kerberos=desired|required|off] [\-\-use\-krb5\-ccache=CCACHE] [\-\-use\-winbind\-ccache] [\-\-client\-protection=sign|encrypt|off] [\-V|\-\-version] {BINDING\-STRING|HOST}
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+rpcclient
+is a utility initially developed to test MS\-RPC functionality in Samba itself\&. It has undergone several stages of development and stability\&. Many system administrators have now written scripts around it to manage Windows NT clients from their UNIX workstation\&.
+.SH "OPTIONS"
+.PP
+BINDING\-STRING|HOST
+.RS 4
+When connecting to a dcerpc service you need to specify a binding string\&.
+.sp
+The format is:
+.sp
+TRANSPORT:host[options]
+.sp
+where TRANSPORT is either ncacn_np (named pipes) for SMB or ncacn_ip_tcp for DCERPC over TCP/IP\&.
+.sp
+"host" is an IP or hostname or netbios name\&. If the binding string identifies the server side of an endpoint, "host" may be an empty string\&. See below for more details\&.
+.sp
+"options" can include a SMB pipe name if using the ncacn_np transport or a TCP port number if using the ncacn_ip_tcp transport, otherwise they will be auto\-determined\&.
+.sp
+Examples:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIncacn_ip_tcp:samba\&.example\&.com[1024]\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIncacn_ip_tcp:samba\&.example\&.com[sign,seal,krb5]\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIncacn_ip_tcp:samba\&.example\&.com[sign,spnego]\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIncacn_np:samba\&.example\&.com\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIncacn_np:samba\&.example\&.com[samr]\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIncacn_np:samba\&.example\&.com[samr,sign,print]\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIncalrpc:/path/to/unix/socket\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI//SAMBA\fR
+.RE
+.sp
+.RE
+The supported transports are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIncacn_np\fR
+\- Connect using named pipes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIncacn_ip_tcp\fR
+\- Connect over TCP/IP
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIncalrpc\fR
+\- Connect over local RPC (unix sockets)
+.RE
+.sp
+.RE
+The supported options are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsign\fR
+\- Use RPC integrity authentication level
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIseal\fR
+\- Enable RPC privacy (encryption) authentication level
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIconnect\fR
+\- Use RPC connect level authentication (auth, but no sign or seal)
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIpacket\fR
+\- Use RPC packet authentication level
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIspnego\fR
+\- Use SPNEGO instead of NTLMSSP authentication
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIntlm\fR
+\- Use plain NTLM instead of SPNEGO or NTLMSSP
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIkrb5\fR
+\- Use Kerberos instead of NTLMSSP authentication
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIschannel\fR
+\- Create a schannel connection
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsmb1\fR
+\- Use SMB1 for named pipes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsmb2\fR
+\- Use SMB2/3 for named pipes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIvalidate\fR
+\- Enable the NDR validator
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIprint\fR
+\- Enable debug output of packets
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIpadcheck\fR
+\- Check reply data for non\-zero pad bytes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIbigendian\fR
+\- Use big endian for RPC
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIndr64\fR
+\- Use NDR64 for RPC
+.RE
+.sp
+.RE
+.RE
+.PP
+\-c|\-\-command=<command string>
+.RS 4
+Execute semicolon separated commands (listed below)
+.RE
+.PP
+\-I|\-\-dest\-ip IP\-address
+.RS 4
+\fIIP address\fR
+is the address of the server to connect to\&. It should be specified in standard "a\&.b\&.c\&.d" notation\&.
+.sp
+Normally the client would attempt to locate a named SMB/CIFS server by looking it up via the NetBIOS name resolution mechanism described above in the
+\fIname resolve order\fR
+parameter above\&. Using this parameter will force the client to assume that the server is on the machine with the specified IP address and the NetBIOS name component of the resource being connected to will be ignored\&.
+.sp
+There is no default for this parameter\&. If not supplied, it will be determined automatically by the client as described above\&.
+.RE
+.PP
+\-p|\-\-port port
+.RS 4
+This number is the TCP port number that will be used when making connections to the server\&. The standard (well\-known) TCP port number for an SMB/CIFS server is 139, which is the default\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER
+.RS 4
+This option is used to determine what naming services and in what order to resolve host names to IP addresses\&. The option takes a space\-separated string of different name resolution options\&. The best ist to wrap the whole \-\-name\-resolve=NAME\-RESOLVE\-ORDER into quotes\&.
+.sp
+The options are: "lmhosts", "host", "wins" and "bcast"\&. They cause names to be resolved as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBlmhosts\fR: Lookup an IP address in the Samba lmhosts file\&. If the line in lmhosts has no name type attached to the NetBIOS name (see the
+\fBlmhosts\fR(5)
+for details) then any name type matches for lookup\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBhost\fR: Do a standard host name to IP address resolution, using the system
+/etc/hosts, NIS, or DNS lookups\&. This method of name resolution is operating system dependent, for instance on IRIX or Solaris this may be controlled by the
+/etc/nsswitch\&.conf
+file)\&. Note that this method is only used if the NetBIOS name type being queried is the 0x20 (server) name type, otherwise it is ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwins\fR: Query a name with the IP address listed in the
+\fIwins server\fR
+parameter\&. If no WINS server has been specified this method will be ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBbcast\fR: Do a broadcast on each of the known local interfaces listed in the
+\fIinterfaces\fR
+parameter\&. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet\&.
+.RE
+.sp
+.RE
+If this parameter is not set then the name resolve order defined in the
+smb\&.conf
+file parameter (\m[blue]\fBname resolve order\fR\m[]) will be used\&.
+.sp
+The default order is lmhosts, host, wins, bcast\&. Without this parameter or any entry in the
+\m[blue]\fBname resolve order\fR\m[]
+parameter of the
+smb\&.conf
+file, the name resolution methods will be attempted in this order\&.
+.RE
+.PP
+\-O|\-\-socket\-options=SOCKETOPTIONS
+.RS 4
+TCP socket options to set on the client socket\&. See the socket options parameter in the
+smb\&.conf
+manual page for the list of valid options\&.
+.RE
+.PP
+\-m|\-\-max\-protocol=MAXPROTOCOL
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported by the client\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient max protocol\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-n|\-\-netbiosname=NETBIOSNAME
+.RS 4
+This option allows you to override the NetBIOS name that Samba uses for itself\&. This is identical to setting the
+\m[blue]\fBnetbios name\fR\m[]
+parameter in the
+smb\&.conf
+file\&. However, a command line setting will take precedence over settings in
+smb\&.conf\&.
+.RE
+.PP
+\-\-netbios\-scope=SCOPE
+.RS 4
+This specifies a NetBIOS scope that
+nmblookup
+will use to communicate with when generating NetBIOS names\&. For details on the use of NetBIOS scopes, see rfc1001\&.txt and rfc1002\&.txt\&. NetBIOS scopes are
+\fIvery\fR
+rarely used, only set this parameter if you are the system administrator in charge of all the NetBIOS systems you communicate with\&.
+.RE
+.PP
+\-W|\-\-workgroup=WORKGROUP
+.RS 4
+Set the SMB domain of the username\&. This overrides the default domain which is the domain defined in smb\&.conf\&. If the domain specified is the same as the servers NetBIOS name, it causes the client to log on using the servers local SAM (as opposed to the Domain SAM)\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBworkgroup\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-r|\-\-realm=REALM
+.RS 4
+Set the realm for the domain\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBrealm\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-U|\-\-user=[DOMAIN\e]USERNAME[%PASSWORD]
+.RS 4
+Sets the SMB username or username and password\&.
+.sp
+If %PASSWORD is not specified, the user will be prompted\&. The client will first check the
+\fBUSER\fR
+environment variable (which is also permitted to also contain the password seperated by a %), then the
+\fBLOGNAME\fR
+variable (which is not permitted to contain a password) and if either exists, the value is used\&. If these environmental variables are not found, the username found in a Kerberos Credentials cache may be used\&.
+.sp
+A third option is to use a credentials file which contains the plaintext of the username and password\&. This option is mainly provided for scripts where the admin does not wish to pass the credentials on the command line or via environment variables\&. If this method is used, make certain that the permissions on the file restrict access from unwanted users\&. See the
+\fI\-A\fR
+for more details\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-N|\-\-no\-pass
+.RS 4
+If specified, this parameter suppresses the normal password prompt from the client to the user\&. This is useful when accessing a service that does not require a password\&.
+.sp
+Unless a password is specified on the command line or this parameter is specified, the client will request a password\&.
+.sp
+If a password is specified on the command line and this option is also defined the password on the command line will be silently ignored and no password will be used\&.
+.RE
+.PP
+\-\-password
+.RS 4
+Specify the password on the commandline\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+If \-\-password is not specified, the tool will check the
+\fBPASSWD\fR
+environment variable, followed by
+\fBPASSWD_FD\fR
+which is expected to contain an open file descriptor (FD) number\&.
+.sp
+Finally it will check
+\fBPASSWD_FILE\fR
+(containing a file path to be opened)\&. The file should only contain the password\&. Make certain that the permissions on the file restrict access from unwanted users!
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-\-pw\-nt\-hash
+.RS 4
+The supplied password is the NT hash\&.
+.RE
+.PP
+\-A|\-\-authentication\-file=filename
+.RS 4
+This option allows you to specify a file from which to read the username and password used in the connection\&. The format of the file is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+				username = <value>
+				password = <value>
+				domain   = <value>
+			
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Make certain that the permissions on the file restrict access from unwanted users!
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Use stored machine account password\&.
+.RE
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind\&.
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-use\-krb5\-ccache=CCACHE
+.RS 4
+Specifies the credential cache location for Kerberos authentication\&.
+.sp
+This will set \-\-use\-kerberos=required too\&.
+.RE
+.PP
+\-\-use\-winbind\-ccache
+.RS 4
+Try to use the credential cache by winbind\&.
+.RE
+.PP
+\-\-client\-protection=sign|encrypt|off
+.RS 4
+Sets the connection protection the client tool should use\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient protection\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.sp
+In case you need more fine grained control you can use:
+\-\-option=clientsmbencrypt=OPTION,
+\-\-option=clientipcsigning=OPTION,
+\-\-option=clientsigning=OPTION\&.
+.RE
+.SH "COMMANDS"
+.SS "LSARPC"
+.PP
+lsaquery
+.RS 4
+Query info policy
+.RE
+.PP
+lookupsids
+.RS 4
+Convert SIDs to names
+.RE
+.PP
+lookupsids3
+.RS 4
+Convert SIDs to names
+.RE
+.PP
+lookupsids_level
+.RS 4
+Convert SIDs to names
+.RE
+.PP
+lookupnames
+.RS 4
+Convert names to SIDs
+.RE
+.PP
+lookupnames4
+.RS 4
+Convert names to SIDs
+.RE
+.PP
+lookupnames_level
+.RS 4
+Convert names to SIDs
+.RE
+.PP
+enumtrust
+.RS 4
+Enumerate trusted domains
+.RE
+.PP
+enumprivs
+.RS 4
+Enumerate privileges
+.RE
+.PP
+getdispname
+.RS 4
+Get the privilege name
+.RE
+.PP
+lsaenumsid
+.RS 4
+Enumerate the LSA SIDS
+.RE
+.PP
+lsacreateaccount
+.RS 4
+Create a new lsa account
+.RE
+.PP
+lsaenumprivsaccount
+.RS 4
+Enumerate the privileges of an SID
+.RE
+.PP
+lsaenumacctrights
+.RS 4
+Enumerate the rights of an SID
+.RE
+.PP
+lsaaddpriv
+.RS 4
+Assign a privilege to a SID
+.RE
+.PP
+lsadelpriv
+.RS 4
+Revoke a privilege from a SID
+.RE
+.PP
+lsaaddacctrights
+.RS 4
+Add rights to an account
+.RE
+.PP
+lsaremoveacctrights
+.RS 4
+Remove rights from an account
+.RE
+.PP
+lsalookupprivvalue
+.RS 4
+Get a privilege value given its name
+.RE
+.PP
+lsaquerysecobj
+.RS 4
+Query LSA security object
+.RE
+.PP
+lsaquerytrustdominfo
+.RS 4
+Query LSA trusted domains info (given a SID)
+.RE
+.PP
+lsaquerytrustdominfobyname
+.RS 4
+Query LSA trusted domains info (given a name), only works for Windows > 2k
+.RE
+.PP
+lsaquerytrustdominfobysid
+.RS 4
+Query LSA trusted domains info (given a SID)
+.RE
+.PP
+lsasettrustdominfo
+.RS 4
+Set LSA trusted domain info
+.RE
+.PP
+getusername
+.RS 4
+Get username
+.RE
+.PP
+createsecret
+.RS 4
+Create Secret
+.RE
+.PP
+deletesecret
+.RS 4
+Delete Secret
+.RE
+.PP
+querysecret
+.RS 4
+Query Secret
+.RE
+.PP
+setsecret
+.RS 4
+Set Secret
+.RE
+.PP
+retrieveprivatedata
+.RS 4
+Retrieve Private Data
+.RE
+.PP
+storeprivatedata
+.RS 4
+Store Private Data
+.RE
+.PP
+createtrustdom
+.RS 4
+Create Trusted Domain
+.RE
+.PP
+deletetrustdom
+.RS 4
+Delete Trusted Domain
+.RE
+.SS "LSARPC\-DS"
+.PP
+dsroledominfo
+.RS 4
+Get Primary Domain Information
+.RE
+.SS "DFS"
+.PP
+dfsversion
+.RS 4
+Query DFS support
+.RE
+.PP
+dfsadd
+.RS 4
+Add a DFS share
+.RE
+.PP
+dfsremove
+.RS 4
+Remove a DFS share
+.RE
+.PP
+dfsgetinfo
+.RS 4
+Query DFS share info
+.RE
+.PP
+dfsenum
+.RS 4
+Enumerate dfs shares
+.RE
+.PP
+dfsenumex
+.RS 4
+Enumerate dfs shares
+.RE
+.SS "SHUTDOWN"
+.PP
+shutdowninit
+.RS 4
+syntax: shutdown [\-m message]
+.RE
+.PP
+shutdownabort
+.RS 4
+syntax: shutdownabort
+.RE
+.SS "SRVSVC"
+.PP
+srvinfo
+.RS 4
+Server query info
+.RE
+.PP
+netshareenum
+.RS 4
+Enumerate shares
+.RE
+.PP
+netshareenumall
+.RS 4
+Enumerate all shares
+.RE
+.PP
+netsharegetinfo
+.RS 4
+Get Share Info
+.RE
+.PP
+netsharesetinfo
+.RS 4
+Set Share Info
+.RE
+.PP
+netsharesetdfsflags
+.RS 4
+Set DFS flags
+.RE
+.PP
+netfileenum
+.RS 4
+Enumerate open files
+.RE
+.PP
+netremotetod
+.RS 4
+Fetch remote time of day
+.RE
+.PP
+netnamevalidate
+.RS 4
+Validate sharename
+.RE
+.PP
+netfilegetsec
+.RS 4
+Get File security
+.RE
+.PP
+netsessdel
+.RS 4
+Delete Session
+.RE
+.PP
+netsessenum
+.RS 4
+Enumerate Sessions
+.RE
+.PP
+netdiskenum
+.RS 4
+Enumerate Disks
+.RE
+.PP
+netconnenum
+.RS 4
+Enumerate Connections
+.RE
+.PP
+netshareadd
+.RS 4
+Add share
+.RE
+.PP
+netsharedel
+.RS 4
+Delete share
+.RE
+.SS "SAMR"
+.PP
+queryuser
+.RS 4
+Query user info
+.RE
+.PP
+querygroup
+.RS 4
+Query group info
+.RE
+.PP
+queryusergroups
+.RS 4
+Query user groups
+.RE
+.PP
+queryuseraliases
+.RS 4
+Query user aliases
+.RE
+.PP
+querygroupmem
+.RS 4
+Query group membership
+.RE
+.PP
+queryaliasmem
+.RS 4
+Query alias membership
+.RE
+.PP
+queryaliasinfo
+.RS 4
+Query alias info
+.RE
+.PP
+deletealias
+.RS 4
+Delete an alias
+.RE
+.PP
+querydispinfo
+.RS 4
+Query display info
+.RE
+.PP
+querydispinfo2
+.RS 4
+Query display info
+.RE
+.PP
+querydispinfo3
+.RS 4
+Query display info
+.RE
+.PP
+querydominfo
+.RS 4
+Query domain info
+.RE
+.PP
+enumdomusers
+.RS 4
+Enumerate domain users
+.RE
+.PP
+enumdomgroups
+.RS 4
+Enumerate domain groups
+.RE
+.PP
+enumalsgroups
+.RS 4
+Enumerate alias groups
+.RE
+.PP
+enumdomains
+.RS 4
+Enumerate domains
+.RE
+.PP
+createdomuser
+.RS 4
+Create domain user
+.RE
+.PP
+createdomgroup
+.RS 4
+Create domain group
+.RE
+.PP
+createdomalias
+.RS 4
+Create domain alias
+.RE
+.PP
+samlookupnames
+.RS 4
+Look up names
+.RE
+.PP
+samlookuprids
+.RS 4
+Look up names
+.RE
+.PP
+deletedomgroup
+.RS 4
+Delete domain group
+.RE
+.PP
+deletedomuser
+.RS 4
+Delete domain user
+.RE
+.PP
+samquerysecobj
+.RS 4
+Query SAMR security object
+.RE
+.PP
+getdompwinfo
+.RS 4
+Retrieve domain password info
+.RE
+.PP
+getusrdompwinfo
+.RS 4
+Retrieve user domain password info
+.RE
+.PP
+lookupdomain
+.RS 4
+Lookup Domain Name
+.RE
+.PP
+chgpasswd
+.RS 4
+Change user password
+.RE
+.PP
+chgpasswd2
+.RS 4
+Change user password
+.RE
+.PP
+chgpasswd3
+.RS 4
+Change user password
+.RE
+.PP
+getdispinfoidx
+.RS 4
+Get Display Information Index
+.RE
+.PP
+setuserinfo
+.RS 4
+Set user info
+.RE
+.PP
+setuserinfo2
+.RS 4
+Set user info2
+.RE
+.SS "SPOOLSS"
+.PP
+adddriver <arch> <config> [<version>]
+.RS 4
+Execute an AddPrinterDriver() RPC to install the printer driver information on the server\&. Note that the driver files should already exist in the directory returned by
+getdriverdir\&. Possible values for
+\fIarch\fR
+are the same as those for the
+getdriverdir
+command\&. The
+\fIconfig\fR
+parameter is defined as follows:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+Long Driver Name:\e
+Driver File Name:\e
+Data File Name:\e
+Config File Name:\e
+Help File Name:\e
+Language Monitor Name:\e
+Default Data Type:\e
+Comma Separated list of Files
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Any empty fields should be enter as the string "NULL"\&.
+.sp
+Samba does not need to support the concept of Print Monitors since these only apply to local printers whose driver can make use of a bi\-directional link for communication\&. This field should be "NULL"\&. On a remote NT print server, the Print Monitor for a driver must already be installed prior to adding the driver or else the RPC will fail\&.
+.sp
+The
+\fIversion\fR
+parameter lets you specify the printer driver version number\&. If omitted, the default driver version for the specified architecture will be used\&. This option can be used to upload Windows 2000 (version 3) printer drivers\&.
+.RE
+.PP
+addprinter <printername> <sharename> <drivername> <port>
+.RS 4
+Add a printer on the remote server\&. This printer will be automatically shared\&. Be aware that the printer driver must already be installed on the server (see
+adddriver) and the
+\fIport\fRmust be a valid port name (see
+enumports\&.
+.RE
+.PP
+deldriver <driver>
+.RS 4
+Delete the specified printer driver for all architectures\&. This does not delete the actual driver files from the server, only the entry from the server\*(Aqs list of drivers\&.
+.RE
+.PP
+deldriverex <driver> [architecture] [version] [flags]
+.RS 4
+Delete the specified printer driver and optionally files associated with the driver\&. You can limit this action to a specific architecture and a specific version\&. If no architecture is given, all driver files of that driver will be deleted\&.
+\fIflags\fR
+correspond to numeric DPD_* values, i\&.e\&. a value of 3 requests (DPD_DELETE_UNUSED_FILES | DPD_DELETE_SPECIFIC_VERSION)\&.
+.RE
+.PP
+enumdata
+.RS 4
+Enumerate all printer setting data stored on the server\&. On Windows NT clients, these values are stored in the registry, while Samba servers store them in the printers TDB\&. This command corresponds to the MS Platform SDK GetPrinterData() function (* This command is currently unimplemented)\&.
+.RE
+.PP
+enumdataex
+.RS 4
+Enumerate printer data for a key
+.RE
+.PP
+enumkey
+.RS 4
+Enumerate printer keys
+.RE
+.PP
+enumjobs <printer>
+.RS 4
+List the jobs and status of a given printer\&. This command corresponds to the MS Platform SDK EnumJobs() function
+.RE
+.PP
+getjob
+.RS 4
+Get print job
+.RE
+.PP
+setjob
+.RS 4
+Set print job
+.RE
+.PP
+enumports [level]
+.RS 4
+Executes an EnumPorts() call using the specified info level\&. Currently only info levels 1 and 2 are supported\&.
+.RE
+.PP
+enumdrivers [level]
+.RS 4
+Execute an EnumPrinterDrivers() call\&. This lists the various installed printer drivers for all architectures\&. Refer to the MS Platform SDK documentation for more details of the various flags and calling options\&. Currently supported info levels are 1, 2, and 3\&.
+.RE
+.PP
+enumprinters [level]
+.RS 4
+Execute an EnumPrinters() call\&. This lists the various installed and share printers\&. Refer to the MS Platform SDK documentation for more details of the various flags and calling options\&. Currently supported info levels are 1, 2 and 5\&.
+.RE
+.PP
+getdata <printername> <valuename;>
+.RS 4
+Retrieve the data for a given printer setting\&. See the
+enumdata
+command for more information\&. This command corresponds to the GetPrinterData() MS Platform SDK function\&.
+.RE
+.PP
+getdataex
+.RS 4
+Get printer driver data with keyname
+.RE
+.PP
+getdriver <printername>
+.RS 4
+Retrieve the printer driver information (such as driver file, config file, dependent files, etc\&.\&.\&.) for the given printer\&. This command corresponds to the GetPrinterDriver() MS Platform SDK function\&. Currently info level 1, 2, and 3 are supported\&.
+.RE
+.PP
+getdriverdir <arch>
+.RS 4
+Execute a GetPrinterDriverDirectory() RPC to retrieve the SMB share name and subdirectory for storing printer driver files for a given architecture\&. Possible values for
+\fIarch\fR
+are "Windows 4\&.0" (for Windows 95/98), "Windows NT x86", "Windows NT PowerPC", "Windows Alpha_AXP", and "Windows NT R4000"\&.
+.RE
+.PP
+getdriverpackagepath
+.RS 4
+Get print driver package download directory
+.RE
+.PP
+getprinter <printername>
+.RS 4
+Retrieve the current printer information\&. This command corresponds to the GetPrinter() MS Platform SDK function\&.
+.RE
+.PP
+openprinter <printername>
+.RS 4
+Execute an OpenPrinterEx() and ClosePrinter() RPC against a given printer\&.
+.RE
+.PP
+openprinter_ex <printername>
+.RS 4
+Open printer handle
+.RE
+.PP
+setdriver <printername> <drivername>
+.RS 4
+Execute a SetPrinter() command to update the printer driver associated with an installed printer\&. The printer driver must already be correctly installed on the print server\&.
+.sp
+See also the
+enumprinters
+and
+enumdrivers
+commands for obtaining a list of of installed printers and drivers\&.
+.RE
+.PP
+getprintprocdir
+.RS 4
+Get print processor directory
+.RE
+.PP
+addform
+.RS 4
+Add form
+.RE
+.PP
+setform
+.RS 4
+Set form
+.RE
+.PP
+getform
+.RS 4
+Get form
+.RE
+.PP
+deleteform
+.RS 4
+Delete form
+.RE
+.PP
+enumforms
+.RS 4
+Enumerate form
+.RE
+.PP
+setprinter
+.RS 4
+Set printer comment
+.RE
+.PP
+setprinterdata
+.RS 4
+Set REG_SZ printer data
+.RE
+.PP
+setprintername <printername> <newprintername>
+.RS 4
+Set printer name
+.RE
+.PP
+rffpcnex
+.RS 4
+Rffpcnex test
+.RE
+.PP
+printercmp
+.RS 4
+Printer comparison test
+.RE
+.PP
+enumprocs
+.RS 4
+Enumerate Print Processors
+.RE
+.PP
+enumprocdatatypes
+.RS 4
+Enumerate Print Processor Data Types
+.RE
+.PP
+enummonitors
+.RS 4
+Enumerate Print Monitors
+.RE
+.PP
+createprinteric
+.RS 4
+Create Printer IC
+.RE
+.PP
+playgdiscriptonprinteric
+.RS 4
+Create Printer IC
+.RE
+.PP
+getcoreprinterdrivers
+.RS 4
+Get CorePrinterDriver
+.RE
+.PP
+enumpermachineconnections
+.RS 4
+Enumerate Per Machine Connections
+.RE
+.PP
+addpermachineconnection
+.RS 4
+Add Per Machine Connection
+.RE
+.PP
+delpermachineconnection
+.RS 4
+Delete Per Machine Connection
+.RE
+.SS "NETLOGON"
+.PP
+logonctrl2
+.RS 4
+Logon Control 2
+.RE
+.PP
+getanydcname
+.RS 4
+Get trusted DC name
+.RE
+.PP
+getdcname
+.RS 4
+Get trusted PDC name
+.RE
+.PP
+dsr_getdcname
+.RS 4
+Get trusted DC name
+.RE
+.PP
+dsr_getdcnameex
+.RS 4
+Get trusted DC name
+.RE
+.PP
+dsr_getdcnameex2
+.RS 4
+Get trusted DC name
+.RE
+.PP
+dsr_getsitename
+.RS 4
+Get sitename
+.RE
+.PP
+dsr_getforesttrustinfo
+.RS 4
+Get Forest Trust Info
+.RE
+.PP
+logonctrl
+.RS 4
+Logon Control
+.RE
+.PP
+samlogon
+.RS 4
+Sam Logon
+.RE
+.PP
+change_trust_pw
+.RS 4
+Change Trust Account Password
+.RE
+.PP
+gettrustrid
+.RS 4
+Get trust rid
+.RE
+.PP
+dsr_enumtrustdom
+.RS 4
+Enumerate trusted domains
+.RE
+.PP
+dsenumdomtrusts
+.RS 4
+Enumerate all trusted domains in an AD forest
+.RE
+.PP
+deregisterdnsrecords
+.RS 4
+Deregister DNS records
+.RE
+.PP
+netrenumtrusteddomains
+.RS 4
+Enumerate trusted domains
+.RE
+.PP
+netrenumtrusteddomainsex
+.RS 4
+Enumerate trusted domains
+.RE
+.PP
+getdcsitecoverage
+.RS 4
+Get the Site\-Coverage from a DC
+.RE
+.PP
+capabilities
+.RS 4
+Return Capabilities
+.RE
+.PP
+logongetdomaininfo
+.RS 4
+Return LogonGetDomainInfo
+.RE
+.SS "FSRVP"
+.PP
+fss_is_path_sup
+.RS 4
+Check whether a share supports shadow\-copy
+.RE
+.PP
+fss_get_sup_version
+.RS 4
+Get supported FSRVP version from server
+.RE
+.PP
+fss_create_expose
+.RS 4
+Request shadow\-copy creation and exposure
+.RE
+.PP
+fss_delete
+.RS 4
+Request shadow\-copy share deletion
+.RE
+.PP
+fss_has_shadow_copy
+.RS 4
+Check for an associated share shadow\-copy
+.RE
+.PP
+fss_get_mapping
+.RS 4
+Get shadow\-copy share mapping information
+.RE
+.PP
+fss_recovery_complete
+.RS 4
+Flag read\-write snapshot as recovery complete,
+.RE
+.SS "CLUSAPI"
+.PP
+clusapi_open_cluster
+.RS 4
+Open cluster
+.RE
+.PP
+clusapi_get_cluster_name
+.RS 4
+Get cluster name
+.RE
+.PP
+clusapi_get_cluster_version
+.RS 4
+Get cluster version
+.RE
+.PP
+clusapi_get_quorum_resource
+.RS 4
+Get quorum resource
+.RE
+.PP
+clusapi_create_enum
+.RS 4
+Create enum query
+.RE
+.PP
+clusapi_create_enumex
+.RS 4
+Create enumex query
+.RE
+.PP
+clusapi_open_resource
+.RS 4
+Open cluster resource
+.RE
+.PP
+clusapi_online_resource
+.RS 4
+Set cluster resource online
+.RE
+.PP
+clusapi_offline_resource
+.RS 4
+Set cluster resource offline
+.RE
+.PP
+clusapi_get_resource_state
+.RS 4
+Get cluster resource state
+.RE
+.PP
+clusapi_get_cluster_version2
+.RS 4
+Get cluster version2
+.RE
+.PP
+clusapi_pause_node
+.RS 4
+Pause cluster node
+.RE
+.PP
+clusapi_resume_node
+.RS 4
+Resume cluster node
+.RE
+.SS "DRSUAPI"
+.PP
+dscracknames
+.RS 4
+Crack Name
+.RE
+.PP
+dsgetdcinfo
+.RS 4
+Get Domain Controller Info
+.RE
+.PP
+dsgetncchanges
+.RS 4
+Get NC Changes
+.RE
+.PP
+dswriteaccountspn
+.RS 4
+Write Account SPN
+.RE
+.SS "ECHO"
+.PP
+echoaddone
+.RS 4
+Add one to a number
+.RE
+.PP
+echodata
+.RS 4
+Echo data
+.RE
+.PP
+sinkdata
+.RS 4
+Sink data
+.RE
+.PP
+sourcedata
+.RS 4
+Source data
+.RE
+.SS "EPMAPPER"
+.PP
+epmmap
+.RS 4
+Map a binding
+.RE
+.PP
+epmlookup
+.RS 4
+Lookup bindings
+.RE
+.SS "EVENTLOG"
+.PP
+eventlog_readlog
+.RS 4
+Read Eventlog
+.RE
+.PP
+eventlog_numrecord
+.RS 4
+Get number of records
+.RE
+.PP
+eventlog_oldestrecord
+.RS 4
+Get oldest record
+.RE
+.PP
+eventlog_reportevent
+.RS 4
+Report event
+.RE
+.PP
+eventlog_reporteventsource
+.RS 4
+Report event and source
+.RE
+.PP
+eventlog_registerevsource
+.RS 4
+Register event source
+.RE
+.PP
+eventlog_backuplog
+.RS 4
+Backup Eventlog File
+.RE
+.PP
+eventlog_loginfo
+.RS 4
+Get Eventlog Information
+.RE
+.SS "IRemoteWinspool"
+.PP
+winspool_AsyncOpenPrinter
+.RS 4
+Open printer handle
+.RE
+.PP
+winspool_AsyncCorePrinterDriverInstalled
+.RS 4
+Query Core Printer Driver Installed
+.RE
+.SS "NTSVCS"
+.PP
+ntsvcs_getversion
+.RS 4
+Query NTSVCS version
+.RE
+.PP
+ntsvcs_validatedevinst
+.RS 4
+Query NTSVCS device instance
+.RE
+.PP
+ntsvcs_hwprofflags
+.RS 4
+Query NTSVCS HW prof flags
+.RE
+.PP
+ntsvcs_hwprofinfo
+.RS 4
+Query NTSVCS HW prof info
+.RE
+.PP
+ntsvcs_getdevregprop
+.RS 4
+Query NTSVCS device registry property
+.RE
+.PP
+ntsvcs_getdevlistsize
+.RS 4
+Query NTSVCS device list size
+.RE
+.PP
+ntsvcs_getdevlist
+.RS 4
+Query NTSVCS device list
+.RE
+.SS "MDSSVC"
+.PP
+fetch_properties
+.RS 4
+Fetch connection properties
+.RE
+.PP
+fetch_attributes
+.RS 4
+Fetch attributes for a CNID
+.RE
+.SS "WINREG"
+.PP
+winreg_enumkey
+.RS 4
+Enumerate Keys
+.RE
+.PP
+querymultiplevalues
+.RS 4
+Query multiple values
+.RE
+.PP
+querymultiplevalues2
+.RS 4
+Query multiple values
+.RE
+.SS "WITNESS"
+.PP
+GetInterfaceList
+.RS 4
+List the interfaces to which witness client connections can be made
+.RE
+.PP
+Register
+.RS 4
+Register for resource state change notifications of a NetName and IPAddress
+.RE
+.PP
+UnRegister
+.RS 4
+Unregister for notifications from the server
+.RE
+.PP
+AsyncNotify
+.RS 4
+Request notification of registered resource changes from the server
+.RE
+.PP
+RegisterEx
+.RS 4
+Register for resource state change notifications of a NetName, ShareName and multiple IPAddresses
+.RE
+.SS "WKSSVC"
+.PP
+wkssvc_wkstagetinfo
+.RS 4
+Query WKSSVC Workstation Information
+.RE
+.PP
+wkssvc_getjoininformation
+.RS 4
+Query WKSSVC Join Information
+.RE
+.PP
+wkssvc_messagebuffersend
+.RS 4
+Send WKSSVC message
+.RE
+.PP
+wkssvc_enumeratecomputernames
+.RS 4
+Enumerate WKSSVC computer names
+.RE
+.PP
+wkssvc_enumerateusers
+.RS 4
+Enumerate WKSSVC users
+.RE
+.SS "GENERAL OPTIONS"
+.PP
+help
+.RS 4
+Get help on commands
+.RE
+.PP
+?
+.RS 4
+Get help on commands
+.RE
+.PP
+debuglevel
+.RS 4
+Set debug level
+.RE
+.PP
+debug
+.RS 4
+Set debug level
+.RE
+.PP
+list
+.RS 4
+List available commands on pipe
+.RE
+.PP
+exit
+.RS 4
+Exit program
+.RE
+.PP
+quit
+.RS 4
+Exit program
+.RE
+.PP
+sign
+.RS 4
+Force RPC pipe connections to be signed
+.RE
+.PP
+seal
+.RS 4
+Force RPC pipe connections to be sealed
+.RE
+.PP
+packet
+.RS 4
+Force RPC pipe connections with packet authentication level
+.RE
+.PP
+schannel
+.RS 4
+Force RPC pipe connections to be sealed with \*(Aqschannel\*(Aq\&. Force RPC pipe connections to be sealed with \*(Aqschannel\*(Aq\&. Assumes valid machine account to this domain controller\&.
+.RE
+.PP
+schannelsign
+.RS 4
+Force RPC pipe connections to be signed (not sealed) with \*(Aqschannel\*(Aq\&. Assumes valid machine account to this domain controller\&.
+.RE
+.PP
+timeout
+.RS 4
+Set timeout (in milliseconds) for RPC operations
+.RE
+.PP
+transport
+.RS 4
+Choose ncacn transport for RPC operations
+.RE
+.PP
+none
+.RS 4
+Force RPC pipe connections to have no special properties
+.RE
+.SH "BUGS"
+.PP
+rpcclient
+is designed as a developer testing tool and may not be robust in certain areas (such as command line parsing)\&. It has been known to generate a core dump upon failures when invalid parameters where passed to the interpreter\&.
+.PP
+From Luke Leighton\*(Aqs original rpcclient man page:
+.PP
+\fIWARNING!\fR
+The MSRPC over SMB code has been developed from examining Network traces\&. No documentation is available from the original creators (Microsoft) on how MSRPC over SMB works, or how the individual MSRPC services work\&. Microsoft\*(Aqs implementation of these services has been demonstrated (and reported) to be\&.\&.\&. a bit flaky in places\&.
+.PP
+The development of Samba\*(Aqs implementation is also a bit rough, and as more of the services are understood, it can even result in versions of
+\fBsmbd\fR(8)
+and
+\fBrpcclient\fR(1)
+that are incompatible for some commands or services\&. Additionally, the developers are sending reports to Microsoft, and problems found or reported to Microsoft are fixed in Service Packs, which may result in incompatibilities\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The original rpcclient man page was written by Matthew Geddes, Luke Kenneth Casson Leighton, and rewritten by Gerald Carter\&. The conversion to DocBook for Samba 2\&.2 was done by Gerald Carter\&. The conversion to DocBook XML 4\&.2 for Samba 3\&.0 was done by Alexander Bokovoy\&.
diff --git a/docs/manpages/samba-bgqd.8 b/docs/manpages/samba-bgqd.8
new file mode 100644
index 0000000000..ca8dfc2fe8
--- /dev/null
+++ b/docs/manpages/samba-bgqd.8
@@ -0,0 +1,44 @@
+'\" t
+.\"     Title: samba-bgqd
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SAMBA\-BGQD" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+samba-bgqd \- This is an internal helper program performing asynchronous printing\-related jobs\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+samba\-bgqd
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+samba\-bgqd is an helper program to be spawned by smbd or spoolssd to perform jobs like updating the printer list or other management tasks asynchronously on demand\&. It is not intended to be called by users or administrators\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/samba-regedit.8 b/docs/manpages/samba-regedit.8
new file mode 100644
index 0000000000..baab44f424
--- /dev/null
+++ b/docs/manpages/samba-regedit.8
@@ -0,0 +1,379 @@
+'\" t
+.\"     Title: samba-regedit
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SAMBA\-REGEDIT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+samba-regedit \- ncurses based tool to manage the Samba registry
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+samba\-regedit [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER] [\-O|\-\-socket\-options=SOCKETOPTIONS] [\-m|\-\-max\-protocol=MAXPROTOCOL] [\-n|\-\-netbiosname=NETBIOSNAME] [\-\-netbios\-scope=SCOPE] [\-W|\-\-workgroup=WORKGROUP] [\-\-realm=REALM] [\-U|\-\-user=[DOMAIN/]USERNAME[%PASSWORD]] [\-N|\-\-no\-pass] [\-\-password=STRING] [\-\-pw\-nt\-hash] [\-A|\-\-authentication\-file=FILE] [\-P|\-\-machine\-pass] [\-\-simple\-bind\-dn=DN] [\-\-use\-kerberos=desired|required|off] [\-\-use\-krb5\-ccache=CCACHE] [\-\-use\-winbind\-ccache] [\-\-client\-protection=sign|encrypt|off] [\-V|\-\-version]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+samba\-regedit
+is a ncurses based tool to manage the Samba registry\&. It can be used to show/edit registry keys/subkeys and their values\&.
+.SH "OPTIONS"
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER
+.RS 4
+This option is used to determine what naming services and in what order to resolve host names to IP addresses\&. The option takes a space\-separated string of different name resolution options\&. The best ist to wrap the whole \-\-name\-resolve=NAME\-RESOLVE\-ORDER into quotes\&.
+.sp
+The options are: "lmhosts", "host", "wins" and "bcast"\&. They cause names to be resolved as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBlmhosts\fR: Lookup an IP address in the Samba lmhosts file\&. If the line in lmhosts has no name type attached to the NetBIOS name (see the
+\fBlmhosts\fR(5)
+for details) then any name type matches for lookup\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBhost\fR: Do a standard host name to IP address resolution, using the system
+/etc/hosts, NIS, or DNS lookups\&. This method of name resolution is operating system dependent, for instance on IRIX or Solaris this may be controlled by the
+/etc/nsswitch\&.conf
+file)\&. Note that this method is only used if the NetBIOS name type being queried is the 0x20 (server) name type, otherwise it is ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwins\fR: Query a name with the IP address listed in the
+\fIwins server\fR
+parameter\&. If no WINS server has been specified this method will be ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBbcast\fR: Do a broadcast on each of the known local interfaces listed in the
+\fIinterfaces\fR
+parameter\&. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet\&.
+.RE
+.sp
+.RE
+If this parameter is not set then the name resolve order defined in the
+smb\&.conf
+file parameter (\m[blue]\fBname resolve order\fR\m[]) will be used\&.
+.sp
+The default order is lmhosts, host, wins, bcast\&. Without this parameter or any entry in the
+\m[blue]\fBname resolve order\fR\m[]
+parameter of the
+smb\&.conf
+file, the name resolution methods will be attempted in this order\&.
+.RE
+.PP
+\-O|\-\-socket\-options=SOCKETOPTIONS
+.RS 4
+TCP socket options to set on the client socket\&. See the socket options parameter in the
+smb\&.conf
+manual page for the list of valid options\&.
+.RE
+.PP
+\-m|\-\-max\-protocol=MAXPROTOCOL
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported by the client\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient max protocol\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-n|\-\-netbiosname=NETBIOSNAME
+.RS 4
+This option allows you to override the NetBIOS name that Samba uses for itself\&. This is identical to setting the
+\m[blue]\fBnetbios name\fR\m[]
+parameter in the
+smb\&.conf
+file\&. However, a command line setting will take precedence over settings in
+smb\&.conf\&.
+.RE
+.PP
+\-\-netbios\-scope=SCOPE
+.RS 4
+This specifies a NetBIOS scope that
+nmblookup
+will use to communicate with when generating NetBIOS names\&. For details on the use of NetBIOS scopes, see rfc1001\&.txt and rfc1002\&.txt\&. NetBIOS scopes are
+\fIvery\fR
+rarely used, only set this parameter if you are the system administrator in charge of all the NetBIOS systems you communicate with\&.
+.RE
+.PP
+\-W|\-\-workgroup=WORKGROUP
+.RS 4
+Set the SMB domain of the username\&. This overrides the default domain which is the domain defined in smb\&.conf\&. If the domain specified is the same as the servers NetBIOS name, it causes the client to log on using the servers local SAM (as opposed to the Domain SAM)\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBworkgroup\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-r|\-\-realm=REALM
+.RS 4
+Set the realm for the domain\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBrealm\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-U|\-\-user=[DOMAIN\e]USERNAME[%PASSWORD]
+.RS 4
+Sets the SMB username or username and password\&.
+.sp
+If %PASSWORD is not specified, the user will be prompted\&. The client will first check the
+\fBUSER\fR
+environment variable (which is also permitted to also contain the password seperated by a %), then the
+\fBLOGNAME\fR
+variable (which is not permitted to contain a password) and if either exists, the value is used\&. If these environmental variables are not found, the username found in a Kerberos Credentials cache may be used\&.
+.sp
+A third option is to use a credentials file which contains the plaintext of the username and password\&. This option is mainly provided for scripts where the admin does not wish to pass the credentials on the command line or via environment variables\&. If this method is used, make certain that the permissions on the file restrict access from unwanted users\&. See the
+\fI\-A\fR
+for more details\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-N|\-\-no\-pass
+.RS 4
+If specified, this parameter suppresses the normal password prompt from the client to the user\&. This is useful when accessing a service that does not require a password\&.
+.sp
+Unless a password is specified on the command line or this parameter is specified, the client will request a password\&.
+.sp
+If a password is specified on the command line and this option is also defined the password on the command line will be silently ignored and no password will be used\&.
+.RE
+.PP
+\-\-password
+.RS 4
+Specify the password on the commandline\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+If \-\-password is not specified, the tool will check the
+\fBPASSWD\fR
+environment variable, followed by
+\fBPASSWD_FD\fR
+which is expected to contain an open file descriptor (FD) number\&.
+.sp
+Finally it will check
+\fBPASSWD_FILE\fR
+(containing a file path to be opened)\&. The file should only contain the password\&. Make certain that the permissions on the file restrict access from unwanted users!
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-\-pw\-nt\-hash
+.RS 4
+The supplied password is the NT hash\&.
+.RE
+.PP
+\-A|\-\-authentication\-file=filename
+.RS 4
+This option allows you to specify a file from which to read the username and password used in the connection\&. The format of the file is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+				username = <value>
+				password = <value>
+				domain   = <value>
+			
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Make certain that the permissions on the file restrict access from unwanted users!
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Use stored machine account password\&.
+.RE
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind\&.
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-use\-krb5\-ccache=CCACHE
+.RS 4
+Specifies the credential cache location for Kerberos authentication\&.
+.sp
+This will set \-\-use\-kerberos=required too\&.
+.RE
+.PP
+\-\-use\-winbind\-ccache
+.RS 4
+Try to use the credential cache by winbind\&.
+.RE
+.PP
+\-\-client\-protection=sign|encrypt|off
+.RS 4
+Sets the connection protection the client tool should use\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient protection\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.sp
+In case you need more fine grained control you can use:
+\-\-option=clientsmbencrypt=OPTION,
+\-\-option=clientipcsigning=OPTION,
+\-\-option=clientsigning=OPTION\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbd\fR(8),
+\fBsamba\fR(7)
+and
+\fBnet\fR(8)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The samba\-regedit man page was written by Karolin Seeger\&.
diff --git a/docs/manpages/samba-tool.8 b/docs/manpages/samba-tool.8
new file mode 100644
index 0000000000..a3a6dadc8f
--- /dev/null
+++ b/docs/manpages/samba-tool.8
@@ -0,0 +1,1199 @@
+'\" t
+.\"     Title: samba-tool
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SAMBA\-TOOL" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+samba-tool \- Main Samba administration tool\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+samba\-tool [\-h] [\-W\ myworkgroup] [\-U\ user] [\-d\ debuglevel] [\-\-v]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.SH "OPTIONS"
+.PP
+\-h|\-\-help
+.RS 4
+Show this help message and exit
+.RE
+.PP
+\-r|\-\-realm=REALM
+.RS 4
+Set the realm for the domain\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBrealm\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind\&.
+.RE
+.PP
+\-\-password
+.RS 4
+Specify the password on the commandline\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+If \-\-password is not specified, the tool will check the
+\fBPASSWD\fR
+environment variable, followed by
+\fBPASSWD_FD\fR
+which is expected to contain an open file descriptor (FD) number\&.
+.sp
+Finally it will check
+\fBPASSWD_FILE\fR
+(containing a file path to be opened)\&. The file should only contain the password\&. Make certain that the permissions on the file restrict access from unwanted users!
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-U|\-\-user=[DOMAIN\e]USERNAME[%PASSWORD]
+.RS 4
+Sets the SMB username or username and password\&.
+.sp
+If %PASSWORD is not specified, the user will be prompted\&. The client will first check the
+\fBUSER\fR
+environment variable (which is also permitted to also contain the password seperated by a %), then the
+\fBLOGNAME\fR
+variable (which is not permitted to contain a password) and if either exists, the value is used\&. If these environmental variables are not found, the username found in a Kerberos Credentials cache may be used\&.
+.sp
+A third option is to use a credentials file which contains the plaintext of the username and password\&. This option is mainly provided for scripts where the admin does not wish to pass the credentials on the command line or via environment variables\&. If this method is used, make certain that the permissions on the file restrict access from unwanted users\&. See the
+\fI\-A\fR
+for more details\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-W|\-\-workgroup=WORKGROUP
+.RS 4
+Set the SMB domain of the username\&. This overrides the default domain which is the domain defined in smb\&.conf\&. If the domain specified is the same as the servers NetBIOS name, it causes the client to log on using the servers local SAM (as opposed to the Domain SAM)\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBworkgroup\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-N|\-\-no\-pass
+.RS 4
+If specified, this parameter suppresses the normal password prompt from the client to the user\&. This is useful when accessing a service that does not require a password\&.
+.sp
+Unless a password is specified on the command line or this parameter is specified, the client will request a password\&.
+.sp
+If a password is specified on the command line and this option is also defined the password on the command line will be silently ignored and no password will be used\&.
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-use\-krb5\-ccache=CCACHE
+.RS 4
+Specifies the credential cache location for Kerberos authentication\&.
+.sp
+This will set \-\-use\-kerberos=required too\&.
+.RE
+.PP
+\-\-ipaddress=IPADDRESS
+.RS 4
+IP address of the server
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.SH "COMMANDS"
+.SS "computer"
+.PP
+Manage computer accounts\&.
+.SS "computer add computername [options]"
+.PP
+Add a new computer to the Active Directory Domain\&.
+.PP
+The new computer name specified on the command is the sAMAccountName, with or without the trailing dollar sign\&.
+.PP
+\-\-computerou=COMPUTEROU
+.RS 4
+DN of alternative location (with or without domainDN counterpart) to default CN=Computers in which new computer object will be created\&. E\&.g\&. \*(AqOU=OUname\*(Aq\&.
+.RE
+.PP
+\-\-description=DESCRIPTION
+.RS 4
+The new computers\*(Aqs description\&.
+.RE
+.PP
+\-\-ip\-address=IP_ADDRESS_LIST
+.RS 4
+IPv4 address for the computer\*(Aqs A record, or IPv6 address for AAAA record, can be provided multiple times\&.
+.RE
+.PP
+\-\-service\-principal\-name=SERVICE_PRINCIPAL_NAME_LIST
+.RS 4
+Computer\*(Aqs Service Principal Name, can be provided multiple times\&.
+.RE
+.PP
+\-\-prepare\-oldjoin
+.RS 4
+Prepare enabled machine account for oldjoin mechanism\&.
+.RE
+.SS "computer create computername [options]"
+.PP
+Add a new computer\&. This is a synonym for the
+samba\-tool computer add
+command and is available for compatibility reasons only\&. Please use
+samba\-tool computer add
+instead\&.
+.SS "computer delete computername [options]"
+.PP
+Delete an existing computer account\&.
+.PP
+The computer name specified on the command is the sAMAccountName, with or without the trailing dollar sign\&.
+.SS "computer edit computername"
+.PP
+Edit a computer AD object\&.
+.PP
+The computer name specified on the command is the sAMAccountName, with or without the trailing dollar sign\&.
+.PP
+\-\-editor=EDITOR
+.RS 4
+Specifies the editor to use instead of the system default, or \*(Aqvi\*(Aq if no system default is set\&.
+.RE
+.SS "computer list"
+.PP
+List all computers\&.
+.SS "computer move computername new_parent_dn [options]"
+.PP
+This command moves a computer account into the specified organizational unit or container\&.
+.PP
+The computername specified on the command is the sAMAccountName, with or without the trailing dollar sign\&.
+.PP
+The name of the organizational unit or container can be specified as a full DN or without the domainDN component\&.
+.SS "computer show computername [options]"
+.PP
+Display a computer AD object\&.
+.PP
+The computer name specified on the command is the sAMAccountName, with or without the trailing dollar sign\&.
+.PP
+\-\-attributes=USER_ATTRS
+.RS 4
+Comma separated list of attributes, which will be printed\&.
+.RE
+.SS "contact"
+.PP
+Manage contacts\&.
+.SS "contact add [contactname] [options]"
+.PP
+Add a new contact to the Active Directory Domain\&.
+.PP
+The name of the new contact can be specified by the first argument \*(Aqcontactname\*(Aq or the \-\-given\-name, \-\-initial and \-\-surname arguments\&. If no \*(Aqcontactname\*(Aq is given, contact\*(Aqs name will be made up of the given arguments by combining the given\-name, initials and surname\&. Each argument is optional\&. A dot (\*(Aq\&.\*(Aq) will be appended to the initials automatically\&.
+.PP
+\-\-ou=OU
+.RS 4
+DN of alternative location (with or without domainDN counterpart) in which the new contact will be created\&. E\&.g\&. \*(AqOU=OUname\*(Aq\&. Default is the domain base\&.
+.RE
+.PP
+\-\-description=DESCRIPTION
+.RS 4
+The new contacts\*(Aqs description\&.
+.RE
+.PP
+\-\-surname=SURNAME
+.RS 4
+Contact\*(Aqs surname\&.
+.RE
+.PP
+\-\-given\-name=GIVEN_NAME
+.RS 4
+Contact\*(Aqs given name\&.
+.RE
+.PP
+\-\-initials=INITIALS
+.RS 4
+Contact\*(Aqs initials\&.
+.RE
+.PP
+\-\-display\-name=DISPLAY_NAME
+.RS 4
+Contact\*(Aqs display name\&.
+.RE
+.PP
+\-\-job\-title=JOB_TITLE
+.RS 4
+Contact\*(Aqs job title\&.
+.RE
+.PP
+\-\-department=DEPARTMENT
+.RS 4
+Contact\*(Aqs department\&.
+.RE
+.PP
+\-\-company=COMPANY
+.RS 4
+Contact\*(Aqs company\&.
+.RE
+.PP
+\-\-mail\-address=MAIL_ADDRESS
+.RS 4
+Contact\*(Aqs email address\&.
+.RE
+.PP
+\-\-internet\-address=INTERNET_ADDRESS
+.RS 4
+Contact\*(Aqs home page\&.
+.RE
+.PP
+\-\-telephone\-number=TELEPHONE_NUMBER
+.RS 4
+Contact\*(Aqs phone number\&.
+.RE
+.PP
+\-\-mobile\-number=MOBILE_NUMBER
+.RS 4
+Contact\*(Aqs mobile phone number\&.
+.RE
+.PP
+\-\-physical\-delivery\-office=PHYSICAL_DELIVERY_OFFICE
+.RS 4
+Contact\*(Aqs office location\&.
+.RE
+.SS "contact create [contactname] [options]"
+.PP
+Add a new contact\&. This is a synonym for the
+samba\-tool contact add
+command and is available for compatibility reasons only\&. Please use
+samba\-tool contact add
+instead\&.
+.SS "contact delete contactname [options]"
+.PP
+Delete an existing contact\&.
+.PP
+The contactname specified on the command is the common name or the distinguished name of the contact object\&. The distinguished name of the contact can be specified with or without the domainDN component\&.
+.SS "contact edit contactname"
+.PP
+Modify a contact AD object\&.
+.PP
+The contactname specified on the command is the common name or the distinguished name of the contact object\&. The distinguished name of the contact can be specified with or without the domainDN component\&.
+.PP
+\-\-editor=EDITOR
+.RS 4
+Specifies the editor to use instead of the system default, or \*(Aqvi\*(Aq if no system default is set\&.
+.RE
+.SS "contact list [options]"
+.PP
+List all contacts\&.
+.PP
+\-\-full\-dn
+.RS 4
+Display contact\*(Aqs full DN instead of the name\&.
+.RE
+.SS "contact move contactname new_parent_dn [options]"
+.PP
+This command moves a contact into the specified organizational unit or container\&.
+.PP
+The contactname specified on the command is the common name or the distinguished name of the contact object\&. The distinguished name of the contact can be specified with or without the domainDN component\&.
+.SS "contact show contactname [options]"
+.PP
+Display a contact AD object\&.
+.PP
+The contactname specified on the command is the common name or the distinguished name of the contact object\&. The distinguished name of the contact can be specified with or without the domainDN component\&.
+.PP
+\-\-attributes=CONTACT_ATTRS
+.RS 4
+Comma separated list of attributes, which will be printed\&.
+.RE
+.SS "contact rename contactname [options]"
+.PP
+Rename a contact and related attributes\&.
+.PP
+This command allows to set the contact\*(Aqs name related attributes\&. The contact\*(Aqs CN will be renamed automatically\&. The contact\*(Aqs new CN will be made up by combining the given\-name, initials and surname\&. A dot (\*(Aq\&.\*(Aq) will be appended to the initials automatically, if required\&. Use the \-\-force\-new\-cn option to specify the new CN manually and \-\-reset\-cn to reset this change\&.
+.PP
+Use an empty attribute value to remove the specified attribute\&.
+.PP
+The contact name specified on the command is the CN\&.
+.PP
+\-\-surname=SURNAME
+.RS 4
+New surname\&.
+.RE
+.PP
+\-\-given\-name=GIVEN_NAME
+.RS 4
+New given name\&.
+.RE
+.PP
+\-\-initials=INITIALS
+.RS 4
+New initials\&.
+.RE
+.PP
+\-\-force\-new\-cn=NEW_CN
+.RS 4
+Specify a new CN (RDN) instead of using a combination of the given name, initials and surname\&.
+.RE
+.PP
+\-\-reset\-cn
+.RS 4
+Set the CN to the default combination of given name, initials and surname\&.
+.RE
+.PP
+\-\-display\-name=DISPLAY_NAME
+.RS 4
+New display name\&.
+.RE
+.PP
+\-\-mail\-address=MAIL_ADDRESS
+.RS 4
+New email address\&.
+.RE
+.SS "dbcheck"
+.PP
+Check the local AD database for errors\&.
+.SS "delegation"
+.PP
+Manage Delegations\&.
+.SS "delegation add-service accountname principal [options]"
+.PP
+Add a service principal as msDS\-AllowedToDelegateTo\&.
+.SS "delegation del-service accountname principal [options]"
+.PP
+Delete a service principal as msDS\-AllowedToDelegateTo\&.
+.SS "delegation for-any-protocol accountname [(on|off)] [options]"
+.PP
+Set/unset UF_TRUSTED_TO_AUTHENTICATE_FOR_DELEGATION (S4U2Proxy) for an account\&.
+.SS "delegation for-any-service accountname [(on|off)] [options]"
+.PP
+Set/unset UF_TRUSTED_FOR_DELEGATION for an account\&.
+.SS "delegation show accountname [options]	"
+.PP
+Show the delegation setting of an account\&.
+.SS "dns"
+.PP
+Manage Domain Name Service (DNS)\&.
+.SS "dns add server zone name A|AAAA|PTR|CNAME|NS|MX|SRV|TXT data"
+.PP
+Add a DNS record\&.
+.SS "dns delete server zone name A|AAAA|PTR|CNAME|NS|MX|SRV|TXT data"
+.PP
+Delete a DNS record\&.
+.SS "dns query server zone name A|AAAA|PTR|CNAME|NS|MX|SRV|TXT|ALL [options] data"
+.PP
+Query a name\&.
+.SS "dns roothints server [name] [options]"
+.PP
+Query root hints\&.
+.SS "dns serverinfo server [options]"
+.PP
+Query server information\&.
+.SS "dns update server zone name A|AAAA|PTR|CNAME|NS|MX|SRV|TXT olddata newdata"
+.PP
+Update a DNS record\&.
+.SS "dns zonecreate server zone [options]"
+.PP
+Create a zone\&.
+.SS "dns zonedelete server zone [options]"
+.PP
+Delete a zone\&.
+.SS "dns zoneinfo server zone [options]"
+.PP
+Query zone information\&.
+.SS "dns zonelist server [options]"
+.PP
+List zones\&.
+.SS "domain"
+.PP
+Manage Domain\&.
+.SS "domain backup"
+.PP
+Create or restore a backup of the domain\&.
+.SS "domain backup offline"
+.PP
+Backup (with proper locking) local domain directories into a tar file\&.
+.SS "domain backup online"
+.PP
+Copy a running DC\*(Aqs current DB into a backup tar file\&.
+.SS "domain backup rename"
+.PP
+Copy a running DC\*(Aqs DB to backup file, renaming the domain in the process\&.
+.SS "domain backup restore"
+.PP
+Restore the domain\*(Aqs DB from a backup\-file\&.
+.SS "domain classicupgrade [options] classic_smb_conf"
+.PP
+Upgrade from Samba classic (NT4\-like) database to Samba AD DC database\&.
+.SS "domain dcpromo dnsdomain [DC|RODC] [options]"
+.PP
+Promote an existing domain member or NT4 PDC to an AD DC\&.
+.SS "domain demote"
+.PP
+Demote ourselves from the role of domain controller\&.
+.SS "domain exportkeytab keytab [options]"
+.PP
+Dumps Kerberos keys of the domain into a keytab\&.
+.SS "domain info ip_address [options]"
+.PP
+Print basic info about a domain and the specified DC\&.
+.SS "domain join dnsdomain [DC|RODC|MEMBER|SUBDOMAIN] [options]"
+.PP
+Join a domain as either member or backup domain controller\&.
+.SS "domain level show|raise options [options]"
+.PP
+Show/raise domain and forest function levels\&.
+.SS "domain passwordsettings show|set options [options]"
+.PP
+Show/set password settings\&.
+.SS "domain passwordsettings pso"
+.PP
+Manage fine\-grained Password Settings Objects (PSOs)\&.
+.SS "domain passwordsettings pso apply pso-name user-or-group-name [options]"
+.PP
+Applies a PSO\*(Aqs password policy to a user or group\&.
+.SS "domain passwordsettings pso create pso-name precedence [options]"
+.PP
+Creates a new Password Settings Object (PSO)\&.
+.SS "domain passwordsettings pso delete pso-name [options]"
+.PP
+Deletes a Password Settings Object (PSO)\&.
+.SS "domain passwordsettings pso list [options]"
+.PP
+Lists all Password Settings Objects (PSOs)\&.
+.SS "domain passwordsettings pso set pso-name [options]"
+.PP
+Modifies a Password Settings Object (PSO)\&.
+.SS "domain passwordsettings pso show user-name [options]"
+.PP
+Displays a Password Settings Object (PSO)\&.
+.SS "domain passwordsettings pso show-user pso-name [options]"
+.PP
+Displays the Password Settings that apply to a user\&.
+.SS "domain passwordsettings pso unapply pso-name user-or-group-name [options]"
+.PP
+Updates a PSO to no longer apply to a user or group\&.
+.SS "domain provision"
+.PP
+Promote an existing domain member or NT4 PDC to an AD DC\&.
+.SS "domain trust"
+.PP
+Domain and forest trust management\&.
+.SS "domain trust create DOMAIN options [options]"
+.PP
+Create a domain or forest trust\&.
+.SS "domain trust delete DOMAIN options [options]"
+.PP
+Delete a domain trust\&.
+.SS "domain trust list options [options]"
+.PP
+List domain trusts\&.
+.SS "domain trust namespaces [DOMAIN] options [options]"
+.PP
+Manage forest trust namespaces\&.
+.SS "domain trust show DOMAIN options [options]"
+.PP
+Show trusted domain details\&.
+.SS "domain trust validate DOMAIN options [options]"
+.PP
+Validate a domain trust\&.
+.SS "drs"
+.PP
+Manage Directory Replication Services (DRS)\&.
+.SS "drs bind"
+.PP
+Show DRS capabilities of a server\&.
+.SS "drs kcc"
+.PP
+Trigger knowledge consistency center run\&.
+.SS "drs options"
+.PP
+Query or change
+\fIoptions\fR
+for NTDS Settings object of a domain controller\&.
+.SS "drs replicate destination_DC source_DC NC [options]"
+.PP
+Replicate a naming context between two DCs\&.
+.SS "drs showrepl"
+.PP
+Show replication status\&. The
+[\-\-json]
+option results in JSON output, and with the
+[\-\-summary]
+option produces very little output when the replication status seems healthy\&.
+.SS "dsacl"
+.PP
+Administer DS ACLs
+.SS "dsacl set"
+.PP
+Modify access list on a directory object\&.
+.SS "forest"
+.PP
+Manage Forest configuration\&.
+.SS "forest directory_service"
+.PP
+Manage directory_service behaviour for the forest\&.
+.SS "forest directory_service dsheuristics VALUE"
+.PP
+Modify dsheuristics directory_service configuration for the forest\&.
+.SS "forest directory_service show"
+.PP
+Show current directory_service configuration for the forest\&.
+.SS "fsmo"
+.PP
+Manage Flexible Single Master Operations (FSMO)\&.
+.SS "fsmo seize [options]"
+.PP
+Seize the role\&.
+.SS "fsmo show"
+.PP
+Show the roles\&.
+.SS "fsmo transfer [options]"
+.PP
+Transfer the role\&.
+.SS "gpo"
+.PP
+Manage Group Policy Objects (GPO)\&.
+.SS "gpo create displayname [options]"
+.PP
+Create an empty GPO\&.
+.SS "gpo del gpo [options]"
+.PP
+Delete GPO\&.
+.SS "gpo dellink container_dn gpo [options]"
+.PP
+Delete GPO link from a container\&.
+.SS "gpo fetch gpo [options]"
+.PP
+Download a GPO\&.
+.SS "gpo getinheritance container_dn [options]"
+.PP
+Get inheritance flag for a container\&.
+.SS "gpo getlink container_dn [options]"
+.PP
+List GPO Links for a container\&.
+.SS "gpo list username [options]"
+.PP
+List GPOs for an account\&.
+.SS "gpo listall"
+.PP
+List all GPOs\&.
+.SS "gpo listcontainers gpo [options]"
+.PP
+List all linked containers for a GPO\&.
+.SS "gpo setinheritance container_dn block|inherit [options]"
+.PP
+Set inheritance flag on a container\&.
+.SS "gpo setlink container_dn gpo [options]"
+.PP
+Add or Update a GPO link to a container\&.
+.SS "gpo show gpo [options]"
+.PP
+Show information for a GPO\&.
+.SS "gpo manage symlink list"
+.PP
+List VGP Symbolic Link Group Policy from the sysvol
+.SS "gpo manage symlink add"
+.PP
+Adds a VGP Symbolic Link Group Policy to the sysvol
+.SS "gpo manage symlink remove"
+.PP
+Removes a VGP Symbolic Link Group Policy from the sysvol
+.SS "gpo manage files list"
+.PP
+List VGP Files Group Policy from the sysvol
+.SS "gpo manage files add"
+.PP
+Add VGP Files Group Policy to the sysvol
+.SS "gpo manage files remove"
+.PP
+Remove VGP Files Group Policy from the sysvol
+.SS "gpo manage openssh list"
+.PP
+List VGP OpenSSH Group Policy from the sysvol
+.SS "gpo manage openssh set"
+.PP
+Sets a VGP OpenSSH Group Policy to the sysvol
+.SS "gpo manage sudoers add"
+.PP
+Adds a Samba Sudoers Group Policy to the sysvol\&.
+.SS "gpo manage sudoers list"
+.PP
+List Samba Sudoers Group Policy from the sysvol\&.
+.SS "gpo manage sudoers remove"
+.PP
+Removes a Samba Sudoers Group Policy from the sysvol\&.
+.SS "gpo manage scripts startup list"
+.PP
+List VGP Startup Script Group Policy from the sysvol
+.SS "gpo manage scripts startup add"
+.PP
+Adds VGP Startup Script Group Policy to the sysvol
+.SS "gpo manage scripts startup remove"
+.PP
+Removes VGP Startup Script Group Policy from the sysvol
+.SS "gpo manage motd list"
+.PP
+List VGP MOTD Group Policy from the sysvol\&.
+.SS "gpo manage motd set"
+.PP
+Sets a VGP MOTD Group Policy to the sysvol
+.SS "gpo manage issue list"
+.PP
+List VGP Issue Group Policy from the sysvol\&.
+.SS "gpo manage issue set"
+.PP
+Sets a VGP Issue Group Policy to the sysvol
+.SS "gpo manage access add"
+.PP
+Adds a VGP Host Access Group Policy to the sysvol
+.SS "gpo manage access list"
+.PP
+List VGP Host Access Group Policy from the sysvol
+.SS "gpo manage access remove"
+.PP
+Remove a VGP Host Access Group Policy from the sysvol
+.SS "group"
+.PP
+Manage groups\&.
+.SS "group add groupname [options]"
+.PP
+Create a new AD group\&.
+.SS "group create groupname [options]"
+.PP
+Add a new AD group\&. This is a synonym for the
+samba\-tool group add
+command and is available for compatibility reasons only\&. Please use
+samba\-tool group add
+instead\&.
+.SS "group addmembers groupname members [options]"
+.PP
+Add members to an AD group\&.
+.SS "group delete groupname [options]"
+.PP
+Delete an AD group\&.
+.SS "group edit groupname"
+.PP
+Edit a group AD object\&.
+.PP
+\-\-editor=EDITOR
+.RS 4
+Specifies the editor to use instead of the system default, or \*(Aqvi\*(Aq if no system default is set\&.
+.RE
+.SS "group list"
+.PP
+List all groups\&.
+.SS "group listmembers groupname [options]"
+.PP
+List all members of the specified AD group\&.
+.PP
+By default the sAMAccountNames are listed\&. If no sAMAccountName is available, the CN will be used instead\&.
+.PP
+\-\-full\-dn
+.RS 4
+List the distinguished names instead of the sAMAccountNames\&.
+.RE
+.PP
+\-\-hide\-expired
+.RS 4
+Do not list expired group members\&.
+.RE
+.PP
+\-\-hide\-disabled
+.RS 4
+Do not list disabled group members\&.
+.RE
+.SS "group move groupname new_parent_dn [options]"
+.PP
+This command moves a group into the specified organizational unit or container\&.
+.PP
+The groupname specified on the command is the sAMAccountName\&.
+.PP
+The name of the organizational unit or container can be specified as a full DN or without the domainDN component\&.
+.PP
+
+.SS "group removemembers groupname members [options]"
+.PP
+Remove members from the specified AD group\&.
+.SS "group show groupname [options]"
+.PP
+Show group object and it\*(Aqs attributes\&.
+.SS "group stats [options]"
+.PP
+Show statistics for overall groups and group memberships\&.
+.SS "group rename groupname [options]"
+.PP
+Rename a group and related attributes\&.
+.PP
+This command allows to set the group\*(Aqs name related attributes\&. The group\*(Aqs CN will be renamed automatically\&. The group\*(Aqs CN will be the sAMAccountName\&. Use the \-\-force\-new\-cn option to specify the new CN manually and the \-\-reset\-cn to reset this change\&.
+.PP
+Use an empty attribute value to remove the specified attribute\&.
+.PP
+The groupname specified on the command is the sAMAccountName\&.
+.PP
+\-\-force\-new\-cn=NEW_CN
+.RS 4
+Specify a new CN (RDN) instead of using the sAMAccountName\&.
+.RE
+.PP
+\-\-reset\-cn
+.RS 4
+Set the CN to the sAMAccountName\&.
+.RE
+.PP
+\-\-mail\-address=MAIL_ADDRESS
+.RS 4
+New mail address
+.RE
+.PP
+\-\-samaccountname=SAMACCOUNTNAME
+.RS 4
+New account name (sAMAccountName/logon name)
+.RE
+.SS "ldapcmp \fIURL1\fR \fIURL2\fR \fIdomain|configuration|schema|dnsdomain|dnsforest\fR [options]"
+.PP
+Compare two LDAP databases\&.
+.SS "ntacl"
+.PP
+Manage NT ACLs\&.
+.SS "ntacl changedomsid original-domain-SID new-domain-SID file [options]"
+.PP
+Change the domain SID for ACLs\&. Can be used to change all entries in acl_xattr when the machine\*(Aqs SID has accidentally changed or the data set has been copied to another machine either via backup/restore or rsync\&.
+.PP
+\-\-use\-ntvfs
+.RS 4
+Set the ACLs directly to the TDB or xattr\&. The POSIX permissions will NOT be changed, only the NT ACL will be stored\&.
+.RE
+.PP
+\-\-service=SERVICE
+.RS 4
+Specify the name of the smb\&.conf service to use\&. This option is required in combination with the \-\-use\-s3fs option\&.
+.RE
+.PP
+\-\-use\-s3fs
+.RS 4
+Set the ACLs for use with the default s3fs file server via the VFS layer\&. This option requires a smb\&.conf service, specified by the \-\-service=SERVICE option\&.
+.RE
+.PP
+\-\-xattr\-backend=[native|tdb]
+.RS 4
+Specify the xattr backend type (native fs or tdb)\&.
+.RE
+.PP
+\-\-eadb\-file=EADB_FILE
+.RS 4
+Name of the tdb file where attributes are stored\&.
+.RE
+.PP
+\-\-recursive
+.RS 4
+Set the ACLs for directories and their contents recursively\&.
+.RE
+.PP
+\-\-follow\-symlinks
+.RS 4
+Follow symlinks when \-\-recursive is specified\&.
+.RE
+.PP
+\-\-verbose
+.RS 4
+Verbosely list files and ACLs which are being processed\&.
+.RE
+.SS "ntacl get file [options]"
+.PP
+Get ACLs on a file\&.
+.SS "ntacl set acl file [options]"
+.PP
+Set ACLs on a file\&.
+.SS "ntacl sysvolcheck"
+.PP
+Check sysvol ACLs match defaults (including correct ACLs on GPOs)\&.
+.SS "ntacl sysvolreset"
+.PP
+Reset sysvol ACLs to defaults (including correct ACLs on GPOs)\&.
+.SS "ou"
+.PP
+Manage organizational units (OUs)\&.
+.SS "ou add ou_dn [options]"
+.PP
+Add a new organizational unit\&.
+.PP
+The name of the organizational unit can be specified as a full DN or without the domainDN component\&.
+.PP
+\-\-description=DESCRIPTION
+.RS 4
+Specify OU\*(Aqs description\&.
+.RE
+.SS "ou create ou_dn [options]"
+.PP
+Add a new organizational unit\&. This is a synonym for the
+samba\-tool ou add
+command and is available for compatibility reasons only\&. Please use
+samba\-tool ou add
+instead\&.
+.SS "ou delete ou_dn [options]"
+.PP
+Delete an organizational unit\&.
+.PP
+The name of the organizational unit can be specified as a full DN or without the domainDN component\&.
+.PP
+\-\-force\-subtree\-delete
+.RS 4
+Delete organizational unit and all children reclusively\&.
+.RE
+.SS "ou list [options]"
+.PP
+List all organizational units\&.
+.PP
+\-\-full\-dn
+.RS 4
+Display DNs including the base DN\&.
+.RE
+.SS "ou listobjects ou_dn [options]"
+.PP
+List all objects in an organizational unit\&.
+.PP
+The name of the organizational unit can be specified as a full DN or without the domainDN component\&.
+.PP
+\-\-full\-dn
+.RS 4
+Display DNs including the base DN\&.
+.RE
+.PP
+\-r|\-\-recursive
+.RS 4
+List objects recursively\&.
+.RE
+.SS "ou move old_ou_dn new_parent_dn [options]"
+.PP
+Move an organizational unit\&.
+.PP
+The name of the organizational units can be specified as a full DN or without the domainDN component\&.
+.SS "ou rename old_ou_dn new_ou_dn [options]"
+.PP
+Rename an organizational unit\&.
+.PP
+The name of the organizational units can be specified as a full DN or without the domainDN component\&.
+.SS "rodc"
+.PP
+Manage Read\-Only Domain Controller (RODC)\&.
+.SS "rodc preload SID|DN|accountname [options]"
+.PP
+Preload one account for an RODC\&.
+.SS "schema"
+.PP
+Manage and query schema\&.
+.SS "schema attribute modify attribute [options]"
+.PP
+Modify the behaviour of an attribute in schema\&.
+.SS "schema attribute show attribute [options]"
+.PP
+Display an attribute schema definition\&.
+.SS "schema attribute show_oc attribute [options]"
+.PP
+Show objectclasses that MAY or MUST contain this attribute\&.
+.SS "schema objectclass show objectclass [options]"
+.PP
+Display an objectclass schema definition\&.
+.SS "sites"
+.PP
+Manage sites\&.
+.SS "sites create site [options]"
+.PP
+Create a new site\&.
+.SS "sites remove site [options]"
+.PP
+Delete an existing site\&.
+.SS "spn"
+.PP
+Manage Service Principal Names (SPN)\&.
+.SS "spn add name user [options]"
+.PP
+Create a new SPN\&.
+.SS "spn delete name [user] [options]"
+.PP
+Delete an existing SPN\&.
+.SS "spn list user [options]"
+.PP
+List SPNs of a given user\&.
+.SS "testparm"
+.PP
+Check the syntax of the configuration file\&.
+.SS "time"
+.PP
+Retrieve the time on a server\&.
+.SS "user"
+.PP
+Manage users\&.
+.SS "user add username [password]"
+.PP
+Add a new user to the Active Directory Domain\&.
+.SS "user create username [password]"
+.PP
+Add a new user\&. This is a synonym for the
+samba\-tool user add
+command and is available for compatibility reasons only\&. Please use
+samba\-tool user add
+instead\&.
+.SS "user delete username [options]"
+.PP
+Delete an existing user account\&.
+.SS "user disable username"
+.PP
+Disable a user account\&.
+.SS "user edit username"
+.PP
+Edit a user account AD object\&.
+.PP
+\-\-editor=EDITOR
+.RS 4
+Specifies the editor to use instead of the system default, or \*(Aqvi\*(Aq if no system default is set\&.
+.RE
+.SS "user enable username"
+.PP
+Enable a user account\&.
+.SS "user list"
+.PP
+List all users\&.
+.PP
+By default the user\*(Aqs sAMAccountNames are listed\&.
+.PP
+\-\-full\-dn
+.RS 4
+List user\*(Aqs distinguished names instead of the sAMAccountNames\&.
+.RE
+.PP
+\-b BASE_DN|\-\-base\-dn=BASE_DN
+.RS 4
+Specify base DN to use\&. Only users under the specified base DN will be listed\&.
+.RE
+.PP
+\-\-hide\-expired
+.RS 4
+Do not list expired user accounts\&.
+.RE
+.PP
+\-\-hide\-disabled
+.RS 4
+Do not list disabled user accounts\&.
+.RE
+.SS "user setprimarygroup username primarygroupname"
+.PP
+Set the primary group a user account\&.
+.SS "user getgroups username"
+.PP
+Get the direct group memberships of a user account\&.
+.SS "user show username [options]"
+.PP
+Display a user AD object\&.
+.PP
+\-\-attributes=USER_ATTRS
+.RS 4
+Comma separated list of attributes, which will be printed\&.
+.RE
+.SS "user move username new_parent_dn [options]"
+.PP
+This command moves a user account into the specified organizational unit or container\&.
+.PP
+The username specified on the command is the sAMAccountName\&.
+.PP
+The name of the organizational unit or container can be specified as a full DN or without the domainDN component\&.
+.SS "user password [options]"
+.PP
+Change password for a user account (the one provided in authentication)\&.
+.SS "user rename username [options]"
+.PP
+Rename a user and related attributes\&.
+.PP
+This command allows to set the user\*(Aqs name related attributes\&. The user\*(Aqs CN will be renamed automatically\&. The user\*(Aqs new CN will be made up by combining the given\-name, initials and surname\&. A dot (\*(Aq\&.\*(Aq) will be appended to the initials automatically, if required\&. Use the \-\-force\-new\-cn option to specify the new CN manually and \-\-reset\-cn to reset this change\&.
+.PP
+Use an empty attribute value to remove the specified attribute\&.
+.PP
+The username specified on the command is the sAMAccountName\&.
+.PP
+\-\-surname=SURNAME
+.RS 4
+New surname
+.RE
+.PP
+\-\-given\-name=GIVEN_NAME
+.RS 4
+New given name
+.RE
+.PP
+\-\-initials=INITIALS
+.RS 4
+New initials
+.RE
+.PP
+\-\-force\-new\-cn=NEW_CN
+.RS 4
+Specify a new CN (RDN) instead of using a combination of the given name, initials and surname\&.
+.RE
+.PP
+\-\-reset\-cn
+.RS 4
+Set the CN to the default combination of given name, initials and surname\&.
+.RE
+.PP
+\-\-display\-name=DISPLAY_NAME
+.RS 4
+New display name
+.RE
+.PP
+\-\-mail\-address=MAIL_ADDRESS
+.RS 4
+New email address
+.RE
+.PP
+\-\-samaccountname=SAMACCOUNTNAME
+.RS 4
+New account name (sAMAccountName/logon name)
+.RE
+.PP
+\-\-upn=UPN
+.RS 4
+New user principal name
+.RE
+.SS "user setexpiry username [options]"
+.PP
+Set the expiration of a user account\&.
+.SS "user setpassword username [options]"
+.PP
+Sets or resets the password of a user account\&.
+.SS "user unlock username [options]"
+.PP
+This command unlocks a user account in the Active Directory domain\&.
+.SS "user getpassword username [options]"
+.PP
+Gets the password of a user account\&.
+.SS "user syncpasswords --cache-ldb-initialize [options]"
+.PP
+Syncs the passwords of all user accounts, using an optional script\&.
+.PP
+Note that this command should run on a single domain controller only (typically the PDC\-emulator)\&.
+.SS "vampire [options] \fIdomain\fR"
+.PP
+Join and synchronise a remote AD domain to the local server\&. Please note that
+samba\-tool vampire
+is deprecated, please use
+samba\-tool domain join
+instead\&.
+.SS "visualize [options] \fIsubcommand\fR"
+.PP
+Produce graphical representations of Samba network state\&. To work out what is happening in a replication graph, it is sometimes helpful to use visualisations\&.
+.PP
+There are two subcommands, two graphical modes, and (roughly) two modes of operation with respect to the location of authority\&.
+.SS "MODES OF OPERATION"
+.PP
+samba\-tool visualize ntdsconn
+.RS 4
+Looks at NTDS connections\&.
+.RE
+.PP
+samba\-tool visualize reps
+.RS 4
+Looks at repsTo and repsFrom objects\&.
+.RE
+.PP
+samba\-tool visualize uptodateness
+.RS 4
+Looks at replication lag as shown by the uptodateness vectors\&.
+.RE
+.SS "GRAPHICAL MODES"
+.PP
+\-\-distance
+.RS 4
+Distances between DCs are shown in a matrix in the terminal\&.
+.RE
+.PP
+\-\-dot
+.RS 4
+Generate Graphviz dot output (for ntdsconn and reps modes)\&. When viewed using dot or xdot, this shows the network as a graph with DCs as vertices and connections edges\&. Certain types of degenerate edges are shown in different colours or line\-styles\&.
+.RE
+.PP
+\-\-xdot
+.RS 4
+Generate Graphviz dot output as with
+[\-\-dot]
+and attempt to view it immediately using
+/usr/bin/xdot\&.
+.RE
+.PP
+\-r
+.RS 4
+Normally,
+samba\-tool
+talks to one database; with the
+[\-r]
+option attempts are made to contact all the DCs known to the first database\&. This is necessary for
+samba\-tool visualize uptodateness
+and for
+samba\-tool visualize reps
+because the repsFrom/To objects are not replicated, and it can reveal replication issues in other modes\&.
+.RE
+.SS "help"
+.PP
+Gives usage information\&.
+.SH "VERSION"
+.PP
+This man page is complete for version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/samba.7 b/docs/manpages/samba.7
new file mode 100644
index 0000000000..0877e700b9
--- /dev/null
+++ b/docs/manpages/samba.7
@@ -0,0 +1,254 @@
+'\" t
+.\"     Title: samba
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: Miscellanea
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SAMBA" "7" "09/20/2021" "Samba 4\&.15\&.0" "Miscellanea"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+samba \- A Windows AD and SMB/CIFS fileserver for UNIX
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+samba
+.SH "DESCRIPTION"
+.PP
+The Samba software suite is a collection of programs that implements the Server Message Block (commonly abbreviated as SMB) protocol for UNIX systems and provides Active Directory services\&. The first version of the SMB protocol is sometimes also referred to as the Common Internet File System (CIFS)\&. For a more thorough description, see
+http://www\&.ubiqx\&.org/cifs/\&. Samba also implements the NetBIOS protocol in nmbd\&.
+.PP
+\fBsamba\fR(8)
+.RS 4
+The
+samba
+daemon provides the Active Directory services and file and print services to SMB clients\&. The configuration file for this daemon is described in
+\fBsmb.conf\fR(5)\&.
+.RE
+.PP
+\fBsmbd\fR(8)
+.RS 4
+The
+smbd
+daemon provides the file and print services to SMB clients\&. The configuration file for this daemon is described in
+\fBsmb.conf\fR(5)\&.
+.RE
+.PP
+\fBnmbd\fR(8)
+.RS 4
+The
+nmbd
+daemon provides NetBIOS nameservice and browsing support\&. The configuration file for this daemon is described in
+\fBsmb.conf\fR(5)\&.
+.RE
+.PP
+\fBwinbindd\fR(8)
+.RS 4
+winbindd
+is a daemon that is used for integrating authentication and the user database into unix\&.
+.RE
+.PP
+\fBsmbclient\fR(1)
+.RS 4
+The
+smbclient
+program implements a simple ftp\-like client\&. This is useful for accessing SMB shares on other compatible SMB servers, and can also be used to allow a UNIX box to print to a printer attached to any SMB server\&.
+.RE
+.PP
+\fBsamba-tool\fR(8)
+.RS 4
+The
+samba\-tool
+is the main Samba Administration tool regarding Active Directory services\&.
+.RE
+.PP
+\fBtestparm\fR(1)
+.RS 4
+The
+testparm
+utility is a simple syntax checker for Samba\*(Aqs
+\fBsmb.conf\fR(5)
+configuration file\&. In AD server mode
+samba\-tool testparm
+should be used though\&.
+.RE
+.PP
+\fBsmbstatus\fR(1)
+.RS 4
+The
+smbstatus
+tool provides access to information about the current connections to
+smbd\&.
+.RE
+.PP
+\fBnmblookup\fR(1)
+.RS 4
+The
+nmblookup
+tool allows NetBIOS name queries to be made\&.
+.RE
+.PP
+\fBsmbpasswd\fR(8)
+.RS 4
+The
+smbpasswd
+command is a tool for setting passwords on local Samba but also on remote SMB servers\&.
+.RE
+.PP
+\fBsmbcacls\fR(1)
+.RS 4
+The
+smbcacls
+command is a tool to set ACL\*(Aqs on remote SMB servers\&.
+.RE
+.PP
+\fBsmbtree\fR(1)
+.RS 4
+The
+smbtree
+command is a text\-based network neighborhood tool\&.
+.RE
+.PP
+\fBsmbtar\fR(1)
+.RS 4
+The
+smbtar
+can make backups of data directly from SMB servers\&.
+.RE
+.PP
+\fBsmbspool\fR(8)
+.RS 4
+smbspool
+is a helper utility for printing on printers connected to SMB servers\&.
+.RE
+.PP
+\fBsmbcontrol\fR(1)
+.RS 4
+smbcontrol
+is a utility that can change the behaviour of running
+samba,
+smbd,
+nmbd
+and
+winbindd
+daemons\&.
+.RE
+.PP
+\fBrpcclient\fR(1)
+.RS 4
+rpcclient
+is a utility that can be used to execute RPC commands on remote SMB servers\&.
+.RE
+.PP
+\fBpdbedit\fR(8)
+.RS 4
+The
+pdbedit
+command can be used to maintain the local user database on a Samba server\&.
+.RE
+.PP
+\fBnet\fR(8)
+.RS 4
+The
+net
+command is the main administration tool for Samba member and standalone servers\&.
+.RE
+.PP
+\fBwbinfo\fR(1)
+.RS 4
+wbinfo
+is a utility that retrieves and stores information related to winbind\&.
+.RE
+.PP
+\fBprofiles\fR(1)
+.RS 4
+profiles
+is a command\-line utility that can be used to replace all occurrences of a certain SID with another SID\&.
+.RE
+.PP
+\fBlog2pcap\fR(1)
+.RS 4
+log2pcap
+is a utility for generating pcap trace files from Samba log files\&.
+.RE
+.PP
+\fBvfstest\fR(1)
+.RS 4
+vfstest
+is a utility that can be used to test vfs modules\&.
+.RE
+.PP
+\fBntlm_auth\fR(1)
+.RS 4
+ntlm_auth
+is a helper\-utility for external programs wanting to do NTLM\-authentication\&.
+.RE
+.PP
+\fBsmbcquotas\fR(1)
+.RS 4
+smbcquotas
+is a tool to manage quotas on remote SMB servers\&.
+.RE
+.SH "COMPONENTS"
+.PP
+The Samba suite is made up of several components\&. Each component is described in a separate manual page\&. It is strongly recommended that you read the documentation that comes with Samba and the manual pages of those components that you use\&. If the manual pages and documents aren\*(Aqt clear enough then please visit
+https://devel\&.samba\&.org
+for information on how to file a bug report or submit a patch\&.
+.PP
+If you require help, visit the Samba webpage at
+https://www\&.samba\&.org/
+and explore the many option available to you\&.
+.SH "AVAILABILITY"
+.PP
+The Samba software suite is licensed under the GNU Public License(GPL)\&. A copy of that license should have come with the package in the file COPYING\&. You are encouraged to distribute copies of the Samba suite, but please obey the terms of this license\&.
+.PP
+The latest version of the Samba suite can be obtained from
+https://download\&.samba\&.org/pub/samba/\&.
+.PP
+The Samba Wiki at
+https://wiki\&.samba\&.org
+has also a lot of useful information\&. On the Samba mailing list at
+https://lists\&.samba\&.org
+you can find a lot of information in the archives and you can subscribe to the samba list and ask for help or discuss things\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "CONTRIBUTIONS"
+.PP
+If you wish to contribute to the Samba project, then I suggest you join the Samba mailing list at
+https://lists\&.samba\&.org\&.
+.PP
+If you have patches to submit, visit
+https://devel\&.samba\&.org/
+for information on how to do it properly\&. We prefer patches in
+git format\-patch
+format\&.
+.SH "CONTRIBUTORS"
+.PP
+Contributors to the project are now too numerous to mention here but all deserve the thanks of all Samba users\&. To see a full list, look at the
+change\-log
+in the source package for the pre\-CVS changes and at
+https://git\&.samba\&.org/
+for the contributors to Samba post\-GIT\&. GIT is the Open Source source code control system used by the Samba Team to develop Samba\&. The project would have been unmanageable without it\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/samba.8 b/docs/manpages/samba.8
new file mode 100644
index 0000000000..4098bcc3da
--- /dev/null
+++ b/docs/manpages/samba.8
@@ -0,0 +1,257 @@
+'\" t
+.\"     Title: samba
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SAMBA" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+samba \- Server to provide AD and SMB/CIFS services to clients
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+samba [\-D|\-\-daemon] [\-F|\-\-foreground] [\-i|\-\-interactive] [\-M|\-\-model=MODEL] [\-\-maximum\-runtime=seconds] [\-b|\-\-show\-build] [\-\-no\-process\-group] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-V|\-\-version]
+.SH "DESCRIPTION"
+.PP
+This program is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+samba
+is the server daemon that provides Active Directory, filesharing and printing services to clients\&. The server provides filespace and directory services to clients using the SMB (or CIFS) protocol and other related protocols such as DCE/RPC, LDAP and Kerberos\&.
+.PP
+Clients supported include MSCLIENT 3\&.0 for DOS, Windows for Workgroups, Windows 95/98/ME, Windows NT, Windows 2000/XP/2003, OS/2, DAVE for Macintosh, and cifsfs for Linux\&.
+.PP
+An extensive description of the services that the server can provide is given in the man page for the configuration file controlling the attributes of those services (see
+\fBsmb.conf\fR(5)\&. This man page will not describe the services, but will concentrate on the administrative aspects of running the server\&.
+.PP
+Please note that there are significant security implications to running this server, and the
+\fBsmb.conf\fR(5)
+manual page should be regarded as mandatory reading before proceeding with installation\&.
+.SH "OPTIONS"
+.PP
+\-D|\-\-daemon
+.RS 4
+If specified, this parameter causes the server to operate as a daemon\&. That is, it detaches itself and runs in the background, fielding requests on the appropriate ports\&. Operating the server as a daemon is the recommended way of running
+samba
+for servers that provide more than casual use file and print services\&. This switch is assumed if
+samba
+is executed on the command line of a shell\&.
+.RE
+.PP
+\-F|\-\-foreground
+.RS 4
+If specified, this parameter causes the
+samba
+process to not daemonize, i\&.e\&. double\-fork and disassociate with the terminal\&.
+.RE
+.PP
+\-i|\-\-interactive
+.RS 4
+If this parameter is specified it causes the server to run "interactively", not as a daemon, even if the server is executed on the command line of a shell\&. Setting this parameter negates the implicit daemon mode when run from the command line\&.
+samba
+also logs to standard output, as if the
+\-S
+parameter had been given\&.
+.RE
+.PP
+\-M|\-\-model
+.RS 4
+This parameter can be used to specify the "process model" samba should use\&. This determines how concurrent clients are handled\&. Available process models include:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsingle\fR
+.sp
+All Samba services run in a single process\&. This is not recommended for production configurations\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIstandard\fR
+.sp
+A process is created for each Samba service, and for those services that support it (currently only LDAP and NETLOGON) a new processes is started for each new client connection\&.
+.sp
+Historically, this was the \*(Aqstandard\*(Aq way Samba behaved up until v4\&.10\&. Note that this model can be resource intensive if you have a large number of client connections\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIprefork\fR
+.sp
+The default\&. A process is started for each Samba service, and a fixed number of worker processes are started for those services that support it (currently LDAP, NETLOGON, and KDC)\&. The client connections are then shared amongst the worker processes\&. Requests for services not supporting prefork are handled by a single process for that service\&.
+.sp
+The number of prefork worker processes started is controlled by the
+\fBsmb.conf\fR(5)
+parameter
+\m[blue]\fBprefork children\fR\m[], which defaults to 4\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+\-\-maximum\-runtime=seconds
+.RS 4
+Set maximum runtime of the server process till autotermination in seconds\&.
+.RE
+.PP
+\-b|\-\-show\-build
+.RS 4
+Print information about how Samba was built\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL, \-\-debug\-stdout
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 0\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+This will redirect debug output to STDOUT\&. By default server daemons are logging to a log file\&.
+.RE
+.PP
+\-\-configfile=CONFIGFILE
+.RS 4
+The file specified contains the configuration details required by the server\&. The information in this file includes server\-specific information such as what printcap file to use, as well as descriptions of all the services that the server is to provide\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.SH "FILES"
+.PP
+/etc/rc
+.RS 4
+or whatever initialization script your system uses\&.
+.sp
+If running the server as a daemon at startup, this file will need to contain an appropriate startup sequence for the server\&.
+.RE
+.PP
+/etc/services
+.RS 4
+If running the server via the meta\-daemon
+inetd, this file must contain a mapping of service name (e\&.g\&., netbios\-ssn) to service port (e\&.g\&., 139) and protocol type (e\&.g\&., tcp)\&.
+.RE
+.PP
+/usr/local/samba/lib/smb\&.conf
+.RS 4
+This is the default location of the
+\fBsmb.conf\fR(5)
+server configuration file\&. Other common places that systems install this file are
+/usr/samba/lib/smb\&.conf
+and
+/etc/samba/smb\&.conf\&.
+.sp
+This file describes all the services the server is to make available to clients\&. See
+\fBsmb.conf\fR(5)
+for more information\&.
+.RE
+.SH "DIAGNOSTICS"
+.PP
+Most diagnostics issued by the server are logged in a specified log file\&. The log file name is specified at compile time, but may be overridden on the command line\&.
+.PP
+The number and nature of diagnostics available depends on the debug level used by the server\&. If you have problems, set the debug level to 3 and peruse the log files\&.
+.PP
+Most messages are reasonably self\-explanatory\&. Unfortunately, at the time this man page was created, there are too many diagnostics available in the source code to warrant describing each and every diagnostic\&. At this stage your best bet is still to grep the source code and inspect the conditions that gave rise to the diagnostics you are seeing\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBhosts_access\fR(5)
+\fBsmb.conf\fR(5),
+\fBsmbclient\fR(8),
+\fBsamba-tool\fR(8),
+\fBsmbd\fR(8),
+\fBnmbd\fR(8),
+\fBwinbindd\fR(1), and the Internet RFC\*(Aqs
+rfc1001\&.txt,
+rfc1002\&.txt\&. In addition the CIFS (formerly SMB) specification is available as a link from the Web page
+https://www\&.samba\&.org/cifs/\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/samba_downgrade_db.8 b/docs/manpages/samba_downgrade_db.8
new file mode 100644
index 0000000000..98a9822d65
--- /dev/null
+++ b/docs/manpages/samba_downgrade_db.8
@@ -0,0 +1,66 @@
+'\" t
+.\"     Title: samba_downgrade_db
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SAMBA_DOWNGRADE_DB" "8" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+samba_downgrade_db \- Samba tool for downgrading AD databases
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+samba_downgrade_db [\-H] [\-s]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(8)
+suite\&.
+.PP
+The format of the Samba Active Directory (AD) database changed in version 4\&.8 and 4\&.11\&. When downgrading a Samba AD Domain Controller (DC) to a release that is older than either of these versions (e\&.g\&. 4\&.11 to 4\&.10), the AD database must be manually downgraded
+\fIbefore\fR
+the Samba packages can be safely downgraded\&.
+.PP
+This tool downgrades a Samba sam\&.ldb database from the format used in version 4\&.15\&.0 to that of version 4\&.7\&. The v4\&.7 database format can safely be read by any version of Samba\&. If necessary, later versions of Samba will repack and reconfigure a v4\&.7\-format database when the samba executable is first started\&.
+.PP
+Note that all Samba services must be stopped on the DC before running this tool\&. Once the tool has run, do not restart samba or modify the database before the Samba software package has been downgraded\&.
+.SH "OPTIONS"
+.PP
+\-H [sam\&.ldb file]
+.RS 4
+Link directly to a sam\&.ldb file instead of using path in system smb\&.conf
+.RE
+.PP
+\-s [smb\&.conf file]
+.RS 4
+Link directly to smb\&.conf file instead of system default (usually in /usr/local/samba/etc/smb\&.conf)
+.RE
+.SH "VERSION"
+.PP
+This man page is complete for version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The samba_downgrade_db tool was developed by the Samba team at Catalyst IT Ltd\&.
diff --git a/docs/manpages/sharesec.1 b/docs/manpages/sharesec.1
new file mode 100644
index 0000000000..4cea5e5f58
--- /dev/null
+++ b/docs/manpages/sharesec.1
@@ -0,0 +1,364 @@
+'\" t
+.\"     Title: sharesec
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SHARESEC" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+sharesec \- Set or get share ACLs
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+sharesec {sharename} [\-r,\ \-\-remove=ACL] [\-m,\ \-\-modify=ACL] [\-a,\ \-\-add=ACL] [\-R,\ \-\-replace=ACLs] [\-D,\ \-\-delete] [\-v,\ \-\-view] [\-\-view\-all] [\-M,\ \-\-machine\-sid] [\-F,\ \-\-force] [\-d,\ \-\-debuglevel=DEBUGLEVEL] [\-s,\ \-\-configfile=CONFIGFILE] [\-l,\ \-\-log\-basename=LOGFILEBASE] [\-S,\ \-\-setsddl=STRING] [\-\-viewsddl] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+sharesec
+program manipulates share permissions on SMB file shares\&.
+.SH "OPTIONS"
+.PP
+The following options are available to the
+sharesec
+program\&. The format of ACLs is described in the section ACL FORMAT
+.PP
+\-a|\-\-add=ACL
+.RS 4
+Add the ACEs specified to the ACL list\&.
+.RE
+.PP
+\-D|\-\-delete
+.RS 4
+Delete the entire security descriptor\&.
+.RE
+.PP
+\-F|\-\-force
+.RS 4
+Force storing the ACL\&.
+.RE
+.PP
+\-m|\-\-modify=ACL
+.RS 4
+Modify existing ACEs\&.
+.RE
+.PP
+\-M|\-\-machine\-sid
+.RS 4
+Initialize the machine SID\&.
+.RE
+.PP
+\-r|\-\-remove=ACL
+.RS 4
+Remove ACEs\&.
+.RE
+.PP
+\-R|\-\-replace=ACLS
+.RS 4
+Overwrite an existing share permission ACL\&.
+.RE
+.PP
+\-v|\-\-view
+.RS 4
+List a share acl
+.RE
+.PP
+\-\-view\-all
+.RS 4
+List all share acls
+.RE
+.PP
+\-S|\-\-setsddl=STRING
+.RS 4
+Set security descriptor by providing ACL in SDDL format\&.
+.RE
+.PP
+\-\-viewsddl
+.RS 4
+List a share acl in SDDL format\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.SH "ACL FORMAT"
+.PP
+The format of an ACL is one or more ACL entries separated by either commas or newlines\&. An ACL entry is one of the following:
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
+	REVISION:<revision number>
+	OWNER:<sid or name>
+	GROUP:<sid or name>
+	ACL:<sid or name>:<type>/<flags>/<mask>
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+The revision of the ACL specifies the internal Windows NT ACL revision for the security descriptor\&. If not specified it defaults to 1\&. Using values other than 1 may cause strange behaviour\&.
+.PP
+The owner and group specify the owner and group SIDs for the object\&. Share ACLs do not specify an owner or a group, so these fields are empty\&.
+.PP
+ACLs specify permissions granted to the SID\&. This SID can be specified in S\-1\-x\-y\-z format or as a name in which case it is resolved against the server on which the file or directory resides\&. The type, flags and mask values determine the type of access granted to the SID\&.
+.PP
+The type can be either ALLOWED or DENIED to allow/deny access to the SID\&. The flags values are generally zero for share ACLs\&.
+.PP
+The mask is a value which expresses the access right granted to the SID\&. It can be given as a decimal or hexadecimal value, or by using one of the following text strings which map to the NT file permissions of the same name\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIR\fR
+\- Allow read access
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIW\fR
+\- Allow write access
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIX\fR
+\- Execute permission on the object
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fID\fR
+\- Delete the object
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIP\fR
+\- Change permissions
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIO\fR
+\- Take ownership
+.RE
+.sp
+.RE
+.PP
+The following combined permissions can be specified:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIREAD\fR
+\- Equivalent to \*(AqRX\*(Aq permissions
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fICHANGE\fR
+\- Equivalent to \*(AqRXWD\*(Aq permissions
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIFULL\fR
+\- Equivalent to \*(AqRWXDPO\*(Aq permissions
+.RE
+.SH "EXIT STATUS"
+.PP
+The
+sharesec
+program sets the exit status depending on the success or otherwise of the operations performed\&. The exit status may be one of the following values\&.
+.PP
+If the operation succeeded, sharesec returns and exit status of 0\&. If
+sharesec
+couldn\*(Aqt connect to the specified server, or there was an error getting or setting the ACLs, an exit status of 1 is returned\&. If there was an error parsing any command line arguments, an exit status of 2 is returned\&.
+.SH "EXAMPLES"
+.PP
+Add full access for SID
+\fIS\-1\-5\-21\-1866488690\-1365729215\-3963860297\-17724\fR
+on
+\fIshare\fR:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	host:~ # sharesec share \-a S\-1\-5\-21\-1866488690\-1365729215\-3963860297\-17724:ALLOWED/0/FULL
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+List all ACEs for
+\fIshare\fR:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	host:~ # sharesec share \-v
+	REVISION:1
+	CONTROL:SR|DP
+	OWNER:
+	GROUP:
+	ACL:S\-1\-1\-0:ALLOWED/0x0/FULL
+	ACL:S\-1\-5\-21\-1866488690\-1365729215\-3963860297\-17724:ALLOWED/0x0/FULL
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/smb.conf.5 b/docs/manpages/smb.conf.5
new file mode 100644
index 0000000000..adff5588ff
--- /dev/null
+++ b/docs/manpages/smb.conf.5
@@ -0,0 +1,14245 @@
+'\" t
+.\"     Title: smb.conf
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: File Formats and Conventions
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMB\&.CONF" "5" "09/20/2021" "Samba 4\&.15\&.0" "File Formats and Conventions"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smb.conf \- The configuration file for the Samba suite
+.SH "SYNOPSIS"
+.PP
+The
+smb\&.conf
+file is a configuration file for the Samba suite\&.
+smb\&.conf
+contains runtime configuration information for the Samba programs\&. The complete description of the file format and possible parameters held within are here for reference purposes\&.
+.SH "HOW CONFIGURATION CHANGES ARE APPLIED"
+.PP
+The Samba suite includes a number of different programs\&. Some of them operate in a client mode, others are server daemons that provide various services to its clients\&. The
+smb\&.conf
+file is processed in the following way:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The Samba suite\*(Aqs client applications read their configuration only once\&. Any changes made after start aren\*(Aqt reflected in the context of already running client code\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The Samba suite\*(Aqs server daemons reload their configuration when requested\&. However, already active connections do not change their configuration\&. More detailed information can be found in
+\fBsmbd\fR(8)
+and
+\fBwinbindd\fR(8)
+manual pages\&.
+.RE
+.sp
+.RE
+.PP
+To request Samba server daemons to refresh their configuration, please use
+\fBsmbcontrol\fR(1)
+utility\&.
+.SH "FILE FORMAT"
+.PP
+The file consists of sections and parameters\&. A section begins with the name of the section in square brackets and continues until the next section begins\&. Sections contain parameters of the form:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+\fIname\fR = \fIvalue \fR
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+The file is line\-based \- that is, each newline\-terminated line represents either a comment, a section name or a parameter\&.
+.PP
+Section and parameter names are not case sensitive\&.
+.PP
+Only the first equals sign in a parameter is significant\&. Whitespace before or after the first equals sign is discarded\&. Leading, trailing and internal whitespace in section and parameter names is irrelevant\&. Leading and trailing whitespace in a parameter value is discarded\&. Internal whitespace within a parameter value is retained verbatim\&.
+.PP
+Any line beginning with a semicolon (\(lq;\(rq) or a hash (\(lq#\(rq) character is ignored, as are lines containing only whitespace\&.
+.PP
+Any line ending in a
+\(lq\e\(rq
+is continued on the next line in the customary UNIX fashion\&.
+.PP
+The values following the equals sign in parameters are all either a string (no quotes needed) or a boolean, which may be given as yes/no, 1/0 or true/false\&. Case is not significant in boolean values, but is preserved in string values\&. Some items such as create masks are numeric\&.
+.SH "SECTION DESCRIPTIONS"
+.PP
+Each section in the configuration file (except for the [global] section) describes a shared resource (known as a
+\(lqshare\(rq)\&. The section name is the name of the shared resource and the parameters within the section define the shares attributes\&.
+.PP
+There are three special sections, [global], [homes] and [printers], which are described under
+\fIspecial sections\fR\&. The following notes apply to ordinary section descriptions\&.
+.PP
+A share consists of a directory to which access is being given plus a description of the access rights which are granted to the user of the service\&. Some housekeeping options are also specifiable\&.
+.PP
+Sections are either file share services (used by the client as an extension of their native file systems) or printable services (used by the client to access print services on the host running the server)\&.
+.PP
+Sections may be designated
+\fIguest\fR
+services, in which case no password is required to access them\&. A specified UNIX
+\fIguest account\fR
+is used to define access privileges in this case\&.
+.PP
+Sections other than guest services will require a password to access them\&. The client provides the username\&. As older clients only provide passwords and not usernames, you may specify a list of usernames to check against the password using the
+user =
+option in the share definition\&. For modern clients such as Windows 95/98/ME/NT/2000, this should not be necessary\&.
+.PP
+The access rights granted by the server are masked by the access rights granted to the specified or guest UNIX user by the host system\&. The server does not grant more access than the host system grants\&.
+.PP
+The following sample section defines a file space share\&. The user has write access to the path
+/home/bar\&. The share is accessed via the share name
+foo:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	\fI[foo]\fR
+	\m[blue]\fBpath = /home/bar\fR\m[]
+	\m[blue]\fBread only = no\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+The following sample section defines a printable share\&. The share is read\-only, but printable\&. That is, the only write access permitted is via calls to open, write to and close a spool file\&. The
+\fIguest ok\fR
+parameter means access will be permitted as the default guest user (specified elsewhere):
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	\fI[aprinter]\fR
+	\m[blue]\fBpath = /usr/spool/public\fR\m[]
+	\m[blue]\fBread only = yes\fR\m[]
+	\m[blue]\fBprintable = yes\fR\m[]
+	\m[blue]\fBguest ok = yes\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+.SH "SPECIAL SECTIONS"
+.SS "The [global] section"
+.PP
+Parameters in this section apply to the server as a whole, or are defaults for sections that do not specifically define certain items\&. See the notes under PARAMETERS for more information\&.
+.SS "The [homes] section"
+.PP
+If a section called [homes] is included in the configuration file, services connecting clients to their home directories can be created on the fly by the server\&.
+.PP
+When the connection request is made, the existing sections are scanned\&. If a match is found, it is used\&. If no match is found, the requested section name is treated as a username and looked up in the local password file\&. If the name exists and the correct password has been given, a share is created by cloning the [homes] section\&.
+.PP
+Some modifications are then made to the newly created share:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The share name is changed from homes to the located username\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+If no path was given, the path is set to the user\*(Aqs home directory\&.
+.RE
+.sp
+.RE
+.PP
+If you decide to use a
+\fIpath =\fR
+line in your [homes] section, it may be useful to use the %S macro\&. For example:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+\fBpath = /data/pchome/%S\fR
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+is useful if you have different home directories for your PCs than for UNIX access\&.
+.PP
+This is a fast and simple way to give a large number of clients access to their home directories with a minimum of fuss\&.
+.PP
+A similar process occurs if the requested section name is
+\(lqhomes\(rq, except that the share name is not changed to that of the requesting user\&. This method of using the [homes] section works well if different users share a client PC\&.
+.PP
+The [homes] section can specify all the parameters a normal service section can specify, though some make more sense than others\&. The following is a typical and suitable [homes] section:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+\fI[homes]\fR
+\m[blue]\fBread only = no\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+An important point is that if guest access is specified in the [homes] section, all home directories will be visible to all clients
+\fIwithout a password\fR\&. In the very unlikely event that this is actually desirable, it is wise to also specify
+\fIread only access\fR\&.
+.PP
+The
+\fIbrowseable\fR
+flag for auto home directories will be inherited from the global browseable flag, not the [homes] browseable flag\&. This is useful as it means setting
+\fIbrowseable = no\fR
+in the [homes] section will hide the [homes] share but make any auto home directories visible\&.
+.SS "The [printers] section"
+.PP
+This section works like [homes], but for printers\&.
+.PP
+If a [printers] section occurs in the configuration file, users are able to connect to any printer specified in the local host\*(Aqs printcap file\&.
+.PP
+When a connection request is made, the existing sections are scanned\&. If a match is found, it is used\&. If no match is found, but a [homes] section exists, it is used as described above\&. Otherwise, the requested section name is treated as a printer name and the appropriate printcap file is scanned to see if the requested section name is a valid printer share name\&. If a match is found, a new printer share is created by cloning the [printers] section\&.
+.PP
+A few modifications are then made to the newly created share:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The share name is set to the located printer name
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+If no printer name was given, the printer name is set to the located printer name
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+If the share does not permit guest access and no username was given, the username is set to the located printer name\&.
+.RE
+.sp
+.RE
+.PP
+The [printers] service MUST be printable \- if you specify otherwise, the server will refuse to load the configuration file\&.
+.PP
+Typically the path specified is that of a world\-writeable spool directory with the sticky bit set on it\&. A typical [printers] entry looks like this:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+\fI[printers]\fR
+\m[blue]\fBpath = /usr/spool/public\fR\m[]
+\m[blue]\fBguest ok = yes\fR\m[]
+\m[blue]\fBprintable = yes\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+All aliases given for a printer in the printcap file are legitimate printer names as far as the server is concerned\&. If your printing subsystem doesn\*(Aqt work like that, you will have to set up a pseudo\-printcap\&. This is a file consisting of one or more lines like this:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+alias|alias|alias|alias\&.\&.\&.    
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Each alias should be an acceptable printer name for your printing subsystem\&. In the [global] section, specify the new file as your printcap\&. The server will only recognize names found in your pseudo\-printcap, which of course can contain whatever aliases you like\&. The same technique could be used simply to limit access to a subset of your local printers\&.
+.PP
+An alias, by the way, is defined as any component of the first entry of a printcap record\&. Records are separated by newlines, components (if there are more than one) are separated by vertical bar symbols (|)\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+.PP
+On SYSV systems which use lpstat to determine what printers are defined on the system you may be able to use
+printcap name = lpstat
+to automatically obtain a list of printers\&. See the
+printcap name
+option for more details\&.
+.sp .5v
+.RE
+.SH "USERSHARES"
+.PP
+Starting with Samba version 3\&.0\&.23 the capability for non\-root users to add, modify, and delete their own share definitions has been added\&. This capability is called
+\fIusershares\fR
+and is controlled by a set of parameters in the [global] section of the smb\&.conf\&. The relevant parameters are :
+.PP
+usershare allow guests
+.RS 4
+Controls if usershares can permit guest access\&.
+.RE
+.PP
+usershare max shares
+.RS 4
+Maximum number of user defined shares allowed\&.
+.RE
+.PP
+usershare owner only
+.RS 4
+If set only directories owned by the sharing user can be shared\&.
+.RE
+.PP
+usershare path
+.RS 4
+Points to the directory containing the user defined share definitions\&. The filesystem permissions on this directory control who can create user defined shares\&.
+.RE
+.PP
+usershare prefix allow list
+.RS 4
+Comma\-separated list of absolute pathnames restricting what directories can be shared\&. Only directories below the pathnames in this list are permitted\&.
+.RE
+.PP
+usershare prefix deny list
+.RS 4
+Comma\-separated list of absolute pathnames restricting what directories can be shared\&. Directories below the pathnames in this list are prohibited\&.
+.RE
+.PP
+usershare template share
+.RS 4
+Names a pre\-existing share used as a template for creating new usershares\&. All other share parameters not specified in the user defined share definition are copied from this named share\&.
+.RE
+.PP
+To allow members of the UNIX group
+foo
+to create user defined shares, create the directory to contain the share definitions as follows:
+.PP
+Become root:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+mkdir /usr/local/samba/lib/usershares
+chgrp foo /usr/local/samba/lib/usershares
+chmod 1770 /usr/local/samba/lib/usershares
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Then add the parameters
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	\m[blue]\fBusershare path = /usr/local/samba/lib/usershares\fR\m[]
+	\m[blue]\fBusershare max shares = 10\fR\m[] # (or the desired number of shares)
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+to the global section of your
+smb\&.conf\&. Members of the group foo may then manipulate the user defined shares using the following commands\&.
+.PP
+net usershare add sharename path [comment] [acl] [guest_ok=[y|n]]
+.RS 4
+To create or modify (overwrite) a user defined share\&.
+.RE
+.PP
+net usershare delete sharename
+.RS 4
+To delete a user defined share\&.
+.RE
+.PP
+net usershare list wildcard\-sharename
+.RS 4
+To list user defined shares\&.
+.RE
+.PP
+net usershare info wildcard\-sharename
+.RS 4
+To print information about user defined shares\&.
+.RE
+.SH "PARAMETERS"
+.PP
+Parameters define the specific attributes of sections\&.
+.PP
+Some parameters are specific to the [global] section (e\&.g\&.,
+\fIsecurity\fR)\&. Some parameters are usable in all sections (e\&.g\&.,
+\fIcreate mask\fR)\&. All others are permissible only in normal sections\&. For the purposes of the following descriptions the [homes] and [printers] sections will be considered normal\&. The letter
+\fIG\fR
+in parentheses indicates that a parameter is specific to the [global] section\&. The letter
+\fIS\fR
+indicates that a parameter can be specified in a service specific section\&. All
+\fIS\fR
+parameters can also be specified in the [global] section \- in which case they will define the default behavior for all services\&.
+.PP
+Parameters are arranged here in alphabetical order \- this may not create best bedfellows, but at least you can find them! Where there are synonyms, the preferred synonym is described, others refer to the preferred synonym\&.
+.SH "VARIABLE SUBSTITUTIONS"
+.PP
+Many of the strings that are settable in the config file can take substitutions\&. For example the option
+\(lqpath = /tmp/%u\(rq
+is interpreted as
+\(lqpath = /tmp/john\(rq
+if the user connected with the username john\&.
+.PP
+These substitutions are mostly noted in the descriptions below, but there are some general substitutions which apply whenever they might be relevant\&. These are:
+.PP
+%U
+.RS 4
+session username (the username that the client wanted, not necessarily the same as the one they got)\&.
+.RE
+.PP
+%G
+.RS 4
+primary group name of %U\&.
+.RE
+.PP
+%h
+.RS 4
+the Internet hostname that Samba is running on\&.
+.RE
+.PP
+%m
+.RS 4
+the NetBIOS name of the client machine (very useful)\&.
+.sp
+This parameter is not available when Samba listens on port 445, as clients no longer send this information\&. If you use this macro in an include statement on a domain that has a Samba domain controller be sure to set in the [global] section
+\fIsmb ports = 139\fR\&. This will cause Samba to not listen on port 445 and will permit include functionality to function as it did with Samba 2\&.x\&.
+.RE
+.PP
+%L
+.RS 4
+the NetBIOS name of the server\&. This allows you to change your config based on what the client calls you\&. Your server can have a
+\(lqdual personality\(rq\&.
+.RE
+.PP
+%M
+.RS 4
+the Internet name of the client machine\&.
+.RE
+.PP
+%R
+.RS 4
+the selected protocol level after protocol negotiation\&. It can be one of CORE, COREPLUS, LANMAN1, LANMAN2, NT1, SMB2_02, SMB2_10, SMB3_00, SMB3_02, SMB3_11 or SMB2_FF\&.
+.RE
+.PP
+%d
+.RS 4
+the process id of the current server process\&.
+.RE
+.PP
+%a
+.RS 4
+The architecture of the remote machine\&. It currently recognizes Samba (\fBSamba\fR), the Linux CIFS file system (\fBCIFSFS\fR), OS/2, (\fBOS2\fR), Mac OS X (\fBOSX\fR), Windows for Workgroups (\fBWfWg\fR), Windows 9x/ME (\fBWin95\fR), Windows NT (\fBWinNT\fR), Windows 2000 (\fBWin2K\fR), Windows XP (\fBWinXP\fR), Windows XP 64\-bit(\fBWinXP64\fR), Windows 2003 including 2003R2 (\fBWin2K3\fR), and Windows Vista (\fBVista\fR)\&. Anything else will be known as
+\fBUNKNOWN\fR\&.
+.RE
+.PP
+%I
+.RS 4
+the IP address of the client machine\&.
+.sp
+Before 4\&.0\&.0 it could contain IPv4 mapped IPv6 addresses, now it only contains IPv4 or IPv6 addresses\&.
+.RE
+.PP
+%J
+.RS 4
+the IP address of the client machine, colons/dots replaced by underscores\&.
+.RE
+.PP
+%i
+.RS 4
+the local IP address to which a client connected\&.
+.sp
+Before 4\&.0\&.0 it could contain IPv4 mapped IPv6 addresses, now it only contains IPv4 or IPv6 addresses\&.
+.RE
+.PP
+%j
+.RS 4
+the local IP address to which a client connected, colons/dots replaced by underscores\&.
+.RE
+.PP
+%T
+.RS 4
+the current date and time\&.
+.RE
+.PP
+%t
+.RS 4
+the current date and time in a minimal format without colons (YYYYYmmdd_HHMMSS)\&.
+.RE
+.PP
+%D
+.RS 4
+name of the domain or workgroup of the current user\&.
+.RE
+.PP
+%w
+.RS 4
+the winbind separator\&.
+.RE
+.PP
+%$(\fIenvvar\fR)
+.RS 4
+the value of the environment variable
+\fIenvar\fR\&.
+.RE
+.PP
+The following substitutes apply only to some configuration options (only those that are used when a connection has been established):
+.PP
+%S
+.RS 4
+the name of the current service, if any\&.
+.RE
+.PP
+%P
+.RS 4
+the root directory of the current service, if any\&.
+.RE
+.PP
+%u
+.RS 4
+username of the current service, if any\&.
+.RE
+.PP
+%g
+.RS 4
+primary group name of %u\&.
+.RE
+.PP
+%H
+.RS 4
+the home directory of the user given by %u\&.
+.RE
+.PP
+%N
+.RS 4
+This value is the same as %L\&.
+.RE
+.PP
+There are some quite creative things that can be done with these substitutions and other
+smb\&.conf
+options\&.
+.SH "NAME MANGLING"
+.PP
+Samba supports
+name mangling
+so that DOS and Windows clients can use files that don\*(Aqt conform to the 8\&.3 format\&. It can also be set to adjust the case of 8\&.3 format filenames\&.
+.PP
+There are several options that control the way mangling is performed, and they are grouped here rather than listed separately\&. For the defaults look at the output of the testparm program\&.
+.PP
+These options can be set separately for each service\&.
+.PP
+The options are:
+.PP
+case sensitive = yes/no/auto
+.RS 4
+controls whether filenames are case sensitive\&. If they aren\*(Aqt, Samba must do a filename search and match on passed names\&. The default setting of auto allows clients that support case sensitive filenames (Linux CIFSVFS and smbclient 3\&.0\&.5 and above currently) to tell the Samba server on a per\-packet basis that they wish to access the file system in a case\-sensitive manner (to support UNIX case sensitive semantics)\&. No Windows or DOS system supports case\-sensitive filename so setting this option to auto is that same as setting it to no for them\&. Default
+\fIauto\fR\&.
+.RE
+.PP
+default case = upper/lower
+.RS 4
+controls what the default case is for new filenames (ie\&. files that don\*(Aqt currently exist in the filesystem)\&. Default
+\fIlower\fR\&. IMPORTANT NOTE: As part of the optimizations for directories containing large numbers of files, the following special case applies\&. If the options
+\m[blue]\fBcase sensitive = yes\fR\m[],
+\m[blue]\fBpreserve case = No\fR\m[], and
+\m[blue]\fBshort preserve case = No\fR\m[]
+are set, then the case of
+\fIall\fR
+incoming client filenames, not just new filenames, will be modified\&. See additional notes below\&.
+.RE
+.PP
+preserve case = yes/no
+.RS 4
+controls whether new files (ie\&. files that don\*(Aqt currently exist in the filesystem) are created with the case that the client passes, or if they are forced to be the
+default
+case\&. Default
+\fIyes\fR\&.
+.RE
+.PP
+short preserve case = yes/no
+.RS 4
+controls if new files (ie\&. files that don\*(Aqt currently exist in the filesystem) which conform to 8\&.3 syntax, that is all in upper case and of suitable length, are created upper case, or if they are forced to be the
+default
+case\&. This option can be used with
+preserve case = yes
+to permit long filenames to retain their case, while short names are lowercased\&. Default
+\fIyes\fR\&.
+.RE
+.PP
+By default, Samba 3\&.0 has the same semantics as a Windows NT server, in that it is case insensitive but case preserving\&. As a special case for directories with large numbers of files, if the case options are set as follows, "case sensitive = yes", "case preserve = no", "short preserve case = no" then the "default case" option will be applied and will modify all filenames sent from the client when accessing this share\&.
+.SH "REGISTRY\-BASED CONFIGURATION"
+.PP
+Starting with Samba version 3\&.2\&.0, the capability to store Samba configuration in the registry is available\&. The configuration is stored in the registry key
+\fIHKLM\eSoftware\eSamba\esmbconf\fR\&. There are two levels of registry configuration:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 1.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  1." 4.2
+.\}
+Share definitions stored in registry are used\&. This is triggered by setting the global parameter
+\fIregistry shares\fR
+to
+\(lqyes\(rq
+in
+\fIsmb\&.conf\fR\&.
+.sp
+The registry shares are loaded not at startup but on demand at runtime by
+\fIsmbd\fR\&. Shares defined in
+\fIsmb\&.conf\fR
+take priority over shares of the same name defined in registry\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 2.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  2." 4.2
+.\}
+Global
+\fIsmb\&.conf\fR
+options stored in registry are used\&. This can be activated in two different ways:
+.sp
+Firstly, a registry only configuration is triggered by setting
+\m[blue]\fBconfig backend = registry\fR\m[]
+in the [global] section of
+\fIsmb\&.conf\fR\&. This resets everything that has been read from config files to this point and reads the content of the global configuration section from the registry\&. This is the recommended method of using registry based configuration\&.
+.sp
+Secondly, a mixed configuration can be activated by a special new meaning of the parameter
+\m[blue]\fBinclude = registry\fR\m[]
+in the [global] section of
+\fIsmb\&.conf\fR\&. This reads the global options from registry with the same priorities as for an include of a text file\&. This may be especially useful in cases where an initial configuration is needed to access the registry\&.
+.sp
+Activation of global registry options automatically activates registry shares\&. So in the registry only case, shares are loaded on demand only\&.
+.RE
+.sp
+.RE
+.PP
+Note: To make registry\-based configurations foolproof at least to a certain extent, the use of
+\fIlock directory\fR
+and
+\fIconfig backend\fR
+inside the registry configuration has been disabled: Especially by changing the
+\fIlock directory\fR
+inside the registry configuration, one would create a broken setup where the daemons do not see the configuration they loaded once it is active\&.
+.PP
+The registry configuration can be accessed with tools like
+\fIregedit\fR
+or
+\fInet (rpc) registry\fR
+in the key
+\fIHKLM\eSoftware\eSamba\esmbconf\fR\&. More conveniently, the
+\fIconf\fR
+subcommand of the
+\fBnet\fR(8)
+utility offers a dedicated interface to read and write the registry based configuration locally, i\&.e\&. directly accessing the database file, circumventing the server\&.
+.SH "IDENTITY MAPPING CONSIDERATIONS"
+.PP
+In the SMB protocol, users, groups, and machines are represented by their security identifiers (SIDs)\&. On POSIX system Samba processes need to run under corresponding POSIX user identities and with supplemental POSIX groups to allow access to the files owned by those users and groups\&. The process of mapping SIDs to POSIX users and groups is called
+\fIIDENTITY MAPPING\fR
+or, in short,
+\fIID MAPPING\fR\&.
+.PP
+Samba supports multiple ways to map SIDs to POSIX users and groups\&. The configuration is driven by the
+\m[blue]\fBidmap config DOMAIN : OPTION\fR\m[]
+option which allows one to specify identity mapping (idmap) options for each domain separately\&.
+.PP
+Identity mapping modules implement different strategies for mapping of SIDs to POSIX user and group identities\&. They are applicable to different use cases and scenarios\&. It is advised to read the documentation of the individual identity mapping modules before choosing a specific scenario to use\&. Each identity management module is documented in a separate manual page\&. The standard idmap backends are tdb (\fBidmap_tdb\fR(8)), tdb2 (\fBidmap_tdb2\fR(8)), ldap (\fBidmap_ldap\fR(8)), rid (\fBidmap_rid\fR(8)), hash (\fBidmap_hash\fR(8)), autorid (\fBidmap_autorid\fR(8)), ad (\fBidmap_ad\fR(8)), nss (\fBidmap_nss\fR(8)), and rfc2307 (\fBidmap_rfc2307\fR(8))\&.
+.PP
+Overall, ID mapping configuration should be decided carefully\&. Changes to the already deployed ID mapping configuration may create the risk of losing access to the data or disclosing the data to the wrong parties\&.
+.PP
+This example shows how to configure two domains with
+\fBidmap_rid\fR(8), the principal domain and a trusted domain, leaving the default id mapping scheme at tdb\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	[global]
+	security = domain
+	workgroup = MAIN
+
+	idmap config * : backend        = tdb
+	idmap config * : range          = 1000000\-1999999
+
+	idmap config MAIN : backend     = rid
+	idmap config MAIN : range       = 5000000\-5999999
+
+	idmap config TRUSTED : backend  = rid
+	idmap config TRUSTED : range    = 6000000\-6999999
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "EXPLANATION OF EACH PARAMETER"
+
+
+abort shutdown script (G)
+.PP
+.RS 4
+This a full path name to a script called by
+\fBsmbd\fR(8)
+that should stop a shutdown procedure issued by the
+\m[blue]\fBshutdown script\fR\m[]\&.
+.sp
+If the connected user possesses the
+\fBSeRemoteShutdownPrivilege\fR, right, this command will be run as root\&.
+.sp
+Default:
+\fI\fIabort shutdown script\fR\fR\fI = \fR\fI""\fR\fI \fR
+.sp
+Example:
+\fI\fIabort shutdown script\fR\fR\fI = \fR\fI/sbin/shutdown \-c\fR\fI \fR
+.RE
+
+access based share enum (S)
+.PP
+.RS 4
+If this parameter is
+\fByes\fR
+for a service, then the share hosted by the service will only be visible to users who have read or write access to the share during share enumeration (for example net view \e\esambaserver)\&. The share ACLs which allow or deny the access to the share can be modified using for example the
+sharesec
+command or using the appropriate Windows tools\&. This has parallels to access based enumeration, the main difference being that only share permissions are evaluated, and security descriptors on files contained on the share are not used in computing enumeration access rights\&.
+.sp
+Default:
+\fI\fIaccess based share enum\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+acl allow execute always (S)
+.PP
+.RS 4
+This boolean parameter controls the behaviour of
+\fBsmbd\fR(8)
+when receiving a protocol request of "open for execution" from a Windows client\&. With Samba 3\&.6 and older, the execution right in the ACL was not checked, so a client could execute a file even if it did not have execute rights on the file\&. In Samba 4\&.0, this has been fixed, so that by default, i\&.e\&. when this parameter is set to "False", "open for execution" is now denied when execution permissions are not present\&.
+.sp
+If this parameter is set to "True", Samba does not check execute permissions on "open for execution", thus re\-establishing the behaviour of Samba 3\&.6\&. This can be useful to smoothen upgrades from older Samba versions to 4\&.0 and newer\&. This setting is not meant to be used as a permanent setting, but as a temporary relief: It is recommended to fix the permissions in the ACLs and reset this parameter to the default after a certain transition period\&.
+.sp
+Default:
+\fI\fIacl allow execute always\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+acl check permissions (S)
+.PP
+.RS 4
+Please note this parameter is now deprecated in Samba 3\&.6\&.2 and will be removed in a future version of Samba\&.
+.sp
+This boolean parameter controls what
+\fBsmbd\fR(8)
+does on receiving a protocol request of "open for delete" from a Windows client\&. If a Windows client doesn\*(Aqt have permissions to delete a file then they expect this to be denied at open time\&. POSIX systems normally only detect restrictions on delete by actually attempting to delete the file or directory\&. As Windows clients can (and do) "back out" a delete request by unsetting the "delete on close" bit Samba cannot delete the file immediately on "open for delete" request as we cannot restore such a deleted file\&. With this parameter set to true (the default) then smbd checks the file system permissions directly on "open for delete" and denies the request without actually deleting the file if the file system permissions would seem to deny it\&. This is not perfect, as it\*(Aqs possible a user could have deleted a file without Samba being able to check the permissions correctly, but it is close enough to Windows semantics for mostly correct behaviour\&. Samba will correctly check POSIX ACL semantics in this case\&.
+.sp
+If this parameter is set to "false" Samba doesn\*(Aqt check permissions on "open for delete" and allows the open\&. If the user doesn\*(Aqt have permission to delete the file this will only be discovered at close time, which is too late for the Windows user tools to display an error message to the user\&. The symptom of this is files that appear to have been deleted "magically" re\-appearing on a Windows explorer refresh\&. This is an extremely advanced protocol option which should not need to be changed\&. This parameter was introduced in its final form in 3\&.0\&.21, an earlier version with slightly different semantics was introduced in 3\&.0\&.20\&. That older version is not documented here\&.
+.sp
+Default:
+\fI\fIacl check permissions\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+acl flag inherited canonicalization (S)
+.PP
+.RS 4
+This option controls the way Samba handles client requests setting the Security Descriptor of files and directories and the effect the operation has on the Security Descriptor flag "DACL auto\-inherited" (DI)\&. Generally, this flag is set on a file (or directory) upon creation if the parent directory has DI set and also has inheritable ACEs\&.
+.sp
+On the other hand when a Security Descriptor is explicitly set on a file, the DI flag is cleared, unless the flag "DACL Inheritance Required" (DR) is also set in the new Security Descriptor (fwiw, DR is never stored on disk)\&.
+.sp
+This is the default behaviour when this option is enabled (the default)\&. When setting this option to
+no, the resulting value of the DI flag on\-disk is directly taken from the DI value of the to\-be\-set Security Descriptor\&. This can be used so dump tools like rsync that copy data blobs from xattrs that represent ACLs created by the acl_xattr VFS module will result in copies of the ACL that are identical to the source\&. Without this option, the copied ACLs would all loose the DI flag if set on the source\&.
+.sp
+Default:
+\fI\fIacl flag inherited canonicalization\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+acl group control (S)
+.PP
+.RS 4
+In a POSIX filesystem, only the owner of a file or directory and the superuser can modify the permissions and ACLs on a file\&. If this parameter is set, then Samba overrides this restriction, and also allows the
+\fIprimary group owner\fR
+of a file or directory to modify the permissions and ACLs on that file\&.
+.sp
+On a Windows server, groups may be the owner of a file or directory \- thus allowing anyone in that group to modify the permissions on it\&. This allows the delegation of security controls on a point in the filesystem to the group owner of a directory and anything below it also owned by that group\&. This means there are multiple people with permissions to modify ACLs on a file or directory, easing manageability\&.
+.sp
+This parameter allows Samba to also permit delegation of the control over a point in the exported directory hierarchy in much the same way as Windows\&. This allows all members of a UNIX group to control the permissions on a file or directory they have group ownership on\&.
+.sp
+This parameter is best used with the
+\m[blue]\fBinherit owner\fR\m[]
+option and also on a share containing directories with the UNIX
+\fIsetgid bit\fR
+set on them, which causes new files and directories created within it to inherit the group ownership from the containing directory\&.
+.sp
+This parameter was deprecated in Samba 3\&.0\&.23, but re\-activated in Samba 3\&.0\&.31 and above, as it now only controls permission changes if the user is in the owning primary group\&. It is now no longer equivalent to the
+\fIdos filemode\fR
+option\&.
+.sp
+Default:
+\fI\fIacl group control\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+acl map full control (S)
+.PP
+.RS 4
+This boolean parameter controls whether
+\fBsmbd\fR(8)
+maps a POSIX ACE entry of "rwx" (read/write/execute), the maximum allowed POSIX permission set, into a Windows ACL of "FULL CONTROL"\&. If this parameter is set to true any POSIX ACE entry of "rwx" will be returned in a Windows ACL as "FULL CONTROL", is this parameter is set to false any POSIX ACE entry of "rwx" will be returned as the specific Windows ACL bits representing read, write and execute\&.
+.sp
+Default:
+\fI\fIacl map full control\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+add group script (G)
+.PP
+.RS 4
+This is the full pathname to a script that will be run
+\fIAS ROOT\fR
+by
+\fBsmbd\fR(8)
+when a new group is requested\&. It will expand any
+\fI%g\fR
+to the group name passed\&. This script is only useful for installations using the Windows NT domain administration tools\&. The script is free to create a group with an arbitrary name to circumvent unix group name restrictions\&. In that case the script must print the numeric gid of the created group on stdout\&.
+.sp
+Default:
+\fI\fIadd group script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIadd group script\fR\fR\fI = \fR\fI/usr/sbin/groupadd %g\fR\fI \fR
+.RE
+
+additional dns hostnames (G)
+.PP
+.RS 4
+A list of additional DNS names by which this host can be identified
+.sp
+Default:
+\fI\fIadditional dns hostnames\fR\fR\fI = \fR\fI # empty string (no additional dns names)\fR\fI \fR
+.sp
+Example:
+\fI\fIadditional dns hostnames\fR\fR\fI = \fR\fI host2\&.example\&.com host3\&.other\&.com \fR\fI \fR
+.RE
+
+add machine script (G)
+.PP
+.RS 4
+This is the full pathname to a script that will be run by
+\fBsmbd\fR(8)
+when a machine is added to Samba\*(Aqs domain and a Unix account matching the machine\*(Aqs name appended with a "$" does not already exist\&.
+.sp
+This option is very similar to the
+\m[blue]\fBadd user script\fR\m[], and likewise uses the %u substitution for the account name\&. Do not use the %m substitution\&.
+.sp
+Default:
+\fI\fIadd machine script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIadd machine script\fR\fR\fI = \fR\fI/usr/sbin/adduser \-n \-g machines \-c Machine \-d /var/lib/nobody \-s /bin/false %u\fR\fI \fR
+.RE
+
+addport command (G)
+.PP
+.RS 4
+Samba 3\&.0\&.23 introduced support for adding printer ports remotely using the Windows "Add Standard TCP/IP Port Wizard"\&. This option defines an external program to be executed when smbd receives a request to add a new Port to the system\&. The script is passed two parameters:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIport name\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdevice URI\fR
+.RE
+.sp
+.RE
+The deviceURI is in the format of socket://<hostname>[:<portnumber>] or lpd://<hostname>/<queuename>\&.
+.sp
+Default:
+\fI\fIaddport command\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIaddport command\fR\fR\fI = \fR\fI/etc/samba/scripts/addport\&.sh\fR\fI \fR
+.RE
+
+addprinter command (G)
+.PP
+.RS 4
+With the introduction of MS\-RPC based printing support for Windows NT/2000 clients in Samba 2\&.2, The MS Add Printer Wizard (APW) icon is now also available in the "Printers\&.\&.\&." folder displayed a share listing\&. The APW allows for printers to be add remotely to a Samba or Windows NT/2000 print server\&.
+.sp
+For a Samba host this means that the printer must be physically added to the underlying printing system\&. The
+\fIaddprinter command\fR
+defines a script to be run which will perform the necessary operations for adding the printer to the print system and to add the appropriate service definition to the
+smb\&.conf
+file in order that it can be shared by
+\fBsmbd\fR(8)\&.
+.sp
+The
+\fIaddprinter command\fR
+is automatically invoked with the following parameter (in order):
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIprinter name\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIshare name\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIport name\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdriver name\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIlocation\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIWindows 9x driver location\fR
+.RE
+.sp
+.RE
+All parameters are filled in from the PRINTER_INFO_2 structure sent by the Windows NT/2000 client with one exception\&. The "Windows 9x driver location" parameter is included for backwards compatibility only\&. The remaining fields in the structure are generated from answers to the APW questions\&.
+.sp
+Once the
+\fIaddprinter command\fR
+has been executed,
+smbd
+will reparse the
+smb\&.conf
+to determine if the share defined by the APW exists\&. If the sharename is still invalid, then
+smbd
+will return an ACCESS_DENIED error to the client\&.
+.sp
+The
+\fIaddprinter command\fR
+program can output a single line of text, which Samba will set as the port the new printer is connected to\&. If this line isn\*(Aqt output, Samba won\*(Aqt reload its printer shares\&.
+.sp
+Default:
+\fI\fIaddprinter command\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIaddprinter command\fR\fR\fI = \fR\fI/usr/bin/addprinter\fR\fI \fR
+.RE
+
+add share command (G)
+.PP
+.RS 4
+Samba 2\&.2\&.0 introduced the ability to dynamically add and delete shares via the Windows NT 4\&.0 Server Manager\&. The
+\fIadd share command\fR
+is used to define an external program or script which will add a new service definition to
+smb\&.conf\&.
+.sp
+In order to successfully execute the
+\fIadd share command\fR,
+smbd
+requires that the administrator connects using a root account (i\&.e\&. uid == 0) or has the
+SeDiskOperatorPrivilege\&. Scripts defined in the
+\fIadd share command\fR
+parameter are executed as root\&.
+.sp
+When executed,
+smbd
+will automatically invoke the
+\fIadd share command\fR
+with five parameters\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIconfigFile\fR
+\- the location of the global
+smb\&.conf
+file\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIshareName\fR
+\- the name of the new share\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIpathName\fR
+\- path to an **existing** directory on disk\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIcomment\fR
+\- comment string to associate with the new share\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fImax connections\fR
+Number of maximum simultaneous connections to this share\&.
+.RE
+.sp
+.RE
+This parameter is only used to add file shares\&. To add printer shares, see the
+\m[blue]\fBaddprinter command\fR\m[]\&.
+.sp
+Default:
+\fI\fIadd share command\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIadd share command\fR\fR\fI = \fR\fI/usr/local/bin/addshare\fR\fI \fR
+.RE
+
+add user script (G)
+.PP
+.RS 4
+This is the full pathname to a script that will be run
+\fIAS ROOT\fR
+by
+\fBsmbd\fR(8)
+under special circumstances described below\&.
+.sp
+Normally, a Samba server requires that UNIX users are created for all users accessing files on this server\&. For sites that use Windows NT account databases as their primary user database creating these users and keeping the user list in sync with the Windows NT PDC is an onerous task\&. This option allows smbd to create the required UNIX users
+\fION DEMAND\fR
+when a user accesses the Samba server\&.
+.sp
+When the Windows user attempts to access the Samba server, at login (session setup in the SMB protocol) time,
+\fBsmbd\fR(8)
+contacts the
+\m[blue]\fBpassword server\fR\m[]
+and attempts to authenticate the given user with the given password\&. If the authentication succeeds then
+smbd
+attempts to find a UNIX user in the UNIX password database to map the Windows user into\&. If this lookup fails, and
+\m[blue]\fBadd user script\fR\m[]
+is set then
+smbd
+will call the specified script
+\fIAS ROOT\fR, expanding any
+\fI%u\fR
+argument to be the user name to create\&.
+.sp
+If this script successfully creates the user then
+smbd
+will continue on as though the UNIX user already existed\&. In this way, UNIX users are dynamically created to match existing Windows NT accounts\&.
+.sp
+See also
+\m[blue]\fBsecurity\fR\m[],
+\m[blue]\fBpassword server\fR\m[],
+\m[blue]\fBdelete user script\fR\m[]\&.
+.sp
+Default:
+\fI\fIadd user script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIadd user script\fR\fR\fI = \fR\fI/usr/local/samba/bin/add_user %u\fR\fI \fR
+.RE
+
+add user to group script (G)
+.PP
+.RS 4
+Full path to the script that will be called when a user is added to a group using the Windows NT domain administration tools\&. It will be run by
+\fBsmbd\fR(8)
+\fIAS ROOT\fR\&. Any
+\fI%g\fR
+will be replaced with the group name and any
+\fI%u\fR
+will be replaced with the user name\&.
+.sp
+Note that the
+adduser
+command used in the example below does not support the used syntax on all systems\&.
+.sp
+Default:
+\fI\fIadd user to group script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIadd user to group script\fR\fR\fI = \fR\fI/usr/sbin/adduser %u %g\fR\fI \fR
+.RE
+
+administrative share (S)
+.PP
+.RS 4
+If this parameter is set to
+\fByes\fR
+for a share, then the share will be an administrative share\&. The Administrative Shares are the default network shares created by all Windows NT\-based operating systems\&. These are shares like C$, D$ or ADMIN$\&. The type of these shares is STYPE_DISKTREE_HIDDEN\&.
+.sp
+See the section below on
+\m[blue]\fBsecurity\fR\m[]
+for more information about this option\&.
+.sp
+Default:
+\fI\fIadministrative share\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+admin users (S)
+.PP
+.RS 4
+This is a list of users who will be granted administrative privileges on the share\&. This means that they will do all file operations as the super\-user (root)\&.
+.sp
+You should use this option very carefully, as any user in this list will be able to do anything they like on the share, irrespective of file permissions\&.
+.sp
+Default:
+\fI\fIadmin users\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIadmin users\fR\fR\fI = \fR\fIjason\fR\fI \fR
+.RE
+
+afs share (S)
+.PP
+.RS 4
+This parameter controls whether special AFS features are enabled for this share\&. If enabled, it assumes that the directory exported via the
+\fIpath\fR
+parameter is a local AFS import\&. The special AFS features include the attempt to hand\-craft an AFS token if you enabled \-\-with\-fake\-kaserver in configure\&.
+.sp
+Default:
+\fI\fIafs share\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+afs token lifetime (G)
+.PP
+.RS 4
+This parameter controls the lifetime of tokens that the AFS fake\-kaserver claims\&. In reality these never expire but this lifetime controls when the afs client will forget the token\&.
+.sp
+Set this parameter to 0 to get
+\fBNEVERDATE\fR\&.
+.sp
+Default:
+\fI\fIafs token lifetime\fR\fR\fI = \fR\fI604800\fR\fI \fR
+.RE
+
+afs username map (G)
+.PP
+.RS 4
+If you are using the fake kaserver AFS feature, you might want to hand\-craft the usernames you are creating tokens for\&. For example this is necessary if you have users from several domain in your AFS Protection Database\&. One possible scheme to code users as DOMAIN+User as it is done by winbind with the + as a separator\&.
+.sp
+The mapped user name must contain the cell name to log into, so without setting this parameter there will be no token\&.
+.sp
+Default:
+\fI\fIafs username map\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIafs username map\fR\fR\fI = \fR\fI%u@afs\&.samba\&.org\fR\fI \fR
+.RE
+
+aio max threads (G)
+.PP
+.RS 4
+The integer parameter specifies the maximum number of threads each smbd process will create when doing parallel asynchronous IO calls\&. If the number of outstanding calls is greater than this number the requests will not be refused but go onto a queue and will be scheduled in turn as outstanding requests complete\&.
+.sp
+Related command:
+\m[blue]\fBaio read size\fR\m[]
+.sp
+Related command:
+\m[blue]\fBaio write size\fR\m[]
+.sp
+Default:
+\fI\fIaio max threads\fR\fR\fI = \fR\fI100\fR\fI \fR
+.RE
+
+aio read size (S)
+.PP
+.RS 4
+If this integer parameter is set to a non\-zero value, Samba will read from files asynchronously when the request size is bigger than this value\&. Note that it happens only for non\-chained and non\-chaining reads and when not using write cache\&.
+.sp
+The only reasonable values for this parameter are 0 (no async I/O) and 1 (always do async I/O)\&.
+.sp
+Related command:
+\m[blue]\fBwrite cache size\fR\m[]
+.sp
+Related command:
+\m[blue]\fBaio write size\fR\m[]
+.sp
+Default:
+\fI\fIaio read size\fR\fR\fI = \fR\fI1\fR\fI \fR
+.sp
+Example:
+\fI\fIaio read size\fR\fR\fI = \fR\fI0 # Always do reads synchronously \fR\fI \fR
+.RE
+
+aio write behind (S)
+.PP
+.RS 4
+If Samba has been built with asynchronous I/O support, Samba will not wait until write requests are finished before returning the result to the client for files listed in this parameter\&. Instead, Samba will immediately return that the write request has been finished successfully, no matter if the operation will succeed or not\&. This might speed up clients without aio support, but is really dangerous, because data could be lost and files could be damaged\&.
+.sp
+The syntax is identical to the
+\m[blue]\fBveto files\fR\m[]
+parameter\&.
+.sp
+Default:
+\fI\fIaio write behind\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIaio write behind\fR\fR\fI = \fR\fI/*\&.tmp/\fR\fI \fR
+.RE
+
+aio write size (S)
+.PP
+.RS 4
+If this integer parameter is set to a non\-zero value, Samba will write to files asynchronously when the request size is bigger than this value\&. Note that it happens only for non\-chained and non\-chaining reads and when not using write cache\&.
+.sp
+The only reasonable values for this parameter are 0 (no async I/O) and 1 (always do async I/O)\&.
+.sp
+Compared to
+\m[blue]\fBaio read size\fR\m[]
+this parameter has a smaller effect, most writes should end up in the file system cache\&. Writes that require space allocation might benefit most from going asynchronous\&.
+.sp
+Related command:
+\m[blue]\fBwrite cache size\fR\m[]
+.sp
+Related command:
+\m[blue]\fBaio read size\fR\m[]
+.sp
+Default:
+\fI\fIaio write size\fR\fR\fI = \fR\fI1\fR\fI \fR
+.sp
+Example:
+\fI\fIaio write size\fR\fR\fI = \fR\fI0 # Always do writes synchronously \fR\fI \fR
+.RE
+
+algorithmic rid base (G)
+.PP
+.RS 4
+This determines how Samba will use its algorithmic mapping from uids/gid to the RIDs needed to construct NT Security Identifiers\&.
+.sp
+Setting this option to a larger value could be useful to sites transitioning from WinNT and Win2k, as existing user and group rids would otherwise clash with system users etc\&.
+.sp
+All UIDs and GIDs must be able to be resolved into SIDs for the correct operation of ACLs on the server\&. As such the algorithmic mapping can\*(Aqt be \*(Aqturned off\*(Aq, but pushing it \*(Aqout of the way\*(Aq should resolve the issues\&. Users and groups can then be assigned \*(Aqlow\*(Aq RIDs in arbitrary\-rid supporting backends\&.
+.sp
+Default:
+\fI\fIalgorithmic rid base\fR\fR\fI = \fR\fI1000\fR\fI \fR
+.sp
+Example:
+\fI\fIalgorithmic rid base\fR\fR\fI = \fR\fI100000\fR\fI \fR
+.RE
+
+allocation roundup size (S)
+.PP
+.RS 4
+This parameter allows an administrator to tune the allocation size reported to Windows clients\&. This is only useful for old SMB1 clients because modern SMB dialects eliminated that bottleneck and have better performance by default\&. Using this parameter may cause difficulties for some applications, e\&.g\&. MS Visual Studio\&. If the MS Visual Studio compiler starts to crash with an internal error, set this parameter to zero for this share\&. Settings this parameter to a large value can also cause small files to allocate more space on the disk than needed\&.
+.sp
+This parameter is deprecated and will be removed in one of the next Samba releases\&.
+.sp
+The integer parameter specifies the roundup size in bytes\&.
+.sp
+Default:
+\fI\fIallocation roundup size\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fIallocation roundup size\fR\fR\fI = \fR\fI1048576 # (to set it to the former default of 1 MiB)\fR\fI \fR
+.RE
+
+allow dcerpc auth level connect (G)
+.PP
+.RS 4
+This option controls whether DCERPC services are allowed to be used with DCERPC_AUTH_LEVEL_CONNECT, which provides authentication, but no per message integrity nor privacy protection\&.
+.sp
+Some interfaces like samr, lsarpc and netlogon have a hard\-coded default of
+\fBno\fR
+and epmapper, mgmt and rpcecho have a hard\-coded default of
+\fByes\fR\&.
+.sp
+The behavior can be overwritten per interface name (e\&.g\&. lsarpc, netlogon, samr, srvsvc, winreg, wkssvc \&.\&.\&.) by using \*(Aqallow dcerpc auth level connect:interface = yes\*(Aq as option\&.
+.sp
+This option yields precedence to the implementation specific restrictions\&. E\&.g\&. the drsuapi and backupkey protocols require DCERPC_AUTH_LEVEL_PRIVACY\&. The dnsserver protocol requires DCERPC_AUTH_LEVEL_INTEGRITY\&.
+.sp
+Default:
+\fI\fIallow dcerpc auth level connect\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIallow dcerpc auth level connect\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+allow dns updates (G)
+.PP
+.RS 4
+This option determines what kind of updates to the DNS are allowed\&.
+.sp
+DNS updates can either be disallowed completely by setting it to
+\fBdisabled\fR, enabled over secure connections only by setting it to
+\fBsecure only\fR
+or allowed in all cases by setting it to
+\fBnonsecure\fR\&.
+.sp
+Default:
+\fI\fIallow dns updates\fR\fR\fI = \fR\fIsecure only\fR\fI \fR
+.sp
+Example:
+\fI\fIallow dns updates\fR\fR\fI = \fR\fIdisabled\fR\fI \fR
+.RE
+
+allow insecure wide links (G)
+.PP
+.RS 4
+In normal operation the option
+\m[blue]\fBwide links\fR\m[]
+which allows the server to follow symlinks outside of a share path is automatically disabled when
+\m[blue]\fBunix extensions\fR\m[]
+are enabled on a Samba server\&. This is done for security purposes to prevent UNIX clients creating symlinks to areas of the server file system that the administrator does not wish to export\&.
+.sp
+Setting
+\m[blue]\fBallow insecure wide links\fR\m[]
+to true disables the link between these two parameters, removing this protection and allowing a site to configure the server to follow symlinks (by setting
+\m[blue]\fBwide links\fR\m[]
+to "true") even when
+\m[blue]\fBunix extensions\fR\m[]
+is turned on\&.
+.sp
+It is not recommended to enable this option unless you fully understand the implications of allowing the server to follow symbolic links created by UNIX clients\&. For most normal Samba configurations this would be considered a security hole and setting this parameter is not recommended\&.
+.sp
+This option was added at the request of sites who had deliberately set Samba up in this way and needed to continue supporting this functionality without having to patch the Samba code\&.
+.sp
+Default:
+\fI\fIallow insecure wide links\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+allow nt4 crypto (G)
+.PP
+.RS 4
+This option controls whether the netlogon server (currently only in \*(Aqactive directory domain controller\*(Aq mode), will reject clients which does not support NETLOGON_NEG_STRONG_KEYS nor NETLOGON_NEG_SUPPORTS_AES\&.
+.sp
+This option was added with Samba 4\&.2\&.0\&. It may lock out clients which worked fine with Samba versions up to 4\&.1\&.x\&. as the effective default was "yes" there, while it is "no" now\&.
+.sp
+If you have clients without RequireStrongKey = 1 in the registry, you may need to set "allow nt4 crypto = yes", until you have fixed all clients\&.
+.sp
+"allow nt4 crypto = yes" allows weak crypto to be negotiated, maybe via downgrade attacks\&.
+.sp
+This option yields precedence to the \*(Aqreject md5 clients\*(Aq option\&.
+.sp
+Default:
+\fI\fIallow nt4 crypto\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+allow trusted domains (G)
+.PP
+.RS 4
+This option only takes effect when the
+\m[blue]\fBsecurity\fR\m[]
+option is set to
+\fBserver\fR,
+\fBdomain\fR
+or
+\fBads\fR\&. If it is set to no, then attempts to connect to a resource from a domain or workgroup other than the one which smbd is running in will fail, even if that domain is trusted by the remote server doing the authentication\&.
+.sp
+This is useful if you only want your Samba server to serve resources to users in the domain it is a member of\&. As an example, suppose that there are two domains DOMA and DOMB\&. DOMB is trusted by DOMA, which contains the Samba server\&. Under normal circumstances, a user with an account in DOMB can then access the resources of a UNIX account with the same account name on the Samba server even if they do not have an account in DOMA\&. This can make implementing a security boundary difficult\&.
+.sp
+Default:
+\fI\fIallow trusted domains\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+allow unsafe cluster upgrade (G)
+.PP
+.RS 4
+If set to no (the default), smbd checks at startup if other smbd versions are running in the cluster and refuses to start if so\&. This is done to protect data corruption in internal data structures due to incompatible Samba versions running concurrently in the same cluster\&. Setting this parameter to
+yes
+disables this safety check\&.
+.sp
+Default:
+\fI\fIallow unsafe cluster upgrade\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+apply group policies (G)
+.PP
+.RS 4
+This option controls whether winbind will execute the gpupdate command defined in
+\m[blue]\fBgpo update command\fR\m[]
+on the Group Policy update interval\&. The Group Policy update interval is defined as every 90 minutes, plus a random offset between 0 and 30 minutes\&. This applies Group Policy Machine polices to the client or KDC and machine policies to a server\&.
+.sp
+Default:
+\fI\fIapply group policies\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIapply group policies\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+async dns timeout (G)
+.PP
+.RS 4
+The number of seconds the asynchronous DNS resolver code in Samba will wait for responses\&. Some of the Samba client library code uses internal asynchronous DNS resolution for A and AAAA records when trying to find Active Directory Domain controllers\&. This value prevents this name resolution code from waiting for DNS server timeouts\&.
+.sp
+The minimum value of this parameter is clamped at 1 second\&.
+.sp
+Default:
+\fI\fIasync dns timeout\fR\fR\fI = \fR\fI10\fR\fI \fR
+.sp
+Example:
+\fI\fIasync dns timeout\fR\fR\fI = \fR\fI20\fR\fI \fR
+.RE
+
+async smb echo handler (G)
+.PP
+.RS 4
+This parameter specifies whether Samba should fork the async smb echo handler\&. It can be beneficial if your file system can block syscalls for a very long time\&. In some circumstances, it prolongs the timeout that Windows uses to determine whether a connection is dead\&. This parameter is only for SMB1\&. For SMB2 and above TCP keepalives can be used instead\&.
+.sp
+Default:
+\fI\fIasync smb echo handler\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+auth event notification (G)
+.PP
+.RS 4
+When enabled, this option causes Samba (acting as an Active Directory Domain Controller) to stream authentication events across the internal message bus\&. Scripts built using Samba\*(Aqs python bindings can listen to these events by registering as the service
+auth_event\&.
+.sp
+This is
+\fInot\fR
+needed for the audit logging described in
+\m[blue]\fBlog level\fR\m[]\&.
+.sp
+Instead, this should instead be considered a developer option (it assists in the Samba testsuite) rather than a facility for external auditing, as message delivery is not guaranteed (a feature that the testsuite works around)\&.
+.sp
+The authentication events are also logged via the normal logging methods when the
+\m[blue]\fBlog level\fR\m[]
+is set appropriately, say to
+auth_json_audit:3\&.
+.sp
+Default:
+\fI\fIauth event notification\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+preload
+.PP
+.RS 4
+This parameter is a synonym for
+auto services\&.
+.RE
+
+auto services (G)
+.PP
+.RS 4
+This is a list of services that you want to be automatically added to the browse lists\&. This is most useful for homes and printers services that would otherwise not be visible\&.
+.sp
+Note that if you just want all printers in your printcap file loaded then the
+\m[blue]\fBload printers\fR\m[]
+option is easier\&.
+.sp
+Default:
+\fI\fIauto services\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIauto services\fR\fR\fI = \fR\fIfred lp colorlp\fR\fI \fR
+.RE
+
+available (S)
+.PP
+.RS 4
+This parameter lets you "turn off" a service\&. If
+\fIavailable = no\fR, then
+\fIALL\fR
+attempts to connect to the service will fail\&. Such failures are logged\&.
+.sp
+Default:
+\fI\fIavailable\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+bind dns directory
+.PP
+.RS 4
+This parameter is a synonym for
+binddns dir\&.
+.RE
+
+binddns dir (G)
+.PP
+.RS 4
+This parameters defines the directory samba will use to store the configuration files for bind, such as named\&.conf\&. NOTE: The bind dns directory needs to be on the same mount point as the private directory!
+.sp
+Default:
+\fI\fIbinddns dir\fR\fR\fI = \fR\fI${prefix}/bind\-dns\fR\fI \fR
+.RE
+
+bind interfaces only (G)
+.PP
+.RS 4
+This global parameter allows the Samba admin to limit what interfaces on a machine will serve SMB requests\&. It affects file service
+\fBsmbd\fR(8)
+and name service
+\fBnmbd\fR(8)
+in a slightly different ways\&.
+.sp
+For name service it causes
+nmbd
+to bind to ports 137 and 138 on the interfaces listed in the
+\m[blue]\fBinterfaces\fR\m[]
+parameter\&.
+nmbd
+also binds to the "all addresses" interface (0\&.0\&.0\&.0) on ports 137 and 138 for the purposes of reading broadcast messages\&. If this option is not set then
+nmbd
+will service name requests on all of these sockets\&. If
+\m[blue]\fBbind interfaces only\fR\m[]
+is set then
+nmbd
+will check the source address of any packets coming in on the broadcast sockets and discard any that don\*(Aqt match the broadcast addresses of the interfaces in the
+\m[blue]\fBinterfaces\fR\m[]
+parameter list\&. As unicast packets are received on the other sockets it allows
+nmbd
+to refuse to serve names to machines that send packets that arrive through any interfaces not listed in the
+\m[blue]\fBinterfaces\fR\m[]
+list\&. IP Source address spoofing does defeat this simple check, however, so it must not be used seriously as a security feature for
+nmbd\&.
+.sp
+For file service it causes
+\fBsmbd\fR(8)
+to bind only to the interface list given in the
+\m[blue]\fBinterfaces\fR\m[]
+parameter\&. This restricts the networks that
+smbd
+will serve, to packets coming in on those interfaces\&. Note that you should not use this parameter for machines that are serving PPP or other intermittent or non\-broadcast network interfaces as it will not cope with non\-permanent interfaces\&.
+.sp
+If
+\m[blue]\fBbind interfaces only\fR\m[]
+is set and the network address
+\fI127\&.0\&.0\&.1\fR
+is not added to the
+\m[blue]\fBinterfaces\fR\m[]
+parameter list
+\fBsmbpasswd\fR(8)
+may not work as expected due to the reasons covered below\&.
+.sp
+To change a users SMB password, the
+smbpasswd
+by default connects to the
+\fIlocalhost \- 127\&.0\&.0\&.1\fR
+address as an SMB client to issue the password change request\&. If
+\m[blue]\fBbind interfaces only\fR\m[]
+is set then unless the network address
+\fI127\&.0\&.0\&.1\fR
+is added to the
+\m[blue]\fBinterfaces\fR\m[]
+parameter list then
+smbpasswd
+will fail to connect in it\*(Aqs default mode\&.
+smbpasswd
+can be forced to use the primary IP interface of the local host by using its
+\fBsmbpasswd\fR(8)
+\fI\-r \fR\fI\fIremote machine\fR\fR
+parameter, with
+\fIremote machine\fR
+set to the IP name of the primary interface of the local host\&.
+.sp
+Default:
+\fI\fIbind interfaces only\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+blocking locks (S)
+.PP
+.RS 4
+This parameter controls the behavior of
+\fBsmbd\fR(8)
+when given a request by a client to obtain a byte range lock on a region of an open file, and the request has a time limit associated with it\&.
+.sp
+If this parameter is set and the lock range requested cannot be immediately satisfied, samba will internally queue the lock request, and periodically attempt to obtain the lock until the timeout period expires\&.
+.sp
+If this parameter is set to
+\fBno\fR, then samba will behave as previous versions of Samba would and will fail the lock request immediately if the lock range cannot be obtained\&.
+.sp
+Default:
+\fI\fIblocking locks\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+block size (S)
+.PP
+.RS 4
+This parameter controls the behavior of
+\fBsmbd\fR(8)
+when reporting disk free sizes\&. By default, this reports a disk block size of 1024 bytes\&.
+.sp
+Changing this parameter may have some effect on the efficiency of client writes, this is not yet confirmed\&. This parameter was added to allow advanced administrators to change it (usually to a higher value) and test the effect it has on client write performance without re\-compiling the code\&. As this is an experimental option it may be removed in a future release\&.
+.sp
+Changing this option does not change the disk free reporting size, just the block size unit reported to the client\&.
+.sp
+Default:
+\fI\fIblock size\fR\fR\fI = \fR\fI1024\fR\fI \fR
+.sp
+Example:
+\fI\fIblock size\fR\fR\fI = \fR\fI4096\fR\fI \fR
+.RE
+
+browsable
+.PP
+.RS 4
+This parameter is a synonym for
+browseable\&.
+.RE
+
+browseable (S)
+.PP
+.RS 4
+This controls whether this share is seen in the list of available shares in a net view and in the browse list\&.
+.sp
+Default:
+\fI\fIbrowseable\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+browse list (G)
+.PP
+.RS 4
+This controls whether
+\fBsmbd\fR(8)
+will serve a browse list to a client doing a
+NetServerEnum
+call\&. Normally set to
+\fByes\fR\&. You should never need to change this\&.
+.sp
+Default:
+\fI\fIbrowse list\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+cache directory (G)
+.PP
+.RS 4
+Usually, most of the TDB files are stored in the
+\fIlock directory\fR\&. Since Samba 3\&.4\&.0, it is possible to differentiate between TDB files with persistent data and TDB files with non\-persistent data using the
+\fIstate directory\fR
+and the
+\fIcache directory\fR
+options\&.
+.sp
+This option specifies the directory for storing TDB files containing non\-persistent data that will be kept across service restarts\&. The directory should be placed on persistent storage, but the data can be safely deleted by an administrator\&.
+.sp
+Default:
+\fI\fIcache directory\fR\fR\fI = \fR\fI${prefix}/var/cache\fR\fI \fR
+.sp
+Example:
+\fI\fIcache directory\fR\fR\fI = \fR\fI/var/run/samba/locks/cache\fR\fI \fR
+.RE
+
+casesignames
+.PP
+.RS 4
+This parameter is a synonym for
+case sensitive\&.
+.RE
+
+case sensitive (S)
+.PP
+.RS 4
+See the discussion in the section
+\m[blue]\fBname mangling\fR\m[]\&.
+.sp
+Default:
+\fI\fIcase sensitive\fR\fR\fI = \fR\fIauto\fR\fI \fR
+.RE
+
+change notify (G)
+.PP
+.RS 4
+This parameter specifies whether Samba should reply to a client\*(Aqs file change notify requests\&.
+.sp
+You should never need to change this parameter
+.sp
+Default:
+\fI\fIchange notify\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+change share command (G)
+.PP
+.RS 4
+Samba 2\&.2\&.0 introduced the ability to dynamically add and delete shares via the Windows NT 4\&.0 Server Manager\&. The
+\fIchange share command\fR
+is used to define an external program or script which will modify an existing service definition in
+smb\&.conf\&.
+.sp
+In order to successfully execute the
+\fIchange share command\fR,
+smbd
+requires that the administrator connects using a root account (i\&.e\&. uid == 0) or has the
+SeDiskOperatorPrivilege\&. Scripts defined in the
+\fIchange share command\fR
+parameter are executed as root\&.
+.sp
+When executed,
+smbd
+will automatically invoke the
+\fIchange share command\fR
+with six parameters\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIconfigFile\fR
+\- the location of the global
+smb\&.conf
+file\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIshareName\fR
+\- the name of the new share\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIpathName\fR
+\- path to an **existing** directory on disk\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIcomment\fR
+\- comment string to associate with the new share\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fImax connections\fR
+Number of maximum simultaneous connections to this share\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fICSC policy\fR
+\- client side caching policy in string form\&. Valid values are: manual, documents, programs, disable\&.
+.RE
+.sp
+.RE
+This parameter is only used to modify existing file share definitions\&. To modify printer shares, use the "Printers\&.\&.\&." folder as seen when browsing the Samba host\&.
+.sp
+Default:
+\fI\fIchange share command\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIchange share command\fR\fR\fI = \fR\fI/usr/local/bin/changeshare\fR\fI \fR
+.RE
+
+check parent directory delete on close (S)
+.PP
+.RS 4
+A Windows SMB server prevents the client from creating files in a directory that has the delete\-on\-close flag set\&. By default Samba doesn\*(Aqt perform this check as this check is a quite expensive operation in Samba\&.
+.sp
+Default:
+\fI\fIcheck parent directory delete on close\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+check password script (G)
+.PP
+.RS 4
+The name of a program that can be used to check password complexity\&. The password is sent to the program\*(Aqs standard input\&.
+.sp
+The program must return 0 on a good password, or any other value if the password is bad\&. In case the password is considered weak (the program does not return 0) the user will be notified and the password change will fail\&.
+.sp
+In Samba AD, this script will be run
+\fIAS ROOT\fR
+by
+\fBsamba\fR(8)
+without any substitutions\&.
+.sp
+Note that starting with Samba 4\&.11 the following environment variables are exported to the script:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SAMBA_CPS_ACCOUNT_NAME is always present and contains the sAMAccountName of user, the is the same as the %u substitutions in the none AD DC case\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SAMBA_CPS_USER_PRINCIPAL_NAME is optional in the AD DC case if the userPrincipalName is present\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SAMBA_CPS_FULL_NAME is optional if the displayName is present\&.
+.RE
+.sp
+.RE
+Note: In the example directory is a sample program called
+crackcheck
+that uses cracklib to check the password quality\&.
+.sp
+Default:
+\fI\fIcheck password script\fR\fR\fI = \fR\fI # Disabled\fR\fI \fR
+.sp
+Example:
+\fI\fIcheck password script\fR\fR\fI = \fR\fI/usr/local/sbin/crackcheck\fR\fI \fR
+.RE
+
+cldap port (G)
+.PP
+.RS 4
+This option controls the port used by the CLDAP protocol\&.
+.sp
+Default:
+\fI\fIcldap port\fR\fR\fI = \fR\fI389\fR\fI \fR
+.sp
+Example:
+\fI\fIcldap port\fR\fR\fI = \fR\fI3389\fR\fI \fR
+.RE
+
+client ipc max protocol (G)
+.PP
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported for IPC$ connections as DCERPC transport\&.
+.sp
+Normally this option should not be set as the automatic negotiation phase in the SMB protocol takes care of choosing the appropriate protocol\&.
+.sp
+The value
+\fBdefault\fR
+refers to the latest supported protocol, currently
+\fBSMB3_11\fR\&.
+.sp
+See
+\m[blue]\fBclient max protocol\fR\m[]
+for a full list of available protocols\&. The values CORE, COREPLUS, LANMAN1, LANMAN2 are silently upgraded to NT1\&.
+.sp
+Default:
+\fI\fIclient ipc max protocol\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.sp
+Example:
+\fI\fIclient ipc max protocol\fR\fR\fI = \fR\fISMB2_10\fR\fI \fR
+.RE
+
+client ipc min protocol (G)
+.PP
+.RS 4
+This setting controls the minimum protocol version that the will be attempted to use for IPC$ connections as DCERPC transport\&.
+.sp
+Normally this option should not be set as the automatic negotiation phase in the SMB protocol takes care of choosing the appropriate protocol\&.
+.sp
+The value
+\fBdefault\fR
+refers to the higher value of
+\fBNT1\fR
+and the effective value of
+\m[blue]\fBclient min protocol\fR\m[]\&.
+.sp
+See
+\m[blue]\fBclient max protocol\fR\m[]
+for a full list of available protocols\&. The values CORE, COREPLUS, LANMAN1, LANMAN2 are silently upgraded to NT1\&.
+.sp
+Default:
+\fI\fIclient ipc min protocol\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.sp
+Example:
+\fI\fIclient ipc min protocol\fR\fR\fI = \fR\fISMB3_11\fR\fI \fR
+.RE
+
+client ipc signing (G)
+.PP
+.RS 4
+This controls whether the client is allowed or required to use SMB signing for IPC$ connections as DCERPC transport\&. Possible values are
+\fIdesired\fR,
+\fIrequired\fR
+and
+\fIdisabled\fR\&.
+.sp
+When set to required or default, SMB signing is mandatory\&.
+.sp
+When set to desired, SMB signing is offered, but not enforced and if set to disabled, SMB signing is not offered either\&.
+.sp
+Connections from winbindd to Active Directory Domain Controllers always enforce signing\&.
+.sp
+Default:
+\fI\fIclient ipc signing\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.RE
+
+client lanman auth (G)
+.PP
+.RS 4
+This parameter has been deprecated since Samba 4\&.13 and support for LanMan (as distinct from NTLM, NTLMv2 or Kerberos) authentication as a client will be removed in a future Samba release\&.
+.sp
+That is, in the future, the current default of
+client NTLMv2 auth = yes
+will be the enforced behaviour\&.
+.sp
+This parameter determines whether or not
+\fBsmbclient\fR(8)
+and other samba client tools will attempt to authenticate itself to servers using the weaker LANMAN password hash\&. If disabled, only server which support NT password hashes (e\&.g\&. Windows NT/2000, Samba, etc\&.\&.\&. but not Windows 95/98) will be able to be connected from the Samba client\&.
+.sp
+The LANMAN encrypted response is easily broken, due to its case\-insensitive nature, and the choice of algorithm\&. Clients without Windows 95/98 servers are advised to disable this option\&.
+.sp
+Disabling this option will also disable the
+client plaintext auth
+option\&.
+.sp
+Likewise, if the
+client ntlmv2 auth
+parameter is enabled, then only NTLMv2 logins will be attempted\&.
+.sp
+Default:
+\fI\fIclient lanman auth\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+client ldap sasl wrapping (G)
+.PP
+.RS 4
+The
+\m[blue]\fBclient ldap sasl wrapping\fR\m[]
+defines whether ldap traffic will be signed or signed and encrypted (sealed)\&. Possible values are
+\fIplain\fR,
+\fIsign\fR
+and
+\fIseal\fR\&.
+.sp
+The values
+\fIsign\fR
+and
+\fIseal\fR
+are only available if Samba has been compiled against a modern OpenLDAP version (2\&.3\&.x or higher)\&.
+.sp
+This option is needed in the case of Domain Controllers enforcing the usage of signed LDAP connections (e\&.g\&. Windows 2000 SP3 or higher)\&. LDAP sign and seal can be controlled with the registry key "HKLM\eSystem\eCurrentControlSet\eServices\e
+NTDS\eParameters\eLDAPServerIntegrity" on the Windows server side\&.
+.sp
+Depending on the used KRB5 library (MIT and older Heimdal versions) it is possible that the message "integrity only" is not supported\&. In this case,
+\fIsign\fR
+is just an alias for
+\fIseal\fR\&.
+.sp
+The default value is
+\fIsign\fR\&. That implies synchronizing the time with the KDC in the case of using
+\fIKerberos\fR\&.
+.sp
+Default:
+\fI\fIclient ldap sasl wrapping\fR\fR\fI = \fR\fIsign\fR\fI \fR
+.RE
+
+client max protocol (G)
+.PP
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported by the client\&.
+.sp
+Possible values are :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBCORE\fR: Earliest version\&. No concept of user names\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBCOREPLUS\fR: Slight improvements on CORE for efficiency\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBLANMAN1\fR: First
+\fImodern\fR
+version of the protocol\&. Long filename support\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBLANMAN2\fR: Updates to Lanman1 protocol\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBNT1\fR: Current up to date version of the protocol\&. Used by Windows NT\&. Known as CIFS\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB2\fR: Re\-implementation of the SMB protocol\&. Used by Windows Vista and later versions of Windows\&. SMB2 has sub protocols available\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB2_02\fR: The earliest SMB2 version\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB2_10\fR: Windows 7 SMB2 version\&.
+.RE
+.sp
+.RE
+By default SMB2 selects the SMB2_10 variant\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB3\fR: The same as SMB2\&. Used by Windows 8\&. SMB3 has sub protocols available\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB3_00\fR: Windows 8 SMB3 version\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB3_02\fR: Windows 8\&.1 SMB3 version\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB3_11\fR: Windows 10 SMB3 version\&.
+.RE
+.sp
+.RE
+By default SMB3 selects the SMB3_11 variant\&.
+.RE
+.sp
+.RE
+Normally this option should not be set as the automatic negotiation phase in the SMB protocol takes care of choosing the appropriate protocol\&.
+.sp
+The value
+\fBdefault\fR
+refers to
+\fBSMB3_11\fR\&.
+.sp
+IPC$ connections for DCERPC e\&.g\&. in winbindd, are handled by the
+\m[blue]\fBclient ipc max protocol\fR\m[]
+option\&.
+.sp
+Default:
+\fI\fIclient max protocol\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.sp
+Example:
+\fI\fIclient max protocol\fR\fR\fI = \fR\fILANMAN1\fR\fI \fR
+.RE
+
+client min protocol (G)
+.PP
+.RS 4
+This setting controls the minimum protocol version that the client will attempt to use\&.
+.sp
+Normally this option should not be set as the automatic negotiation phase in the SMB protocol takes care of choosing the appropriate protocol unless you connect to a legacy SMB1\-only server\&.
+.sp
+See
+Related command: \m[blue]\fBclient max protocol\fR\m[]
+for a full list of available protocols\&.
+.sp
+IPC$ connections for DCERPC e\&.g\&. in winbindd, are handled by the
+\m[blue]\fBclient ipc min protocol\fR\m[]
+option\&.
+.sp
+Note that most command line tools support \-\-option=\*(Aqclient min protocol=NT1\*(Aq, so it may not be required to enable SMB1 protocols globally in smb\&.conf\&.
+.sp
+Default:
+\fI\fIclient min protocol\fR\fR\fI = \fR\fISMB2_02\fR\fI \fR
+.sp
+Example:
+\fI\fIclient min protocol\fR\fR\fI = \fR\fINT1\fR\fI \fR
+.RE
+
+client NTLMv2 auth (G)
+.PP
+.RS 4
+This parameter has been deprecated since Samba 4\&.13 and support for NTLM and LanMan (as distinct from NTLMv2 or Kerberos authentication) will be removed in a future Samba release\&.
+.sp
+That is, in the future, the current default of
+client NTLMv2 auth = yes
+will be the enforced behaviour\&.
+.sp
+This parameter determines whether or not
+\fBsmbclient\fR(8)
+will attempt to authenticate itself to servers using the NTLMv2 encrypted password response\&.
+.sp
+If enabled, only an NTLMv2 and LMv2 response (both much more secure than earlier versions) will be sent\&. Older servers (including NT4 < SP4, Win9x and Samba 2\&.2) are not compatible with NTLMv2 when not in an NTLMv2 supporting domain
+.sp
+Similarly, if enabled, NTLMv1,
+client lanman auth
+and
+client plaintext auth
+authentication will be disabled\&. This also disables share\-level authentication\&.
+.sp
+If disabled, an NTLM response (and possibly a LANMAN response) will be sent by the client, depending on the value of
+client lanman auth\&.
+.sp
+Note that Windows Vista and later versions already use NTLMv2 by default, and some sites (particularly those following \*(Aqbest practice\*(Aq security polices) only allow NTLMv2 responses, and not the weaker LM or NTLM\&.
+.sp
+When
+\m[blue]\fBclient use spnego\fR\m[]
+is also set to
+\fByes\fR
+extended security (SPNEGO) is required in order to use NTLMv2 only within NTLMSSP\&. This behavior was introduced with the patches for CVE\-2016\-2111\&.
+.sp
+Default:
+\fI\fIclient NTLMv2 auth\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+client plaintext auth (G)
+.PP
+.RS 4
+This parameter has been deprecated since Samba 4\&.13 and support for plaintext (as distinct from NTLM, NTLMv2 or Kerberos authentication) will be removed in a future Samba release\&.
+.sp
+That is, in the future, the current default of
+client plaintext auth = no
+will be the enforced behaviour\&.
+.sp
+Specifies whether a client should send a plaintext password if the server does not support encrypted passwords\&.
+.sp
+Default:
+\fI\fIclient plaintext auth\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+client protection (G)
+.PP
+.RS 4
+This parameter defines which protection Samba client tools should use by default\&.
+.sp
+Possible client settings are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdefault\fR
+\- Use the individual default values of the options:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIclient signing\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIclient smb encrypt\fR
+.RE
+.sp
+.RE
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIplain\fR
+\- This will send everything just as plaintext, signing or encryption are turned off\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsign\fR
+\- This will enable integrity checking\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIencrypt\fR
+\- This will enable integrity checks and force encryption for privacy\&.
+.RE
+.sp
+.RE
+Default:
+\fI\fIclient protection\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.RE
+
+client schannel (G)
+.PP
+.RS 4
+This option is deprecated with Samba 4\&.8 and will be removed in future\&. At the same time the default changed to yes, which will be the hardcoded behavior in future\&.
+.sp
+This controls whether the client offers or even demands the use of the netlogon schannel\&.
+\m[blue]\fBclient schannel = no\fR\m[]
+does not offer the schannel,
+\m[blue]\fBclient schannel = auto\fR\m[]
+offers the schannel but does not enforce it, and
+\m[blue]\fBclient schannel = yes\fR\m[]
+denies access if the server is not able to speak netlogon schannel\&.
+.sp
+Note that for active directory domains this is hardcoded to
+\m[blue]\fBclient schannel = yes\fR\m[]\&.
+.sp
+This option yields precedence to the
+\m[blue]\fBrequire strong key\fR\m[]
+option\&.
+.sp
+Default:
+\fI\fIclient schannel\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.sp
+Example:
+\fI\fIclient schannel\fR\fR\fI = \fR\fIauto\fR\fI \fR
+.RE
+
+client signing (G)
+.PP
+.RS 4
+This controls whether the client is allowed or required to use SMB signing\&. Possible values are
+\fIdesired\fR,
+\fIrequired\fR
+and
+\fIdisabled\fR\&.
+.sp
+When set to desired or default, SMB signing is offered, but not enforced\&.
+.sp
+When set to required, SMB signing is mandatory and if set to disabled, SMB signing is not offered either\&.
+.sp
+IPC$ connections for DCERPC e\&.g\&. in winbindd, are handled by the
+\m[blue]\fBclient ipc signing\fR\m[]
+option\&.
+.sp
+Default:
+\fI\fIclient signing\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.RE
+
+client smb encrypt (G)
+.PP
+.RS 4
+This parameter controls whether a client should try or is required to use SMB encryption\&. It has different effects depending on whether the connection uses SMB1 or SMB3:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+If the connection uses SMB1, then this option controls the use of a Samba\-specific extension to the SMB protocol introduced in Samba 3\&.2 that makes use of the Unix extensions\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+If the connection uses SMB2 or newer, then this option controls the use of the SMB\-level encryption that is supported in SMB version 3\&.0 and above and available in Windows 8 and newer\&.
+.RE
+.sp
+.RE
+This parameter can be set globally\&. Possible values are
+\fIoff\fR,
+\fIif_required\fR,
+\fIdesired\fR, and
+\fIrequired\fR\&. A special value is
+\fIdefault\fR
+which is the implicit default setting of
+\fIif_required\fR\&.
+.PP
+\fIEffects for SMB1\fR
+.RS 4
+The Samba\-specific encryption of SMB1 connections is an extension to the SMB protocol negotiated as part of the UNIX extensions\&. SMB encryption uses the GSSAPI (SSPI on Windows) ability to encrypt and sign every request/response in a SMB protocol stream\&. When enabled it provides a secure method of SMB/CIFS communication, similar to an ssh protected session, but using SMB/CIFS authentication to negotiate encryption and signing keys\&. Currently this is only supported smbclient of by Samba 3\&.2 and newer\&. Windows does not support this feature\&.
+.sp
+When set to default, SMB encryption is probed, but not enforced\&. When set to required, SMB encryption is required and if set to disabled, SMB encryption can not be negotiated\&.
+.RE
+.PP
+\fIEffects for SMB3 and newer\fR
+.RS 4
+Native SMB transport encryption is available in SMB version 3\&.0 or newer\&. It is only used by Samba if
+\fIclient max protocol\fR
+is set to
+\fISMB3\fR
+or newer\&.
+.sp
+These features can be controlled with settings of
+\fIclient smb encrypt\fR
+as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Leaving it as default, explicitly setting
+\fIdefault\fR, or setting it to
+\fIif_required\fR
+globally will enable negotiation of encryption but will not turn on data encryption globally\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Setting it to
+\fIdesired\fR
+globally will enable negotiation and will turn on data encryption on sessions and share connections for those servers that support it\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Setting it to
+\fIrequired\fR
+globally will enable negotiation and turn on data encryption on sessions and share connections\&. Clients that do not support encryption will be denied access to the server\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Setting it to
+\fIoff\fR
+globally will completely disable the encryption feature for all connections\&.
+.RE
+.sp
+.RE
+.RE
+.sp
+Default:
+\fI\fIclient smb encrypt\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.RE
+
+client smb3 encryption algorithms (G)
+.PP
+.RS 4
+This parameter specifies the availability and order of encryption algorithms which are available for negotiation in the SMB3_11 dialect\&.
+.sp
+It is also possible to remove individual algorithms from the default list, by prefixing them with \*(Aq\-\*(Aq\&. This can avoid having to specify a hardcoded list\&.
+.sp
+Note: that the removal of AES\-128\-CCM from the list will result in SMB3_00 and SMB3_02 being unavailable, as it is the default and only available algorithm for these dialects\&.
+.sp
+Default:
+\fI\fIclient smb3 encryption algorithms\fR\fR\fI = \fR\fIAES\-128\-GCM, AES\-128\-CCM, AES\-256\-GCM, AES\-256\-CCM\fR\fI \fR
+.sp
+Example:
+\fI\fIclient smb3 encryption algorithms\fR\fR\fI = \fR\fIAES\-256\-GCM\fR\fI \fR
+.sp
+Example:
+\fI\fIclient smb3 encryption algorithms\fR\fR\fI = \fR\fI\-AES\-128\-GCM \-AES\-128\-CCM\fR\fI \fR
+.RE
+
+client smb3 signing algorithms (G)
+.PP
+.RS 4
+This parameter specifies the availability and order of signing algorithms which are available for negotiation in the SMB3_11 dialect\&.
+.sp
+It is also possible to remove individual algorithms from the default list, by prefixing them with \*(Aq\-\*(Aq\&. This can avoid having to specify a hardcoded list\&.
+.sp
+Note: that the removal of AES\-128\-CMAC from the list will result in SMB3_00 and SMB3_02 being unavailable, and the removal of HMAC\-SHA256 will result in SMB2_02 and SMB2_10 being unavailable, as these are the default and only available algorithms for these dialects\&.
+.sp
+Default:
+\fI\fIclient smb3 signing algorithms\fR\fR\fI = \fR\fIAES\-128\-GMAC, AES\-128\-CMAC, HMAC\-SHA256\fR\fI \fR
+.sp
+Example:
+\fI\fIclient smb3 signing algorithms\fR\fR\fI = \fR\fIAES\-128\-CMAC, HMAC\-SHA256\fR\fI \fR
+.sp
+Example:
+\fI\fIclient smb3 signing algorithms\fR\fR\fI = \fR\fI\-AES\-128\-CMAC\fR\fI \fR
+.RE
+
+client use kerberos (G)
+.PP
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Possible option settings are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdesired\fR
+\- Kerberos authentication will be tried first and if it fails it automatically fallback to NTLM\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIrequired\fR
+\- Kerberos authentication will be required\&. There will be no falllback to NTLM or a different alternative\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIoff\fR
+\- Don\*(Aqt use Kerberos, use NTLM instead or another alternative\&.
+.RE
+.sp
+.RE
+In case that weak cryptography is not allowed (e\&.g\&. FIPS mode) the default will be forced to
+\fIrequired\fR\&.
+.sp
+Default:
+\fI\fIclient use kerberos\fR\fR\fI = \fR\fIdesired\fR\fI \fR
+.RE
+
+client use spnego principal (G)
+.PP
+.RS 4
+This parameter determines whether or not
+\fBsmbclient\fR(8)
+and other samba components acting as a client will attempt to use the server\-supplied principal sometimes given in the SPNEGO exchange\&.
+.sp
+If enabled, Samba can attempt to use Kerberos to contact servers known only by IP address\&. Kerberos relies on names, so ordinarily cannot function in this situation\&.
+.sp
+This is a VERY BAD IDEA for security reasons, and so this parameter SHOULD NOT BE USED\&. It will be removed in a future version of Samba\&.
+.sp
+If disabled, Samba will use the name used to look up the server when asking the KDC for a ticket\&. This avoids situations where a server may impersonate another, soliciting authentication as one principal while being known on the network as another\&.
+.sp
+Note that Windows XP SP2 and later versions already follow this behaviour, and Windows Vista and later servers no longer supply this \*(Aqrfc4178 hint\*(Aq principal on the server side\&.
+.sp
+This parameter is deprecated in Samba 4\&.2\&.1 and will be removed (along with the functionality) in a later release of Samba\&.
+.sp
+Default:
+\fI\fIclient use spnego principal\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+client use spnego (G)
+.PP
+.RS 4
+This parameter has been deprecated since Samba 4\&.13 and support for NTLMv2, NTLM and LanMan authentication outside NTLMSSP will be removed in a future Samba release\&.
+.sp
+That is, in the future, the current default of
+client use spnego = yes
+will be the enforced behaviour\&.
+.sp
+This variable controls whether Samba clients will try to use Simple and Protected NEGOciation (as specified by rfc2478) with supporting servers (including WindowsXP, Windows2000 and Samba 3\&.0) to agree upon an authentication mechanism\&. This enables Kerberos authentication in particular\&.
+.sp
+When
+\m[blue]\fBclient NTLMv2 auth\fR\m[]
+is also set to
+\fByes\fR
+extended security (SPNEGO) is required in order to use NTLMv2 only within NTLMSSP\&. This behavior was introduced with the patches for CVE\-2016\-2111\&.
+.sp
+Default:
+\fI\fIclient use spnego\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+cluster addresses (G)
+.PP
+.RS 4
+With this parameter you can add additional addresses that nmbd will register with a WINS server\&. Similarly, these addresses will be registered by default when
+\fInet ads dns register\fR
+is called with
+\m[blue]\fBclustering = yes\fR\m[]
+configured\&.
+.sp
+Default:
+\fI\fIcluster addresses\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIcluster addresses\fR\fR\fI = \fR\fI10\&.0\&.0\&.1 10\&.0\&.0\&.2 10\&.0\&.0\&.3\fR\fI \fR
+.RE
+
+clustering (G)
+.PP
+.RS 4
+This parameter specifies whether Samba should contact ctdb for accessing its tdb files and use ctdb as a backend for its messaging backend\&.
+.sp
+Set this parameter to
+yes
+only if you have a cluster setup with ctdb running\&.
+.sp
+Default:
+\fI\fIclustering\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+comment (S)
+.PP
+.RS 4
+This is a text field that is seen next to a share when a client does a queries the server, either via the network neighborhood or via
+net view
+to list what shares are available\&.
+.sp
+If you want to set the string that is displayed next to the machine name then see the
+\m[blue]\fBserver string\fR\m[]
+parameter\&.
+.sp
+Default:
+\fI\fIcomment\fR\fR\fI = \fR\fI # No comment\fR\fI \fR
+.sp
+Example:
+\fI\fIcomment\fR\fR\fI = \fR\fIFred\*(Aqs Files\fR\fI \fR
+.RE
+
+config backend (G)
+.PP
+.RS 4
+This controls the backend for storing the configuration\&. Possible values are
+\fIfile\fR
+(the default) and
+\fIregistry\fR\&. When
+\m[blue]\fBconfig backend = registry\fR\m[]
+is encountered while loading
+\fIsmb\&.conf\fR, the configuration read so far is dropped and the global options are read from registry instead\&. So this triggers a registry only configuration\&. Share definitions are not read immediately but instead
+\fIregistry shares\fR
+is set to
+\fIyes\fR\&.
+.sp
+Note: This option can not be set inside the registry configuration itself\&.
+.sp
+Default:
+\fI\fIconfig backend\fR\fR\fI = \fR\fIfile\fR\fI \fR
+.sp
+Example:
+\fI\fIconfig backend\fR\fR\fI = \fR\fIregistry\fR\fI \fR
+.RE
+
+config file (G)
+.PP
+.RS 4
+This allows you to override the config file to use, instead of the default (usually
+smb\&.conf)\&. There is a chicken and egg problem here as this option is set in the config file!
+.sp
+For this reason, if the name of the config file has changed when the parameters are loaded then it will reload them from the new config file\&.
+.sp
+This option takes the usual substitutions, which can be very useful\&.
+.sp
+If the config file doesn\*(Aqt exist then it won\*(Aqt be loaded (allowing you to special case the config files of just a few clients)\&.
+.sp
+\fINo default\fR
+.sp
+Example:
+\fI\fIconfig file\fR\fR\fI = \fR\fI/usr/local/samba/lib/smb\&.conf\&.%m\fR\fI \fR
+.RE
+
+copy (S)
+.PP
+.RS 4
+This parameter allows you to "clone" service entries\&. The specified service is simply duplicated under the current service\*(Aqs name\&. Any parameters specified in the current section will override those in the section being copied\&.
+.sp
+This feature lets you set up a \*(Aqtemplate\*(Aq service and create similar services easily\&. Note that the service being copied must occur earlier in the configuration file than the service doing the copying\&.
+.sp
+Default:
+\fI\fIcopy\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIcopy\fR\fR\fI = \fR\fIotherservice\fR\fI \fR
+.RE
+
+create krb5 conf (G)
+.PP
+.RS 4
+Setting this parameter to
+no
+prevents winbind from creating custom krb5\&.conf files\&. Winbind normally does this because the krb5 libraries are not AD\-site\-aware and thus would pick any domain controller out of potentially very many\&. Winbind is site\-aware and makes the krb5 libraries use a local DC by creating its own krb5\&.conf files\&.
+.sp
+Preventing winbind from doing this might become necessary if you have to add special options into your system\-krb5\&.conf that winbind does not see\&.
+.sp
+Default:
+\fI\fIcreate krb5 conf\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+create mode
+.PP
+.RS 4
+This parameter is a synonym for
+create mask\&.
+.RE
+
+create mask (S)
+.PP
+.RS 4
+When a file is created, the necessary permissions are calculated according to the mapping from DOS modes to UNIX permissions, and the resulting UNIX mode is then bit\-wise \*(AqAND\*(Aqed with this parameter\&. This parameter may be thought of as a bit\-wise MASK for the UNIX modes of a file\&. Any bit
+\fInot\fR
+set here will be removed from the modes set on a file when it is created\&.
+.sp
+The default value of this parameter removes the
+group
+and
+other
+write and execute bits from the UNIX modes\&.
+.sp
+Following this Samba will bit\-wise \*(AqOR\*(Aq the UNIX mode created from this parameter with the value of the
+\m[blue]\fBforce create mode\fR\m[]
+parameter which is set to 000 by default\&.
+.sp
+This parameter does not affect directory masks\&. See the parameter
+\m[blue]\fBdirectory mask\fR\m[]
+for details\&.
+.sp
+Default:
+\fI\fIcreate mask\fR\fR\fI = \fR\fI0744\fR\fI \fR
+.sp
+Example:
+\fI\fIcreate mask\fR\fR\fI = \fR\fI0775\fR\fI \fR
+.RE
+
+csc policy (S)
+.PP
+.RS 4
+This stands for
+\fIclient\-side caching policy\fR, and specifies how clients capable of offline caching will cache the files in the share\&. The valid values are: manual, documents, programs, disable\&.
+.sp
+These values correspond to those used on Windows servers\&.
+.sp
+For example, shares containing roaming profiles can have offline caching disabled using
+\m[blue]\fBcsc policy = disable\fR\m[]\&.
+.sp
+Default:
+\fI\fIcsc policy\fR\fR\fI = \fR\fImanual\fR\fI \fR
+.sp
+Example:
+\fI\fIcsc policy\fR\fR\fI = \fR\fIprograms\fR\fI \fR
+.RE
+
+ctdbd socket (G)
+.PP
+.RS 4
+If you set
+clustering=yes, you need to tell Samba where ctdbd listens on its unix domain socket\&. The default path as of ctdb 1\&.0 is /tmp/ctdb\&.socket which you have to explicitly set for Samba in smb\&.conf\&.
+.sp
+Default:
+\fI\fIctdbd socket\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIctdbd socket\fR\fR\fI = \fR\fI/tmp/ctdb\&.socket\fR\fI \fR
+.RE
+
+ctdb locktime warn threshold (G)
+.PP
+.RS 4
+In a cluster environment using Samba and ctdb it is critical that locks on central ctdb\-hosted databases like locking\&.tdb are not held for long\&. With the current Samba architecture it happens that Samba takes a lock and while holding that lock makes file system calls into the shared cluster file system\&. This option makes Samba warn if it detects that it has held locks for the specified number of milliseconds\&. If this happens,
+\fIsmbd\fR
+will emit a debug level 0 message into its logs and potentially into syslog\&. The most likely reason for such a log message is that an operation of the cluster file system Samba exports is taking longer than expected\&. The messages are meant as a debugging aid for potential cluster problems\&.
+.sp
+The default value of 0 disables this logging\&.
+.sp
+Default:
+\fI\fIctdb locktime warn threshold\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+ctdb timeout (G)
+.PP
+.RS 4
+This parameter specifies a timeout in milliseconds for the connection between Samba and ctdb\&. It is only valid if you have compiled Samba with clustering and if you have set
+\fIclustering=yes\fR\&.
+.sp
+When something in the cluster blocks, it can happen that we wait indefinitely long for ctdb, just adding to the blocking condition\&. In a well\-running cluster this should never happen, but there are too many components in a cluster that might have hickups\&. Choosing the right balance for this value is very tricky, because on a busy cluster long service times to transfer something across the cluster might be valid\&. Setting it too short will degrade the service your cluster presents, setting it too long might make the cluster itself not recover from something severely broken for too long\&.
+.sp
+Be aware that if you set this parameter, this needs to be in the file smb\&.conf, it is not really helpful to put this into a registry configuration (typical on a cluster), because to access the registry contact to ctdb is required\&.
+.sp
+Setting
+\fIctdb timeout\fR
+to n makes any process waiting longer than n milliseconds for a reply by the cluster panic\&. Setting it to 0 (the default) makes Samba block forever, which is the highly recommended default\&.
+.sp
+Default:
+\fI\fIctdb timeout\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+cups connection timeout (G)
+.PP
+.RS 4
+This parameter is only applicable if
+\m[blue]\fBprinting\fR\m[]
+is set to
+\fBcups\fR\&.
+.sp
+If set, this option specifies the number of seconds that smbd will wait whilst trying to contact to the CUPS server\&. The connection will fail if it takes longer than this number of seconds\&.
+.sp
+Default:
+\fI\fIcups connection timeout\fR\fR\fI = \fR\fI30\fR\fI \fR
+.sp
+Example:
+\fI\fIcups connection timeout\fR\fR\fI = \fR\fI60\fR\fI \fR
+.RE
+
+cups encrypt (G)
+.PP
+.RS 4
+This parameter is only applicable if
+\m[blue]\fBprinting\fR\m[]
+is set to
+\fBcups\fR
+and if you use CUPS newer than 1\&.0\&.x\&.It is used to define whether or not Samba should use encryption when talking to the CUPS server\&. Possible values are
+\fIauto\fR,
+\fIyes\fR
+and
+\fIno\fR
+.sp
+When set to auto we will try to do a TLS handshake on each CUPS connection setup\&. If that fails, we will fall back to unencrypted operation\&.
+.sp
+Default:
+\fI\fIcups encrypt\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+cups options (S)
+.PP
+.RS 4
+This parameter is only applicable if
+\m[blue]\fBprinting\fR\m[]
+is set to
+\fBcups\fR\&. Its value is a free form string of options passed directly to the cups library\&.
+.sp
+You can pass any generic print option known to CUPS (as listed in the CUPS "Software Users\*(Aq Manual")\&. You can also pass any printer specific option (as listed in "lpoptions \-d printername \-l") valid for the target queue\&. Multiple parameters should be space\-delimited name/value pairs according to the PAPI text option ABNF specification\&. Collection values ("name={a=\&.\&.\&. b=\&.\&.\&. c=\&.\&.\&.}") are stored with the curley brackets intact\&.
+.sp
+You should set this parameter to
+\fBraw\fR
+if your CUPS server
+error_log
+file contains messages such as "Unsupported format \*(Aqapplication/octet\-stream\*(Aq" when printing from a Windows client through Samba\&. It is no longer necessary to enable system wide raw printing in
+/etc/cups/mime\&.{convs,types}\&.
+.sp
+Default:
+\fI\fIcups options\fR\fR\fI = \fR\fI""\fR\fI \fR
+.sp
+Example:
+\fI\fIcups options\fR\fR\fI = \fR\fI"raw media=a4"\fR\fI \fR
+.RE
+
+cups server (G)
+.PP
+.RS 4
+This parameter is only applicable if
+\m[blue]\fBprinting\fR\m[]
+is set to
+\fBcups\fR\&.
+.sp
+If set, this option overrides the ServerName option in the CUPS
+client\&.conf\&. This is necessary if you have virtual samba servers that connect to different CUPS daemons\&.
+.sp
+Optionally, a port can be specified by separating the server name and port number with a colon\&. If no port was specified, the default port for IPP (631) will be used\&.
+.sp
+Default:
+\fI\fIcups server\fR\fR\fI = \fR\fI""\fR\fI \fR
+.sp
+Example:
+\fI\fIcups server\fR\fR\fI = \fR\fImycupsserver\fR\fI \fR
+.sp
+Example:
+\fI\fIcups server\fR\fR\fI = \fR\fImycupsserver:1631\fR\fI \fR
+.RE
+
+dcerpc endpoint servers (G)
+.PP
+.RS 4
+Specifies which DCE/RPC endpoint servers should be run\&.
+.sp
+Default:
+\fI\fIdcerpc endpoint servers\fR\fR\fI = \fR\fIepmapper, wkssvc, rpcecho, samr, netlogon, lsarpc, drsuapi, dssetup, unixinfo, browser, eventlog6, backupkey, dnsserver\fR\fI \fR
+.sp
+Example:
+\fI\fIdcerpc endpoint servers\fR\fR\fI = \fR\fIrpcecho\fR\fI \fR
+.RE
+
+deadtime (G)
+.PP
+.RS 4
+The value of the parameter (a decimal integer) represents the number of minutes of inactivity before a connection is considered dead, and it is disconnected\&. The deadtime only takes effect if the number of open files is zero\&.
+.sp
+This is useful to stop a server\*(Aqs resources being exhausted by a large number of inactive connections\&.
+.sp
+Most clients have an auto\-reconnect feature when a connection is broken so in most cases this parameter should be transparent to users\&.
+.sp
+Using this parameter with a timeout of a few minutes is recommended for most systems\&.
+.sp
+A deadtime of zero indicates that no auto\-disconnection should be performed\&.
+.sp
+Default:
+\fI\fIdeadtime\fR\fR\fI = \fR\fI10080\fR\fI \fR
+.sp
+Example:
+\fI\fIdeadtime\fR\fR\fI = \fR\fI15\fR\fI \fR
+.RE
+
+debug class (G)
+.PP
+.RS 4
+With this boolean parameter enabled, the debug class (DBGC_CLASS) will be displayed in the debug header\&.
+.sp
+For more information about currently available debug classes, see section about
+\m[blue]\fBlog level\fR\m[]\&.
+.sp
+Default:
+\fI\fIdebug class\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+debug encryption (G)
+.PP
+.RS 4
+This option will make the smbd server and client code using libsmb (smbclient, smbget, smbspool, \&.\&.\&.) dump the Session Id, the decrypted Session Key, the Signing Key, the Application Key, the Encryption Key and the Decryption Key every time an SMB3+ session is established\&. This information will be printed in logs at level 0\&.
+.sp
+Warning: access to these values enables the decryption of any encrypted traffic on the dumped sessions\&. This option should only be enabled for debugging purposes\&.
+.sp
+Default:
+\fI\fIdebug encryption\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+debug hires timestamp (G)
+.PP
+.RS 4
+Sometimes the timestamps in the log messages are needed with a resolution of higher that seconds, this boolean parameter adds microsecond resolution to the timestamp message header when turned on\&.
+.sp
+Note that the parameter
+\m[blue]\fBdebug timestamp\fR\m[]
+must be on for this to have an effect\&.
+.sp
+Default:
+\fI\fIdebug hires timestamp\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+debug pid (G)
+.PP
+.RS 4
+When using only one log file for more then one forked
+\fBsmbd\fR(8)\-process there may be hard to follow which process outputs which message\&. This boolean parameter is adds the process\-id to the timestamp message headers in the logfile when turned on\&.
+.sp
+Note that the parameter
+\m[blue]\fBdebug timestamp\fR\m[]
+must be on for this to have an effect\&.
+.sp
+Default:
+\fI\fIdebug pid\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+debug prefix timestamp (G)
+.PP
+.RS 4
+With this option enabled, the timestamp message header is prefixed to the debug message without the filename and function information that is included with the
+\m[blue]\fBdebug timestamp\fR\m[]
+parameter\&. This gives timestamps to the messages without adding an additional line\&.
+.sp
+Note that this parameter overrides the
+\m[blue]\fBdebug timestamp\fR\m[]
+parameter\&.
+.sp
+Default:
+\fI\fIdebug prefix timestamp\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+debug uid (G)
+.PP
+.RS 4
+Samba is sometimes run as root and sometime run as the connected user, this boolean parameter inserts the current euid, egid, uid and gid to the timestamp message headers in the log file if turned on\&.
+.sp
+Note that the parameter
+\m[blue]\fBdebug timestamp\fR\m[]
+must be on for this to have an effect\&.
+.sp
+Default:
+\fI\fIdebug uid\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+dedicated keytab file (G)
+.PP
+.RS 4
+Specifies the absolute path to the kerberos keytab file when
+\m[blue]\fBkerberos method\fR\m[]
+is set to "dedicated keytab"\&.
+.sp
+Default:
+\fI\fIdedicated keytab file\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIdedicated keytab file\fR\fR\fI = \fR\fI/usr/local/etc/krb5\&.keytab\fR\fI \fR
+.RE
+
+default case (S)
+.PP
+.RS 4
+See the section on
+\m[blue]\fBname mangling\fR\m[]\&. Also note the
+\m[blue]\fBshort preserve case\fR\m[]
+parameter\&.
+.sp
+Default:
+\fI\fIdefault case\fR\fR\fI = \fR\fIlower\fR\fI \fR
+.RE
+
+default devmode (S)
+.PP
+.RS 4
+This parameter is only applicable to
+\m[blue]\fBprintable\fR\m[]
+services\&. When smbd is serving Printer Drivers to Windows NT/2k/XP clients, each printer on the Samba server has a Device Mode which defines things such as paper size and orientation and duplex settings\&. The device mode can only correctly be generated by the printer driver itself (which can only be executed on a Win32 platform)\&. Because smbd is unable to execute the driver code to generate the device mode, the default behavior is to set this field to NULL\&.
+.sp
+Most problems with serving printer drivers to Windows NT/2k/XP clients can be traced to a problem with the generated device mode\&. Certain drivers will do things such as crashing the client\*(Aqs Explorer\&.exe with a NULL devmode\&. However, other printer drivers can cause the client\*(Aqs spooler service (spoolsv\&.exe) to die if the devmode was not created by the driver itself (i\&.e\&. smbd generates a default devmode)\&.
+.sp
+This parameter should be used with care and tested with the printer driver in question\&. It is better to leave the device mode to NULL and let the Windows client set the correct values\&. Because drivers do not do this all the time, setting
+default devmode = yes
+will instruct smbd to generate a default one\&.
+.sp
+For more information on Windows NT/2k printing and Device Modes, see the
+MSDN documentation\&.
+.sp
+Default:
+\fI\fIdefault devmode\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+default
+.PP
+.RS 4
+This parameter is a synonym for
+default service\&.
+.RE
+
+default service (G)
+.PP
+.RS 4
+This parameter specifies the name of a service which will be connected to if the service actually requested cannot be found\&. Note that the square brackets are
+\fINOT\fR
+given in the parameter value (see example below)\&.
+.sp
+There is no default value for this parameter\&. If this parameter is not given, attempting to connect to a nonexistent service results in an error\&.
+.sp
+Typically the default service would be a
+\m[blue]\fBguest ok\fR\m[],
+\m[blue]\fBread\-only\fR\m[]
+service\&.
+.sp
+Also note that the apparent service name will be changed to equal that of the requested service, this is very useful as it allows you to use macros like
+\fI%S\fR
+to make a wildcard service\&.
+.sp
+Note also that any "_" characters in the name of the service used in the default service will get mapped to a "/"\&. This allows for interesting things\&.
+.sp
+Default:
+\fI\fIdefault service\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIdefault service\fR\fR\fI = \fR\fIpub\fR\fI \fR
+.RE
+
+defer sharing violations (G)
+.PP
+.RS 4
+Windows allows specifying how a file will be shared with other processes when it is opened\&. Sharing violations occur when a file is opened by a different process using options that violate the share settings specified by other processes\&. This parameter causes smbd to act as a Windows server does, and defer returning a "sharing violation" error message for up to one second, allowing the client to close the file causing the violation in the meantime\&.
+.sp
+UNIX by default does not have this behaviour\&.
+.sp
+There should be no reason to turn off this parameter, as it is designed to enable Samba to more correctly emulate Windows\&.
+.sp
+Default:
+\fI\fIdefer sharing violations\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+delete group script (G)
+.PP
+.RS 4
+This is the full pathname to a script that will be run
+\fIAS ROOT\fR
+by
+\fBsmbd\fR(8)
+when a group is requested to be deleted\&. It will expand any
+\fI%g\fR
+to the group name passed\&. This script is only useful for installations using the Windows NT domain administration tools\&.
+.sp
+Default:
+\fI\fIdelete group script\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+deleteprinter command (G)
+.PP
+.RS 4
+With the introduction of MS\-RPC based printer support for Windows NT/2000 clients in Samba 2\&.2, it is now possible to delete a printer at run time by issuing the DeletePrinter() RPC call\&.
+.sp
+For a Samba host this means that the printer must be physically deleted from the underlying printing system\&. The
+\m[blue]\fBdeleteprinter command\fR\m[]
+defines a script to be run which will perform the necessary operations for removing the printer from the print system and from
+smb\&.conf\&.
+.sp
+The
+\m[blue]\fBdeleteprinter command\fR\m[]
+is automatically called with only one parameter:
+\m[blue]\fBprinter name\fR\m[]\&.
+.sp
+Once the
+\m[blue]\fBdeleteprinter command\fR\m[]
+has been executed,
+smbd
+will reparse the
+smb\&.conf
+to check that the associated printer no longer exists\&. If the sharename is still valid, then
+smbd
+will return an ACCESS_DENIED error to the client\&.
+.sp
+Default:
+\fI\fIdeleteprinter command\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIdeleteprinter command\fR\fR\fI = \fR\fI/usr/bin/removeprinter\fR\fI \fR
+.RE
+
+delete readonly (S)
+.PP
+.RS 4
+This parameter allows readonly files to be deleted\&. This is not normal DOS semantics, but is allowed by UNIX\&.
+.sp
+This option may be useful for running applications such as rcs, where UNIX file ownership prevents changing file permissions, and DOS semantics prevent deletion of a read only file\&.
+.sp
+Default:
+\fI\fIdelete readonly\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+delete share command (G)
+.PP
+.RS 4
+Samba 2\&.2\&.0 introduced the ability to dynamically add and delete shares via the Windows NT 4\&.0 Server Manager\&. The
+\fIdelete share command\fR
+is used to define an external program or script which will remove an existing service definition from
+smb\&.conf\&.
+.sp
+In order to successfully execute the
+\fIdelete share command\fR,
+smbd
+requires that the administrator connects using a root account (i\&.e\&. uid == 0) or has the
+SeDiskOperatorPrivilege\&. Scripts defined in the
+\fIdelete share command\fR
+parameter are executed as root\&.
+.sp
+When executed,
+smbd
+will automatically invoke the
+\fIdelete share command\fR
+with two parameters\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIconfigFile\fR
+\- the location of the global
+smb\&.conf
+file\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIshareName\fR
+\- the name of the existing service\&.
+.RE
+.sp
+.RE
+This parameter is only used to remove file shares\&. To delete printer shares, see the
+\m[blue]\fBdeleteprinter command\fR\m[]\&.
+.sp
+Default:
+\fI\fIdelete share command\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIdelete share command\fR\fR\fI = \fR\fI/usr/local/bin/delshare\fR\fI \fR
+.RE
+
+delete user from group script (G)
+.PP
+.RS 4
+Full path to the script that will be called when a user is removed from a group using the Windows NT domain administration tools\&. It will be run by
+\fBsmbd\fR(8)
+\fIAS ROOT\fR\&. Any
+\fI%g\fR
+will be replaced with the group name and any
+\fI%u\fR
+will be replaced with the user name\&.
+.sp
+Default:
+\fI\fIdelete user from group script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIdelete user from group script\fR\fR\fI = \fR\fI/usr/sbin/deluser %u %g\fR\fI \fR
+.RE
+
+delete user script (G)
+.PP
+.RS 4
+This is the full pathname to a script that will be run by
+\fBsmbd\fR(8)
+when managing users with remote RPC (NT) tools\&.
+.sp
+This script is called when a remote client removes a user from the server, normally using \*(AqUser Manager for Domains\*(Aq or
+rpcclient\&.
+.sp
+This script should delete the given UNIX username\&.
+.sp
+Default:
+\fI\fIdelete user script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIdelete user script\fR\fR\fI = \fR\fI/usr/local/samba/bin/del_user %u\fR\fI \fR
+.RE
+
+delete veto files (S)
+.PP
+.RS 4
+This option is used when Samba is attempting to delete a directory that contains one or more vetoed directories (see the
+\m[blue]\fBveto files\fR\m[]
+option)\&. If this option is set to
+\fBno\fR
+(the default) then if a vetoed directory contains any non\-vetoed files or directories then the directory delete will fail\&. This is usually what you want\&.
+.sp
+If this option is set to
+\fByes\fR, then Samba will attempt to recursively delete any files and directories within the vetoed directory\&. This can be useful for integration with file serving systems such as NetAtalk which create meta\-files within directories you might normally veto DOS/Windows users from seeing (e\&.g\&.
+\&.AppleDouble)
+.sp
+Setting
+\m[blue]\fBdelete veto files = yes\fR\m[]
+allows these directories to be transparently deleted when the parent directory is deleted (so long as the user has permissions to do so)\&.
+.sp
+Default:
+\fI\fIdelete veto files\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+dfree cache time (S)
+.PP
+.RS 4
+The
+\fIdfree cache time\fR
+should only be used on systems where a problem occurs with the internal disk space calculations\&. This has been known to happen with Ultrix, but may occur with other operating systems\&. The symptom that was seen was an error of "Abort Retry Ignore" at the end of each directory listing\&.
+.sp
+This is a new parameter introduced in Samba version 3\&.0\&.21\&. It specifies in seconds the time that smbd will cache the output of a disk free query\&. If set to zero (the default) no caching is done\&. This allows a heavily loaded server to prevent rapid spawning of
+\m[blue]\fBdfree command\fR\m[]
+scripts increasing the load\&.
+.sp
+By default this parameter is zero, meaning no caching will be done\&.
+.sp
+\fINo default\fR
+.sp
+Example:
+\fI\fIdfree cache time\fR\fR\fI = \fR\fI60\fR\fI \fR
+.RE
+
+dfree command (S)
+.PP
+.RS 4
+The
+\fIdfree command\fR
+setting should only be used on systems where a problem occurs with the internal disk space calculations\&. This has been known to happen with Ultrix, but may occur with other operating systems\&. The symptom that was seen was an error of "Abort Retry Ignore" at the end of each directory listing\&.
+.sp
+This setting allows the replacement of the internal routines to calculate the total disk space and amount available with an external routine\&. The example below gives a possible script that might fulfill this function\&.
+.sp
+In Samba version 3\&.0\&.21 this parameter has been changed to be a per\-share parameter, and in addition the parameter
+\m[blue]\fBdfree cache time\fR\m[]
+was added to allow the output of this script to be cached for systems under heavy load\&.
+.sp
+The external program will be passed a single parameter indicating a directory in the filesystem being queried\&. This will typically consist of the string
+\&./\&. The script should return two integers in ASCII\&. The first should be the total disk space in blocks, and the second should be the number of available blocks\&. An optional third return value can give the block size in bytes\&. The default blocksize is 1024 bytes\&.
+.sp
+Note: Your script should
+\fINOT\fR
+be setuid or setgid and should be owned by (and writeable only by) root!
+.sp
+Where the script dfree (which must be made executable) could be:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+ 
+#!/bin/sh
+df "$1" | tail \-1 | awk \*(Aq{print $(NF\-4),$(NF\-2)}\*(Aq
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+or perhaps (on Sys V based systems):
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+ 
+#!/bin/sh
+/usr/bin/df \-k "$1" | tail \-1 | awk \*(Aq{print $3" "$5}\*(Aq
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Note that you may have to replace the command names with full path names on some systems\&. Also note the arguments passed into the script should be quoted inside the script in case they contain special characters such as spaces or newlines\&.
+.sp
+By default internal routines for determining the disk capacity and remaining space will be used\&.
+.sp
+\fINo default\fR
+.sp
+Example:
+\fI\fIdfree command\fR\fR\fI = \fR\fI/usr/local/samba/bin/dfree\fR\fI \fR
+.RE
+
+dgram port (G)
+.PP
+.RS 4
+Specifies which ports the server should listen on for NetBIOS datagram traffic\&.
+.sp
+Default:
+\fI\fIdgram port\fR\fR\fI = \fR\fI138\fR\fI \fR
+.RE
+
+directory mode
+.PP
+.RS 4
+This parameter is a synonym for
+directory mask\&.
+.RE
+
+directory mask (S)
+.PP
+.RS 4
+This parameter is the octal modes which are used when converting DOS modes to UNIX modes when creating UNIX directories\&.
+.sp
+When a directory is created, the necessary permissions are calculated according to the mapping from DOS modes to UNIX permissions, and the resulting UNIX mode is then bit\-wise \*(AqAND\*(Aqed with this parameter\&. This parameter may be thought of as a bit\-wise MASK for the UNIX modes of a directory\&. Any bit
+\fInot\fR
+set here will be removed from the modes set on a directory when it is created\&.
+.sp
+The default value of this parameter removes the \*(Aqgroup\*(Aq and \*(Aqother\*(Aq write bits from the UNIX mode, allowing only the user who owns the directory to modify it\&.
+.sp
+Following this Samba will bit\-wise \*(AqOR\*(Aq the UNIX mode created from this parameter with the value of the
+\m[blue]\fBforce directory mode\fR\m[]
+parameter\&. This parameter is set to 000 by default (i\&.e\&. no extra mode bits are added)\&.
+.sp
+Default:
+\fI\fIdirectory mask\fR\fR\fI = \fR\fI0755\fR\fI \fR
+.sp
+Example:
+\fI\fIdirectory mask\fR\fR\fI = \fR\fI0775\fR\fI \fR
+.RE
+
+directory name cache size (S)
+.PP
+.RS 4
+This parameter specifies the size of the directory name cache for SMB1 connections\&. It is not used for SMB2\&. It will be needed to turn this off for *BSD systems\&.
+.sp
+Default:
+\fI\fIdirectory name cache size\fR\fR\fI = \fR\fI100\fR\fI \fR
+.RE
+
+directory security mask (S)
+.PP
+.RS 4
+This parameter has been removed for Samba 4\&.0\&.0\&.
+.sp
+\fINo default\fR
+.RE
+
+disable netbios (G)
+.PP
+.RS 4
+Enabling this parameter will disable netbios support in Samba\&. Netbios is the only available form of browsing in all windows versions except for 2000 and XP\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+Clients that only support netbios won\*(Aqt be able to see your samba server when netbios support is disabled\&.
+.sp .5v
+.RE
+Default:
+\fI\fIdisable netbios\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+disable spoolss (G)
+.PP
+.RS 4
+Enabling this parameter will disable Samba\*(Aqs support for the SPOOLSS set of MS\-RPC\*(Aqs and will yield identical behavior as Samba 2\&.0\&.x\&. Windows NT/2000 clients will downgrade to using Lanman style printing commands\&. Windows 9x/ME will be unaffected by the parameter\&. However, this will also disable the ability to upload printer drivers to a Samba server via the Windows NT Add Printer Wizard or by using the NT printer properties dialog window\&. It will also disable the capability of Windows NT/2000 clients to download print drivers from the Samba host upon demand\&.
+\fIBe very careful about enabling this parameter\&.\fR
+.sp
+Default:
+\fI\fIdisable spoolss\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+dmapi support (S)
+.PP
+.RS 4
+This parameter specifies whether Samba should use DMAPI to determine whether a file is offline or not\&. This would typically be used in conjunction with a hierarchical storage system that automatically migrates files to tape\&.
+.sp
+Note that Samba infers the status of a file by examining the events that a DMAPI application has registered interest in\&. This heuristic is satisfactory for a number of hierarchical storage systems, but there may be system for which it will fail\&. In this case, Samba may erroneously report files to be offline\&.
+.sp
+This parameter is only available if a supported DMAPI implementation was found at compilation time\&. It will only be used if DMAPI is found to enabled on the system at run time\&.
+.sp
+Default:
+\fI\fIdmapi support\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+dns forwarder (G)
+.PP
+.RS 4
+This option specifies the list of DNS servers that DNS requests will be forwarded to if they can not be handled by Samba itself\&.
+.sp
+The DNS forwarder is only used if the internal DNS server in Samba is used\&.
+.sp
+Default:
+\fI\fIdns forwarder\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIdns forwarder\fR\fR\fI = \fR\fI192\&.168\&.0\&.1 192\&.168\&.0\&.2\fR\fI \fR
+.RE
+
+dns proxy (G)
+.PP
+.RS 4
+Specifies that
+\fBnmbd\fR(8)
+when acting as a WINS server and finding that a NetBIOS name has not been registered, should treat the NetBIOS name word\-for\-word as a DNS name and do a lookup with the DNS server for that name on behalf of the name\-querying client\&.
+.sp
+Note that the maximum length for a NetBIOS name is 15 characters, so the DNS name (or DNS alias) can likewise only be 15 characters, maximum\&.
+.sp
+nmbd
+spawns a second copy of itself to do the DNS name lookup requests, as doing a name lookup is a blocking action\&.
+.sp
+Default:
+\fI\fIdns proxy\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+dns update command (G)
+.PP
+.RS 4
+This option sets the command that is called when there are DNS updates\&. It should update the local machines DNS names using TSIG\-GSS\&.
+.sp
+Default:
+\fI\fIdns update command\fR\fR\fI = \fR\fI${prefix}/sbin/samba_dnsupdate\fR\fI \fR
+.sp
+Example:
+\fI\fIdns update command\fR\fR\fI = \fR\fI/usr/local/sbin/dnsupdate\fR\fI \fR
+.RE
+
+dns zone scavenging (G)
+.PP
+.RS 4
+When enabled (the default is disabled) unused dynamic dns records are periodically removed\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBWarning\fR
+.ps -1
+.br
+This option should not be enabled for installations created with versions of samba before 4\&.9\&. Doing this will result in the loss of static DNS entries\&. This is due to a bug in previous versions of samba (BUG 12451) which marked dynamic DNS records as static and static records as dynamic\&.
+.sp .5v
+.RE
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+If one record for a DNS name is static (non\-aging) then no other record for that DNS name will be scavenged\&.
+.sp .5v
+.RE
+Default:
+\fI\fIdns zone scavenging\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+dns zone transfer clients allow (G)
+.PP
+.RS 4
+This option specifies the list of IPs authorized to ask for dns zone transfer from bind DLZ module\&.
+.sp
+The IP list is comma and space separated and specified in the same syntax as used in
+\m[blue]\fBhosts allow\fR\m[], specifically including IP address, IP prefixes and IP address masks\&.
+.sp
+As this is a DNS server option, hostnames are naturally not permitted\&.
+.sp
+The default behaviour is to deny any request\&. A request will be authorized only if the emitting client is identified in this list, and not in
+\m[blue]\fBdns zone transfer clients deny\fR\m[]
+.sp
+Default:
+\fI\fIdns zone transfer clients allow\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIdns zone transfer clients allow\fR\fR\fI = \fR\fI192\&.168\&.0\&.1\fR\fI \fR
+.RE
+
+dns zone transfer clients deny (G)
+.PP
+.RS 4
+This option specifies the list of IPs denied to ask for dns zone transfer from bind DLZ module\&.
+.sp
+The IP list is comma and space separated and specified in the same syntax as used in
+\m[blue]\fBhosts allow\fR\m[], specifically including IP address, IP prefixes and IP address masks\&.
+.sp
+As this is a DNS server option, hostnames are naturally not permitted\&.
+.sp
+If a client identified in this list sends a zone transfer request, it will always be denied, even if they are in
+\m[blue]\fBdns zone transfer clients allow\fR\m[]\&. This allows the definition of specific denied clients within an authorized subnet\&.
+.sp
+Default:
+\fI\fIdns zone transfer clients deny\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIdns zone transfer clients deny\fR\fR\fI = \fR\fI192\&.168\&.0\&.1\fR\fI \fR
+.RE
+
+domain logons (G)
+.PP
+.RS 4
+This parameter has been deprecated since Samba 4\&.13 and support for NT4\-style domain logons(as distinct from the Samba AD DC) will be removed in a future Samba release\&.
+.sp
+That is, in the future, the current default of
+domain logons = no
+will be the enforced behaviour\&.
+.sp
+If set to
+\fByes\fR, the Samba server will provide the netlogon service for Windows 9X network logons for the
+\m[blue]\fBworkgroup\fR\m[]
+it is in\&. This will also cause the Samba server to act as a domain controller for NT4 style domain services\&. For more details on setting up this feature see the Domain Control chapter of the Samba HOWTO Collection\&.
+.sp
+Default:
+\fI\fIdomain logons\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+domain master (G)
+.PP
+.RS 4
+Tell
+\fBsmbd\fR(8)
+to enable WAN\-wide browse list collation\&. Setting this option causes
+nmbd
+to claim a special domain specific NetBIOS name that identifies it as a domain master browser for its given
+\m[blue]\fBworkgroup\fR\m[]\&. Local master browsers in the same
+\m[blue]\fBworkgroup\fR\m[]
+on broadcast\-isolated subnets will give this
+nmbd
+their local browse lists, and then ask
+\fBsmbd\fR(8)
+for a complete copy of the browse list for the whole wide area network\&. Browser clients will then contact their local master browser, and will receive the domain\-wide browse list, instead of just the list for their broadcast\-isolated subnet\&.
+.sp
+Note that Windows NT Primary Domain Controllers expect to be able to claim this
+\m[blue]\fBworkgroup\fR\m[]
+specific special NetBIOS name that identifies them as domain master browsers for that
+\m[blue]\fBworkgroup\fR\m[]
+by default (i\&.e\&. there is no way to prevent a Windows NT PDC from attempting to do this)\&. This means that if this parameter is set and
+nmbd
+claims the special name for a
+\m[blue]\fBworkgroup\fR\m[]
+before a Windows NT PDC is able to do so then cross subnet browsing will behave strangely and may fail\&.
+.sp
+If
+\m[blue]\fBdomain logons = yes\fR\m[], then the default behavior is to enable the
+\m[blue]\fBdomain master\fR\m[]
+parameter\&. If
+\m[blue]\fBdomain logons\fR\m[]
+is not enabled (the default setting), then neither will
+\m[blue]\fBdomain master\fR\m[]
+be enabled by default\&.
+.sp
+When
+\m[blue]\fBdomain logons = Yes\fR\m[]
+the default setting for this parameter is Yes, with the result that Samba will be a PDC\&. If
+\m[blue]\fBdomain master = No\fR\m[], Samba will function as a BDC\&. In general, this parameter should be set to \*(AqNo\*(Aq only on a BDC\&.
+.sp
+Default:
+\fI\fIdomain master\fR\fR\fI = \fR\fIauto\fR\fI \fR
+.RE
+
+dont descend (S)
+.PP
+.RS 4
+There are certain directories on some systems (e\&.g\&., the
+/proc
+tree under Linux) that are either not of interest to clients or are infinitely deep (recursive)\&. This parameter allows you to specify a comma\-delimited list of directories that the server should always show as empty\&.
+.sp
+Note that Samba can be very fussy about the exact format of the "dont descend" entries\&. For example you may need
+\&./proc
+instead of just
+/proc\&. Experimentation is the best policy :\-)
+.sp
+Default:
+\fI\fIdont descend\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIdont descend\fR\fR\fI = \fR\fI/proc,/dev\fR\fI \fR
+.RE
+
+dos charset (G)
+.PP
+.RS 4
+DOS SMB clients assume the server has the same charset as they do\&. This option specifies which charset Samba should talk to DOS clients\&.
+.sp
+The default depends on which charsets you have installed\&. Samba tries to use charset 850 but falls back to ASCII in case it is not available\&. Run
+\fBtestparm\fR(1)
+to check the default on your system\&.
+.sp
+\fINo default\fR
+.RE
+
+dos filemode (S)
+.PP
+.RS 4
+The default behavior in Samba is to provide UNIX\-like behavior where only the owner of a file/directory is able to change the permissions on it\&. However, this behavior is often confusing to DOS/Windows users\&. Enabling this parameter allows a user who has write access to the file (by whatever means, including an ACL permission) to modify the permissions (including ACL) on it\&. Note that a user belonging to the group owning the file will not be allowed to change permissions if the group is only granted read access\&. Ownership of the file/directory may also be changed\&. Note that using the VFS modules acl_xattr or acl_tdb which store native Windows as meta\-data will automatically turn this option on for any share for which they are loaded, as they require this option to emulate Windows ACLs correctly\&.
+.sp
+Default:
+\fI\fIdos filemode\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+dos filetime resolution (S)
+.PP
+.RS 4
+Under the DOS and Windows FAT filesystem, the finest granularity on time resolution is two seconds\&. Setting this parameter for a share causes Samba to round the reported time down to the nearest two second boundary when a query call that requires one second resolution is made to
+\fBsmbd\fR(8)\&.
+.sp
+This option is mainly used as a compatibility option for Visual C++ when used against Samba shares\&. If oplocks are enabled on a share, Visual C++ uses two different time reading calls to check if a file has changed since it was last read\&. One of these calls uses a one\-second granularity, the other uses a two second granularity\&. As the two second call rounds any odd second down, then if the file has a timestamp of an odd number of seconds then the two timestamps will not match and Visual C++ will keep reporting the file has changed\&. Setting this option causes the two timestamps to match, and Visual C++ is happy\&.
+.sp
+Default:
+\fI\fIdos filetime resolution\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+dos filetimes (S)
+.PP
+.RS 4
+Under DOS and Windows, if a user can write to a file they can change the timestamp on it\&. Under POSIX semantics, only the owner of the file or root may change the timestamp\&. By default, Samba emulates the DOS semantics and allows one to change the timestamp on a file if the user
+smbd
+is acting on behalf has write permissions\&. Due to changes in Microsoft Office 2000 and beyond, the default for this parameter has been changed from "no" to "yes" in Samba 3\&.0\&.14 and above\&. Microsoft Excel will display dialog box warnings about the file being changed by another user if this parameter is not set to "yes" and files are being shared between users\&.
+.sp
+Default:
+\fI\fIdos filetimes\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+dsdb event notification (G)
+.PP
+.RS 4
+When enabled, this option causes Samba (acting as an Active Directory Domain Controller) to stream Samba database events across the internal message bus\&. Scripts built using Samba\*(Aqs python bindings can listen to these events by registering as the service
+dsdb_event\&.
+.sp
+This is
+\fInot\fR
+needed for the audit logging described in
+\m[blue]\fBlog level\fR\m[]\&.
+.sp
+Instead, this should instead be considered a developer option (it assists in the Samba testsuite) rather than a facility for external auditing, as message delivery is not guaranteed (a feature that the testsuite works around)\&.
+.sp
+The Samba database events are also logged via the normal logging methods when the
+\m[blue]\fBlog level\fR\m[]
+is set appropriately, say to
+dsdb_json_audit:5\&.
+.sp
+Default:
+\fI\fIdsdb event notification\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+dsdb group change notification (G)
+.PP
+.RS 4
+When enabled, this option causes Samba (acting as an Active Directory Domain Controller) to stream group membership change events across the internal message bus\&. Scripts built using Samba\*(Aqs python bindings can listen to these events by registering as the service
+dsdb_group_event\&.
+.sp
+This is
+\fInot\fR
+needed for the audit logging described in
+\m[blue]\fBlog level\fR\m[]\&.
+.sp
+Instead, this should instead be considered a developer option (it assists in the Samba testsuite) rather than a facility for external auditing, as message delivery is not guaranteed (a feature that the testsuite works around)\&.
+.sp
+The Samba database events are also logged via the normal logging methods when the
+\m[blue]\fBlog level\fR\m[]
+is set appropriately, say to
+dsdb_group_json_audit:5\&.
+.sp
+Default:
+\fI\fIdsdb group change notification\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+dsdb password event notification (G)
+.PP
+.RS 4
+When enabled, this option causes Samba (acting as an Active Directory Domain Controller) to stream password change and reset events across the internal message bus\&. Scripts built using Samba\*(Aqs python bindings can listen to these events by registering as the service
+password_event\&.
+.sp
+This is
+\fInot\fR
+needed for the audit logging described in
+\m[blue]\fBlog level\fR\m[]\&.
+.sp
+Instead, this should instead be considered a developer option (it assists in the Samba testsuite) rather than a facility for external auditing, as message delivery is not guaranteed (a feature that the testsuite works around)\&.
+.sp
+The Samba database events are also logged via the normal logging methods when the
+\m[blue]\fBlog level\fR\m[]
+is set appropriately, say to
+dsdb_password_json_audit:5\&.
+.sp
+Default:
+\fI\fIdsdb password event notification\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+durable handles (S)
+.PP
+.RS 4
+This boolean parameter controls whether Samba can grant SMB2 durable file handles on a share\&.
+.sp
+Note that durable handles are only enabled if
+\m[blue]\fBkernel oplocks = no\fR\m[],
+\m[blue]\fBkernel share modes = no\fR\m[], and
+\m[blue]\fBposix locking = no\fR\m[], i\&.e\&. if the share is configured for CIFS/SMB2 only access, not supporting interoperability features with local UNIX processes or NFS operations\&.
+.sp
+Also note that, for the time being, durability is not granted for a handle that has the delete on close flag set\&.
+.sp
+Default:
+\fI\fIdurable handles\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+ea support (S)
+.PP
+.RS 4
+This boolean parameter controls whether
+\fBsmbd\fR(8)
+will allow clients to attempt to access extended attributes on a share\&. In order to enable this parameter on a setup with default VFS modules:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Samba must have been built with extended attributes support\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The underlying filesystem exposed by the share must support extended attributes (e\&.g\&. the getfattr(1)
+/ setfattr(1)
+utilities must work)\&.
+.RE
+.sp
+.RE
+Note that the SMB protocol allows setting attributes whose value is 64K bytes long, and that on NTFS, the maximum storage space for extended attributes per file is 64K\&. On most UNIX systems (Solaris and ZFS file system being the exception), the limits are much lower \- typically 4K\&. Worse, the same 4K space is often used to store system metadata such as POSIX ACLs, or Samba\*(Aqs NT ACLs\&. Giving clients access to this tight space via extended attribute support could consume all of it by unsuspecting client applications, which would prevent changing system metadata due to lack of space\&. The default has changed to yes in Samba release 4\&.9\&.0 and above to allow better Windows fileserver compatibility in a default install\&.
+.sp
+Default:
+\fI\fIea support\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+elasticsearch:address (S)
+.PP
+.RS 4
+Specifies the name of the Elasticsearch server to use for Spotlight queries when using the Elasticsearch backend\&.
+.sp
+Default:
+\fI\fIelasticsearch:address\fR\fR\fI = \fR\fIlocalhost\fR\fI \fR
+.sp
+Example:
+\fI\fIelasticsearch:address\fR\fR\fI = \fR\fIneedle\&.haystack\&.samba\&.org\fR\fI \fR
+.RE
+
+elasticsearch:index (S)
+.PP
+.RS 4
+Specifies the name of the Elasticsearch index to use for Spotlight queries when using the Elasticsearch backend\&. The default value of "_all" is a special Elasticsearch value that performs the search operation on all indices\&.
+.sp
+Default:
+\fI\fIelasticsearch:index\fR\fR\fI = \fR\fI_all\fR\fI \fR
+.sp
+Example:
+\fI\fIelasticsearch:index\fR\fR\fI = \fR\fIspotlight\fR\fI \fR
+.RE
+
+elasticsearch:mappings (G)
+.PP
+.RS 4
+Path to a file specifying metadata attribute mappings in JSON format\&. Use by the Elasticsearch backend of the Spotlight RPC service\&.
+.sp
+Default:
+\fI\fIelasticsearch:mappings\fR\fR\fI = \fR\fI${prefix}/var/samba/elasticsearch_mappings\&.json\fR\fI \fR
+.sp
+Example:
+\fI\fIelasticsearch:mappings\fR\fR\fI = \fR\fI/usr/share/foo/mymappings\&.json\fR\fI \fR
+.RE
+
+elasticsearch:max results (S)
+.PP
+.RS 4
+Path to a file specifying metadata attribute mappings in JSON format\&. Used by the Elasticsearch backend of the Spotlight RPC service\&. A value of 0 means no limit\&.
+.sp
+Default:
+\fI\fIelasticsearch:max results\fR\fR\fI = \fR\fI100\fR\fI \fR
+.sp
+Example:
+\fI\fIelasticsearch:max results\fR\fR\fI = \fR\fI10\fR\fI \fR
+.RE
+
+elasticsearch:port (S)
+.PP
+.RS 4
+Specifies the TCP port of the Elasticsearch server to use for Spotlight queries when using the Elasticsearch backend\&.
+.sp
+Default:
+\fI\fIelasticsearch:port\fR\fR\fI = \fR\fI9200\fR\fI \fR
+.sp
+Example:
+\fI\fIelasticsearch:port\fR\fR\fI = \fR\fI9201\fR\fI \fR
+.RE
+
+elasticsearch:use tls (S)
+.PP
+.RS 4
+Specifies whether to use HTTPS when talking to the Elasticsearch server used for Spotlight queries when using the Elasticsearch backend\&.
+.sp
+Default:
+\fI\fIelasticsearch:use tls\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIelasticsearch:use tls\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+enable asu support (G)
+.PP
+.RS 4
+Hosts running the "Advanced Server for Unix (ASU)" product require some special accommodations such as creating a builtin [ADMIN$] share that only supports IPC connections\&. The has been the default behavior in smbd for many years\&. However, certain Microsoft applications such as the Print Migrator tool require that the remote server support an [ADMIN$] file share\&. Disabling this parameter allows for creating an [ADMIN$] file share in smb\&.conf\&.
+.sp
+Default:
+\fI\fIenable asu support\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+enable core files (G)
+.PP
+.RS 4
+This parameter specifies whether core dumps should be written on internal exits\&. Normally set to
+\fByes\fR\&. You should never need to change this\&.
+.sp
+Default:
+\fI\fIenable core files\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.sp
+Example:
+\fI\fIenable core files\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+enable privileges (G)
+.PP
+.RS 4
+This deprecated parameter controls whether or not smbd will honor privileges assigned to specific SIDs via either
+net rpc rights
+or one of the Windows user and group manager tools\&. This parameter is enabled by default\&. It can be disabled to prevent members of the Domain Admins group from being able to assign privileges to users or groups which can then result in certain smbd operations running as root that would normally run under the context of the connected user\&.
+.sp
+An example of how privileges can be used is to assign the right to join clients to a Samba controlled domain without providing root access to the server via smbd\&.
+.sp
+Please read the extended description provided in the Samba HOWTO documentation\&.
+.sp
+Default:
+\fI\fIenable privileges\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+enable spoolss (G)
+.PP
+.RS 4
+Inverted synonym for
+\m[blue]\fBdisable spoolss\fR\m[]\&.
+.sp
+Default:
+\fI\fIenable spoolss\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+encrypt passwords (G)
+.PP
+.RS 4
+This parameter has been deprecated since Samba 4\&.11 and support for plaintext (as distinct from NTLM, NTLMv2 or Kerberos authentication) will be removed in a future Samba release\&.
+.sp
+That is, in the future, the current default of
+encrypt passwords = yes
+will be the enforced behaviour\&.
+.sp
+This boolean controls whether encrypted passwords will be negotiated with the client\&. Note that Windows NT 4\&.0 SP3 and above and also Windows 98 will by default expect encrypted passwords unless a registry entry is changed\&. To use encrypted passwords in Samba see the chapter "User Database" in the Samba HOWTO Collection\&.
+.sp
+MS Windows clients that expect Microsoft encrypted passwords and that do not have plain text password support enabled will be able to connect only to a Samba server that has encrypted password support enabled and for which the user accounts have a valid encrypted password\&. Refer to the smbpasswd command man page for information regarding the creation of encrypted passwords for user accounts\&.
+.sp
+The use of plain text passwords is NOT advised as support for this feature is no longer maintained in Microsoft Windows products\&. If you want to use plain text passwords you must set this parameter to no\&.
+.sp
+In order for encrypted passwords to work correctly
+\fBsmbd\fR(8)
+must either have access to a local
+\fBsmbpasswd\fR(5)
+file (see the
+\fBsmbpasswd\fR(8)
+program for information on how to set up and maintain this file), or set the
+\m[blue]\fBsecurity = [domain|ads]\fR\m[]
+parameter which causes
+smbd
+to authenticate against another server\&.
+.sp
+Default:
+\fI\fIencrypt passwords\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+enhanced browsing (G)
+.PP
+.RS 4
+This option enables a couple of enhancements to cross\-subnet browse propagation that have been added in Samba but which are not standard in Microsoft implementations\&.
+.sp
+The first enhancement to browse propagation consists of a regular wildcard query to a Samba WINS server for all Domain Master Browsers, followed by a browse synchronization with each of the returned DMBs\&. The second enhancement consists of a regular randomised browse synchronization with all currently known DMBs\&.
+.sp
+You may wish to disable this option if you have a problem with empty workgroups not disappearing from browse lists\&. Due to the restrictions of the browse protocols, these enhancements can cause a empty workgroup to stay around forever which can be annoying\&.
+.sp
+In general you should leave this option enabled as it makes cross\-subnet browse propagation much more reliable\&.
+.sp
+Default:
+\fI\fIenhanced browsing\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+enumports command (G)
+.PP
+.RS 4
+The concept of a "port" is fairly foreign to UNIX hosts\&. Under Windows NT/2000 print servers, a port is associated with a port monitor and generally takes the form of a local port (i\&.e\&. LPT1:, COM1:, FILE:) or a remote port (i\&.e\&. LPD Port Monitor, etc\&.\&.\&.)\&. By default, Samba has only one port defined\-\-\fB"Samba Printer Port"\fR\&. Under Windows NT/2000, all printers must have a valid port name\&. If you wish to have a list of ports displayed (smbd
+does not use a port name for anything) other than the default
+\fB"Samba Printer Port"\fR, you can define
+\fIenumports command\fR
+to point to a program which should generate a list of ports, one per line, to standard output\&. This listing will then be used in response to the level 1 and 2 EnumPorts() RPC\&.
+.sp
+Default:
+\fI\fIenumports command\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIenumports command\fR\fR\fI = \fR\fI/usr/bin/listports\fR\fI \fR
+.RE
+
+eventlog list (G)
+.PP
+.RS 4
+This option defines a list of log names that Samba will report to the Microsoft EventViewer utility\&. The listed eventlogs will be associated with tdb file on disk in the
+$(statedir)/eventlog\&.
+.sp
+The administrator must use an external process to parse the normal Unix logs such as
+/var/log/messages
+and write then entries to the eventlog tdb files\&. Refer to the eventlogadm(8) utility for how to write eventlog entries\&.
+.sp
+Default:
+\fI\fIeventlog list\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIeventlog list\fR\fR\fI = \fR\fISecurity Application Syslog Apache\fR\fI \fR
+.RE
+
+fake directory create times (S)
+.PP
+.RS 4
+NTFS and Windows VFAT file systems keep a create time for all files and directories\&. This is not the same as the ctime \- status change time \- that Unix keeps, so Samba by default reports the earliest of the various times Unix does keep\&. Setting this parameter for a share causes Samba to always report midnight 1\-1\-1980 as the create time for directories\&.
+.sp
+This option is mainly used as a compatibility option for Visual C++ when used against Samba shares\&. Visual C++ generated makefiles have the object directory as a dependency for each object file, and a make rule to create the directory\&. Also, when NMAKE compares timestamps it uses the creation time when examining a directory\&. Thus the object directory will be created if it does not exist, but once it does exist it will always have an earlier timestamp than the object files it contains\&.
+.sp
+However, Unix time semantics mean that the create time reported by Samba will be updated whenever a file is created or deleted in the directory\&. NMAKE finds all object files in the object directory\&. The timestamp of the last one built is then compared to the timestamp of the object directory\&. If the directory\*(Aqs timestamp if newer, then all object files will be rebuilt\&. Enabling this option ensures directories always predate their contents and an NMAKE build will proceed as expected\&.
+.sp
+Default:
+\fI\fIfake directory create times\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+fake oplocks (S)
+.PP
+.RS 4
+Oplocks are the way that SMB clients get permission from a server to locally cache file operations\&. If a server grants an oplock (opportunistic lock) then the client is free to assume that it is the only one accessing the file and it will aggressively cache file data\&. With some oplock types the client may even cache file open/close operations\&. This can give enormous performance benefits\&.
+.sp
+When you set
+fake oplocks = yes,
+\fBsmbd\fR(8)
+will always grant oplock requests no matter how many clients are using the file\&.
+.sp
+It is generally much better to use the real
+\m[blue]\fBoplocks\fR\m[]
+support rather than this parameter\&.
+.sp
+If you enable this option on all read\-only shares or shares that you know will only be accessed from one client at a time such as physically read\-only media like CDROMs, you will see a big performance improvement on many operations\&. If you enable this option on shares where multiple clients may be accessing the files read\-write at the same time you can get data corruption\&. Use this option carefully!
+.sp
+Default:
+\fI\fIfake oplocks\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+follow symlinks (S)
+.PP
+.RS 4
+This parameter allows the Samba administrator to stop
+\fBsmbd\fR(8)
+from following symbolic links in a particular share\&. Setting this parameter to
+\fBno\fR
+prevents any file or directory that is a symbolic link from being followed (the user will get an error)\&. This option is very useful to stop users from adding a symbolic link to
+/etc/passwd
+in their home directory for instance\&. However it will slow filename lookups down slightly\&.
+.sp
+This option is enabled (i\&.e\&.
+smbd
+will follow symbolic links) by default\&.
+.sp
+Default:
+\fI\fIfollow symlinks\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+smbd force process locks (S)
+.PP
+.RS 4
+This boolean option tells
+smbd
+whether to forcefully disable the use of Open File Description locks on Linux\&.
+.sp
+This option should not be changed from the default unless you know what you\*(Aqre doing\&.
+.sp
+Default:
+\fI\fIsmbd force process locks\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+force create mode (S)
+.PP
+.RS 4
+This parameter specifies a set of UNIX mode bit permissions that will
+\fIalways\fR
+be set on a file created by Samba\&. This is done by bitwise \*(AqOR\*(Aqing these bits onto the mode bits of a file that is being created\&. The default for this parameter is (in octal) 000\&. The modes in this parameter are bitwise \*(AqOR\*(Aqed onto the file mode after the mask set in the
+\fIcreate mask\fR
+parameter is applied\&.
+.sp
+The example below would force all newly created files to have read and execute permissions set for \*(Aqgroup\*(Aq and \*(Aqother\*(Aq as well as the read/write/execute bits set for the \*(Aquser\*(Aq\&.
+.sp
+Default:
+\fI\fIforce create mode\fR\fR\fI = \fR\fI0000\fR\fI \fR
+.sp
+Example:
+\fI\fIforce create mode\fR\fR\fI = \fR\fI0755\fR\fI \fR
+.RE
+
+force directory mode (S)
+.PP
+.RS 4
+This parameter specifies a set of UNIX mode bit permissions that will
+\fIalways\fR
+be set on a directory created by Samba\&. This is done by bitwise \*(AqOR\*(Aqing these bits onto the mode bits of a directory that is being created\&. The default for this parameter is (in octal) 0000 which will not add any extra permission bits to a created directory\&. This operation is done after the mode mask in the parameter
+\fIdirectory mask\fR
+is applied\&.
+.sp
+The example below would force all created directories to have read and execute permissions set for \*(Aqgroup\*(Aq and \*(Aqother\*(Aq as well as the read/write/execute bits set for the \*(Aquser\*(Aq\&.
+.sp
+Default:
+\fI\fIforce directory mode\fR\fR\fI = \fR\fI0000\fR\fI \fR
+.sp
+Example:
+\fI\fIforce directory mode\fR\fR\fI = \fR\fI0755\fR\fI \fR
+.RE
+
+force directory security mode (S)
+.PP
+.RS 4
+This parameter has been removed for Samba 4\&.0\&.0\&.
+.sp
+\fINo default\fR
+.RE
+
+group
+.PP
+.RS 4
+This parameter is a synonym for
+force group\&.
+.RE
+
+force group (S)
+.PP
+.RS 4
+This specifies a UNIX group name that will be assigned as the default primary group for all users connecting to this service\&. This is useful for sharing files by ensuring that all access to files on service will use the named group for their permissions checking\&. Thus, by assigning permissions for this group to the files and directories within this service the Samba administrator can restrict or allow sharing of these files\&.
+.sp
+In Samba 2\&.0\&.5 and above this parameter has extended functionality in the following way\&. If the group name listed here has a \*(Aq+\*(Aq character prepended to it then the current user accessing the share only has the primary group default assigned to this group if they are already assigned as a member of that group\&. This allows an administrator to decide that only users who are already in a particular group will create files with group ownership set to that group\&. This gives a finer granularity of ownership assignment\&. For example, the setting
+force group = +sys
+means that only users who are already in group sys will have their default primary group assigned to sys when accessing this Samba share\&. All other users will retain their ordinary primary group\&.
+.sp
+If the
+\m[blue]\fBforce user\fR\m[]
+parameter is also set the group specified in
+\fIforce group\fR
+will override the primary group set in
+\fIforce user\fR\&.
+.sp
+Default:
+\fI\fIforce group\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIforce group\fR\fR\fI = \fR\fIagroup\fR\fI \fR
+.RE
+
+force printername (S)
+.PP
+.RS 4
+When printing from Windows NT (or later), each printer in
+smb\&.conf
+has two associated names which can be used by the client\&. The first is the sharename (or shortname) defined in smb\&.conf\&. This is the only printername available for use by Windows 9x clients\&. The second name associated with a printer can be seen when browsing to the "Printers" (or "Printers and Faxes") folder on the Samba server\&. This is referred to simply as the printername (not to be confused with the
+\fIprinter name\fR
+option)\&.
+.sp
+When assigning a new driver to a printer on a remote Windows compatible print server such as Samba, the Windows client will rename the printer to match the driver name just uploaded\&. This can result in confusion for users when multiple printers are bound to the same driver\&. To prevent Samba from allowing the printer\*(Aqs printername to differ from the sharename defined in smb\&.conf, set
+\fIforce printername = yes\fR\&.
+.sp
+Be aware that enabling this parameter may affect migrating printers from a Windows server to Samba since Windows has no way to force the sharename and printername to match\&.
+.sp
+It is recommended that this parameter\*(Aqs value not be changed once the printer is in use by clients as this could cause a user not be able to delete printer connections from their local Printers folder\&.
+.sp
+Default:
+\fI\fIforce printername\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+force security mode (S)
+.PP
+.RS 4
+This parameter has been removed for Samba 4\&.0\&.0\&.
+.sp
+\fINo default\fR
+.RE
+
+force unknown acl user (S)
+.PP
+.RS 4
+If this parameter is set, a Windows NT ACL that contains an unknown SID (security descriptor, or representation of a user or group id) as the owner or group owner of the file will be silently mapped into the current UNIX uid or gid of the currently connected user\&.
+.sp
+This is designed to allow Windows NT clients to copy files and folders containing ACLs that were created locally on the client machine and contain users local to that machine only (no domain users) to be copied to a Samba server (usually with XCOPY /O) and have the unknown userid and groupid of the file owner map to the current connected user\&. This can only be fixed correctly when winbindd allows arbitrary mapping from any Windows NT SID to a UNIX uid or gid\&.
+.sp
+Try using this parameter when XCOPY /O gives an ACCESS_DENIED error\&.
+.sp
+Default:
+\fI\fIforce unknown acl user\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+force user (S)
+.PP
+.RS 4
+This specifies a UNIX user name that will be assigned as the default user for all users connecting to this service\&. This is useful for sharing files\&. You should also use it carefully as using it incorrectly can cause security problems\&.
+.sp
+This user name only gets used once a connection is established\&. Thus clients still need to connect as a valid user and supply a valid password\&. Once connected, all file operations will be performed as the "forced user", no matter what username the client connected as\&. This can be very useful\&.
+.sp
+In Samba 2\&.0\&.5 and above this parameter also causes the primary group of the forced user to be used as the primary group for all file activity\&. Prior to 2\&.0\&.5 the primary group was left as the primary group of the connecting user (this was a bug)\&.
+.sp
+Default:
+\fI\fIforce user\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIforce user\fR\fR\fI = \fR\fIauser\fR\fI \fR
+.RE
+
+fss: prune stale (G)
+.PP
+.RS 4
+When enabled, Samba\*(Aqs File Server Remote VSS Protocol (FSRVP) server checks all FSRVP initiated snapshots on startup, and removes any corresponding state (including share definitions) for nonexistent snapshot paths\&.
+.sp
+Default:
+\fI\fIfss: prune stale\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIfss: prune stale\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+fss: sequence timeout (G)
+.PP
+.RS 4
+The File Server Remote VSS Protocol (FSRVP) server includes a message sequence timer to ensure cleanup on unexpected client disconnect\&. This parameter overrides the default timeout between FSRVP operations\&. FSRVP timeouts can be completely disabled via a value of 0\&.
+.sp
+Default:
+\fI\fIfss: sequence timeout\fR\fR\fI = \fR\fI180 or 1800, depending on operation\fR\fI \fR
+.sp
+Example:
+\fI\fIfss: sequence timeout\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+fstype (S)
+.PP
+.RS 4
+This parameter allows the administrator to configure the string that specifies the type of filesystem a share is using that is reported by
+\fBsmbd\fR(8)
+when a client queries the filesystem type for a share\&. The default type is
+\fBNTFS\fR
+for compatibility with Windows NT but this can be changed to other strings such as
+\fBSamba\fR
+or
+\fBFAT\fR
+if required\&.
+.sp
+Default:
+\fI\fIfstype\fR\fR\fI = \fR\fINTFS\fR\fI \fR
+.sp
+Example:
+\fI\fIfstype\fR\fR\fI = \fR\fISamba\fR\fI \fR
+.RE
+
+get quota command (G)
+.PP
+.RS 4
+The
+get quota command
+should only be used whenever there is no operating system API available from the OS that samba can use\&.
+.sp
+This option is only available Samba was compiled with quotas support\&.
+.sp
+This parameter should specify the path to a script that queries the quota information for the specified user/group for the partition that the specified directory is on\&.
+.sp
+Such a script is being given 3 arguments:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+directory
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+type of query
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+uid of user or gid of group
+.RE
+.sp
+.RE
+The directory is actually mostly just "\&." \- It needs to be treated relatively to the current working directory that the script can also query\&.
+.sp
+The type of query can be one of:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+1 \- user quotas
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+2 \- user default quotas (uid = \-1)
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+3 \- group quotas
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+4 \- group default quotas (gid = \-1)
+.RE
+.sp
+.RE
+This script should print one line as output with spaces between the columns\&. The printed columns should be:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+1 \- quota flags (0 = no quotas, 1 = quotas enabled, 2 = quotas enabled and enforced)
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+2 \- number of currently used blocks
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+3 \- the softlimit number of blocks
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+4 \- the hardlimit number of blocks
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+5 \- currently used number of inodes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+6 \- the softlimit number of inodes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+7 \- the hardlimit number of inodes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+8 (optional) \- the number of bytes in a block(default is 1024)
+.RE
+.sp
+.RE
+Default:
+\fI\fIget quota command\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIget quota command\fR\fR\fI = \fR\fI/usr/local/sbin/query_quota\fR\fI \fR
+.RE
+
+getwd cache (G)
+.PP
+.RS 4
+This is a tuning option\&. When this is enabled a caching algorithm will be used to reduce the time taken for getwd() calls\&. This can have a significant impact on performance, especially when the
+\m[blue]\fBwide links\fR\m[]
+parameter is set to
+\fBno\fR\&.
+.sp
+Default:
+\fI\fIgetwd cache\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+gpo update command (G)
+.PP
+.RS 4
+This option sets the command that is called to apply GPO policies\&. The samba\-gpupdate script applies System Access and Kerberos Policies to the KDC\&. System Access policies set minPwdAge, maxPwdAge, minPwdLength, and pwdProperties in the samdb\&. Kerberos Policies set kdc:service ticket lifetime, kdc:user ticket lifetime, and kdc:renewal lifetime in smb\&.conf\&.
+.sp
+Default:
+\fI\fIgpo update command\fR\fR\fI = \fR\fI${prefix}/sbin/samba\-gpupdate\fR\fI \fR
+.sp
+Example:
+\fI\fIgpo update command\fR\fR\fI = \fR\fI/usr/local/sbin/gpoupdate\fR\fI \fR
+.RE
+
+guest account (G)
+.PP
+.RS 4
+This is a username which will be used for access to services which are specified as
+\m[blue]\fBguest ok\fR\m[]
+(see below)\&. Whatever privileges this user has will be available to any client connecting to the guest service\&. This user must exist in the password file, but does not require a valid login\&. The user account "ftp" is often a good choice for this parameter\&.
+.sp
+On some systems the default guest account "nobody" may not be able to print\&. Use another account in this case\&. You should test this by trying to log in as your guest user (perhaps by using the
+su \-
+command) and trying to print using the system print command such as
+lpr(1)
+or
+lp(1)\&.
+.sp
+This parameter does not accept % macros, because many parts of the system require this value to be constant for correct operation\&.
+.sp
+Default:
+\fI\fIguest account\fR\fR\fI = \fR\fInobody # default can be changed at compile\-time\fR\fI \fR
+.sp
+Example:
+\fI\fIguest account\fR\fR\fI = \fR\fIftp\fR\fI \fR
+.RE
+
+public
+.PP
+.RS 4
+This parameter is a synonym for
+guest ok\&.
+.RE
+
+guest ok (S)
+.PP
+.RS 4
+If this parameter is
+\fByes\fR
+for a service, then no password is required to connect to the service\&. Privileges will be those of the
+\m[blue]\fBguest account\fR\m[]\&.
+.sp
+This parameter nullifies the benefits of setting
+\m[blue]\fBrestrict anonymous = 2\fR\m[]
+.sp
+See the section below on
+\m[blue]\fBsecurity\fR\m[]
+for more information about this option\&.
+.sp
+Default:
+\fI\fIguest ok\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+only guest
+.PP
+.RS 4
+This parameter is a synonym for
+guest only\&.
+.RE
+
+guest only (S)
+.PP
+.RS 4
+If this parameter is
+\fByes\fR
+for a service, then only guest connections to the service are permitted\&. This parameter will have no effect if
+\m[blue]\fBguest ok\fR\m[]
+is not set for the service\&.
+.sp
+See the section below on
+\m[blue]\fBsecurity\fR\m[]
+for more information about this option\&.
+.sp
+Default:
+\fI\fIguest only\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+hide dot files (S)
+.PP
+.RS 4
+This is a boolean parameter that controls whether files starting with a dot appear as hidden files\&.
+.sp
+Default:
+\fI\fIhide dot files\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+hide files (S)
+.PP
+.RS 4
+This is a list of files or directories that are not visible but are accessible\&. The DOS \*(Aqhidden\*(Aq attribute is applied to any files or directories that match\&.
+.sp
+Each entry in the list must be separated by a \*(Aq/\*(Aq, which allows spaces to be included in the entry\&. \*(Aq*\*(Aq and \*(Aq?\*(Aq can be used to specify multiple files or directories as in DOS wildcards\&.
+.sp
+Each entry must be a Unix path, not a DOS path and must not include the Unix directory separator \*(Aq/\*(Aq\&.
+.sp
+Note that the case sensitivity option is applicable in hiding files\&.
+.sp
+Setting this parameter will affect the performance of Samba, as it will be forced to check all files and directories for a match as they are scanned\&.
+.sp
+The example shown above is based on files that the Macintosh SMB client (DAVE) available from
+Thursby
+creates for internal use, and also still hides all files beginning with a dot\&.
+.sp
+An example of us of this parameter is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+hide files = /\&.*/DesktopFolderDB/TrashFor%m/resource\&.frk/
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIhide files\fR\fR\fI = \fR\fI # no file are hidden\fR\fI \fR
+.RE
+
+hide new files timeout (S)
+.PP
+.RS 4
+Setting this parameter to something but 0 hides files that have been modified less than N seconds ago\&.
+.sp
+It can be used for ingest/process queue style workloads\&. A processing application should only see files that are definitely finished\&. As many applications do not have proper external workflow control, this can be a way to make sure processing does not interfere with file ingest\&.
+.sp
+Default:
+\fI\fIhide new files timeout\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+hide special files (S)
+.PP
+.RS 4
+This parameter prevents clients from seeing special files such as sockets, devices and fifo\*(Aqs in directory listings\&.
+.sp
+Default:
+\fI\fIhide special files\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+hide unreadable (S)
+.PP
+.RS 4
+This parameter prevents clients from seeing the existence of files that cannot be read\&. Defaults to off\&.
+.sp
+Please note that enabling this can slow down listing large directories significantly\&. Samba has to evaluate the ACLs of all directory members, which can be a lot of effort\&.
+.sp
+Default:
+\fI\fIhide unreadable\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+hide unwriteable files (S)
+.PP
+.RS 4
+This parameter prevents clients from seeing the existence of files that cannot be written to\&. Defaults to off\&. Note that unwriteable directories are shown as usual\&.
+.sp
+Please note that enabling this can slow down listing large directories significantly\&. Samba has to evaluate the ACLs of all directory members, which can be a lot of effort\&.
+.sp
+Default:
+\fI\fIhide unwriteable files\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+honor change notify privilege (S)
+.PP
+.RS 4
+This option can be used to make use of the change notify privilege\&. By default notify results are not checked against the file system permissions\&.
+.sp
+If "honor change notify privilege" is enabled, a user will only receive notify results, if he has change notify privilege or sufficient file system permissions\&. If a user has the change notify privilege, he will receive all requested notify results, even if the user does not have the permissions on the file system\&.
+.sp
+Default:
+\fI\fIhonor change notify privilege\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+host msdfs (G)
+.PP
+.RS 4
+If set to
+\fByes\fR, Samba will act as a Dfs server, and allow Dfs\-aware clients to browse Dfs trees hosted on the server\&.
+.sp
+See also the
+\m[blue]\fBmsdfs root\fR\m[]
+share level parameter\&. For more information on setting up a Dfs tree on Samba, refer to the MSFDS chapter in the book Samba3\-HOWTO\&.
+.sp
+Default:
+\fI\fIhost msdfs\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+hostname lookups (G)
+.PP
+.RS 4
+Specifies whether samba should use (expensive) hostname lookups or use the ip addresses instead\&. An example place where hostname lookups are currently used is when checking the
+hosts deny
+and
+hosts allow\&.
+.sp
+Default:
+\fI\fIhostname lookups\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIhostname lookups\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+allow hosts
+.PP
+.RS 4
+This parameter is a synonym for
+hosts allow\&.
+.RE
+
+hosts allow (S)
+.PP
+.RS 4
+A synonym for this parameter is
+\m[blue]\fBallow hosts\fR\m[]\&.
+.sp
+This parameter is a comma, space, or tab delimited set of hosts which are permitted to access a service\&.
+.sp
+If specified in the [global] section then it will apply to all services, regardless of whether the individual service has a different setting\&.
+.sp
+You can specify the hosts by name or IP number\&. For example, you could restrict access to only the hosts on a Class C subnet with something like
+allow hosts = 150\&.203\&.5\&.\&. The full syntax of the list is described in the man page
+hosts_access(5)\&. Note that this man page may not be present on your system, so a brief description will be given here also\&.
+.sp
+Note that the localhost address 127\&.0\&.0\&.1 will always be allowed access unless specifically denied by a
+\m[blue]\fBhosts deny\fR\m[]
+option\&.
+.sp
+You can also specify hosts by network/netmask pairs and by netgroup names if your system supports netgroups\&. The
+\fIEXCEPT\fR
+keyword can also be used to limit a wildcard list\&. The following examples may provide some help:
+.sp
+Example 1: allow all IPs in 150\&.203\&.*\&.*; except one
+.sp
+hosts allow = 150\&.203\&. EXCEPT 150\&.203\&.6\&.66
+.sp
+Example 2: allow hosts that match the given network/netmask
+.sp
+hosts allow = 150\&.203\&.15\&.0/255\&.255\&.255\&.0
+.sp
+Example 3: allow a couple of hosts
+.sp
+hosts allow = lapland, arvidsjaur
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+Note that access still requires suitable user\-level passwords\&.
+.sp .5v
+.RE
+See
+\fBtestparm\fR(1)
+for a way of testing your host access to see if it does what you expect\&.
+.sp
+Default:
+\fI\fIhosts allow\fR\fR\fI = \fR\fI # none (i\&.e\&., all hosts permitted access)\fR\fI \fR
+.sp
+Example:
+\fI\fIhosts allow\fR\fR\fI = \fR\fI150\&.203\&.5\&. myhost\&.mynet\&.edu\&.au\fR\fI \fR
+.RE
+
+deny hosts
+.PP
+.RS 4
+This parameter is a synonym for
+hosts deny\&.
+.RE
+
+hosts deny (S)
+.PP
+.RS 4
+The opposite of
+\fIhosts allow\fR
+\- hosts listed here are
+\fINOT\fR
+permitted access to services unless the specific services have their own lists to override this one\&. Where the lists conflict, the
+\fIallow\fR
+list takes precedence\&.
+.sp
+In the event that it is necessary to deny all by default, use the keyword ALL (or the netmask
+0\&.0\&.0\&.0/0) and then explicitly specify to the
+\m[blue]\fBhosts allow = hosts allow\fR\m[]
+parameter those hosts that should be permitted access\&.
+.sp
+Default:
+\fI\fIhosts deny\fR\fR\fI = \fR\fI # none (i\&.e\&., no hosts specifically excluded)\fR\fI \fR
+.sp
+Example:
+\fI\fIhosts deny\fR\fR\fI = \fR\fI150\&.203\&.4\&. badhost\&.mynet\&.edu\&.au\fR\fI \fR
+.RE
+
+idmap backend (G)
+.PP
+.RS 4
+The idmap backend provides a plugin interface for Winbind to use varying backends to store SID/uid/gid mapping tables\&.
+.sp
+This option specifies the default backend that is used when no special configuration set, but it is now deprecated in favour of the new spelling
+\m[blue]\fBidmap config * : backend\fR\m[]\&.
+.sp
+Default:
+\fI\fIidmap backend\fR\fR\fI = \fR\fItdb\fR\fI \fR
+.RE
+
+idmap cache time (G)
+.PP
+.RS 4
+This parameter specifies the number of seconds that Winbind\*(Aqs idmap interface will cache positive SID/uid/gid query results\&. By default, Samba will cache these results for one week\&.
+.sp
+Default:
+\fI\fIidmap cache time\fR\fR\fI = \fR\fI604800\fR\fI \fR
+.RE
+
+idmap config DOMAIN : OPTION (G)
+.PP
+.RS 4
+ID mapping in Samba is the mapping between Windows SIDs and Unix user and group IDs\&. This is performed by Winbindd with a configurable plugin interface\&. Samba\*(Aqs ID mapping is configured by options starting with the
+\m[blue]\fBidmap config\fR\m[]
+prefix\&. An idmap option consists of the
+\m[blue]\fBidmap config\fR\m[]
+prefix, followed by a domain name or the asterisk character (*), a colon, and the name of an idmap setting for the chosen domain\&.
+.sp
+The idmap configuration is hence divided into groups, one group for each domain to be configured, and one group with the asterisk instead of a proper domain name, which specifies the default configuration that is used to catch all domains that do not have an explicit idmap configuration of their own\&.
+.sp
+There are three general options available:
+.PP
+backend = backend_name
+.RS 4
+This specifies the name of the idmap plugin to use as the SID/uid/gid backend for this domain\&. The standard backends are tdb (\fBidmap_tdb\fR(8)), tdb2 (\fBidmap_tdb2\fR(8)), ldap (\fBidmap_ldap\fR(8)), rid (\fBidmap_rid\fR(8)), hash (\fBidmap_hash\fR(8)), autorid (\fBidmap_autorid\fR(8)), ad (\fBidmap_ad\fR(8)) and nss (\fBidmap_nss\fR(8))\&. The corresponding manual pages contain the details, but here is a summary\&.
+.sp
+The first three of these create mappings of their own using internal unixid counters and store the mappings in a database\&. These are suitable for use in the default idmap configuration\&. The rid and hash backends use a pure algorithmic calculation to determine the unixid for a SID\&. The autorid module is a mixture of the tdb and rid backend\&. It creates ranges for each domain encountered and then uses the rid algorithm for each of these automatically configured domains individually\&. The ad backend uses unix ids stored in Active Directory via the standard schema extensions\&. The nss backend reverses the standard winbindd setup and gets the unix ids via names from nsswitch which can be useful in an ldap setup\&.
+.RE
+.PP
+range = low \- high
+.RS 4
+Defines the available matching uid and gid range for which the backend is authoritative\&. For allocating backends, this also defines the start and the end of the range for allocating new unique IDs\&.
+.sp
+winbind uses this parameter to find the backend that is authoritative for a unix ID to SID mapping, so it must be set for each individually configured domain and for the default configuration\&. The configured ranges must be mutually disjoint\&.
+.RE
+.PP
+read only = yes|no
+.RS 4
+This option can be used to turn the writing backends tdb, tdb2, and ldap into read only mode\&. This can be useful e\&.g\&. in cases where a pre\-filled database exists that should not be extended automatically\&.
+.RE
+.sp
+The following example illustrates how to configure the
+\fBidmap_ad\fR(8)
+backend for the CORP domain and the
+\fBidmap_tdb\fR(8)
+backend for all other domains\&. This configuration assumes that the admin of CORP assigns unix ids below 1000000 via the SFU extensions, and winbind is supposed to use the next million entries for its own mappings from trusted domains and for local groups for example\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	idmap config * : backend = tdb
+	idmap config * : range = 1000000\-1999999
+
+	idmap config CORP : backend  = ad
+	idmap config CORP : range = 1000\-999999
+	
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+\fINo default\fR
+.RE
+
+winbind gid
+.PP
+.RS 4
+This parameter is a synonym for
+idmap gid\&.
+.RE
+
+idmap gid (G)
+.PP
+.RS 4
+The idmap gid parameter specifies the range of group ids for the default idmap configuration\&. It is now deprecated in favour of
+\m[blue]\fBidmap config * : range\fR\m[]\&.
+.sp
+See the
+\m[blue]\fBidmap config\fR\m[]
+option\&.
+.sp
+Default:
+\fI\fIidmap gid\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIidmap gid\fR\fR\fI = \fR\fI10000\-20000\fR\fI \fR
+.RE
+
+idmap negative cache time (G)
+.PP
+.RS 4
+This parameter specifies the number of seconds that Winbind\*(Aqs idmap interface will cache negative SID/uid/gid query results\&.
+.sp
+Default:
+\fI\fIidmap negative cache time\fR\fR\fI = \fR\fI120\fR\fI \fR
+.RE
+
+winbind uid
+.PP
+.RS 4
+This parameter is a synonym for
+idmap uid\&.
+.RE
+
+idmap uid (G)
+.PP
+.RS 4
+The idmap uid parameter specifies the range of user ids for the default idmap configuration\&. It is now deprecated in favour of
+\m[blue]\fBidmap config * : range\fR\m[]\&.
+.sp
+See the
+\m[blue]\fBidmap config\fR\m[]
+option\&.
+.sp
+Default:
+\fI\fIidmap uid\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIidmap uid\fR\fR\fI = \fR\fI10000\-20000\fR\fI \fR
+.RE
+
+include (S)
+.PP
+.RS 4
+This allows you to include one config file inside another\&. The file is included literally, as though typed in place\&.
+.sp
+It takes the standard substitutions, except
+\fI%u\fR,
+\fI%P\fR
+and
+\fI%S\fR\&.
+.sp
+The parameter
+\fIinclude = registry\fR
+has a special meaning: It does
+\fInot\fR
+include a file named
+\fIregistry\fR
+from the current working directory, but instead reads the global configuration options from the registry\&. See the section on registry\-based configuration for details\&. Note that this option automatically activates registry shares\&.
+.sp
+Default:
+\fI\fIinclude\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIinclude\fR\fR\fI = \fR\fI/usr/local/samba/lib/admin_smb\&.conf\fR\fI \fR
+.RE
+
+include system krb5 conf (G)
+.PP
+.RS 4
+Setting this parameter to
+no
+will prevent winbind to include the system /etc/krb5\&.conf file into the krb5\&.conf file it creates\&. See also
+\m[blue]\fBcreate krb5 conf\fR\m[]\&. This option only applies to Samba built with MIT Kerberos\&.
+.sp
+Default:
+\fI\fIinclude system krb5 conf\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+inherit acls (S)
+.PP
+.RS 4
+This parameter can be used to ensure that if default acls exist on parent directories, they are always honored when creating a new file or subdirectory in these parent directories\&. The default behavior is to use the unix mode specified when creating the directory\&. Enabling this option sets the unix mode to 0777, thus guaranteeing that default directory acls are propagated\&. Note that using the VFS modules acl_xattr or acl_tdb which store native Windows as meta\-data will automatically turn this option on for any share for which they are loaded, as they require this option to emulate Windows ACLs correctly\&.
+.sp
+Default:
+\fI\fIinherit acls\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+inherit owner (S)
+.PP
+.RS 4
+The ownership of new files and directories is normally governed by effective uid of the connected user\&. This option allows the Samba administrator to specify that the ownership for new files and directories should be controlled by the ownership of the parent directory\&.
+.sp
+Valid options are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBno\fR
+\- Both the Windows (SID) owner and the UNIX (uid) owner of the file are governed by the identity of the user that created the file\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwindows and unix\fR
+\- The Windows (SID) owner and the UNIX (uid) owner of new files and directories are set to the respective owner of the parent directory\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fByes\fR
+\- a synonym for
+\fBwindows and unix\fR\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBunix only\fR
+\- Only the UNIX owner is set to the UNIX owner of the parent directory\&.
+.RE
+.sp
+.RE
+Common scenarios where this behavior is useful is in implementing drop\-boxes, where users can create and edit files but not delete them and ensuring that newly created files in a user\*(Aqs roaming profile directory are actually owned by the user\&.
+.sp
+The
+\fBunix only\fR
+option effectively breaks the tie between the Windows owner of a file and the UNIX owner\&. As a logical consequence, in this mode, setting the the Windows owner of a file does not modify the UNIX owner\&. Using this mode should typically be combined with a backing store that can emulate the full NT ACL model without affecting the POSIX permissions, such as the acl_xattr VFS module, coupled with
+\m[blue]\fBacl_xattr:ignore system acls = yes\fR\m[]\&. This can be used to emulate folder quotas, when files are exposed only via SMB (without UNIX extensions)\&. The UNIX owner of a directory is locally set and inherited by all subdirectories and files, and they all consume the same quota\&.
+.sp
+Default:
+\fI\fIinherit owner\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+inherit permissions (S)
+.PP
+.RS 4
+The permissions on new files and directories are normally governed by
+\m[blue]\fBcreate mask\fR\m[],
+\m[blue]\fBdirectory mask\fR\m[],
+\m[blue]\fBforce create mode\fR\m[]
+and
+\m[blue]\fBforce directory mode\fR\m[]
+but the boolean inherit permissions parameter overrides this\&.
+.sp
+New directories inherit the mode of the parent directory, including bits such as setgid\&.
+.sp
+New files inherit their read/write bits from the parent directory\&. Their execute bits continue to be determined by
+\m[blue]\fBmap archive\fR\m[],
+\m[blue]\fBmap hidden\fR\m[]
+and
+\m[blue]\fBmap system\fR\m[]
+as usual\&.
+.sp
+Note that the setuid bit is
+\fInever\fR
+set via inheritance (the code explicitly prohibits this)\&.
+.sp
+This can be particularly useful on large systems with many users, perhaps several thousand, to allow a single [homes] share to be used flexibly by each user\&.
+.sp
+Default:
+\fI\fIinherit permissions\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+init logon delay (G)
+.PP
+.RS 4
+This parameter specifies a delay in milliseconds for the hosts configured for delayed initial samlogon with
+\m[blue]\fBinit logon delayed hosts\fR\m[]\&.
+.sp
+Default:
+\fI\fIinit logon delay\fR\fR\fI = \fR\fI100\fR\fI \fR
+.RE
+
+init logon delayed hosts (G)
+.PP
+.RS 4
+This parameter takes a list of host names, addresses or networks for which the initial samlogon reply should be delayed (so other DCs get preferred by XP workstations if there are any)\&.
+.sp
+The length of the delay can be specified with the
+\m[blue]\fBinit logon delay\fR\m[]
+parameter\&.
+.sp
+Default:
+\fI\fIinit logon delayed hosts\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIinit logon delayed hosts\fR\fR\fI = \fR\fI150\&.203\&.5\&. myhost\&.mynet\&.de\fR\fI \fR
+.RE
+
+interfaces (G)
+.PP
+.RS 4
+This option allows you to override the default network interfaces list that Samba will use for browsing, name registration and other NetBIOS over TCP/IP (NBT) traffic\&. By default Samba will query the kernel for the list of all active interfaces and use any interfaces except 127\&.0\&.0\&.1 that are broadcast capable\&.
+.sp
+The option takes a list of interface strings\&. Each string can be in any of the following forms:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+a network interface name (such as eth0)\&. This may include shell\-like wildcards so eth* will match any interface starting with the substring "eth"
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+an IP address\&. In this case the netmask is determined from the list of interfaces obtained from the kernel
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+an IP/mask pair\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+a broadcast/mask pair\&.
+.RE
+.sp
+.RE
+The "mask" parameters can either be a bit length (such as 24 for a C class network) or a full netmask in dotted decimal form\&.
+.sp
+The "IP" parameters above can either be a full dotted decimal IP address or a hostname which will be looked up via the OS\*(Aqs normal hostname resolution mechanisms\&.
+.sp
+By default Samba enables all active interfaces that are broadcast capable except the loopback adaptor (IP address 127\&.0\&.0\&.1)\&.
+.sp
+In order to support SMB3 multi\-channel configurations, smbd understands some extra parameters which can be appended after the actual interface with this extended syntax (note that the quoting is important in order to handle the ; and , characters):
+.sp
+"interface[;key1=value1[,key2=value2[\&.\&.\&.]]]"
+.sp
+Known keys are speed, capability, and if_index\&. Speed is specified in bits per second\&. Known capabilities are RSS and RDMA\&. The if_index should be used with care: the values must not coincide with indexes used by the kernel\&. Note that these options are mainly intended for testing and development rather than for production use\&. At least on Linux systems, these values should be auto\-detected, but the settings can serve as last a resort when autodetection is not working or is not available\&. The specified values overwrite the auto\-detected values\&.
+.sp
+The first two example below configures three network interfaces corresponding to the eth0 device and IP addresses 192\&.168\&.2\&.10 and 192\&.168\&.3\&.10\&. The netmasks of the latter two interfaces would be set to 255\&.255\&.255\&.0\&.
+.sp
+The other examples show how per interface extra parameters can be specified\&. Notice the possible usage of "," and ";", which makes the double quoting necessary\&.
+.sp
+Default:
+\fI\fIinterfaces\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIinterfaces\fR\fR\fI = \fR\fIeth0 192\&.168\&.2\&.10/24 192\&.168\&.3\&.10/255\&.255\&.255\&.0\fR\fI \fR
+.sp
+Example:
+\fI\fIinterfaces\fR\fR\fI = \fR\fIeth0, 192\&.168\&.2\&.10/24; 192\&.168\&.3\&.10/255\&.255\&.255\&.0\fR\fI \fR
+.sp
+Example:
+\fI\fIinterfaces\fR\fR\fI = \fR\fI"eth0;if_index=65,speed=1000000000,capability=RSS"\fR\fI \fR
+.sp
+Example:
+\fI\fIinterfaces\fR\fR\fI = \fR\fI"lo;speed=1000000000" "eth0;capability=RSS"\fR\fI \fR
+.sp
+Example:
+\fI\fIinterfaces\fR\fR\fI = \fR\fI"lo;speed=1000000000" , "eth0;capability=RSS"\fR\fI \fR
+.sp
+Example:
+\fI\fIinterfaces\fR\fR\fI = \fR\fI"eth0;capability=RSS" , "rdma1;capability=RDMA" ; "rdma2;capability=RSS,capability=RDMA"\fR\fI \fR
+.RE
+
+invalid users (S)
+.PP
+.RS 4
+This is a list of users that should not be allowed to login to this service\&. This is really a
+\fIparanoid\fR
+check to absolutely ensure an improper setting does not breach your security\&.
+.sp
+A name starting with a \*(Aq@\*(Aq is interpreted UNIX group\&.
+.sp
+The current servicename is substituted for
+\fI%S\fR\&. This is useful in the [homes] section\&.
+.sp
+Default:
+\fI\fIinvalid users\fR\fR\fI = \fR\fI # no invalid users\fR\fI \fR
+.sp
+Example:
+\fI\fIinvalid users\fR\fR\fI = \fR\fIroot fred admin @wheel\fR\fI \fR
+.RE
+
+iprint server (G)
+.PP
+.RS 4
+This parameter is only applicable if
+\m[blue]\fBprinting\fR\m[]
+is set to
+\fBiprint\fR\&.
+.sp
+If set, this option overrides the ServerName option in the CUPS
+client\&.conf\&. This is necessary if you have virtual samba servers that connect to different CUPS daemons\&.
+.sp
+Default:
+\fI\fIiprint server\fR\fR\fI = \fR\fI""\fR\fI \fR
+.sp
+Example:
+\fI\fIiprint server\fR\fR\fI = \fR\fIMYCUPSSERVER\fR\fI \fR
+.RE
+
+keepalive (G)
+.PP
+.RS 4
+The value of the parameter (an integer) represents the number of seconds between
+\fIkeepalive\fR
+packets\&. If this parameter is zero, no keepalive packets will be sent\&. Keepalive packets, if sent, allow the server to tell whether a client is still present and responding\&.
+.sp
+Keepalives should, in general, not be needed if the socket has the SO_KEEPALIVE attribute set on it by default\&. (see
+\m[blue]\fBsocket options\fR\m[])\&. Basically you should only use this option if you strike difficulties\&.
+.sp
+Please note this option only applies to SMB1 client connections, and has no effect on SMB2 clients\&.
+.sp
+Default:
+\fI\fIkeepalive\fR\fR\fI = \fR\fI300\fR\fI \fR
+.sp
+Example:
+\fI\fIkeepalive\fR\fR\fI = \fR\fI600\fR\fI \fR
+.RE
+
+kerberos encryption types (G)
+.PP
+.RS 4
+This parameter determines the encryption types to use when operating as a Kerberos client\&. Possible values are
+\fIall\fR,
+\fIstrong\fR, and
+\fIlegacy\fR\&.
+.sp
+Samba uses a Kerberos library (MIT or Heimdal) to obtain Kerberos tickets\&. This library is normally configured outside of Samba, using the krb5\&.conf file\&. This file may also include directives to configure the encryption types to be used\&. However, Samba implements Active Directory protocols and algorithms to locate a domain controller\&. In order to force the Kerberos library into using the correct domain controller, some Samba processes, such as
+\fBwinbindd\fR(8)
+and
+\fBnet\fR(8), build a private krb5\&.conf file for use by the Kerberos library while being invoked from Samba\&. This private file controls all aspects of the Kerberos library operation, and this parameter controls how the encryption types are configured within this generated file, and therefore also controls the encryption types negotiable by Samba\&.
+.sp
+When set to
+\fBall\fR, all active directory encryption types are allowed\&.
+.sp
+When set to
+\fBstrong\fR, only AES\-based encryption types are offered\&. This can be used in hardened environments to prevent downgrade attacks\&.
+.sp
+When set to
+\fBlegacy\fR, only RC4\-HMAC\-MD5 is allowed\&. Avoiding AES this way has one a very specific use\&. Normally, the encryption type is negotiated between the peers\&. However, there is one scenario in which a Windows read\-only domain controller (RODC) advertises AES encryption, but then proxies the request to a writeable DC which may not support AES encryption, leading to failure of the handshake\&. Setting this parameter to
+\fBlegacy\fR
+would cause samba not to negotiate AES encryption\&. It is assumed of course that the weaker legacy encryption types are acceptable for the setup\&.
+.sp
+Default:
+\fI\fIkerberos encryption types\fR\fR\fI = \fR\fIall\fR\fI \fR
+.RE
+
+kerberos method (G)
+.PP
+.RS 4
+Controls how kerberos tickets are verified\&.
+.sp
+Valid options are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+secrets only \- use only the secrets\&.tdb for ticket verification (default)
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+system keytab \- use only the system keytab for ticket verification
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+dedicated keytab \- use a dedicated keytab for ticket verification
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+secrets and keytab \- use the secrets\&.tdb first, then the system keytab
+.RE
+.sp
+.RE
+The major difference between "system keytab" and "dedicated keytab" is that the latter method relies on kerberos to find the correct keytab entry instead of filtering based on expected principals\&.
+.sp
+When the kerberos method is in "dedicated keytab" mode,
+\m[blue]\fBdedicated keytab file\fR\m[]
+must be set to specify the location of the keytab file\&.
+.sp
+Default:
+\fI\fIkerberos method\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.RE
+
+kernel change notify (G)
+.PP
+.RS 4
+This parameter specifies whether Samba should ask the kernel for change notifications in directories so that SMB clients can refresh whenever the data on the server changes\&.
+.sp
+This parameter is only used when your kernel supports change notification to user programs using the inotify interface\&.
+.sp
+Default:
+\fI\fIkernel change notify\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+kernel oplocks (S)
+.PP
+.RS 4
+For UNIXes that support kernel based
+\m[blue]\fBoplocks\fR\m[]
+(currently only Linux), this parameter allows the use of them to be turned on or off\&. However, this disables Level II oplocks for clients as the Linux kernel does not support them properly\&.
+.sp
+Kernel oplocks support allows Samba
+\fIoplocks \fR
+to be broken whenever a local UNIX process or NFS operation accesses a file that
+\fBsmbd\fR(8)
+has oplocked\&. This allows complete data consistency between SMB/CIFS, NFS and local file access (and is a
+\fIvery\fR
+cool feature :\-)\&.
+.sp
+If you do not need this interaction, you should disable the parameter on Linux to get Level II oplocks and the associated performance benefit\&.
+.sp
+This parameter defaults to
+\fBno\fR
+and is translated to a no\-op on systems that do not have the necessary kernel support\&.
+.sp
+Default:
+\fI\fIkernel oplocks\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+kernel share modes (S)
+.PP
+.RS 4
+This parameter controls whether SMB share modes are translated into UNIX flocks\&.
+.sp
+Kernel share modes provide a minimal level of interoperability with local UNIX processes and NFS operations by preventing access with flocks corresponding to the SMB share modes\&. Generally, it is very desirable to leave this enabled\&.
+.sp
+Note that in order to use SMB2 durable file handles on a share, you have to turn kernel share modes off\&.
+.sp
+This parameter defaults to
+\fByes\fR
+and is translated to a no\-op on systems that do not have the necessary kernel flock support\&.
+.sp
+Default:
+\fI\fIkernel share modes\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+kpasswd port (G)
+.PP
+.RS 4
+Specifies which ports the Kerberos server should listen on for password changes\&.
+.sp
+Default:
+\fI\fIkpasswd port\fR\fR\fI = \fR\fI464\fR\fI \fR
+.RE
+
+krb5 port (G)
+.PP
+.RS 4
+Specifies which port the KDC should listen on for Kerberos traffic\&.
+.sp
+Default:
+\fI\fIkrb5 port\fR\fR\fI = \fR\fI88\fR\fI \fR
+.RE
+
+lanman auth (G)
+.PP
+.RS 4
+This parameter has been deprecated since Samba 4\&.11 and support for LanMan (as distinct from NTLM, NTLMv2 or Kerberos authentication) will be removed in a future Samba release\&.
+.sp
+That is, in the future, the current default of
+lanman auth = no
+will be the enforced behaviour\&.
+.sp
+This parameter determines whether or not
+\fBsmbd\fR(8)
+will attempt to authenticate users or permit password changes using the LANMAN password hash\&. If disabled, only clients which support NT password hashes (e\&.g\&. Windows NT/2000 clients, smbclient, but not Windows 95/98 or the MS DOS network client) will be able to connect to the Samba host\&.
+.sp
+The LANMAN encrypted response is easily broken, due to its case\-insensitive nature, and the choice of algorithm\&. Servers without Windows 95/98/ME or MS DOS clients are advised to disable this option\&.
+.sp
+When this parameter is set to
+no
+this will also result in sambaLMPassword in Samba\*(Aqs passdb being blanked after the next password change\&. As a result of that lanman clients won\*(Aqt be able to authenticate, even if lanman auth is re\-enabled later on\&.
+.sp
+Unlike the
+\fIencrypt passwords\fR
+option, this parameter cannot alter client behaviour, and the LANMAN response will still be sent over the network\&. See the
+client lanman auth
+to disable this for Samba\*(Aqs clients (such as smbclient)
+.sp
+This parameter is overridden by
+\fIntlm auth\fR, so unless that it is also set to
+\fBntlmv1\-permitted\fR
+or
+\fByes\fR, then only NTLMv2 logins will be permitted and no LM hash will be stored\&. All modern clients support NTLMv2, and but some older clients require special configuration to use it\&.
+.sp
+Default:
+\fI\fIlanman auth\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+large readwrite (G)
+.PP
+.RS 4
+This parameter determines whether or not
+\fBsmbd\fR(8)
+supports the new 64k streaming read and write variant SMB requests introduced with Windows 2000\&. Note that due to Windows 2000 client redirector bugs this requires Samba to be running on a 64\-bit capable operating system such as IRIX, Solaris or a Linux 2\&.4 kernel\&. Can improve performance by 10% with Windows 2000 clients\&. Defaults to on\&. Not as tested as some other Samba code paths\&.
+.sp
+Default:
+\fI\fIlarge readwrite\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+ldap admin dn (G)
+.PP
+.RS 4
+The
+\m[blue]\fBldap admin dn\fR\m[]
+defines the Distinguished Name (DN) name used by Samba to contact the ldap server when retrieving user account information\&. The
+\m[blue]\fBldap admin dn\fR\m[]
+is used in conjunction with the admin dn password stored in the
+private/secrets\&.tdb
+file\&. See the
+\fBsmbpasswd\fR(8)
+man page for more information on how to accomplish this\&.
+.sp
+The
+\m[blue]\fBldap admin dn\fR\m[]
+requires a fully specified DN\&. The
+\m[blue]\fBldap suffix\fR\m[]
+is not appended to the
+\m[blue]\fBldap admin dn\fR\m[]\&.
+.sp
+\fINo default\fR
+.RE
+
+ldap connection timeout (G)
+.PP
+.RS 4
+This parameter tells the LDAP library calls which timeout in seconds they should honor during initial connection establishments to LDAP servers\&. It is very useful in failover scenarios in particular\&. If one or more LDAP servers are not reachable at all, we do not have to wait until TCP timeouts are over\&. This feature must be supported by your LDAP library\&.
+.sp
+This parameter is different from
+\m[blue]\fBldap timeout\fR\m[]
+which affects operations on LDAP servers using an existing connection and not establishing an initial connection\&.
+.sp
+Default:
+\fI\fIldap connection timeout\fR\fR\fI = \fR\fI2\fR\fI \fR
+.RE
+
+ldap debug level (G)
+.PP
+.RS 4
+This parameter controls the debug level of the LDAP library calls\&. In the case of OpenLDAP, it is the same bit\-field as understood by the server and documented in the
+\fBslapd.conf\fR(5)
+manpage\&. A typical useful value will be
+\fI1\fR
+for tracing function calls\&.
+.sp
+The debug output from the LDAP libraries appears with the prefix [LDAP] in Samba\*(Aqs logging output\&. The level at which LDAP logging is printed is controlled by the parameter
+\fIldap debug threshold\fR\&.
+.sp
+Default:
+\fI\fIldap debug level\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fIldap debug level\fR\fR\fI = \fR\fI1\fR\fI \fR
+.RE
+
+ldap debug threshold (G)
+.PP
+.RS 4
+This parameter controls the Samba debug level at which the ldap library debug output is printed in the Samba logs\&. See the description of
+\fIldap debug level\fR
+for details\&.
+.sp
+Default:
+\fI\fIldap debug threshold\fR\fR\fI = \fR\fI10\fR\fI \fR
+.sp
+Example:
+\fI\fIldap debug threshold\fR\fR\fI = \fR\fI5\fR\fI \fR
+.RE
+
+ldap delete dn (G)
+.PP
+.RS 4
+This parameter specifies whether a delete operation in the ldapsam deletes the complete entry or only the attributes specific to Samba\&.
+.sp
+Default:
+\fI\fIldap delete dn\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+ldap deref (G)
+.PP
+.RS 4
+This option controls whether Samba should tell the LDAP library to use a certain alias dereferencing method\&. The default is
+\fIauto\fR, which means that the default setting of the ldap client library will be kept\&. Other possible values are
+\fInever\fR,
+\fIfinding\fR,
+\fIsearching\fR
+and
+\fIalways\fR\&. Grab your LDAP manual for more information\&.
+.sp
+Default:
+\fI\fIldap deref\fR\fR\fI = \fR\fIauto\fR\fI \fR
+.sp
+Example:
+\fI\fIldap deref\fR\fR\fI = \fR\fIsearching\fR\fI \fR
+.RE
+
+ldap follow referral (G)
+.PP
+.RS 4
+This option controls whether to follow LDAP referrals or not when searching for entries in the LDAP database\&. Possible values are
+\fIon\fR
+to enable following referrals,
+\fIoff\fR
+to disable this, and
+\fIauto\fR, to use the libldap default settings\&. libldap\*(Aqs choice of following referrals or not is set in /etc/openldap/ldap\&.conf with the REFERRALS parameter as documented in ldap\&.conf(5)\&.
+.sp
+Default:
+\fI\fIldap follow referral\fR\fR\fI = \fR\fIauto\fR\fI \fR
+.sp
+Example:
+\fI\fIldap follow referral\fR\fR\fI = \fR\fIoff\fR\fI \fR
+.RE
+
+ldap group suffix (G)
+.PP
+.RS 4
+This parameter specifies the suffix that is used for groups when these are added to the LDAP directory\&. If this parameter is unset, the value of
+\m[blue]\fBldap suffix\fR\m[]
+will be used instead\&. The suffix string is pre\-pended to the
+\m[blue]\fBldap suffix\fR\m[]
+string so use a partial DN\&.
+.sp
+Default:
+\fI\fIldap group suffix\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIldap group suffix\fR\fR\fI = \fR\fIou=Groups\fR\fI \fR
+.RE
+
+ldap idmap suffix (G)
+.PP
+.RS 4
+This parameters specifies the suffix that is used when storing idmap mappings\&. If this parameter is unset, the value of
+\m[blue]\fBldap suffix\fR\m[]
+will be used instead\&. The suffix string is pre\-pended to the
+\m[blue]\fBldap suffix\fR\m[]
+string so use a partial DN\&.
+.sp
+Default:
+\fI\fIldap idmap suffix\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIldap idmap suffix\fR\fR\fI = \fR\fIou=Idmap\fR\fI \fR
+.RE
+
+ldap machine suffix (G)
+.PP
+.RS 4
+It specifies where machines should be added to the ldap tree\&. If this parameter is unset, the value of
+\m[blue]\fBldap suffix\fR\m[]
+will be used instead\&. The suffix string is pre\-pended to the
+\m[blue]\fBldap suffix\fR\m[]
+string so use a partial DN\&.
+.sp
+Default:
+\fI\fIldap machine suffix\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIldap machine suffix\fR\fR\fI = \fR\fIou=Computers\fR\fI \fR
+.RE
+
+ldap max anonymous request size (G)
+.PP
+.RS 4
+This parameter specifies the maximum permitted size (in bytes) for an LDAP request received on an anonymous connection\&.
+.sp
+If the request size exceeds this limit the request will be rejected\&.
+.sp
+Default:
+\fI\fIldap max anonymous request size\fR\fR\fI = \fR\fI256000\fR\fI \fR
+.sp
+Example:
+\fI\fIldap max anonymous request size\fR\fR\fI = \fR\fI500000\fR\fI \fR
+.RE
+
+ldap max authenticated request size (G)
+.PP
+.RS 4
+This parameter specifies the maximum permitted size (in bytes) for an LDAP request received on an authenticated connection\&.
+.sp
+If the request size exceeds this limit the request will be rejected\&.
+.sp
+Default:
+\fI\fIldap max authenticated request size\fR\fR\fI = \fR\fI16777216\fR\fI \fR
+.sp
+Example:
+\fI\fIldap max authenticated request size\fR\fR\fI = \fR\fI4194304\fR\fI \fR
+.RE
+
+ldap max search request size (G)
+.PP
+.RS 4
+This parameter specifies the maximum permitted size (in bytes) for an LDAP search request\&.
+.sp
+If the request size exceeds this limit the request will be rejected\&.
+.sp
+Default:
+\fI\fIldap max search request size\fR\fR\fI = \fR\fI256000\fR\fI \fR
+.sp
+Example:
+\fI\fIldap max search request size\fR\fR\fI = \fR\fI4194304\fR\fI \fR
+.RE
+
+ldap page size (G)
+.PP
+.RS 4
+This parameter specifies the number of entries per page\&.
+.sp
+If the LDAP server supports paged results, clients can request subsets of search results (pages) instead of the entire list\&. This parameter specifies the size of these pages\&.
+.sp
+Default:
+\fI\fIldap page size\fR\fR\fI = \fR\fI1000\fR\fI \fR
+.sp
+Example:
+\fI\fIldap page size\fR\fR\fI = \fR\fI512\fR\fI \fR
+.RE
+
+ldap password sync
+.PP
+.RS 4
+This parameter is a synonym for
+ldap passwd sync\&.
+.RE
+
+ldap passwd sync (G)
+.PP
+.RS 4
+This option is used to define whether or not Samba should sync the LDAP password with the NT and LM hashes for normal accounts (NOT for workstation, server or domain trusts) on a password change via SAMBA\&.
+.sp
+The
+\m[blue]\fBldap passwd sync\fR\m[]
+can be set to one of three values:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIYes\fR
+= Try to update the LDAP, NT and LM passwords and update the pwdLastSet time\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fINo\fR
+= Update NT and LM passwords and update the pwdLastSet time\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIOnly\fR
+= Only update the LDAP password and let the LDAP server do the rest\&.
+.RE
+.sp
+.RE
+Default:
+\fI\fIldap passwd sync\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+ldap replication sleep (G)
+.PP
+.RS 4
+When Samba is asked to write to a read\-only LDAP replica, we are redirected to talk to the read\-write master server\&. This server then replicates our changes back to the \*(Aqlocal\*(Aq server, however the replication might take some seconds, especially over slow links\&. Certain client activities, particularly domain joins, can become confused by the \*(Aqsuccess\*(Aq that does not immediately change the LDAP back\-end\*(Aqs data\&.
+.sp
+This option simply causes Samba to wait a short time, to allow the LDAP server to catch up\&. If you have a particularly high\-latency network, you may wish to time the LDAP replication with a network sniffer, and increase this value accordingly\&. Be aware that no checking is performed that the data has actually replicated\&.
+.sp
+The value is specified in milliseconds, the maximum value is 5000 (5 seconds)\&.
+.sp
+Default:
+\fI\fIldap replication sleep\fR\fR\fI = \fR\fI1000\fR\fI \fR
+.RE
+
+ldapsam:editposix (G)
+.PP
+.RS 4
+Editposix is an option that leverages ldapsam:trusted to make it simpler to manage a domain controller eliminating the need to set up custom scripts to add and manage the posix users and groups\&. This option will instead directly manipulate the ldap tree to create, remove and modify user and group entries\&. This option also requires a running winbindd as it is used to allocate new uids/gids on user/group creation\&. The allocation range must be therefore configured\&.
+.sp
+To use this option, a basic ldap tree must be provided and the ldap suffix parameters must be properly configured\&. On virgin servers the default users and groups (Administrator, Guest, Domain Users, Domain Admins, Domain Guests) can be precreated with the command
+net sam provision\&. To run this command the ldap server must be running, Winbindd must be running and the smb\&.conf ldap options must be properly configured\&. The typical ldap setup used with the
+\m[blue]\fBldapsam:trusted = yes\fR\m[]
+option is usually sufficient to use
+\m[blue]\fBldapsam:editposix = yes\fR\m[]
+as well\&.
+.sp
+An example configuration can be the following:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	encrypt passwords = true
+	passdb backend = ldapsam
+
+	ldapsam:trusted=yes
+	ldapsam:editposix=yes
+
+	ldap admin dn = cn=admin,dc=samba,dc=org
+	ldap delete dn = yes
+	ldap group suffix = ou=groups
+	ldap idmap suffix = ou=idmap
+	ldap machine suffix = ou=computers
+	ldap user suffix = ou=users
+	ldap suffix = dc=samba,dc=org
+
+	idmap backend = ldap:"ldap://localhost"
+
+	idmap uid = 5000\-50000
+	idmap gid = 5000\-50000
+	
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+This configuration assumes a directory layout like described in the following ldif:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	dn: dc=samba,dc=org
+	objectClass: top
+	objectClass: dcObject
+	objectClass: organization
+	o: samba\&.org
+	dc: samba
+
+	dn: cn=admin,dc=samba,dc=org
+	objectClass: simpleSecurityObject
+	objectClass: organizationalRole
+	cn: admin
+	description: LDAP administrator
+	userPassword: secret
+
+	dn: ou=users,dc=samba,dc=org
+	objectClass: top
+	objectClass: organizationalUnit
+	ou: users
+
+	dn: ou=groups,dc=samba,dc=org
+	objectClass: top
+	objectClass: organizationalUnit
+	ou: groups
+
+	dn: ou=idmap,dc=samba,dc=org
+	objectClass: top
+	objectClass: organizationalUnit
+	ou: idmap
+
+	dn: ou=computers,dc=samba,dc=org
+	objectClass: top
+	objectClass: organizationalUnit
+	ou: computers
+	
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIldapsam:editposix\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+ldapsam:trusted (G)
+.PP
+.RS 4
+By default, Samba as a Domain Controller with an LDAP backend needs to use the Unix\-style NSS subsystem to access user and group information\&. Due to the way Unix stores user information in /etc/passwd and /etc/group this inevitably leads to inefficiencies\&. One important question a user needs to know is the list of groups he is member of\&. The plain UNIX model involves a complete enumeration of the file /etc/group and its NSS counterparts in LDAP\&. UNIX has optimized functions to enumerate group membership\&. Sadly, other functions that are used to deal with user and group attributes lack such optimization\&.
+.sp
+To make Samba scale well in large environments, the
+\m[blue]\fBldapsam:trusted = yes\fR\m[]
+option assumes that the complete user and group database that is relevant to Samba is stored in LDAP with the standard posixAccount/posixGroup attributes\&. It further assumes that the Samba auxiliary object classes are stored together with the POSIX data in the same LDAP object\&. If these assumptions are met,
+\m[blue]\fBldapsam:trusted = yes\fR\m[]
+can be activated and Samba can bypass the NSS system to query user group memberships\&. Optimized LDAP queries can greatly speed up domain logon and administration tasks\&. Depending on the size of the LDAP database a factor of 100 or more for common queries is easily achieved\&.
+.sp
+Default:
+\fI\fIldapsam:trusted\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+ldap server require strong auth (G)
+.PP
+.RS 4
+The
+\m[blue]\fBldap server require strong auth\fR\m[]
+defines whether the ldap server requires ldap traffic to be signed or signed and encrypted (sealed)\&. Possible values are
+\fIno\fR,
+\fIallow_sasl_over_tls\fR
+and
+\fIyes\fR\&.
+.sp
+A value of
+\fIno\fR
+allows simple and sasl binds over all transports\&.
+.sp
+A value of
+\fIallow_sasl_over_tls\fR
+allows simple and sasl binds (without sign or seal) over TLS encrypted connections\&. Unencrypted connections only allow sasl binds with sign or seal\&.
+.sp
+A value of
+\fIyes\fR
+allows only simple binds over TLS encrypted connections\&. Unencrypted connections only allow sasl binds with sign or seal\&.
+.sp
+Default:
+\fI\fIldap server require strong auth\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+ldap ssl (G)
+.PP
+.RS 4
+This option is used to define whether or not Samba should use SSL when connecting to the ldap server This is
+\fINOT\fR
+related to Samba\*(Aqs previous SSL support which was enabled by specifying the
+\-\-with\-ssl
+option to the
+configure
+script\&.
+.sp
+LDAP connections should be secured where possible\&. This may be done setting
+\fIeither\fR
+this parameter to
+\fIstart tls\fR
+\fIor\fR
+by specifying
+\fIldaps://\fR
+in the URL argument of
+\m[blue]\fBpassdb backend\fR\m[]\&.
+.sp
+The
+\m[blue]\fBldap ssl\fR\m[]
+can be set to one of two values:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIOff\fR
+= Never use SSL when querying the directory\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIstart tls\fR
+= Use the LDAPv3 StartTLS extended operation (RFC2830) for communicating with the directory server\&.
+.RE
+.sp
+.RE
+Please note that this parameter does only affect
+\fIrpc\fR
+methods\&. To enable the LDAPv3 StartTLS extended operation (RFC2830) for
+\fIads\fR, set
+\m[blue]\fBldap ssl = start tls\fR\m[]
+\fIand\fR
+\m[blue]\fBldap ssl ads = yes\fR\m[]\&. See
+smb\&.conf(5)
+for more information on
+\m[blue]\fBldap ssl ads\fR\m[]\&.
+.sp
+Default:
+\fI\fIldap ssl\fR\fR\fI = \fR\fIstart tls\fR\fI \fR
+.RE
+
+ldap suffix (G)
+.PP
+.RS 4
+Specifies the base for all ldap suffixes and for storing the sambaDomain object\&.
+.sp
+The ldap suffix will be appended to the values specified for the
+\m[blue]\fBldap user suffix\fR\m[],
+\m[blue]\fBldap group suffix\fR\m[],
+\m[blue]\fBldap machine suffix\fR\m[], and the
+\m[blue]\fBldap idmap suffix\fR\m[]\&. Each of these should be given only a DN relative to the
+\m[blue]\fBldap suffix\fR\m[]\&.
+.sp
+Default:
+\fI\fIldap suffix\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIldap suffix\fR\fR\fI = \fR\fIdc=samba,dc=org\fR\fI \fR
+.RE
+
+ldap timeout (G)
+.PP
+.RS 4
+This parameter defines the number of seconds that Samba should use as timeout for LDAP operations\&.
+.sp
+Default:
+\fI\fIldap timeout\fR\fR\fI = \fR\fI15\fR\fI \fR
+.RE
+
+ldap user suffix (G)
+.PP
+.RS 4
+This parameter specifies where users are added to the tree\&. If this parameter is unset, the value of
+\m[blue]\fBldap suffix\fR\m[]
+will be used instead\&. The suffix string is pre\-pended to the
+\m[blue]\fBldap suffix\fR\m[]
+string so use a partial DN\&.
+.sp
+Default:
+\fI\fIldap user suffix\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIldap user suffix\fR\fR\fI = \fR\fIou=people\fR\fI \fR
+.RE
+
+level2 oplocks (S)
+.PP
+.RS 4
+This parameter controls whether Samba supports level2 (read\-only) oplocks on a share\&.
+.sp
+Level2, or read\-only oplocks allow Windows NT clients that have an oplock on a file to downgrade from a read\-write oplock to a read\-only oplock once a second client opens the file (instead of releasing all oplocks on a second open, as in traditional, exclusive oplocks)\&. This allows all openers of the file that support level2 oplocks to cache the file for read\-ahead only (ie\&. they may not cache writes or lock requests) and increases performance for many accesses of files that are not commonly written (such as application \&.EXE files)\&.
+.sp
+Once one of the clients which have a read\-only oplock writes to the file all clients are notified (no reply is needed or waited for) and told to break their oplocks to "none" and delete any read\-ahead caches\&.
+.sp
+It is recommended that this parameter be turned on to speed access to shared executables\&.
+.sp
+For more discussions on level2 oplocks see the CIFS spec\&.
+.sp
+Currently, if
+\m[blue]\fBkernel oplocks\fR\m[]
+are supported then level2 oplocks are not granted (even if this parameter is set to
+\fByes\fR)\&. Note also, the
+\m[blue]\fBoplocks\fR\m[]
+parameter must be set to
+\fByes\fR
+on this share in order for this parameter to have any effect\&.
+.sp
+Default:
+\fI\fIlevel2 oplocks\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+lm announce (G)
+.PP
+.RS 4
+This parameter determines if
+\fBnmbd\fR(8)
+will produce Lanman announce broadcasts that are needed by OS/2 clients in order for them to see the Samba server in their browse list\&. This parameter can have three values,
+\fByes\fR,
+\fBno\fR, or
+\fBauto\fR\&. The default is
+\fBauto\fR\&. If set to
+\fBno\fR
+Samba will never produce these broadcasts\&. If set to
+\fByes\fR
+Samba will produce Lanman announce broadcasts at a frequency set by the parameter
+\m[blue]\fBlm interval\fR\m[]\&. If set to
+\fBauto\fR
+Samba will not send Lanman announce broadcasts by default but will listen for them\&. If it hears such a broadcast on the wire it will then start sending them at a frequency set by the parameter
+\m[blue]\fBlm interval\fR\m[]\&.
+.sp
+Default:
+\fI\fIlm announce\fR\fR\fI = \fR\fIauto\fR\fI \fR
+.sp
+Example:
+\fI\fIlm announce\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+lm interval (G)
+.PP
+.RS 4
+If Samba is set to produce Lanman announce broadcasts needed by OS/2 clients (see the
+\m[blue]\fBlm announce\fR\m[]
+parameter) then this parameter defines the frequency in seconds with which they will be made\&. If this is set to zero then no Lanman announcements will be made despite the setting of the
+\m[blue]\fBlm announce\fR\m[]
+parameter\&.
+.sp
+Default:
+\fI\fIlm interval\fR\fR\fI = \fR\fI60\fR\fI \fR
+.sp
+Example:
+\fI\fIlm interval\fR\fR\fI = \fR\fI120\fR\fI \fR
+.RE
+
+load printers (G)
+.PP
+.RS 4
+A boolean variable that controls whether all printers in the printcap will be loaded for browsing by default\&. See the
+\m[blue]\fBprinters\fR\m[]
+section for more details\&.
+.sp
+Default:
+\fI\fIload printers\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+local master (G)
+.PP
+.RS 4
+This option allows
+\fBnmbd\fR(8)
+to try and become a local master browser on a subnet\&. If set to
+\fBno\fR
+then
+nmbd
+will not attempt to become a local master browser on a subnet and will also lose in all browsing elections\&. By default this value is set to
+\fByes\fR\&. Setting this value to
+\fByes\fR
+doesn\*(Aqt mean that Samba will
+\fIbecome\fR
+the local master browser on a subnet, just that
+nmbd
+will
+\fIparticipate\fR
+in elections for local master browser\&.
+.sp
+Setting this value to
+\fBno\fR
+will cause
+nmbd
+\fInever\fR
+to become a local master browser\&.
+.sp
+Default:
+\fI\fIlocal master\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+lock dir
+.PP
+.RS 4
+This parameter is a synonym for
+lock directory\&.
+.RE
+
+lock directory (G)
+.PP
+.RS 4
+This option specifies the directory where lock files will be placed\&. The lock files are used to implement the
+\m[blue]\fBmax connections\fR\m[]
+option\&.
+.sp
+Note: This option can not be set inside registry configurations\&.
+.sp
+The files placed in this directory are not required across service restarts and can be safely placed on volatile storage (e\&.g\&. tmpfs in Linux)
+.sp
+Default:
+\fI\fIlock directory\fR\fR\fI = \fR\fI${prefix}/var/lock\fR\fI \fR
+.sp
+Example:
+\fI\fIlock directory\fR\fR\fI = \fR\fI/var/run/samba/locks\fR\fI \fR
+.RE
+
+locking (S)
+.PP
+.RS 4
+This controls whether or not locking will be performed by the server in response to lock requests from the client\&.
+.sp
+If
+locking = no, all lock and unlock requests will appear to succeed and all lock queries will report that the file in question is available for locking\&.
+.sp
+If
+locking = yes, real locking will be performed by the server\&.
+.sp
+This option
+\fImay\fR
+be useful for read\-only filesystems which
+\fImay\fR
+not need locking (such as CDROM drives), although setting this parameter of
+\fBno\fR
+is not really recommended even in this case\&.
+.sp
+Be careful about disabling locking either globally or in a specific service, as lack of locking may result in data corruption\&. You should never need to set this parameter\&.
+.sp
+Default:
+\fI\fIlocking\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+lock spin time (G)
+.PP
+.RS 4
+The time in milliseconds that smbd should keep waiting to see if a failed lock request can be granted\&. This parameter has changed in default value from Samba 3\&.0\&.23 from 10 to 200\&. The associated
+\m[blue]\fBlock spin count\fR\m[]
+parameter is no longer used in Samba 3\&.0\&.24\&. You should not need to change the value of this parameter\&.
+.sp
+Default:
+\fI\fIlock spin time\fR\fR\fI = \fR\fI200\fR\fI \fR
+.RE
+
+log file (G)
+.PP
+.RS 4
+This option allows you to override the name of the Samba log file (also known as the debug file)\&.
+.sp
+This option takes the standard substitutions, allowing you to have separate log files for each user or machine\&.
+.sp
+\fINo default\fR
+.sp
+Example:
+\fI\fIlog file\fR\fR\fI = \fR\fI/usr/local/samba/var/log\&.%m\fR\fI \fR
+.RE
+
+logging (G)
+.PP
+.RS 4
+This parameter configures logging backends\&. Multiple backends can be specified at the same time, with different log levels for each backend\&. The parameter is a list of backends, where each backend is specified as backend[:option][@loglevel]\&.
+.sp
+The \*(Aqoption\*(Aq parameter can be used to pass backend\-specific options\&.
+.sp
+The log level for a backend is optional, if it is not set for a backend, all messages are sent to this backend\&. The parameter
+\m[blue]\fBlog level\fR\m[]
+determines overall log levels, while the log levels specified here define what is sent to the individual backends\&.
+.sp
+When
+\m[blue]\fBlogging\fR\m[]
+is set, it overrides the
+\m[blue]\fBsyslog\fR\m[]
+and
+\m[blue]\fBsyslog only\fR\m[]
+parameters\&.
+.sp
+Some backends are only available when Samba has been compiled with the additional libraries\&. The overall list of logging backends:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsyslog\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIfile\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsystemd\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIlttng\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIgpfs\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIringbuf\fR
+.RE
+.sp
+.RE
+The
+\fIringbuf\fR
+backend supports an optional size argument to change the buffer size used, the default is 1 MB:
+\fIringbuf:size=NBYTES\fR
+.sp
+Default:
+\fI\fIlogging\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIlogging\fR\fR\fI = \fR\fIsyslog@1 file\fR\fI \fR
+.RE
+
+debuglevel
+.PP
+.RS 4
+This parameter is a synonym for
+log level\&.
+.RE
+
+log level (G)
+.PP
+.RS 4
+The value of the parameter (a string) allows the debug level (logging level) to be specified in the
+smb\&.conf
+file\&.
+.sp
+This parameter has been extended since the 2\&.2\&.x series, now it allows one to specify the debug level for multiple debug classes and distinct logfiles for debug classes\&. This is to give greater flexibility in the configuration of the system\&. The following debug classes are currently implemented:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIall\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fItdb\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIprintdrivers\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIlanman\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsmb\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIrpc_parse\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIrpc_srv\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIrpc_cli\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIpassdb\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsam\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIauth\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIwinbind\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIvfs\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIidmap\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIquota\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIacls\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIlocking\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fImsdfs\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdmapi\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIregistry\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIscavenger\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdns\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIldb\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fItevent\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIauth_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIauth_json_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIkerberos\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdrs_repl\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsmb2\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsmb2_credits\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdsdb_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdsdb_json_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdsdb_password_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdsdb_password_json_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdsdb_transaction_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdsdb_transaction_json_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdsdb_group_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdsdb_group_json_audit\fR
+.RE
+.sp
+.RE
+Various modules register dynamic debug classes at first usage:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIcatia\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIdfs_samba4\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIextd_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIfileid\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIfruit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIfull_audit\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fImedia_harmony\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIpreopen\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIrecycle\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIshadow_copy\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIshadow_copy\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIunityed_media\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIvirusfilter\fR
+.RE
+.sp
+.RE
+To configure the logging for specific classes to go into a different file then
+\m[blue]\fBlog file\fR\m[], you can append
+\fI@PATH\fR
+to the class, eg
+\fIlog level = 1 full_audit:1@/var/log/audit\&.log\fR\&.
+.sp
+Authentication and authorization audit information is logged under the
+\fIauth_audit\fR, and if Samba was not compiled with \-\-without\-json, a JSON representation is logged under
+\fIauth_json_audit\fR\&.
+.sp
+Support is comprehensive for all authentication and authorisation of user accounts in the Samba Active Directory Domain Controller, as well as the implicit authentication in password changes\&. In the file server, NTLM authentication, SMB and RPC authorization is covered\&.
+.sp
+Log levels for
+\fIauth_audit\fR
+and
+\fIauth_audit_json\fR
+are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+2: Authentication Failure
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+3: Authentication Success
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+4: Authorization Success
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+5: Anonymous Authentication and Authorization Success
+.RE
+.sp
+.RE
+Changes to the AD DC
+sam\&.ldb
+database are logged under the
+\fIdsdb_audit\fR
+and a JSON representation is logged under
+\fIdsdb_json_audit\fR\&.
+.sp
+Group membership changes to the AD DC
+sam\&.ldb
+database are logged under the
+\fIdsdb_group_audit\fR
+and a JSON representation is logged under
+\fIdsdb_group_json_audit\fR\&.
+.sp
+Log levels for
+\fIdsdb_audit\fR,
+\fIdsdb_json_audit\fR,
+\fIdsdb_group_audit\fR,
+\fIdsdb_group_json_audit\fR
+and
+\fIdsdb_json_audit\fR
+are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+5: Database modifications
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+5: Replicated updates from another DC
+.RE
+.sp
+.RE
+Password changes and Password resets in the AD DC are logged under
+\fIdsdb_password_audit\fR
+and a JSON representation is logged under the
+\fIdsdb_password_json_audit\fR\&. Password changes will also appears as authentication events via
+\fIauth_audit\fR
+and
+\fIauth_audit_json\fR\&.
+.sp
+Log levels for
+\fIdsdb_password_audit\fR
+and
+\fIdsdb_password_json_audit\fR
+are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+5: Successful password changes and resets
+.RE
+.sp
+.RE
+Transaction rollbacks and prepare commit failures are logged under the
+\fIdsdb_transaction_audit\fR
+and a JSON representation is logged under the
+\fIdsdb_transaction_json_audit\fR\&.
+.sp
+Log levels for
+\fIdsdb_transaction_audit\fR
+and
+\fIdsdb_transaction_json\fR
+are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+5: Transaction failure (rollback)
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+10: Transaction success (commit)
+.RE
+.sp
+.RE
+Transaction roll\-backs are possible in Samba, and whilst they rarely reflect anything more than the failure of an individual operation (say due to the add of a conflicting record), they are possible\&. Audit logs are already generated and sent to the system logs before the transaction is complete\&. Logging the transaction details allows the identification of password and
+sam\&.ldb
+operations that have been rolled back, and so have not actually persisted\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBWarning\fR
+.ps -1
+.br
+Changes to
+sam\&.ldb
+made locally by the
+root
+user with direct access to the database are not logged to the system logs, but to the administrator\*(Aqs own console\&. While less than ideal, any user able to make such modifications could disable the audit logging in any case\&.
+.sp .5v
+.RE
+Default:
+\fI\fIlog level\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fIlog level\fR\fR\fI = \fR\fI3 passdb:5 auth:10 winbind:2\fR\fI \fR
+.sp
+Example:
+\fI\fIlog level\fR\fR\fI = \fR\fI1 full_audit:1@/var/log/audit\&.log winbind:2\fR\fI \fR
+.RE
+
+log nt token command (G)
+.PP
+.RS 4
+This option can be set to a command that will be called when new nt tokens are created\&.
+.sp
+This is only useful for development purposes\&.
+.sp
+Default:
+\fI\fIlog nt token command\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+logon drive (G)
+.PP
+.RS 4
+This parameter specifies the local path to which the home directory will be connected (see
+\m[blue]\fBlogon home\fR\m[]) and is only used by NT Workstations\&.
+.sp
+Note that this option is only useful if Samba is set up as a logon server\&.
+.sp
+Default:
+\fI\fIlogon drive\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIlogon drive\fR\fR\fI = \fR\fIh:\fR\fI \fR
+.RE
+
+logon home (G)
+.PP
+.RS 4
+This parameter specifies the home directory location when a Win95/98 or NT Workstation logs into a Samba PDC\&. It allows you to do
+.sp
+C:\e>\fBNET USE H: /HOME\fR
+.sp
+from a command prompt, for example\&.
+.sp
+This option takes the standard substitutions, allowing you to have separate logon scripts for each user or machine\&.
+.sp
+This parameter can be used with Win9X workstations to ensure that roaming profiles are stored in a subdirectory of the user\*(Aqs home directory\&. This is done in the following way:
+.sp
+logon home = \e\e%N\e%U\eprofile
+.sp
+This tells Samba to return the above string, with substitutions made when a client requests the info, generally in a NetUserGetInfo request\&. Win9X clients truncate the info to \e\eserver\eshare when a user does
+net use /home
+but use the whole string when dealing with profiles\&.
+.sp
+Note that in prior versions of Samba, the
+\m[blue]\fBlogon path\fR\m[]
+was returned rather than
+\fIlogon home\fR\&. This broke
+net use /home
+but allowed profiles outside the home directory\&. The current implementation is correct, and can be used for profiles if you use the above trick\&.
+.sp
+Disable this feature by setting
+\m[blue]\fBlogon home = ""\fR\m[]
+\- using the empty string\&.
+.sp
+This option is only useful if Samba is set up as a logon server\&.
+.sp
+Default:
+\fI\fIlogon home\fR\fR\fI = \fR\fI\e\e%N\e%U\fR\fI \fR
+.sp
+Example:
+\fI\fIlogon home\fR\fR\fI = \fR\fI\e\eremote_smb_server\e%U\fR\fI \fR
+.RE
+
+logon path (G)
+.PP
+.RS 4
+This parameter specifies the directory where roaming profiles (Desktop, NTuser\&.dat, etc) are stored\&. Contrary to previous versions of these manual pages, it has nothing to do with Win 9X roaming profiles\&. To find out how to handle roaming profiles for Win 9X system, see the
+\m[blue]\fBlogon home\fR\m[]
+parameter\&.
+.sp
+This option takes the standard substitutions, allowing you to have separate logon scripts for each user or machine\&. It also specifies the directory from which the "Application Data",
+desktop,
+start menu,
+network neighborhood,
+programs
+and other folders, and their contents, are loaded and displayed on your Windows NT client\&.
+.sp
+The share and the path must be readable by the user for the preferences and directories to be loaded onto the Windows NT client\&. The share must be writeable when the user logs in for the first time, in order that the Windows NT client can create the NTuser\&.dat and other directories\&. Thereafter, the directories and any of the contents can, if required, be made read\-only\&. It is not advisable that the NTuser\&.dat file be made read\-only \- rename it to NTuser\&.man to achieve the desired effect (a
+\fIMAN\fRdatory profile)\&.
+.sp
+Windows clients can sometimes maintain a connection to the [homes] share, even though there is no user logged in\&. Therefore, it is vital that the logon path does not include a reference to the homes share (i\&.e\&. setting this parameter to \e\e%N\ehomes\eprofile_path will cause problems)\&.
+.sp
+This option takes the standard substitutions, allowing you to have separate logon scripts for each user or machine\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBWarning\fR
+.ps -1
+.br
+Do not quote the value\&. Setting this as
+\(lq\e\e%N\eprofile\e%U\(rq
+will break profile handling\&. Where the tdbsam or ldapsam passdb backend is used, at the time the user account is created the value configured for this parameter is written to the passdb backend and that value will over\-ride the parameter value present in the smb\&.conf file\&. Any error present in the passdb backend account record must be editted using the appropriate tool (pdbedit on the command\-line, or any other locally provided system tool)\&.
+.sp .5v
+.RE
+Note that this option is only useful if Samba is set up as a domain controller\&.
+.sp
+Disable the use of roaming profiles by setting the value of this parameter to the empty string\&. For example,
+\m[blue]\fBlogon path = ""\fR\m[]\&. Take note that even if the default setting in the smb\&.conf file is the empty string, any value specified in the user account settings in the passdb backend will over\-ride the effect of setting this parameter to null\&. Disabling of all roaming profile use requires that the user account settings must also be blank\&.
+.sp
+An example of use is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+logon path = \e\ePROFILESERVER\ePROFILE\e%U
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIlogon path\fR\fR\fI = \fR\fI\e\e%N\e%U\eprofile\fR\fI \fR
+.RE
+
+logon script (G)
+.PP
+.RS 4
+This parameter specifies the batch file (\&.bat) or NT command file (\&.cmd) to be downloaded and run on a machine when a user successfully logs in\&. The file must contain the DOS style CR/LF line endings\&. Using a DOS\-style editor to create the file is recommended\&.
+.sp
+The script must be a relative path to the
+\fI[netlogon]\fR
+service\&. If the [netlogon] service specifies a
+\m[blue]\fBpath\fR\m[]
+of
+/usr/local/samba/netlogon, and
+\m[blue]\fBlogon script = STARTUP\&.BAT\fR\m[], then the file that will be downloaded is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	/usr/local/samba/netlogon/STARTUP\&.BAT
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+The contents of the batch file are entirely your choice\&. A suggested command would be to add
+NET TIME \e\eSERVER /SET /YES, to force every machine to synchronize clocks with the same time server\&. Another use would be to add
+NET USE U: \e\eSERVER\eUTILS
+for commonly used utilities, or
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+\fBNET USE Q: \e\eSERVER\eISO9001_QA\fR
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+for example\&.
+.sp
+Note that it is particularly important not to allow write access to the [netlogon] share, or to grant users write permission on the batch files in a secure environment, as this would allow the batch files to be arbitrarily modified and security to be breached\&.
+.sp
+This option takes the standard substitutions, allowing you to have separate logon scripts for each user or machine\&.
+.sp
+This option is only useful if Samba is set up as a logon server in a classic domain controller role\&. If Samba is set up as an Active Directory domain controller, LDAP attribute
+scriptPath
+is used instead\&. For configurations where
+\m[blue]\fBpassdb backend = ldapsam\fR\m[]
+is in use, this option only defines a default value in case LDAP attribute
+sambaLogonScript
+is missing\&.
+.sp
+Default:
+\fI\fIlogon script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIlogon script\fR\fR\fI = \fR\fIscripts\e%U\&.bat\fR\fI \fR
+.RE
+
+log writeable files on exit (G)
+.PP
+.RS 4
+When the network connection between a CIFS client and Samba dies, Samba has no option but to simply shut down the server side of the network connection\&. If this happens, there is a risk of data corruption because the Windows client did not complete all write operations that the Windows application requested\&. Setting this option to "yes" makes smbd log with a level 0 message a list of all files that have been opened for writing when the network connection died\&. Those are the files that are potentially corrupted\&. It is meant as an aid for the administrator to give him a list of files to do consistency checks on\&.
+.sp
+Default:
+\fI\fIlog writeable files on exit\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+lppause command (S)
+.PP
+.RS 4
+This parameter specifies the command to be executed on the server host in order to stop printing or spooling a specific print job\&.
+.sp
+This command should be a program or script which takes a printer name and job number to pause the print job\&. One way of implementing this is by using job priorities, where jobs having a too low priority won\*(Aqt be sent to the printer\&.
+.sp
+If a
+\fI%p\fR
+is given then the printer name is put in its place\&. A
+\fI%j\fR
+is replaced with the job number (an integer)\&. On HPUX (see
+\fIprinting=hpux \fR), if the
+\fI\-p%p\fR
+option is added to the lpq command, the job will show up with the correct status, i\&.e\&. if the job priority is lower than the set fence priority it will have the PAUSED status, whereas if the priority is equal or higher it will have the SPOOLED or PRINTING status\&.
+.sp
+Note that it is good practice to include the absolute path in the lppause command as the PATH may not be available to the server\&.
+.sp
+Currently no default value is given to this string, unless the value of the
+\m[blue]\fBprinting\fR\m[]
+parameter is
+\fBSYSV\fR, in which case the default is :
+lp \-i %p\-%j \-H hold
+or if the value of the
+\fIprinting\fR
+parameter is
+\fBSOFTQ\fR, then the default is:
+qstat \-s \-j%j \-h\&.
+.sp
+Default:
+\fI\fIlppause command\fR\fR\fI = \fR\fI # determined by printing parameter\fR\fI \fR
+.sp
+Example:
+\fI\fIlppause command\fR\fR\fI = \fR\fI/usr/bin/lpalt %p\-%j \-p0\fR\fI \fR
+.RE
+
+lpq cache time (G)
+.PP
+.RS 4
+This controls how long lpq info will be cached for to prevent the
+lpq
+command being called too often\&. A separate cache is kept for each variation of the
+lpq
+command used by the system, so if you use different
+lpq
+commands for different users then they won\*(Aqt share cache information\&.
+.sp
+The cache files are stored in
+/tmp/lpq\&.xxxx
+where xxxx is a hash of the
+lpq
+command in use\&.
+.sp
+The default is 30 seconds, meaning that the cached results of a previous identical
+lpq
+command will be used if the cached data is less than 30 seconds old\&. A large value may be advisable if your
+lpq
+command is very slow\&.
+.sp
+A value of 0 will disable caching completely\&.
+.sp
+Default:
+\fI\fIlpq cache time\fR\fR\fI = \fR\fI30\fR\fI \fR
+.sp
+Example:
+\fI\fIlpq cache time\fR\fR\fI = \fR\fI10\fR\fI \fR
+.RE
+
+lpq command (S)
+.PP
+.RS 4
+This parameter specifies the command to be executed on the server host in order to obtain
+lpq\-style printer status information\&.
+.sp
+This command should be a program or script which takes a printer name as its only parameter and outputs printer status information\&.
+.sp
+Currently nine styles of printer status information are supported; BSD, AIX, LPRNG, PLP, SYSV, HPUX, QNX, CUPS, and SOFTQ\&. This covers most UNIX systems\&. You control which type is expected using the
+\fIprinting =\fR
+option\&.
+.sp
+Some clients (notably Windows for Workgroups) may not correctly send the connection number for the printer they are requesting status information about\&. To get around this, the server reports on the first printer service connected to by the client\&. This only happens if the connection number sent is invalid\&.
+.sp
+If a
+\fI%p\fR
+is given then the printer name is put in its place\&. Otherwise it is placed at the end of the command\&.
+.sp
+Note that it is good practice to include the absolute path in the
+\fIlpq command\fR
+as the
+\fB$PATH \fR
+may not be available to the server\&. When compiled with the CUPS libraries, no
+\fIlpq command\fR
+is needed because smbd will make a library call to obtain the print queue listing\&.
+.sp
+Default:
+\fI\fIlpq command\fR\fR\fI = \fR\fI # determined by printing parameter\fR\fI \fR
+.sp
+Example:
+\fI\fIlpq command\fR\fR\fI = \fR\fI/usr/bin/lpq \-P%p\fR\fI \fR
+.RE
+
+lpresume command (S)
+.PP
+.RS 4
+This parameter specifies the command to be executed on the server host in order to restart or continue printing or spooling a specific print job\&.
+.sp
+This command should be a program or script which takes a printer name and job number to resume the print job\&. See also the
+\m[blue]\fBlppause command\fR\m[]
+parameter\&.
+.sp
+If a
+\fI%p\fR
+is given then the printer name is put in its place\&. A
+\fI%j\fR
+is replaced with the job number (an integer)\&.
+.sp
+Note that it is good practice to include the absolute path in the
+\fIlpresume command\fR
+as the PATH may not be available to the server\&.
+.sp
+See also the
+\m[blue]\fBprinting\fR\m[]
+parameter\&.
+.sp
+Default: Currently no default value is given to this string, unless the value of the
+\fIprinting\fR
+parameter is
+\fBSYSV\fR, in which case the default is:
+.sp
+lp \-i %p\-%j \-H resume
+.sp
+or if the value of the
+\fIprinting\fR
+parameter is
+\fBSOFTQ\fR, then the default is:
+.sp
+qstat \-s \-j%j \-r
+.sp
+Default:
+\fI\fIlpresume command\fR\fR\fI = \fR\fI # determined by printing parameter\fR\fI \fR
+.sp
+Example:
+\fI\fIlpresume command\fR\fR\fI = \fR\fI/usr/bin/lpalt %p\-%j \-p2\fR\fI \fR
+.RE
+
+lprm command (S)
+.PP
+.RS 4
+This parameter specifies the command to be executed on the server host in order to delete a print job\&.
+.sp
+This command should be a program or script which takes a printer name and job number, and deletes the print job\&.
+.sp
+If a
+\fI%p\fR
+is given then the printer name is put in its place\&. A
+\fI%j\fR
+is replaced with the job number (an integer)\&.
+.sp
+Note that it is good practice to include the absolute path in the
+\fIlprm command\fR
+as the PATH may not be available to the server\&.
+.sp
+Examples of use are:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+lprm command = /usr/bin/lprm \-P%p %j
+
+or
+
+lprm command = /usr/bin/cancel %p\-%j
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIlprm command\fR\fR\fI = \fR\fI # determined by printing parameter\fR\fI \fR
+.RE
+
+lsa over netlogon (G)
+.PP
+.RS 4
+Setting this deprecated option will allow the RPC server in the AD DC to answer the LSARPC interface on the
+\epipe\enetlogon
+IPC pipe\&.
+.sp
+When enabled, this matches the behaviour of Microsoft\*(Aqs Windows, due to their internal implementation choices\&.
+.sp
+If it is disabled (the default), the AD DC can offer improved performance, as the netlogon server is decoupled and can run as multiple processes\&.
+.sp
+Default:
+\fI\fIlsa over netlogon\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+machine password timeout (G)
+.PP
+.RS 4
+If a Samba server is a member of a Windows NT or Active Directory Domain (see the
+\m[blue]\fBsecurity = domain\fR\m[]
+and
+\m[blue]\fBsecurity = ads\fR\m[]
+parameters), then periodically a running winbindd process will try and change the MACHINE ACCOUNT PASSWORD stored in the TDB called
+secrets\&.tdb\&. This parameter specifies how often this password will be changed, in seconds\&. The default is one week (expressed in seconds), the same as a Windows NT Domain member server\&.
+.sp
+See also
+\fBsmbpasswd\fR(8), and the
+\m[blue]\fBsecurity = domain\fR\m[]
+and
+\m[blue]\fBsecurity = ads\fR\m[]
+parameters\&.
+.sp
+Default:
+\fI\fImachine password timeout\fR\fR\fI = \fR\fI604800\fR\fI \fR
+.RE
+
+magic output (S)
+.PP
+.RS 4
+This parameter specifies the name of a file which will contain output created by a magic script (see the
+\m[blue]\fBmagic script\fR\m[]
+parameter below)\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBWarning\fR
+.ps -1
+.br
+If two clients use the same
+\fImagic script \fR
+in the same directory the output file content is undefined\&.
+.sp .5v
+.RE
+Default:
+\fI\fImagic output\fR\fR\fI = \fR\fI # <magic script name>\&.out\fR\fI \fR
+.sp
+Example:
+\fI\fImagic output\fR\fR\fI = \fR\fImyfile\&.txt\fR\fI \fR
+.RE
+
+magic script (S)
+.PP
+.RS 4
+This parameter specifies the name of a file which, if opened, will be executed by the server when the file is closed\&. This allows a UNIX script to be sent to the Samba host and executed on behalf of the connected user\&.
+.sp
+Scripts executed in this way will be deleted upon completion assuming that the user has the appropriate level of privilege and the file permissions allow the deletion\&.
+.sp
+If the script generates output, output will be sent to the file specified by the
+\m[blue]\fBmagic output\fR\m[]
+parameter (see above)\&.
+.sp
+Note that some shells are unable to interpret scripts containing CR/LF instead of CR as the end\-of\-line marker\&. Magic scripts must be executable
+\fIas is\fR
+on the host, which for some hosts and some shells will require filtering at the DOS end\&.
+.sp
+Magic scripts are
+\fIEXPERIMENTAL\fR
+and should
+\fINOT\fR
+be relied upon\&.
+.sp
+Default:
+\fI\fImagic script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fImagic script\fR\fR\fI = \fR\fIuser\&.csh\fR\fI \fR
+.RE
+
+mangled names (S)
+.PP
+.RS 4
+This controls whether non\-DOS names under UNIX should be mapped to DOS\-compatible names ("mangled") and made visible, or whether non\-DOS names should simply be ignored\&.
+.sp
+See the section on
+\m[blue]\fBname mangling\fR\m[]
+for details on how to control the mangling process\&.
+.sp
+Possible option settings are
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIyes\fR
+\- enables name mangling for all not DOS 8\&.3 conforming names\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIno\fR
+\- disables any name mangling\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIillegal (default)\fR
+\- does mangling for names with illegal NTFS characters\&. This is the most sensible setting for modern clients that don\*(Aqt use the shortname anymore\&.
+.RE
+.sp
+.RE
+If mangling is used then the mangling method is as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The first (up to) five alphanumeric characters before the rightmost dot of the filename are preserved, forced to upper case, and appear as the first (up to) five characters of the mangled name\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+A tilde "~" is appended to the first part of the mangled name, followed by a two\-character unique sequence, based on the original root name (i\&.e\&., the original filename minus its final extension)\&. The final extension is included in the hash calculation only if it contains any upper case characters or is longer than three characters\&.
+.sp
+Note that the character to use may be specified using the
+\m[blue]\fBmangling char\fR\m[]
+option, if you don\*(Aqt like \*(Aq~\*(Aq\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Files whose UNIX name begins with a dot will be presented as DOS hidden files\&. The mangled name will be created as for other filenames, but with the leading dot removed and "___" as its extension regardless of actual original extension (that\*(Aqs three underscores)\&.
+.RE
+.sp
+.RE
+The two\-digit hash value consists of upper case alphanumeric characters\&.
+.sp
+This algorithm can cause name collisions only if files in a directory share the same first five alphanumeric characters\&. The probability of such a clash is 1/1300\&.
+.sp
+The name mangling (if enabled) allows a file to be copied between UNIX directories from Windows/DOS while retaining the long UNIX filename\&. UNIX files can be renamed to a new extension from Windows/DOS and will retain the same basename\&. Mangled names do not change between sessions\&.
+.sp
+Default:
+\fI\fImangled names\fR\fR\fI = \fR\fIillegal\fR\fI \fR
+.sp
+Example:
+\fI\fImangled names\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+mangle prefix (G)
+.PP
+.RS 4
+controls the number of prefix characters from the original name used when generating the mangled names\&. A larger value will give a weaker hash and therefore more name collisions\&. The minimum value is 1 and the maximum value is 6\&.
+.sp
+mangle prefix is effective only when mangling method is hash2\&.
+.sp
+Default:
+\fI\fImangle prefix\fR\fR\fI = \fR\fI1\fR\fI \fR
+.sp
+Example:
+\fI\fImangle prefix\fR\fR\fI = \fR\fI4\fR\fI \fR
+.RE
+
+mangling char (S)
+.PP
+.RS 4
+This controls what character is used as the
+\fImagic\fR
+character in
+\m[blue]\fBname mangling\fR\m[]\&. The default is a \*(Aq~\*(Aq but this may interfere with some software\&. Use this option to set it to whatever you prefer\&. This is effective only when mangling method is hash\&.
+.sp
+Default:
+\fI\fImangling char\fR\fR\fI = \fR\fI~\fR\fI \fR
+.sp
+Example:
+\fI\fImangling char\fR\fR\fI = \fR\fI^\fR\fI \fR
+.RE
+
+mangling method (G)
+.PP
+.RS 4
+controls the algorithm used for the generating the mangled names\&. Can take two different values, "hash" and "hash2"\&. "hash" is the algorithm that was used in Samba for many years and was the default in Samba 2\&.2\&.x "hash2" is now the default and is newer and considered a better algorithm (generates less collisions) in the names\&. Many Win32 applications store the mangled names and so changing to algorithms must not be done lightly as these applications may break unless reinstalled\&.
+.sp
+Default:
+\fI\fImangling method\fR\fR\fI = \fR\fIhash2\fR\fI \fR
+.sp
+Example:
+\fI\fImangling method\fR\fR\fI = \fR\fIhash\fR\fI \fR
+.RE
+
+map acl inherit (S)
+.PP
+.RS 4
+This boolean parameter controls whether
+\fBsmbd\fR(8)
+will attempt to map the \*(Aqinherit\*(Aq and \*(Aqprotected\*(Aq access control entry flags stored in Windows ACLs into an extended attribute called user\&.SAMBA_PAI (POSIX ACL Inheritance)\&. This parameter requires supports for extended attributes on the filesystem and allows the Windows ACL editor to store inheritance information while NT ACLs are mapped best\-effort to the POSIX ACLs\&.
+.sp
+Default:
+\fI\fImap acl inherit\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+map archive (S)
+.PP
+.RS 4
+This controls whether the DOS archive attribute should be mapped to the UNIX owner execute bit\&. The DOS archive bit is set when a file has been modified since its last backup\&. One motivation for this option is to keep Samba/your PC from making any file it touches from becoming executable under UNIX\&. This can be quite annoying for shared source code, documents, etc\&.\&.\&.
+.sp
+Note that this parameter will be ignored if the
+\m[blue]\fBstore dos attributes\fR\m[]
+parameter is set, as the DOS archive attribute will then be stored inside a UNIX extended attribute\&.
+.sp
+Note that this requires the
+\m[blue]\fBcreate mask\fR\m[]
+parameter to be set such that owner execute bit is not masked out (i\&.e\&. it must include 100)\&. See the parameter
+\m[blue]\fBcreate mask\fR\m[]
+for details\&.
+.sp
+Default:
+\fI\fImap archive\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+map hidden (S)
+.PP
+.RS 4
+This controls whether DOS style hidden files should be mapped to the UNIX world execute bit\&.
+.sp
+Note that this parameter will be ignored if the
+\m[blue]\fBstore dos attributes\fR\m[]
+parameter is set, as the DOS hidden attribute will then be stored inside a UNIX extended attribute\&.
+.sp
+Note that this requires the
+\m[blue]\fBcreate mask\fR\m[]
+to be set such that the world execute bit is not masked out (i\&.e\&. it must include 001)\&. See the parameter
+\m[blue]\fBcreate mask\fR\m[]
+for details\&.
+.sp
+Default:
+\fI\fImap hidden\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+map readonly (S)
+.PP
+.RS 4
+This controls how the DOS read only attribute should be mapped from a UNIX filesystem\&.
+.sp
+This parameter can take three different values, which tell
+\fBsmbd\fR(8)
+how to display the read only attribute on files, where either
+\m[blue]\fBstore dos attributes\fR\m[]
+is set to
+\fBNo\fR, or no extended attribute is present\&. If
+\m[blue]\fBstore dos attributes\fR\m[]
+is set to
+\fByes\fR
+then this parameter is
+\fIignored\fR\&. This is a new parameter introduced in Samba version 3\&.0\&.21\&.
+.sp
+The three settings are :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBYes\fR
+\- The read only DOS attribute is mapped to the inverse of the user or owner write bit in the unix permission mode set\&. If the owner write bit is not set, the read only attribute is reported as being set on the file\&. If the read only DOS attribute is set, Samba sets the owner, group and others write bits to zero\&. Write bits set in an ACL are ignored by Samba\&. If the read only DOS attribute is unset, Samba simply sets the write bit of the owner to one\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBPermissions\fR
+\- The read only DOS attribute is mapped to the effective permissions of the connecting user, as evaluated by
+\fBsmbd\fR(8)
+by reading the unix permissions and POSIX ACL (if present)\&. If the connecting user does not have permission to modify the file, the read only attribute is reported as being set on the file\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBNo\fR
+\- The read only DOS attribute is unaffected by permissions, and can only be set by the
+\m[blue]\fBstore dos attributes\fR\m[]
+method\&. This may be useful for exporting mounted CDs\&.
+.RE
+.sp
+.RE
+Note that this parameter will be ignored if the
+\m[blue]\fBstore dos attributes\fR\m[]
+parameter is set, as the DOS \*(Aqread\-only\*(Aq attribute will then be stored inside a UNIX extended attribute\&.
+.sp
+The default has changed to no in Samba release 4\&.9\&.0 and above to allow better Windows fileserver compatibility in a default install\&. In addition the default setting of
+\m[blue]\fBstore dos attributes\fR\m[]
+has been changed to
+\fBYes\fR
+in Samba release 4\&.9\&.0 and above\&.
+.sp
+Default:
+\fI\fImap readonly\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+map system (S)
+.PP
+.RS 4
+This controls whether DOS style system files should be mapped to the UNIX group execute bit\&.
+.sp
+Note that this parameter will be ignored if the
+\m[blue]\fBstore dos attributes\fR\m[]
+parameter is set, as the DOS system attribute will then be stored inside a UNIX extended attribute\&.
+.sp
+Note that this requires the
+\m[blue]\fBcreate mask\fR\m[]
+to be set such that the group execute bit is not masked out (i\&.e\&. it must include 010)\&. See the parameter
+\m[blue]\fBcreate mask\fR\m[]
+for details\&.
+.sp
+Default:
+\fI\fImap system\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+map to guest (G)
+.PP
+.RS 4
+This parameter can take four different values, which tell
+\fBsmbd\fR(8)
+what to do with user login requests that don\*(Aqt match a valid UNIX user in some way\&.
+.sp
+The four settings are :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBNever\fR
+\- Means user login requests with an invalid password are rejected\&. This is the default\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBBad User\fR
+\- Means user logins with an invalid password are rejected, unless the username does not exist, in which case it is treated as a guest login and mapped into the
+\m[blue]\fBguest account\fR\m[]\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBBad Password\fR
+\- Means user logins with an invalid password are treated as a guest login and mapped into the
+\m[blue]\fBguest account\fR\m[]\&. Note that this can cause problems as it means that any user incorrectly typing their password will be silently logged on as "guest" \- and will not know the reason they cannot access files they think they should \- there will have been no message given to them that they got their password wrong\&. Helpdesk services will
+\fIhate\fR
+you if you set the
+\fImap to guest\fR
+parameter this way :\-)\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBBad Uid\fR
+\- Is only applicable when Samba is configured in some type of domain mode security (security = {domain|ads}) and means that user logins which are successfully authenticated but which have no valid Unix user account (and smbd is unable to create one) should be mapped to the defined guest account\&. This was the default behavior of Samba 2\&.x releases\&. Note that if a member server is running winbindd, this option should never be required because the nss_winbind library will export the Windows domain users and groups to the underlying OS via the Name Service Switch interface\&.
+.RE
+.sp
+.RE
+Note that this parameter is needed to set up "Guest" share services\&. This is because in these modes the name of the resource being requested is
+\fInot\fR
+sent to the server until after the server has successfully authenticated the client so the server cannot make authentication decisions at the correct time (connection to the share) for "Guest" shares\&.
+.sp
+Default:
+\fI\fImap to guest\fR\fR\fI = \fR\fINever\fR\fI \fR
+.sp
+Example:
+\fI\fImap to guest\fR\fR\fI = \fR\fIBad User\fR\fI \fR
+.RE
+
+max connections (S)
+.PP
+.RS 4
+This option allows the number of simultaneous connections to a service to be limited\&. If
+\fImax connections\fR
+is greater than 0 then connections will be refused if this number of connections to the service are already open\&. A value of zero mean an unlimited number of connections may be made\&.
+.sp
+Record lock files are used to implement this feature\&. The lock files will be stored in the directory specified by the
+\m[blue]\fBlock directory\fR\m[]
+option\&.
+.sp
+Default:
+\fI\fImax connections\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fImax connections\fR\fR\fI = \fR\fI10\fR\fI \fR
+.RE
+
+max disk size (G)
+.PP
+.RS 4
+This option allows you to put an upper limit on the apparent size of disks\&. If you set this option to 100 then all shares will appear to be not larger than 100 MB in size\&.
+.sp
+Note that this option does not limit the amount of data you can put on the disk\&. In the above case you could still store much more than 100 MB on the disk, but if a client ever asks for the amount of free disk space or the total disk size then the result will be bounded by the amount specified in
+\fImax disk size\fR\&.
+.sp
+This option is primarily useful to work around bugs in some pieces of software that can\*(Aqt handle very large disks, particularly disks over 1GB in size\&.
+.sp
+A
+\fImax disk size\fR
+of 0 means no limit\&.
+.sp
+Default:
+\fI\fImax disk size\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fImax disk size\fR\fR\fI = \fR\fI1000\fR\fI \fR
+.RE
+
+max log size (G)
+.PP
+.RS 4
+This option (an integer in kilobytes) specifies the max size the log file should grow to\&. Samba periodically checks the size and if it is exceeded it will rename the file, adding a
+\&.old
+extension\&.
+.sp
+A size of 0 means no limit\&.
+.sp
+Default:
+\fI\fImax log size\fR\fR\fI = \fR\fI5000\fR\fI \fR
+.sp
+Example:
+\fI\fImax log size\fR\fR\fI = \fR\fI1000\fR\fI \fR
+.RE
+
+max mux (G)
+.PP
+.RS 4
+This option controls the maximum number of outstanding simultaneous SMB operations that Samba tells the client it will allow\&. You should never need to set this parameter\&.
+.sp
+Default:
+\fI\fImax mux\fR\fR\fI = \fR\fI50\fR\fI \fR
+.RE
+
+max open files (G)
+.PP
+.RS 4
+This parameter limits the maximum number of open files that one
+\fBsmbd\fR(8)
+file serving process may have open for a client at any one time\&. This parameter can be set very high (16384) as Samba uses only one bit per unopened file\&. Setting this parameter lower than 16384 will cause Samba to complain and set this value back to the minimum of 16384, as Windows 7 depends on this number of open file handles being available\&.
+.sp
+The limit of the number of open files is usually set by the UNIX per\-process file descriptor limit rather than this parameter so you should never need to touch this parameter\&.
+.sp
+Default:
+\fI\fImax open files\fR\fR\fI = \fR\fI16384\fR\fI \fR
+.RE
+
+max print jobs (S)
+.PP
+.RS 4
+This parameter limits the maximum number of jobs allowable in a Samba printer queue at any given moment\&. If this number is exceeded,
+\fBsmbd\fR(8)
+will remote "Out of Space" to the client\&.
+.sp
+Default:
+\fI\fImax print jobs\fR\fR\fI = \fR\fI1000\fR\fI \fR
+.sp
+Example:
+\fI\fImax print jobs\fR\fR\fI = \fR\fI5000\fR\fI \fR
+.RE
+
+max reported print jobs (S)
+.PP
+.RS 4
+This parameter limits the maximum number of jobs displayed in a port monitor for Samba printer queue at any given moment\&. If this number is exceeded, the excess jobs will not be shown\&. A value of zero means there is no limit on the number of print jobs reported\&.
+.sp
+Default:
+\fI\fImax reported print jobs\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fImax reported print jobs\fR\fR\fI = \fR\fI1000\fR\fI \fR
+.RE
+
+max smbd processes (G)
+.PP
+.RS 4
+This parameter limits the maximum number of
+\fBsmbd\fR(8)
+processes concurrently running on a system and is intended as a stopgap to prevent degrading service to clients in the event that the server has insufficient resources to handle more than this number of connections\&. Remember that under normal operating conditions, each user will have an
+\fBsmbd\fR(8)
+associated with him or her to handle connections to all shares from a given host\&.
+.sp
+For a Samba ADDC running the standard process model this option limits the number of processes forked to handle requests\&. Currently new processes are only forked for ldap and netlogon requests\&.
+.sp
+Default:
+\fI\fImax smbd processes\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fImax smbd processes\fR\fR\fI = \fR\fI1000\fR\fI \fR
+.RE
+
+max stat cache size (G)
+.PP
+.RS 4
+This parameter limits the size in memory of any
+\fIstat cache\fR
+being used to speed up case insensitive name mappings\&. It represents the number of kilobyte (1024) units the stat cache can use\&. A value of zero, meaning unlimited, is not advisable due to increased memory usage\&. You should not need to change this parameter\&.
+.sp
+Default:
+\fI\fImax stat cache size\fR\fR\fI = \fR\fI512\fR\fI \fR
+.sp
+Example:
+\fI\fImax stat cache size\fR\fR\fI = \fR\fI100\fR\fI \fR
+.RE
+
+max ttl (G)
+.PP
+.RS 4
+This option tells
+\fBnmbd\fR(8)
+what the default \*(Aqtime to live\*(Aq of NetBIOS names should be (in seconds) when
+nmbd
+is requesting a name using either a broadcast packet or from a WINS server\&. You should never need to change this parameter\&. The default is 3 days\&.
+.sp
+Default:
+\fI\fImax ttl\fR\fR\fI = \fR\fI259200\fR\fI \fR
+.RE
+
+max wins ttl (G)
+.PP
+.RS 4
+This option tells
+\fBsmbd\fR(8)
+when acting as a WINS server (\m[blue]\fBwins support = yes\fR\m[]) what the maximum \*(Aqtime to live\*(Aq of NetBIOS names that
+nmbd
+will grant will be (in seconds)\&. You should never need to change this parameter\&. The default is 6 days (518400 seconds)\&.
+.sp
+Default:
+\fI\fImax wins ttl\fR\fR\fI = \fR\fI518400\fR\fI \fR
+.RE
+
+max xmit (G)
+.PP
+.RS 4
+This option controls the maximum packet size that will be negotiated by Samba\*(Aqs
+\fBsmbd\fR(8)
+for the SMB1 protocol\&. The default is 16644, which matches the behavior of Windows 2000\&. A value below 2048 is likely to cause problems\&. You should never need to change this parameter from its default value\&.
+.sp
+Default:
+\fI\fImax xmit\fR\fR\fI = \fR\fI16644\fR\fI \fR
+.sp
+Example:
+\fI\fImax xmit\fR\fR\fI = \fR\fI8192\fR\fI \fR
+.RE
+
+mdns name (G)
+.PP
+.RS 4
+This parameter controls the name that multicast DNS support advertises as its\*(Aq hostname\&.
+.sp
+The default is to use the NETBIOS name which is typically the hostname in all capital letters\&.
+.sp
+A setting of mdns will defer the hostname configuration to the MDNS library that is used\&.
+.sp
+Default:
+\fI\fImdns name\fR\fR\fI = \fR\fInetbios\fR\fI \fR
+.RE
+
+message command (G)
+.PP
+.RS 4
+This specifies what command to run when the server receives a WinPopup style message\&.
+.sp
+This would normally be a command that would deliver the message somehow\&. How this is to be done is up to your imagination\&.
+.sp
+An example is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+message command = csh \-c \*(Aqxedit %s;rm %s\*(Aq &
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+This delivers the message using
+xedit, then removes it afterwards\&.
+\fINOTE THAT IT IS VERY IMPORTANT THAT THIS COMMAND RETURN IMMEDIATELY\fR\&. That\*(Aqs why I have the \*(Aq&\*(Aq on the end\&. If it doesn\*(Aqt return immediately then your PCs may freeze when sending messages (they should recover after 30 seconds, hopefully)\&.
+.sp
+All messages are delivered as the global guest user\&. The command takes the standard substitutions, although
+\fI %u\fR
+won\*(Aqt work (\fI%U\fR
+may be better in this case)\&.
+.sp
+Apart from the standard substitutions, some additional ones apply\&. In particular:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI%s\fR
+= the filename containing the message\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI%t\fR
+= the destination that the message was sent to (probably the server name)\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI%f\fR
+= who the message is from\&.
+.RE
+.sp
+.RE
+You could make this command send mail, or whatever else takes your fancy\&. Please let us know of any really interesting ideas you have\&.
+.sp
+Here\*(Aqs a way of sending the messages as mail to root:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+message command = /bin/mail \-s \*(Aqmessage from %f on %m\*(Aq root < %s; rm %s
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+If you don\*(Aqt have a message command then the message won\*(Aqt be delivered and Samba will tell the sender there was an error\&. Unfortunately WfWg totally ignores the error code and carries on regardless, saying that the message was delivered\&.
+.sp
+If you want to silently delete it then try:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+message command = rm %s
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fImessage command\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fImessage command\fR\fR\fI = \fR\fIcsh \-c \*(Aqxedit %s; rm %s\*(Aq &\fR\fI \fR
+.RE
+
+min print space (S)
+.PP
+.RS 4
+This sets the minimum amount of free disk space that must be available before a user will be able to spool a print job\&. It is specified in kilobytes\&. The default is 0, which means a user can always spool a print job\&.
+.sp
+Default:
+\fI\fImin print space\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fImin print space\fR\fR\fI = \fR\fI2000\fR\fI \fR
+.RE
+
+min receivefile size (G)
+.PP
+.RS 4
+This option changes the behavior of
+\fBsmbd\fR(8)
+when processing SMBwriteX calls\&. Any incoming SMBwriteX call on a non\-signed SMB/CIFS connection greater than this value will not be processed in the normal way but will be passed to any underlying kernel recvfile or splice system call (if there is no such call Samba will emulate in user space)\&. This allows zero\-copy writes directly from network socket buffers into the filesystem buffer cache, if available\&. It may improve performance but user testing is recommended\&. If set to zero Samba processes SMBwriteX calls in the normal way\&. To enable POSIX large write support (SMB/CIFS writes up to 16Mb) this option must be nonzero\&. The maximum value is 128k\&. Values greater than 128k will be silently set to 128k\&.
+.sp
+Note this option will have NO EFFECT if set on a SMB signed connection\&.
+.sp
+The default is zero, which disables this option\&.
+.sp
+Default:
+\fI\fImin receivefile size\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+min wins ttl (G)
+.PP
+.RS 4
+This option tells
+\fBnmbd\fR(8)
+when acting as a WINS server (\m[blue]\fBwins support = yes\fR\m[]) what the minimum \*(Aqtime to live\*(Aq of NetBIOS names that
+nmbd
+will grant will be (in seconds)\&. You should never need to change this parameter\&. The default is 6 hours (21600 seconds)\&.
+.sp
+Default:
+\fI\fImin wins ttl\fR\fR\fI = \fR\fI21600\fR\fI \fR
+.RE
+
+mit kdc command (G)
+.PP
+.RS 4
+This option specifies the path to the MIT kdc binary\&.
+.sp
+If the KDC is not installed in the default location and wasn\*(Aqt correctly detected during build then you should modify this variable and point it to the correct binary\&.
+.sp
+Default:
+\fI\fImit kdc command\fR\fR\fI = \fR\fI${prefix}/sbin/krb5kdc\fR\fI \fR
+.sp
+Example:
+\fI\fImit kdc command\fR\fR\fI = \fR\fI/opt/mit/sbin/krb5kdc\fR\fI \fR
+.RE
+
+msdfs proxy (S)
+.PP
+.RS 4
+This parameter indicates that the share is a stand\-in for another CIFS share whose location is specified by the value of the parameter\&. When clients attempt to connect to this share, they are redirected to one or multiple, comma separated proxied shares using the SMB\-Dfs protocol\&.
+.sp
+Only Dfs roots can act as proxy shares\&. Take a look at the
+\m[blue]\fBmsdfs root\fR\m[]
+and
+\m[blue]\fBhost msdfs\fR\m[]
+options to find out how to set up a Dfs root share\&.
+.sp
+\fINo default\fR
+.sp
+Example:
+\fI\fImsdfs proxy\fR\fR\fI = \fR\fI\eotherserver\esomeshare,\eotherserver2\esomeshare\fR\fI \fR
+.RE
+
+msdfs root (S)
+.PP
+.RS 4
+If set to
+\fByes\fR, Samba treats the share as a Dfs root and allows clients to browse the distributed file system tree rooted at the share directory\&. Dfs links are specified in the share directory by symbolic links of the form
+msdfs:serverA\e\eshareA,serverB\e\eshareB
+and so on\&. For more information on setting up a Dfs tree on Samba, refer to the MSDFS chapter in the Samba3\-HOWTO book\&.
+.sp
+Default:
+\fI\fImsdfs root\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+msdfs shuffle referrals (S)
+.PP
+.RS 4
+If set to
+\fByes\fR, Samba will shuffle Dfs referrals for a given Dfs link if multiple are available, allowing for load balancing across clients\&. For more information on setting up a Dfs tree on Samba, refer to the MSDFS chapter in the Samba3\-HOWTO book\&.
+.sp
+Default:
+\fI\fImsdfs shuffle referrals\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+multicast dns register (G)
+.PP
+.RS 4
+If compiled with proper support for it, Samba will announce itself with multicast DNS services like for example provided by the Avahi daemon\&.
+.sp
+This parameter allows disabling Samba to register itself\&.
+.sp
+Default:
+\fI\fImulticast dns register\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+name cache timeout (G)
+.PP
+.RS 4
+Specifies the number of seconds it takes before entries in samba\*(Aqs hostname resolve cache time out\&. If the timeout is set to 0\&. the caching is disabled\&.
+.sp
+Default:
+\fI\fIname cache timeout\fR\fR\fI = \fR\fI660\fR\fI \fR
+.sp
+Example:
+\fI\fIname cache timeout\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+name resolve order (G)
+.PP
+.RS 4
+This option is used by the programs in the Samba suite to determine what naming services to use and in what order to resolve host names to IP addresses\&. Its main purpose to is to control how netbios name resolution is performed\&. The option takes a space separated string of name resolution options\&.
+.sp
+The options are: "lmhosts", "host", "wins" and "bcast"\&. They cause names to be resolved as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBlmhosts\fR
+: Lookup an IP address in the Samba lmhosts file\&. If the line in lmhosts has no name type attached to the NetBIOS name (see the manpage for lmhosts for details) then any name type matches for lookup\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBhost\fR
+: Do a standard host name to IP address resolution, using the system
+/etc/hosts
+or DNS lookups\&. This method of name resolution is operating system depended for instance on IRIX or Solaris this may be controlled by the
+/etc/nsswitch\&.conf
+file\&. Note that this method is used only if the NetBIOS name type being queried is the 0x20 (server) name type or 0x1c (domain controllers)\&. The latter case is only useful for active directory domains and results in a DNS query for the SRV RR entry matching _ldap\&._tcp\&.domain\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwins\fR
+: Query a name with the IP address listed in the
+\m[blue]\fBWINSSERVER\fR\m[]
+parameter\&. If no WINS server has been specified this method will be ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBbcast\fR
+: Do a broadcast on each of the known local interfaces listed in the
+\m[blue]\fBinterfaces\fR\m[]
+parameter\&. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet\&.
+.RE
+.sp
+.RE
+The example below will cause the local lmhosts file to be examined first, followed by a broadcast attempt, followed by a normal system hostname lookup\&.
+.sp
+When Samba is functioning in ADS security mode (security = ads) it is advised to use following settings for
+\fIname resolve order\fR:
+.sp
+name resolve order = wins bcast
+.sp
+DC lookups will still be done via DNS, but fallbacks to netbios names will not inundate your DNS servers with needless queries for DOMAIN<0x1c> lookups\&.
+.sp
+Default:
+\fI\fIname resolve order\fR\fR\fI = \fR\fIlmhosts wins host bcast\fR\fI \fR
+.sp
+Example:
+\fI\fIname resolve order\fR\fR\fI = \fR\fIlmhosts bcast host\fR\fI \fR
+.RE
+
+socket address
+.PP
+.RS 4
+This parameter is a synonym for
+nbt client socket address\&.
+.RE
+
+nbt client socket address (G)
+.PP
+.RS 4
+This option allows you to control what address Samba will send NBT client packets from, and process replies using, including in nmbd\&.
+.sp
+Setting this option should never be necessary on usual Samba servers running only one nmbd\&.
+.sp
+By default Samba will send UDP packets from the OS default address for the destination, and accept replies on 0\&.0\&.0\&.0\&.
+.sp
+This parameter is deprecated\&. See
+\m[blue]\fBbind interfaces only = Yes\fR\m[]
+and
+\m[blue]\fBinterfaces\fR\m[]
+for the previous behaviour of controlling the normal listening sockets\&.
+.sp
+Default:
+\fI\fInbt client socket address\fR\fR\fI = \fR\fI0\&.0\&.0\&.0\fR\fI \fR
+.sp
+Example:
+\fI\fInbt client socket address\fR\fR\fI = \fR\fI192\&.168\&.2\&.20\fR\fI \fR
+.RE
+
+nbtd:wins_prepend1Bto1Cqueries (G)
+.PP
+.RS 4
+Normally queries for 0x1C names (all logon servers for a domain) will return the first address of the 0x1B names (domain master browser and PDC) as first address in the result list\&. As many client only use the first address in the list by default, all clients will use the same server (the PDC)\&. Windows servers have an option to disable this behavior (since Windows 2000 Service Pack 2)\&.
+.sp
+Default:
+\fI\fInbtd:wins_prepend1Bto1Cqueries\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+nbtd:wins_wins_randomize1Clist (G)
+.PP
+.RS 4
+Normally queries for 0x1C names will return the addresses in the same order as they\*(Aqre stored in the database, that means first all addresses which have been directly registered at the local wins server and then all addresses registered at other servers\&. Windows servers have an option to change this behavior and randomize the returned addresses\&. Set this parameter to "yes" and Samba will sort the address list depending on the client address and the matching bits of the addresses, the first address is randomized based on depending on the "nbtd:wins_randomize1Clist_mask" parameter\&.
+.sp
+Default:
+\fI\fInbtd:wins_wins_randomize1Clist\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+nbtd:wins_randomize1Clist_mask (G)
+.PP
+.RS 4
+If the "nbtd:wins_randomize1Clist" parameter is set to "yes", then randomizing of the first returned address is based on the specified netmask\&. If there are addresses which are in the same subnet as the client address, the first returned address is randomly chosen out them\&. Otherwise the first returned address is randomly chosen out of all addresses\&.
+.sp
+Default:
+\fI\fInbtd:wins_randomize1Clist_mask\fR\fR\fI = \fR\fI255\&.255\&.255\&.0\fR\fI \fR
+.RE
+
+nbt port (G)
+.PP
+.RS 4
+Specifies which port the server should use for NetBIOS over IP name services traffic\&.
+.sp
+Default:
+\fI\fInbt port\fR\fR\fI = \fR\fI137\fR\fI \fR
+.RE
+
+ncalrpc dir (G)
+.PP
+.RS 4
+This directory will hold a series of named pipes to allow RPC over inter\-process communication\&.
+.sp
+This will allow Samba and other unix processes to interact over DCE/RPC without using TCP/IP\&. Additionally a sub\-directory \*(Aqnp\*(Aq has restricted permissions, and allows a trusted communication channel between Samba processes
+.sp
+Default:
+\fI\fIncalrpc dir\fR\fR\fI = \fR\fI${prefix}/var/run/ncalrpc\fR\fI \fR
+.sp
+Example:
+\fI\fIncalrpc dir\fR\fR\fI = \fR\fI/var/run/samba/ncalrpc\fR\fI \fR
+.RE
+
+netbios aliases (G)
+.PP
+.RS 4
+This is a list of NetBIOS names that nmbd will advertise as additional names by which the Samba server is known\&. This allows one machine to appear in browse lists under multiple names\&. If a machine is acting as a browse server or logon server none of these names will be advertised as either browse server or logon servers, only the primary name of the machine will be advertised with these capabilities\&.
+.sp
+Default:
+\fI\fInetbios aliases\fR\fR\fI = \fR\fI # empty string (no additional names)\fR\fI \fR
+.sp
+Example:
+\fI\fInetbios aliases\fR\fR\fI = \fR\fITEST TEST1 TEST2\fR\fI \fR
+.RE
+
+netbios name (G)
+.PP
+.RS 4
+This sets the NetBIOS name by which a Samba server is known\&. By default it is the same as the first component of the host\*(Aqs DNS name\&. If a machine is a browse server or logon server this name (or the first component of the hosts DNS name) will be the name that these services are advertised under\&.
+.sp
+Note that the maximum length for a NetBIOS name is 15 characters\&.
+.sp
+There is a bug in Samba that breaks operation of browsing and access to shares if the netbios name is set to the literal name
+PIPE\&. To avoid this problem, do not name your Samba server
+PIPE\&.
+.sp
+Default:
+\fI\fInetbios name\fR\fR\fI = \fR\fI # machine DNS name\fR\fI \fR
+.sp
+Example:
+\fI\fInetbios name\fR\fR\fI = \fR\fIMYNAME\fR\fI \fR
+.RE
+
+netbios scope (G)
+.PP
+.RS 4
+This sets the NetBIOS scope that Samba will operate under\&. This should not be set unless every machine on your LAN also sets this value\&.
+.sp
+Default:
+\fI\fInetbios scope\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+neutralize nt4 emulation (G)
+.PP
+.RS 4
+This option controls whether winbindd sends the NETLOGON_NEG_NEUTRALIZE_NT4_EMULATION flag in order to bypass the NT4 emulation of a domain controller\&.
+.sp
+Typically you should not need set this\&. It can be useful for upgrades from NT4 to AD domains\&.
+.sp
+The behavior can be controlled per netbios domain by using \*(Aqneutralize nt4 emulation:NETBIOSDOMAIN = yes\*(Aq as option\&.
+.sp
+Default:
+\fI\fIneutralize nt4 emulation\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+nmbd bind explicit broadcast (G)
+.PP
+.RS 4
+This option causes
+\fBnmbd\fR(8)
+to explicitly bind to the broadcast address of the local subnets\&. This is needed to make nmbd work correctly in combination with the
+\m[blue]\fBsocket address\fR\m[]
+option\&. You should not need to unset this option\&.
+.sp
+Default:
+\fI\fInmbd bind explicit broadcast\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+nsupdate command (G)
+.PP
+.RS 4
+This option sets the path to the
+nsupdate
+command which is used for GSS\-TSIG dynamic DNS updates\&.
+.sp
+Default:
+\fI\fInsupdate command\fR\fR\fI = \fR\fI/usr/bin/nsupdate \-g\fR\fI \fR
+.RE
+
+nt acl support (S)
+.PP
+.RS 4
+This boolean parameter controls whether
+\fBsmbd\fR(8)
+will attempt to map UNIX permissions into Windows NT access control lists\&. The UNIX permissions considered are the traditional UNIX owner and group permissions, as well as POSIX ACLs set on any files or directories\&. This parameter was formally a global parameter in releases prior to 2\&.2\&.2\&.
+.sp
+Default:
+\fI\fInt acl support\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+ntlm auth (G)
+.PP
+.RS 4
+This parameter determines whether or not
+\fBsmbd\fR(8)
+will attempt to authenticate users using the NTLM encrypted password response for this local passdb (SAM or account database)\&.
+.sp
+If disabled, both NTLM and LanMan authencication against the local passdb is disabled\&.
+.sp
+Note that these settings apply only to local users, authentication will still be forwarded to and NTLM authentication accepted against any domain we are joined to, and any trusted domain, even if disabled or if NTLMv2\-only is enforced here\&. To control NTLM authentiation for domain users, this must option must be configured on each DC\&.
+.sp
+By default with
+ntlm auth
+set to
+\fBntlmv2\-only\fR
+only NTLMv2 logins will be permitted\&. All modern clients support NTLMv2 by default, but some older clients will require special configuration to use it\&.
+.sp
+The primary user of NTLMv1 is MSCHAPv2 for VPNs and 802\&.1x\&.
+.sp
+The available settings are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBntlmv1\-permitted\fR
+(alias
+\fByes\fR) \- Allow NTLMv1 and above for all clients\&.
+.sp
+This is the required setting for to enable the
+\fIlanman auth\fR
+parameter\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBntlmv2\-only\fR
+(alias
+\fBno\fR) \- Do not allow NTLMv1 to be used, but permit NTLMv2\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBmschapv2\-and\-ntlmv2\-only\fR
+\- Only allow NTLMv1 when the client promises that it is providing MSCHAPv2 authentication (such as the
+ntlm_auth
+tool)\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBdisabled\fR
+\- Do not accept NTLM (or LanMan) authentication of any level, nor permit NTLM password changes\&.
+.RE
+.sp
+.RE
+The default changed from
+\fByes\fR
+to
+\fBno\fR
+with Samba 4\&.5\&. The default changed again to
+\fBntlmv2\-only\fR
+with Samba 4\&.7, however the behaviour is unchanged\&.
+.sp
+Default:
+\fI\fIntlm auth\fR\fR\fI = \fR\fIntlmv2\-only\fR\fI \fR
+.RE
+
+nt pipe support (G)
+.PP
+.RS 4
+This boolean parameter controls whether
+\fBsmbd\fR(8)
+will allow Windows NT clients to connect to the NT SMB specific
+\fBIPC$\fR
+pipes\&. This is a developer debugging option and can be left alone\&.
+.sp
+Default:
+\fI\fInt pipe support\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+ntp signd socket directory (G)
+.PP
+.RS 4
+This setting controls the location of the socket that the NTP daemon uses to communicate with Samba for signing packets\&.
+.sp
+If a non\-default path is specified here, then it is also necessary to make NTP aware of the new path using the
+\fBntpsigndsocket\fR
+directive in
+ntp\&.conf\&.
+.sp
+Default:
+\fI\fIntp signd socket directory\fR\fR\fI = \fR\fI${prefix}/var/lib/ntp_signd\fR\fI \fR
+.RE
+
+nt status support (G)
+.PP
+.RS 4
+This boolean parameter controls whether
+\fBsmbd\fR(8)
+will negotiate NT specific status support with Windows NT/2k/XP clients\&. This is a developer debugging option and should be left alone\&. If this option is set to
+\fBno\fR
+then Samba offers exactly the same DOS error codes that versions prior to Samba 2\&.2\&.3 reported\&.
+.sp
+You should not need to ever disable this parameter\&.
+.sp
+Default:
+\fI\fInt status support\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+ntvfs handler (S)
+.PP
+.RS 4
+This specifies the NTVFS handlers for this share\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+unixuid: Sets up user credentials based on POSIX gid/uid\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+cifs: Proxies a remote CIFS FS\&. Mainly useful for testing\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+nbench: Filter module that saves data useful to the nbench benchmark suite\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ipc: Allows using SMB for inter process communication\&. Only used for the IPC$ share\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+posix: Maps POSIX FS semantics to NT semantics
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+print: Allows printing over SMB\&. This is LANMAN\-style printing, not the be confused with the spoolss DCE/RPC interface used by later versions of Windows\&.
+.RE
+.sp
+.RE
+Note that this option is only used when the NTVFS file server is in use\&. It is not used with the (default) s3fs file server\&.
+.sp
+Default:
+\fI\fIntvfs handler\fR\fR\fI = \fR\fIunixuid, default\fR\fI \fR
+.RE
+
+null passwords (G)
+.PP
+.RS 4
+Allow or disallow client access to accounts that have null passwords\&.
+.sp
+See also
+\fBsmbpasswd\fR(5)\&.
+.sp
+Default:
+\fI\fInull passwords\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+obey pam restrictions (G)
+.PP
+.RS 4
+When Samba 3\&.0 is configured to enable PAM support (i\&.e\&. \-\-with\-pam), this parameter will control whether or not Samba should obey PAM\*(Aqs account and session management directives\&. The default behavior is to use PAM for clear text authentication only and to ignore any account or session management\&. Note that Samba always ignores PAM for authentication in the case of
+\m[blue]\fBencrypt passwords = yes\fR\m[]\&. The reason is that PAM modules cannot support the challenge/response authentication mechanism needed in the presence of SMB password encryption\&.
+.sp
+Default:
+\fI\fIobey pam restrictions\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+old password allowed period (G)
+.PP
+.RS 4
+Number of minutes to permit an NTLM login after a password change or reset using the old password\&. This allows the user to re\-cache the new password on multiple clients without disrupting a network reconnection in the meantime\&.
+.sp
+This parameter only applies when
+\m[blue]\fBserver role\fR\m[]
+is set to Active Directory Domain Controller\&.
+.sp
+Default:
+\fI\fIold password allowed period\fR\fR\fI = \fR\fI60\fR\fI \fR
+.RE
+
+oplock break wait time (G)
+.PP
+.RS 4
+This is a tuning parameter added due to bugs in both Windows 9x and WinNT\&. If Samba responds to a client too quickly when that client issues an SMB that can cause an oplock break request, then the network client can fail and not respond to the break request\&. This tuning parameter (which is set in milliseconds) is the amount of time Samba will wait before sending an oplock break request to such (broken) clients\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBWarning\fR
+.ps -1
+.br
+DO NOT CHANGE THIS PARAMETER UNLESS YOU HAVE READ AND UNDERSTOOD THE SAMBA OPLOCK CODE\&.
+.sp .5v
+.RE
+Default:
+\fI\fIoplock break wait time\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+oplocks (S)
+.PP
+.RS 4
+This boolean option tells
+smbd
+whether to issue oplocks (opportunistic locks) to file open requests on this share\&. The oplock code can dramatically (approx\&. 30% or more) improve the speed of access to files on Samba servers\&. It allows the clients to aggressively cache files locally and you may want to disable this option for unreliable network environments (it is turned on by default in Windows NT Servers)\&.
+.sp
+Oplocks may be selectively turned off on certain files with a share\&. See the
+\m[blue]\fBveto oplock files\fR\m[]
+parameter\&. On some systems oplocks are recognized by the underlying operating system\&. This allows data synchronization between all access to oplocked files, whether it be via Samba or NFS or a local UNIX process\&. See the
+\m[blue]\fBkernel oplocks\fR\m[]
+parameter for details\&.
+.sp
+Default:
+\fI\fIoplocks\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+os2 driver map (G)
+.PP
+.RS 4
+The parameter is used to define the absolute path to a file containing a mapping of Windows NT printer driver names to OS/2 printer driver names\&. The format is:
+.sp
+<nt driver name> = <os2 driver name>\&.<device name>
+.sp
+For example, a valid entry using the HP LaserJet 5 printer driver would appear as
+HP LaserJet 5L = LASERJET\&.HP LaserJet 5L\&.
+.sp
+The need for the file is due to the printer driver namespace problem described in the chapter on Classical Printing in the Samba3\-HOWTO book\&. For more details on OS/2 clients, please refer to chapter on other clients in the Samba3\-HOWTO book\&.
+.sp
+Default:
+\fI\fIos2 driver map\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+os level (G)
+.PP
+.RS 4
+This integer value controls what level Samba advertises itself as for browse elections\&. The value of this parameter determines whether
+\fBnmbd\fR(8)
+has a chance of becoming a local master browser for the
+\m[blue]\fBworkgroup\fR\m[]
+in the local broadcast area\&.
+.sp
+\fI Note:\fR
+By default, Samba will win a local master browsing election over all Microsoft operating systems except a Windows NT 4\&.0/2000 Domain Controller\&. This means that a misconfigured Samba host can effectively isolate a subnet for browsing purposes\&. This parameter is largely auto\-configured in the Samba\-3 release series and it is seldom necessary to manually override the default setting\&. Please refer to the chapter on Network Browsing in the Samba\-3 HOWTO document for further information regarding the use of this parameter\&.
+\fINote:\fR
+The maximum value for this parameter is 255\&. If you use higher values, counting will start at 0!
+.sp
+Default:
+\fI\fIos level\fR\fR\fI = \fR\fI20\fR\fI \fR
+.sp
+Example:
+\fI\fIos level\fR\fR\fI = \fR\fI65\fR\fI \fR
+.RE
+
+pam password change (G)
+.PP
+.RS 4
+With the addition of better PAM support in Samba 2\&.2, this parameter, it is possible to use PAM\*(Aqs password change control flag for Samba\&. If enabled, then PAM will be used for password changes when requested by an SMB client instead of the program listed in
+\m[blue]\fBpasswd program\fR\m[]\&. It should be possible to enable this without changing your
+\m[blue]\fBpasswd chat\fR\m[]
+parameter for most setups\&.
+.sp
+Default:
+\fI\fIpam password change\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+panic action (G)
+.PP
+.RS 4
+This is a Samba developer option that allows a system command to be called when either
+\fBsmbd\fR(8)
+or
+\fBnmbd\fR(8)
+crashes\&. This is usually used to draw attention to the fact that a problem occurred\&.
+.sp
+Default:
+\fI\fIpanic action\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIpanic action\fR\fR\fI = \fR\fI/bin/sleep 90000\fR\fI \fR
+.RE
+
+passdb backend (G)
+.PP
+.RS 4
+This option allows the administrator to chose which backend will be used for storing user and possibly group information\&. This allows you to swap between different storage mechanisms without recompile\&.
+.sp
+The parameter value is divided into two parts, the backend\*(Aqs name, and a \*(Aqlocation\*(Aq string that has meaning only to that particular backed\&. These are separated by a : character\&.
+.sp
+Available backends can include:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+smbpasswd
+\- The old plaintext passdb backend\&. Some Samba features will not work if this passdb backend is used\&. Takes a path to the smbpasswd file as an optional argument\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+tdbsam
+\- The TDB based password storage backend\&. Takes a path to the TDB as an optional argument (defaults to passdb\&.tdb in the
+\m[blue]\fBprivate dir\fR\m[]
+directory\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ldapsam
+\- The LDAP based passdb backend\&. Takes an LDAP URL as an optional argument (defaults to
+ldap://localhost)
+.sp
+LDAP connections should be secured where possible\&. This may be done using either Start\-TLS (see
+\m[blue]\fBldap ssl\fR\m[]) or by specifying
+\fIldaps://\fR
+in the URL argument\&.
+.sp
+Multiple servers may also be specified in double\-quotes\&. Whether multiple servers are supported or not and the exact syntax depends on the LDAP library you use\&.
+.RE
+.sp
+.RE
+
+	Examples of use are:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+passdb backend = tdbsam:/etc/samba/private/passdb\&.tdb 
+
+or multi server LDAP URL with OpenLDAP library:
+
+passdb backend = ldapsam:"ldap://ldap\-1\&.example\&.com ldap://ldap\-2\&.example\&.com"
+
+or multi server LDAP URL with Netscape based LDAP library:
+
+passdb backend = ldapsam:"ldap://ldap\-1\&.example\&.com ldap\-2\&.example\&.com"
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIpassdb backend\fR\fR\fI = \fR\fItdbsam\fR\fI \fR
+.RE
+
+passdb expand explicit (G)
+.PP
+.RS 4
+This parameter controls whether Samba substitutes %\-macros in the passdb fields if they are explicitly set\&. We used to expand macros here, but this turned out to be a bug because the Windows client can expand a variable %G_osver% in which %G would have been substituted by the user\*(Aqs primary group\&.
+.sp
+Default:
+\fI\fIpassdb expand explicit\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+passwd chat (G)
+.PP
+.RS 4
+This string controls the
+\fI"chat"\fR
+conversation that takes places between
+\fBsmbd\fR(8)
+and the local password changing program to change the user\*(Aqs password\&. The string describes a sequence of response\-receive pairs that
+\fBsmbd\fR(8)
+uses to determine what to send to the
+\m[blue]\fBpasswd program\fR\m[]
+and what to expect back\&. If the expected output is not received then the password is not changed\&.
+.sp
+This chat sequence is often quite site specific, depending on what local methods are used for password control\&.
+.sp
+Note that this parameter only is used if the
+\m[blue]\fBunix password sync\fR\m[]
+parameter is set to
+\fByes\fR\&. This sequence is then called
+\fIAS ROOT\fR
+when the SMB password in the smbpasswd file is being changed, without access to the old password cleartext\&. This means that root must be able to reset the user\*(Aqs password without knowing the text of the previous password\&.
+.sp
+The string can contain the macro
+\fI%n\fR
+which is substituted for the new password\&. The old password (\fI%o\fR) is only available when
+\m[blue]\fBencrypt passwords\fR\m[]
+has been disabled\&. The chat sequence can also contain the standard macros \en, \er, \et and \es to give line\-feed, carriage\-return, tab and space\&. The chat sequence string can also contain a \*(Aq*\*(Aq which matches any sequence of characters\&. Double quotes can be used to collect strings with spaces in them into a single string\&.
+.sp
+If the send string in any part of the chat sequence is a full stop "\&.", then no string is sent\&. Similarly, if the expect string is a full stop then no string is expected\&.
+.sp
+If the
+\m[blue]\fBpam password change\fR\m[]
+parameter is set to
+\fByes\fR, the chat pairs may be matched in any order, and success is determined by the PAM result, not any particular output\&. The \en macro is ignored for PAM conversions\&.
+.sp
+Default:
+\fI\fIpasswd chat\fR\fR\fI = \fR\fI*new*password* %n\en *new*password* %n\en *changed*\fR\fI \fR
+.sp
+Example:
+\fI\fIpasswd chat\fR\fR\fI = \fR\fI"*Enter NEW password*" %n\en "*Reenter NEW password*" %n\en "*Password changed*"\fR\fI \fR
+.RE
+
+passwd chat debug (G)
+.PP
+.RS 4
+This boolean specifies if the passwd chat script parameter is run in
+\fIdebug\fR
+mode\&. In this mode the strings passed to and received from the passwd chat are printed in the
+\fBsmbd\fR(8)
+log with a
+\m[blue]\fBdebug level\fR\m[]
+of 100\&. This is a dangerous option as it will allow plaintext passwords to be seen in the
+smbd
+log\&. It is available to help Samba admins debug their
+\fIpasswd chat\fR
+scripts when calling the
+\fIpasswd program\fR
+and should be turned off after this has been done\&. This option has no effect if the
+\m[blue]\fBpam password change\fR\m[]
+parameter is set\&. This parameter is off by default\&.
+.sp
+Default:
+\fI\fIpasswd chat debug\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+passwd chat timeout (G)
+.PP
+.RS 4
+This integer specifies the number of seconds smbd will wait for an initial answer from a passwd chat script being run\&. Once the initial answer is received the subsequent answers must be received in one tenth of this time\&. The default it two seconds\&.
+.sp
+Default:
+\fI\fIpasswd chat timeout\fR\fR\fI = \fR\fI2\fR\fI \fR
+.RE
+
+passwd program (G)
+.PP
+.RS 4
+The name of a program that can be used to set UNIX user passwords\&. Any occurrences of
+\fI%u\fR
+will be replaced with the user name\&. The user name is checked for existence before calling the password changing program\&.
+.sp
+Also note that many passwd programs insist in
+\fIreasonable \fR
+passwords, such as a minimum length, or the inclusion of mixed case chars and digits\&. This can pose a problem as some clients (such as Windows for Workgroups) uppercase the password before sending it\&.
+.sp
+\fINote\fR
+that if the
+\fIunix password sync\fR
+parameter is set to
+\fByes \fR
+then this program is called
+\fIAS ROOT\fR
+before the SMB password in the smbpasswd file is changed\&. If this UNIX password change fails, then
+smbd
+will fail to change the SMB password also (this is by design)\&.
+.sp
+If the
+\fIunix password sync\fR
+parameter is set this parameter
+\fIMUST USE ABSOLUTE PATHS\fR
+for
+\fIALL\fR
+programs called, and must be examined for security implications\&. Note that by default
+\fIunix password sync\fR
+is set to
+\fBno\fR\&.
+.sp
+Default:
+\fI\fIpasswd program\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIpasswd program\fR\fR\fI = \fR\fI/bin/passwd %u\fR\fI \fR
+.RE
+
+password hash gpg key ids (G)
+.PP
+.RS 4
+If
+samba
+is running as an active directory domain controller, it is possible to store the cleartext password of accounts in a PGP/OpenGPG encrypted form\&.
+.sp
+You can specify one or more recipients by key id or user id\&. Note that 32bit key ids are not allowed, specify at least 64bit\&.
+.sp
+The value is stored as \*(AqPrimary:SambaGPG\*(Aq in the
+supplementalCredentials
+attribute\&.
+.sp
+As password changes can occur on any domain controller, you should configure this on each of them\&. Note that this feature is currently available only on Samba domain controllers\&.
+.sp
+This option is only available if
+samba
+was compiled with
+gpgme
+support\&.
+.sp
+You may need to export the
+GNUPGHOME
+environment variable before starting
+samba\&.
+\fIIt is strongly recommended to only store the public key in this location\&. The private key is not used for encryption and should be only stored where decryption is required\&.\fR
+.sp
+Being able to restore the cleartext password helps, when they need to be imported into other authentication systems later (see
+samba\-tool user getpassword) or you want to keep the passwords in sync with another system, e\&.g\&. an OpenLDAP server (see
+samba\-tool user syncpasswords)\&.
+.sp
+While this option needs to be configured on all domain controllers, the
+samba\-tool user syncpasswords
+command should run on a single domain controller only (typically the PDC\-emulator)\&.
+.sp
+Default:
+\fI\fIpassword hash gpg key ids\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIpassword hash gpg key ids\fR\fR\fI = \fR\fI4952E40301FAB41A\fR\fI \fR
+.sp
+Example:
+\fI\fIpassword hash gpg key ids\fR\fR\fI = \fR\fIselftest@samba\&.example\&.com\fR\fI \fR
+.sp
+Example:
+\fI\fIpassword hash gpg key ids\fR\fR\fI = \fR\fIselftest@samba\&.example\&.com, 4952E40301FAB41A\fR\fI \fR
+.RE
+
+password hash userPassword schemes (G)
+.PP
+.RS 4
+This parameter determines whether or not
+\fBsamba\fR(8)
+acting as an Active Directory Domain Controller will attempt to store additional passwords hash types for the user
+.sp
+The values are stored as \*(AqPrimary:userPassword\*(Aq in the
+supplementalCredentials
+attribute\&. The value of this option is a hash type\&.
+.sp
+The currently supported hash types are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBCryptSHA256\fR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBCryptSHA512\fR
+.RE
+.sp
+.RE
+Multiple instances of a hash type may be computed and stored\&. The password hashes are calculated using the
+\fBcrypt\fR(3)
+call\&. The number of rounds used to compute the hash can be specified by adding \*(Aq:rounds=xxxx\*(Aq to the hash type, i\&.e\&. CryptSHA512:rounds=4500 would calculate an SHA512 hash using 4500 rounds\&. If not specified the Operating System defaults for
+\fBcrypt\fR(3)
+are used\&.
+.sp
+As password changes can occur on any domain controller, you should configure this on each of them\&. Note that this feature is currently available only on Samba domain controllers\&.
+.sp
+Currently the NT Hash of the password is recorded when these hashes are calculated and stored\&. When retrieving the hashes the current value of the NT Hash is checked against the stored NT Hash\&. This detects password changes that have not updated the password hashes\&. In this case
+samba\-tool user
+will ignore the stored hash values\&.
+.sp
+Being able to obtain the hashed password helps, when they need to be imported into other authentication systems later (see
+samba\-tool user getpassword) or you want to keep the passwords in sync with another system, e\&.g\&. an OpenLDAP server (see
+samba\-tool user syncpasswords)\&.
+.sp
+Related command:
+\m[blue]\fBunix password sync\fR\m[]
+.sp
+Default:
+\fI\fIpassword hash userPassword schemes\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIpassword hash userPassword schemes\fR\fR\fI = \fR\fICryptSHA256\fR\fI \fR
+.sp
+Example:
+\fI\fIpassword hash userPassword schemes\fR\fR\fI = \fR\fICryptSHA256 CryptSHA512\fR\fI \fR
+.sp
+Example:
+\fI\fIpassword hash userPassword schemes\fR\fR\fI = \fR\fICryptSHA256:rounds=5000 CryptSHA512:rounds=7000\fR\fI \fR
+.RE
+
+password server (G)
+.PP
+.RS 4
+By specifying the name of a domain controller with this option, and using
+security = [ads|domain]
+it is possible to get Samba to do all its username/password validation using a specific remote server\&.
+.sp
+Ideally, this option
+\fIshould not\fR
+be used, as the default \*(Aq*\*(Aq indicates to Samba to determine the best DC to contact dynamically, just as all other hosts in an AD domain do\&. This allows the domain to be maintained (addition and removal of domain controllers) without modification to the smb\&.conf file\&. The cryptographic protection on the authenticated RPC calls used to verify passwords ensures that this default is safe\&.
+.sp
+\fIIt is strongly recommended that you use the default of \*(Aq*\*(Aq\fR, however if in your particular environment you have reason to specify a particular DC list, then the list of machines in this option must be a list of names or IP addresses of Domain controllers for the Domain\&. If you use the default of \*(Aq*\*(Aq, or list several hosts in the
+\fIpassword server\fR
+option then
+smbd
+will try each in turn till it finds one that responds\&. This is useful in case your primary server goes down\&.
+.sp
+If the list of servers contains both names/IP\*(Aqs and the \*(Aq*\*(Aq character, the list is treated as a list of preferred domain controllers, but an auto lookup of all remaining DC\*(Aqs will be added to the list as well\&. Samba will not attempt to optimize this list by locating the closest DC\&.
+.sp
+If parameter is a name, it is looked up using the parameter
+\m[blue]\fBname resolve order\fR\m[]
+and so may resolved by any method and order described in that parameter\&.
+.sp
+Default:
+\fI\fIpassword server\fR\fR\fI = \fR\fI*\fR\fI \fR
+.sp
+Example:
+\fI\fIpassword server\fR\fR\fI = \fR\fINT\-PDC, NT\-BDC1, NT\-BDC2, *\fR\fI \fR
+.sp
+Example:
+\fI\fIpassword server\fR\fR\fI = \fR\fIwindc\&.mydomain\&.com:389 192\&.168\&.1\&.101 *\fR\fI \fR
+.RE
+
+directory
+.PP
+.RS 4
+This parameter is a synonym for
+path\&.
+.RE
+
+path (S)
+.PP
+.RS 4
+This parameter specifies a directory to which the user of the service is to be given access\&. In the case of printable services, this is where print data will spool prior to being submitted to the host for printing\&.
+.sp
+For a printable service offering guest access, the service should be readonly and the path should be world\-writeable and have the sticky bit set\&. This is not mandatory of course, but you probably won\*(Aqt get the results you expect if you do otherwise\&.
+.sp
+Any occurrences of
+\fI%u\fR
+in the path will be replaced with the UNIX username that the client is using on this connection\&. Any occurrences of
+\fI%m\fR
+will be replaced by the NetBIOS name of the machine they are connecting from\&. These replacements are very useful for setting up pseudo home directories for users\&.
+.sp
+Note that this path will be based on
+\m[blue]\fBroot dir\fR\m[]
+if one was specified\&.
+.sp
+Default:
+\fI\fIpath\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIpath\fR\fR\fI = \fR\fI/home/fred\fR\fI \fR
+.RE
+
+perfcount module (G)
+.PP
+.RS 4
+This parameter specifies the perfcount backend to be used when monitoring SMB operations\&. Only one perfcount module may be used, and it must implement all of the apis contained in the smb_perfcount_handler structure defined in smb\&.h\&.
+.sp
+\fINo default\fR
+.RE
+
+pid directory (G)
+.PP
+.RS 4
+This option specifies the directory where pid files will be placed\&.
+.sp
+Default:
+\fI\fIpid directory\fR\fR\fI = \fR\fI${prefix}/var/run\fR\fI \fR
+.sp
+Example:
+\fI\fIpid directory\fR\fR\fI = \fR\fI/var/run/\fR\fI \fR
+.RE
+
+posix locking (S)
+.PP
+.RS 4
+The
+\fBsmbd\fR(8)
+daemon maintains an database of file locks obtained by SMB clients\&. The default behavior is to map this internal database to POSIX locks\&. This means that file locks obtained by SMB clients are consistent with those seen by POSIX compliant applications accessing the files via a non\-SMB method (e\&.g\&. NFS or local file access)\&. It is very unlikely that you need to set this parameter to "no", unless you are sharing from an NFS mount, which is not a good idea in the first place\&.
+.sp
+Default:
+\fI\fIposix locking\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+postexec (S)
+.PP
+.RS 4
+This option specifies a command to be run whenever the service is disconnected\&. It takes the usual substitutions\&. The command may be run as the root on some systems\&.
+.sp
+An interesting example may be to unmount server resources:
+.sp
+postexec = /etc/umount /cdrom
+.sp
+Default:
+\fI\fIpostexec\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIpostexec\fR\fR\fI = \fR\fIecho \e"%u disconnected from %S from %m (%I)\e" >> /tmp/log\fR\fI \fR
+.RE
+
+exec
+.PP
+.RS 4
+This parameter is a synonym for
+preexec\&.
+.RE
+
+preexec (S)
+.PP
+.RS 4
+This option specifies a command to be run whenever the service is connected to\&. It takes the usual substitutions\&.
+.sp
+An interesting example is to send the users a welcome message every time they log in\&. Maybe a message of the day? Here is an example:
+.sp
+preexec = csh \-c \*(Aqecho \e"Welcome to %S!\e" | /usr/local/samba/bin/smbclient \-M %m \-I %I\*(Aq &
+.sp
+Of course, this could get annoying after a while :\-)
+.sp
+See also
+\m[blue]\fBpreexec close\fR\m[]
+and
+\m[blue]\fBpostexec\fR\m[]\&.
+.sp
+Default:
+\fI\fIpreexec\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIpreexec\fR\fR\fI = \fR\fIecho \e"%u connected to %S from %m (%I)\e" >> /tmp/log\fR\fI \fR
+.RE
+
+preexec close (S)
+.PP
+.RS 4
+This boolean option controls whether a non\-zero return code from
+\m[blue]\fBpreexec\fR\m[]
+should close the service being connected to\&.
+.sp
+Default:
+\fI\fIpreexec close\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+prefered master
+.PP
+.RS 4
+This parameter is a synonym for
+preferred master\&.
+.RE
+
+preferred master (G)
+.PP
+.RS 4
+This boolean parameter controls if
+\fBnmbd\fR(8)
+is a preferred master browser for its workgroup\&.
+.sp
+If this is set to
+\fByes\fR, on startup,
+nmbd
+will force an election, and it will have a slight advantage in winning the election\&. It is recommended that this parameter is used in conjunction with
+\m[blue]\fBdomain master = yes\fR\m[], so that
+nmbd
+can guarantee becoming a domain master\&.
+.sp
+Use this option with caution, because if there are several hosts (whether Samba servers, Windows 95 or NT) that are preferred master browsers on the same subnet, they will each periodically and continuously attempt to become the local master browser\&. This will result in unnecessary broadcast traffic and reduced browsing capabilities\&.
+.sp
+Default:
+\fI\fIpreferred master\fR\fR\fI = \fR\fIauto\fR\fI \fR
+.RE
+
+prefork backoff increment (G)
+.PP
+.RS 4
+This option specifies the number of seconds added to the delay before a prefork master or worker process is restarted\&. The restart is initially zero, the prefork backoff increment is added to the delay on each restart up to the value specified by "prefork maximum backoff"\&.
+.sp
+Additionally the the backoff for an individual service by using "prefork backoff increment: service name" i\&.e\&. "prefork backoff increment:ldap = 2" to set the backoff increment to 2\&.
+.sp
+If the backoff increment is 2 and the maximum backoff is 5\&. There will be a zero second delay for the first restart\&. A two second delay for the second restart\&. A four second delay for the third and any subsequent restarts
+.sp
+Default:
+\fI\fIprefork backoff increment\fR\fR\fI = \fR\fI10\fR\fI \fR
+.RE
+
+prefork children (G)
+.PP
+.RS 4
+This option controls the number of worker processes that are started for each service when prefork process model is enabled (see
+\fBsamba\fR(8)
+\-M) The prefork children are only started for those services that support prefork (currently ldap, kdc and netlogon)\&. For processes that don\*(Aqt support preforking all requests are handled by a single process for that service\&.
+.sp
+This should be set to a small multiple of the number of CPU\*(Aqs available on the server
+.sp
+Additionally the number of prefork children can be specified for an individual service by using "prefork children: service name" i\&.e\&. "prefork children:ldap = 8" to set the number of ldap worker processes\&.
+.sp
+Default:
+\fI\fIprefork children\fR\fR\fI = \fR\fI4\fR\fI \fR
+.RE
+
+prefork maximum backoff (G)
+.PP
+.RS 4
+This option controls the maximum delay before a failed pre\-fork process is restarted\&.
+.sp
+Default:
+\fI\fIprefork maximum backoff\fR\fR\fI = \fR\fI120\fR\fI \fR
+.RE
+
+preload modules (G)
+.PP
+.RS 4
+This is a list of paths to modules that should be loaded into smbd before a client connects\&. This improves the speed of smbd when reacting to new connections somewhat\&.
+.sp
+Default:
+\fI\fIpreload modules\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIpreload modules\fR\fR\fI = \fR\fI/usr/lib/samba/passdb/mysql\&.so\fR\fI \fR
+.RE
+
+preserve case (S)
+.PP
+.RS 4
+This controls if new filenames are created with the case that the client passes, or if they are forced to be the
+\m[blue]\fBdefault case\fR\m[]\&.
+.sp
+See the section on
+NAME MANGLING
+for a fuller discussion\&.
+.sp
+Default:
+\fI\fIpreserve case\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+print ok
+.PP
+.RS 4
+This parameter is a synonym for
+printable\&.
+.RE
+
+printable (S)
+.PP
+.RS 4
+If this parameter is
+\fByes\fR, then clients may open, write to and submit spool files on the directory specified for the service\&.
+.sp
+Note that a printable service will ALWAYS allow writing to the service path (user privileges permitting) via the spooling of print data\&. The
+\m[blue]\fBread only\fR\m[]
+parameter controls only non\-printing access to the resource\&.
+.sp
+Default:
+\fI\fIprintable\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+printcap cache time (G)
+.PP
+.RS 4
+This option specifies the number of seconds before the printing subsystem is again asked for the known printers\&.
+.sp
+Setting this parameter to 0 disables any rescanning for new or removed printers after the initial startup\&.
+.sp
+Default:
+\fI\fIprintcap cache time\fR\fR\fI = \fR\fI750\fR\fI \fR
+.sp
+Example:
+\fI\fIprintcap cache time\fR\fR\fI = \fR\fI600\fR\fI \fR
+.RE
+
+printcap
+.PP
+.RS 4
+This parameter is a synonym for
+printcap name\&.
+.RE
+
+printcap name (G)
+.PP
+.RS 4
+This parameter may be used to override the compiled\-in default printcap name used by the server (usually
+/etc/printcap)\&. See the discussion of the
+[printers]
+section above for reasons why you might want to do this\&.
+.sp
+To use the CUPS printing interface set
+printcap name = cups\&. This should be supplemented by an additional setting
+\m[blue]\fBprinting = cups\fR\m[]
+in the [global] section\&.
+printcap name = cups
+will use the "dummy" printcap created by CUPS, as specified in your CUPS configuration file\&.
+.sp
+On System V systems that use
+lpstat
+to list available printers you can use
+printcap name = lpstat
+to automatically obtain lists of available printers\&. This is the default for systems that define SYSV at configure time in Samba (this includes most System V based systems)\&. If
+\fI printcap name\fR
+is set to
+lpstat
+on these systems then Samba will launch
+lpstat \-v
+and attempt to parse the output to obtain a printer list\&.
+.sp
+A minimal printcap file would look something like this:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+print1|My Printer 1
+print2|My Printer 2
+print3|My Printer 3
+print4|My Printer 4
+print5|My Printer 5
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+where the \*(Aq|\*(Aq separates aliases of a printer\&. The fact that the second alias has a space in it gives a hint to Samba that it\*(Aqs a comment\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+Under AIX the default printcap name is
+/etc/qconfig\&. Samba will assume the file is in AIX
+qconfig
+format if the string
+qconfig
+appears in the printcap filename\&.
+.sp .5v
+.RE
+Default:
+\fI\fIprintcap name\fR\fR\fI = \fR\fI/etc/printcap\fR\fI \fR
+.sp
+Example:
+\fI\fIprintcap name\fR\fR\fI = \fR\fI/etc/myprintcap\fR\fI \fR
+.RE
+
+print command (S)
+.PP
+.RS 4
+After a print job has finished spooling to a service, this command will be used via a
+system()
+call to process the spool file\&. Typically the command specified will submit the spool file to the host\*(Aqs printing subsystem, but there is no requirement that this be the case\&. The server will not remove the spool file, so whatever command you specify should remove the spool file when it has been processed, otherwise you will need to manually remove old spool files\&.
+.sp
+The print command is simply a text string\&. It will be used verbatim after macro substitutions have been made:
+.sp
+%s, %f \- the path to the spool file name
+.sp
+%p \- the appropriate printer name
+.sp
+%J \- the job name as transmitted by the client\&.
+.sp
+%c \- The number of printed pages of the spooled job (if known)\&.
+.sp
+%z \- the size of the spooled print job (in bytes)
+.sp
+The print command
+\fIMUST\fR
+contain at least one occurrence of
+\fI%s\fR
+or
+\fI%f \fR
+\- the
+\fI%p\fR
+is optional\&. At the time a job is submitted, if no printer name is supplied the
+\fI%p \fR
+will be silently removed from the printer command\&.
+.sp
+If specified in the [global] section, the print command given will be used for any printable service that does not have its own print command specified\&.
+.sp
+If there is neither a specified print command for a printable service nor a global print command, spool files will be created but not processed and (most importantly) not removed\&.
+.sp
+Note that printing may fail on some UNIXes from the
+\fBnobody\fR
+account\&. If this happens then create an alternative guest account that can print and set the
+\m[blue]\fBguest account\fR\m[]
+in the [global] section\&.
+.sp
+You can form quite complex print commands by realizing that they are just passed to a shell\&. For example the following will log a print job, print the file, then remove it\&. Note that \*(Aq;\*(Aq is the usual separator for command in shell scripts\&.
+.sp
+print command = echo Printing %s >> /tmp/print\&.log; lpr \-P %p %s; rm %s
+.sp
+You may have to vary this command considerably depending on how you normally print files on your system\&. The default for the parameter varies depending on the setting of the
+\m[blue]\fBprinting\fR\m[]
+parameter\&.
+.sp
+Default: For
+printing = BSD, AIX, QNX, LPRNG or PLP :
+.sp
+print command = lpr \-r \-P%p %s
+.sp
+For
+printing = SYSV or HPUX :
+.sp
+print command = lp \-c \-d%p %s; rm %s
+.sp
+For
+printing = SOFTQ :
+.sp
+print command = lp \-d%p \-s %s; rm %s
+.sp
+For printing = CUPS : If SAMBA is compiled against libcups, then
+\m[blue]\fBprintcap = cups\fR\m[]
+uses the CUPS API to submit jobs, etc\&. Otherwise it maps to the System V commands with the \-oraw option for printing, i\&.e\&. it uses
+lp \-c \-d%p \-oraw; rm %s\&. With
+printing = cups, and if SAMBA is compiled against libcups, any manually set print command will be ignored\&.
+.sp
+\fINo default\fR
+.sp
+Example:
+\fI\fIprint command\fR\fR\fI = \fR\fI/usr/local/samba/bin/myprintscript %p %s\fR\fI \fR
+.RE
+
+printer
+.PP
+.RS 4
+This parameter is a synonym for
+printer name\&.
+.RE
+
+printer name (S)
+.PP
+.RS 4
+This parameter specifies the name of the printer to which print jobs spooled through a printable service will be sent\&.
+.sp
+If specified in the [global] section, the printer name given will be used for any printable service that does not have its own printer name specified\&.
+.sp
+The default value of the
+\m[blue]\fBprinter name\fR\m[]
+may be
+lp
+on many systems\&.
+.sp
+Default:
+\fI\fIprinter name\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIprinter name\fR\fR\fI = \fR\fIlaserwriter\fR\fI \fR
+.RE
+
+printing (S)
+.PP
+.RS 4
+This parameters controls how printer status information is interpreted on your system\&. It also affects the default values for the
+\fIprint command\fR,
+\fIlpq command\fR,
+\fIlppause command \fR,
+\fIlpresume command\fR, and
+\fIlprm command\fR
+if specified in the [global] section\&.
+.sp
+Currently nine printing styles are supported\&. They are
+\fBBSD\fR,
+\fBAIX\fR,
+\fBLPRNG\fR,
+\fBPLP\fR,
+\fBSYSV\fR,
+\fBHPUX\fR,
+\fBQNX\fR,
+\fBSOFTQ\fR,
+\fBCUPS\fR
+and
+\fBIPRINT\fR\&.
+.sp
+Be aware that CUPS and IPRINT are only available if the CUPS development library was available at the time Samba was compiled or packaged\&.
+.sp
+To see what the defaults are for the other print commands when using the various options use the
+\fBtestparm\fR(1)
+program\&.
+.sp
+This option can be set on a per printer basis\&. Please be aware however, that you must place any of the various printing commands (e\&.g\&. print command, lpq command, etc\&.\&.\&.) after defining the value for the
+\fIprinting\fR
+option since it will reset the printing commands to default values\&.
+.sp
+See also the discussion in the
+[printers]
+section\&.
+.sp
+See
+testparm \-v\&.
+for the default value on your system
+.sp
+Default:
+\fI\fIprinting\fR\fR\fI = \fR\fI # Depends on the operating system\fR\fI \fR
+.RE
+
+printjob username (S)
+.PP
+.RS 4
+This parameter specifies which user information will be passed to the printing system\&. Usually, the username is sent, but in some cases, e\&.g\&. the domain prefix is useful, too\&.
+.sp
+Default:
+\fI\fIprintjob username\fR\fR\fI = \fR\fI%U\fR\fI \fR
+.sp
+Example:
+\fI\fIprintjob username\fR\fR\fI = \fR\fI%D\e%U\fR\fI \fR
+.RE
+
+print notify backchannel (S)
+.PP
+.RS 4
+Windows print clients can update print queue status by expecting the server to open a backchannel SMB connection to them\&. Due to client firewall settings this can cause considerable timeouts and will often fail, as there is no guarantee the client is even running an SMB server\&. By default, the Samba print server will not try to connect back to clients, and will treat corresponding requests as if the connection back to the client failed\&.
+.sp
+Default:
+\fI\fIprint notify backchannel\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+private directory
+.PP
+.RS 4
+This parameter is a synonym for
+private dir\&.
+.RE
+
+private dir (G)
+.PP
+.RS 4
+This parameters defines the directory smbd will use for storing such files as
+smbpasswd
+and
+secrets\&.tdb\&.
+.sp
+Default:
+\fI\fIprivate dir\fR\fR\fI = \fR\fI${prefix}/private\fR\fI \fR
+.RE
+
+queuepause command (S)
+.PP
+.RS 4
+This parameter specifies the command to be executed on the server host in order to pause the printer queue\&.
+.sp
+This command should be a program or script which takes a printer name as its only parameter and stops the printer queue, such that no longer jobs are submitted to the printer\&.
+.sp
+This command is not supported by Windows for Workgroups, but can be issued from the Printers window under Windows 95 and NT\&.
+.sp
+If a
+\fI%p\fR
+is given then the printer name is put in its place\&. Otherwise it is placed at the end of the command\&.
+.sp
+Note that it is good practice to include the absolute path in the command as the PATH may not be available to the server\&.
+.sp
+Default:
+\fI\fIqueuepause command\fR\fR\fI = \fR\fI # determined by printing parameter\fR\fI \fR
+.sp
+Example:
+\fI\fIqueuepause command\fR\fR\fI = \fR\fIdisable %p\fR\fI \fR
+.RE
+
+queueresume command (S)
+.PP
+.RS 4
+This parameter specifies the command to be executed on the server host in order to resume the printer queue\&. It is the command to undo the behavior that is caused by the previous parameter (\m[blue]\fBqueuepause command\fR\m[])\&.
+.sp
+This command should be a program or script which takes a printer name as its only parameter and resumes the printer queue, such that queued jobs are resubmitted to the printer\&.
+.sp
+This command is not supported by Windows for Workgroups, but can be issued from the Printers window under Windows 95 and NT\&.
+.sp
+If a
+\fI%p\fR
+is given then the printer name is put in its place\&. Otherwise it is placed at the end of the command\&.
+.sp
+Note that it is good practice to include the absolute path in the command as the PATH may not be available to the server\&.
+.sp
+Default:
+\fI\fIqueueresume command\fR\fR\fI = \fR\fI # determined by printing parameter\fR\fI \fR
+.sp
+Example:
+\fI\fIqueueresume command\fR\fR\fI = \fR\fIenable %p\fR\fI \fR
+.RE
+
+raw NTLMv2 auth (G)
+.PP
+.RS 4
+This parameter has been deprecated since Samba 4\&.13 and support for NTLMv2 authentication without NTLMSSP will be removed in a future Samba release\&.
+.sp
+That is, in the future, the current default of
+raw NTLMv2 auth = no
+will be the enforced behaviour\&.
+.sp
+This parameter determines whether or not
+\fBsmbd\fR(8)
+will allow SMB1 clients without extended security (without SPNEGO) to use NTLMv2 authentication\&.
+.sp
+If this option,
+lanman auth
+and
+ntlm auth
+are all disabled, then only clients with SPNEGO support will be permitted\&. That means NTLMv2 is only supported within NTLMSSP\&.
+.sp
+Default:
+\fI\fIraw NTLMv2 auth\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+read list (S)
+.PP
+.RS 4
+This is a list of users that are given read\-only access to a service\&. If the connecting user is in this list then they will not be given write access, no matter what the
+\m[blue]\fBread only\fR\m[]
+option is set to\&. The list can include group names using the syntax described in the
+\m[blue]\fBinvalid users\fR\m[]
+parameter\&.
+.sp
+Default:
+\fI\fIread list\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIread list\fR\fR\fI = \fR\fImary, @students\fR\fI \fR
+.RE
+
+read only (S)
+.PP
+.RS 4
+An inverted synonym is
+\m[blue]\fBwriteable\fR\m[]\&.
+.sp
+If this parameter is
+\fByes\fR, then users of a service may not create or modify files in the service\*(Aqs directory\&.
+.sp
+Note that a printable service (printable = yes) will
+\fIALWAYS\fR
+allow writing to the directory (user privileges permitting), but only via spooling operations\&.
+.sp
+Default:
+\fI\fIread only\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+read raw (G)
+.PP
+.RS 4
+This is ignored if
+\m[blue]\fBasync smb echo handler\fR\m[]
+is set, because this feature is incompatible with raw read SMB requests
+.sp
+If enabled, raw reads allow reads of 65535 bytes in one packet\&. This typically provides a major performance benefit for some very, very old clients\&.
+.sp
+However, some clients either negotiate the allowable block size incorrectly or are incapable of supporting larger block sizes, and for these clients you may need to disable raw reads\&.
+.sp
+In general this parameter should be viewed as a system tuning tool and left severely alone\&.
+.sp
+Default:
+\fI\fIread raw\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+realm (G)
+.PP
+.RS 4
+This option specifies the kerberos realm to use\&. The realm is used as the ADS equivalent of the NT4
+domain\&. It is usually set to the DNS name of the kerberos server\&.
+.sp
+Default:
+\fI\fIrealm\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIrealm\fR\fR\fI = \fR\fImysambabox\&.mycompany\&.com\fR\fI \fR
+.RE
+
+registry shares (G)
+.PP
+.RS 4
+This turns on or off support for share definitions read from registry\&. Shares defined in
+\fIsmb\&.conf\fR
+take precedence over shares with the same name defined in registry\&. See the section on registry\-based configuration for details\&.
+.sp
+Note that this parameter defaults to
+\fIno\fR, but it is set to
+\fIyes\fR
+when
+\fIconfig backend\fR
+is set to
+\fIregistry\fR\&.
+.sp
+Default:
+\fI\fIregistry shares\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIregistry shares\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+reject md5 clients (G)
+.PP
+.RS 4
+This option controls whether the netlogon server (currently only in \*(Aqactive directory domain controller\*(Aq mode), will reject clients which does not support NETLOGON_NEG_SUPPORTS_AES\&.
+.sp
+You can set this to yes if all domain members support aes\&. This will prevent downgrade attacks\&.
+.sp
+This option takes precedence to the \*(Aqallow nt4 crypto\*(Aq option\&.
+.sp
+Default:
+\fI\fIreject md5 clients\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+reject md5 servers (G)
+.PP
+.RS 4
+This option controls whether winbindd requires support for aes support for the netlogon secure channel\&.
+.sp
+The following flags will be required NETLOGON_NEG_ARCFOUR, NETLOGON_NEG_SUPPORTS_AES, NETLOGON_NEG_PASSWORD_SET2 and NETLOGON_NEG_AUTHENTICATED_RPC\&.
+.sp
+You can set this to yes if all domain controllers support aes\&. This will prevent downgrade attacks\&.
+.sp
+The behavior can be controlled per netbios domain by using \*(Aqreject md5 servers:NETBIOSDOMAIN = yes\*(Aq as option\&.
+.sp
+This option takes precedence to the
+\m[blue]\fBrequire strong key\fR\m[]
+option\&.
+.sp
+Default:
+\fI\fIreject md5 servers\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+remote announce (G)
+.PP
+.RS 4
+This option allows you to setup
+\fBnmbd\fR(8)
+to periodically announce itself to arbitrary IP addresses with an arbitrary workgroup name\&.
+.sp
+This is useful if you want your Samba server to appear in a remote workgroup for which the normal browse propagation rules don\*(Aqt work\&. The remote workgroup can be anywhere that you can send IP packets to\&.
+.sp
+For example:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+remote announce = 192\&.168\&.2\&.255/SERVERS 192\&.168\&.4\&.255/STAFF
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+the above line would cause
+nmbd
+to announce itself to the two given IP addresses using the given workgroup names\&. If you leave out the workgroup name, then the one given in the
+\m[blue]\fBworkgroup\fR\m[]
+parameter is used instead\&.
+.sp
+The IP addresses you choose would normally be the broadcast addresses of the remote networks, but can also be the IP addresses of known browse masters if your network config is that stable\&.
+.sp
+See the chapter on Network Browsing in the Samba\-HOWTO book\&.
+.sp
+Default:
+\fI\fIremote announce\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+remote browse sync (G)
+.PP
+.RS 4
+This option allows you to setup
+\fBnmbd\fR(8)
+to periodically request synchronization of browse lists with the master browser of a Samba server that is on a remote segment\&. This option will allow you to gain browse lists for multiple workgroups across routed networks\&. This is done in a manner that does not work with any non\-Samba servers\&.
+.sp
+This is useful if you want your Samba server and all local clients to appear in a remote workgroup for which the normal browse propagation rules don\*(Aqt work\&. The remote workgroup can be anywhere that you can send IP packets to\&.
+.sp
+For example:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+\fIremote browse sync = 192\&.168\&.2\&.255 192\&.168\&.4\&.255\fR
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+the above line would cause
+nmbd
+to request the master browser on the specified subnets or addresses to synchronize their browse lists with the local server\&.
+.sp
+The IP addresses you choose would normally be the broadcast addresses of the remote networks, but can also be the IP addresses of known browse masters if your network config is that stable\&. If a machine IP address is given Samba makes NO attempt to validate that the remote machine is available, is listening, nor that it is in fact the browse master on its segment\&.
+.sp
+The
+\m[blue]\fBremote browse sync\fR\m[]
+may be used on networks where there is no WINS server, and may be used on disjoint networks where each network has its own WINS server\&.
+.sp
+Default:
+\fI\fIremote browse sync\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+rename user script (G)
+.PP
+.RS 4
+This is the full pathname to a script that will be run as root by
+\fBsmbd\fR(8)
+under special circumstances described below\&.
+.sp
+When a user with admin authority or SeAddUserPrivilege rights renames a user (e\&.g\&.: from the NT4 User Manager for Domains), this script will be run to rename the POSIX user\&. Two variables,
+%uold
+and
+%unew, will be substituted with the old and new usernames, respectively\&. The script should return 0 upon successful completion, and nonzero otherwise\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+The script has all responsibility to rename all the necessary data that is accessible in this posix method\&. This can mean different requirements for different backends\&. The tdbsam and smbpasswd backends will take care of the contents of their respective files, so the script is responsible only for changing the POSIX username, and other data that may required for your circumstances, such as home directory\&. Please also consider whether or not you need to rename the actual home directories themselves\&. The ldapsam backend will not make any changes, because of the potential issues with renaming the LDAP naming attribute\&. In this case the script is responsible for changing the attribute that samba uses (uid) for locating users, as well as any data that needs to change for other applications using the same directory\&.
+.sp .5v
+.RE
+Default:
+\fI\fIrename user script\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+require strong key (G)
+.PP
+.RS 4
+This option controls whether winbindd requires support for md5 strong key support for the netlogon secure channel\&.
+.sp
+The following flags will be required NETLOGON_NEG_STRONG_KEYS, NETLOGON_NEG_ARCFOUR and NETLOGON_NEG_AUTHENTICATED_RPC\&.
+.sp
+You can set this to no if some domain controllers only support des\&. This might allows weak crypto to be negotiated, may via downgrade attacks\&.
+.sp
+The behavior can be controlled per netbios domain by using \*(Aqrequire strong key:NETBIOSDOMAIN = no\*(Aq as option\&.
+.sp
+Note for active directory domain this option is hardcoded to \*(Aqyes\*(Aq
+.sp
+This option yields precedence to the
+\m[blue]\fBreject md5 servers\fR\m[]
+option\&.
+.sp
+This option takes precedence to the
+\m[blue]\fBclient schannel\fR\m[]
+option\&.
+.sp
+Default:
+\fI\fIrequire strong key\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+reset on zero vc (G)
+.PP
+.RS 4
+This boolean option controls whether an incoming SMB1 session setup should kill other connections coming from the same IP\&. This matches the default Windows 2003 behaviour\&. Setting this parameter to yes becomes necessary when you have a flaky network and windows decides to reconnect while the old connection still has files with share modes open\&. These files become inaccessible over the new connection\&. The client sends a zero VC on the new connection, and Windows 2003 kills all other connections coming from the same IP\&. This way the locked files are accessible again\&. Please be aware that enabling this option will kill connections behind a masquerading router, and will not trigger for clients that only use SMB2 or SMB3\&.
+.sp
+Default:
+\fI\fIreset on zero vc\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+restrict anonymous (G)
+.PP
+.RS 4
+The setting of this parameter determines whether SAMR and LSA DCERPC services can be accessed anonymously\&. This corresponds to the following Windows Server registry options:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		HKEY_LOCAL_MACHINE\eSYSTEM\eCurrentControlSet\eControl\eLsa\eRestrictAnonymous
+	
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+The option also affects the browse option which is required by legacy clients which rely on Netbios browsing\&. While modern Windows version should be fine with restricting the access there could still be applications relying on anonymous access\&.
+.sp
+Setting
+\m[blue]\fBrestrict anonymous = 1\fR\m[]
+will disable anonymous SAMR access\&.
+.sp
+Setting
+\m[blue]\fBrestrict anonymous = 2\fR\m[]
+will, in addition to restricting SAMR access, disallow anonymous connections to the IPC$ share in general\&. Setting
+\m[blue]\fBguest ok = yes\fR\m[]
+on any share will remove the security advantage\&.
+.sp
+Default:
+\fI\fIrestrict anonymous\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+root
+.PP
+.RS 4
+This parameter is a synonym for
+root directory\&.
+.RE
+
+root dir
+.PP
+.RS 4
+This parameter is a synonym for
+root directory\&.
+.RE
+
+root directory (G)
+.PP
+.RS 4
+The server will
+chroot()
+(i\&.e\&. Change its root directory) to this directory on startup\&. This is not strictly necessary for secure operation\&. Even without it the server will deny access to files not in one of the service entries\&. It may also check for, and deny access to, soft links to other parts of the filesystem, or attempts to use "\&.\&." in file names to access other directories (depending on the setting of the
+\m[blue]\fBwide smbconfoptions\fR\m[]
+parameter)\&.
+.sp
+Adding a
+\fIroot directory\fR
+entry other than "/" adds an extra level of security, but at a price\&. It absolutely ensures that no access is given to files not in the sub\-tree specified in the
+\fIroot directory\fR
+option,
+\fIincluding\fR
+some files needed for complete operation of the server\&. To maintain full operability of the server you will need to mirror some system files into the
+\fIroot directory\fR
+tree\&. In particular you will need to mirror
+/etc/passwd
+(or a subset of it), and any binaries or configuration files needed for printing (if required)\&. The set of files that must be mirrored is operating system dependent\&.
+.sp
+Default:
+\fI\fIroot directory\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIroot directory\fR\fR\fI = \fR\fI/homes/smb\fR\fI \fR
+.RE
+
+root postexec (S)
+.PP
+.RS 4
+This is the same as the
+\fIpostexec\fR
+parameter except that the command is run as root\&. This is useful for unmounting filesystems (such as CDROMs) after a connection is closed\&.
+.sp
+Default:
+\fI\fIroot postexec\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+root preexec (S)
+.PP
+.RS 4
+This is the same as the
+\fIpreexec\fR
+parameter except that the command is run as root\&. This is useful for mounting filesystems (such as CDROMs) when a connection is opened\&.
+.sp
+Default:
+\fI\fIroot preexec\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+root preexec close (S)
+.PP
+.RS 4
+This is the same as the
+\fIpreexec close \fR
+parameter except that the command is run as root\&.
+.sp
+Default:
+\fI\fIroot preexec close\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+rpc big endian (G)
+.PP
+.RS 4
+Setting this option will force the RPC client and server to transfer data in big endian\&.
+.sp
+If it is disabled, data will be transferred in little endian\&.
+.sp
+The behaviour is independent of the endianness of the host machine\&.
+.sp
+Default:
+\fI\fIrpc big endian\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+rpc_daemon:DAEMON (G)
+.PP
+.RS 4
+Defines whether to use the embedded code or start a separate daemon for the defined rpc services\&. The rpc_daemon prefix must be followed by the server name, and a value\&.
+.sp
+Two possible values are currently supported:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		disabled
+		fork
+	
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+The classic method is to run rpc services as internal daemons embedded in smbd, therefore the external daemons are
+\fIdisabled\fR
+by default\&.
+.sp
+Choosing the
+\fIfork\fR
+option will cause samba to fork a separate process for each daemon configured this way\&. Each daemon may in turn fork a number of children used to handle requests from multiple smbds and direct tcp/ip connections (if the Endpoint Mapper is enabled)\&. Communication with smbd happens over named pipes and require that said pipes are forward to the external daemon (see
+\m[blue]\fBrpc_server\fR\m[])\&.
+.sp
+Forked RPC Daemons support dynamically forking children to handle connections\&. The heuristics about how many children to keep around and how fast to allow them to fork and also how many clients each child is allowed to handle concurrently is defined by parametrical options named after the daemon\&. Five options are currently supported:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		prefork_min_children
+		prefork_max_children
+		prefork_spawn_rate
+		prefork_max_allowed_clients
+		prefork_child_min_life
+	
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+To set one of these options use the following syntax:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	daemonname:prefork_min_children = 5
+	
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Samba includes separate daemons for spoolss, lsarpc/lsass, netlogon, samr, FSRVP and mdssvc(Spotlight)\&. Currently five daemons are available and they are called:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		epmd
+		lsasd
+		spoolssd
+		fssd
+		mdssd
+	
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Example:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	rpc_daemon:spoolssd = fork
+	
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIrpc_daemon:DAEMON\fR\fR\fI = \fR\fIdisabled\fR\fI \fR
+.RE
+
+rpc_server:SERVER (G)
+.PP
+.RS 4
+With this option you can define if a rpc service should be running internal/embedded in smbd or should be redirected to an external daemon like Samba4, the endpoint mapper daemon, the spoolss daemon or the new LSA service daemon\&. The rpc_server prefix must be followed by the pipe name, and a value\&.
+.sp
+This option can be set for each available rpc service in Samba\&. The following list shows all available pipe names services you can modify with this option\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+epmapper \- Endpoint Mapper
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+winreg \- Remote Registry Service
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+srvsvc \- Remote Server Services
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+lsarpc \- Local Security Authority
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+samr \- Security Account Management
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+netlogon \- Netlogon Remote Protocol
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+netdfs \- Settings for Distributed File System
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+dssetup \- Active Directory Setup
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+wkssvc \- Workstation Services
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+spoolss \- Network Printing Spooler
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+svcctl \- Service Control
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ntsvcs \- Plug and Play Services
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+eventlog \- Event Logger
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+initshutdown \- Init Shutdown Service
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+mdssvc \- Spotlight
+.RE
+.sp
+.RE
+Three possible values currently supported are:
+embedded
+external
+disabled
+.sp
+The classic method is to run every pipe as an internal function
+\fIembedded\fR
+in smbd\&. The defaults may vary depending on the service\&.
+.sp
+Choosing the
+\fIexternal\fR
+option allows one to run a separate daemon or even a completely independent (3rd party) server capable of interfacing with samba via the MS\-RPC interface over named pipes\&.
+.sp
+Currently in Samba3 we support four daemons, spoolssd, epmd, lsasd and mdssd\&. These daemons can be enabled using the
+\fIrpc_daemon\fR
+option\&. For spoolssd you have to enable the daemon and proxy the named pipe with:
+.sp
+Examples:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+			rpc_daemon:lsasd = fork
+			rpc_server:lsarpc = external
+			rpc_server:samr = external
+			rpc_server:netlogon = external
+
+			rpc_server:spoolss = external
+			rpc_server:epmapper = disabled
+
+			rpc_daemon:mdssd = fork
+			rpc_server:mdssvc = external
+		
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+There is one special option which allows you to enable rpc services to listen for ncacn_ip_tcp connections too\&. Currently this is only used for testing and doesn\*(Aqt scale!
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+			rpc_server:tcpip = yes
+		
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIrpc_server:SERVER\fR\fR\fI = \fR\fIembedded\fR\fI \fR
+.RE
+
+rpc server dynamic port range (G)
+.PP
+.RS 4
+This parameter tells the RPC server which port range it is allowed to use to create a listening socket for LSA, SAM, Netlogon and others without wellknown tcp ports\&. The first value is the lowest number of the port range and the second the highest\&.
+.sp
+This applies to RPC servers in all server roles\&.
+.sp
+Default:
+\fI\fIrpc server dynamic port range\fR\fR\fI = \fR\fI49152\-65535\fR\fI \fR
+.RE
+
+rpc server port (G)
+.PP
+.RS 4
+Specifies which port the server should listen on for DCE/RPC over TCP/IP traffic\&.
+.sp
+This controls the default port for all protocols, except for NETLOGON\&.
+.sp
+If unset, the first available port from
+\m[blue]\fBrpc server dynamic port range\fR\m[]
+is used, e\&.g\&. 49152\&.
+.sp
+The NETLOGON server will use the next available port, e\&.g\&. 49153\&. To change this port use (eg) rpc server port:netlogon = 4000\&.
+.sp
+Furthermore, all RPC servers can have the port they use specified independenty, with (for example) rpc server port:drsuapi = 5000\&.
+.sp
+This option applies currently only when
+\fBsamba\fR(8)
+runs as an active directory domain controller\&.
+.sp
+The default value 0 causes Samba to select the first available port from
+\m[blue]\fBrpc server dynamic port range\fR\m[]\&.
+.sp
+Default:
+\fI\fIrpc server port\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+samba kcc command (G)
+.PP
+.RS 4
+This option specifies the path to the Samba KCC command\&. This script is used for replication topology replication\&.
+.sp
+It should not be necessary to modify this option except for testing purposes or if the
+samba_kcc
+was installed in a non\-default location\&.
+.sp
+Default:
+\fI\fIsamba kcc command\fR\fR\fI = \fR\fI${prefix}/sbin/samba_kcc\fR\fI \fR
+.sp
+Example:
+\fI\fIsamba kcc command\fR\fR\fI = \fR\fI/usr/local/bin/kcc\fR\fI \fR
+.RE
+
+security (G)
+.PP
+.RS 4
+This option affects how clients respond to Samba and is one of the most important settings in the
+smb\&.conf
+file\&.
+.sp
+The default is
+security = user, as this is the most common setting, used for a standalone file server or a DC\&.
+.sp
+The alternatives are
+security = ads
+or
+security = domain, which support joining Samba to a Windows domain
+.sp
+You should use
+security = user
+and
+\m[blue]\fBmap to guest\fR\m[]
+if you want to mainly setup shares without a password (guest shares)\&. This is commonly used for a shared printer server\&.
+.sp
+The different settings will now be explained\&.
+.sp
+\fISECURITY = AUTO\fR
+.sp
+This is the default security setting in Samba, and causes Samba to consult the
+\m[blue]\fBserver role\fR\m[]
+parameter (if set) to determine the security mode\&.
+.sp
+\fISECURITY = USER\fR
+.sp
+If
+\m[blue]\fBserver role\fR\m[]
+is not specified, this is the default security setting in Samba\&. With user\-level security a client must first "log\-on" with a valid username and password (which can be mapped using the
+\m[blue]\fBusername map\fR\m[]
+parameter)\&. Encrypted passwords (see the
+\m[blue]\fBencrypted passwords\fR\m[]
+parameter) can also be used in this security mode\&. Parameters such as
+\m[blue]\fBuser\fR\m[]
+and
+\m[blue]\fBguest only\fR\m[]
+if set are then applied and may change the UNIX user to use on this connection, but only after the user has been successfully authenticated\&.
+.sp
+\fINote\fR
+that the name of the resource being requested is
+\fInot\fR
+sent to the server until after the server has successfully authenticated the client\&. This is why guest shares don\*(Aqt work in user level security without allowing the server to automatically map unknown users into the
+\m[blue]\fBguest account\fR\m[]\&. See the
+\m[blue]\fBmap to guest\fR\m[]
+parameter for details on doing this\&.
+.sp
+\fISECURITY = DOMAIN\fR
+.sp
+This mode will only work correctly if
+\fBnet\fR(8)
+has been used to add this machine into a Windows NT Domain\&. It expects the
+\m[blue]\fBencrypted passwords\fR\m[]
+parameter to be set to
+\fByes\fR\&. In this mode Samba will try to validate the username/password by passing it to a Windows NT Primary or Backup Domain Controller, in exactly the same way that a Windows NT Server would do\&.
+.sp
+\fINote\fR
+that a valid UNIX user must still exist as well as the account on the Domain Controller to allow Samba to have a valid UNIX account to map file access to\&.
+.sp
+\fINote\fR
+that from the client\*(Aqs point of view
+security = domain
+is the same as
+security = user\&. It only affects how the server deals with the authentication, it does not in any way affect what the client sees\&.
+.sp
+\fINote\fR
+that the name of the resource being requested is
+\fInot\fR
+sent to the server until after the server has successfully authenticated the client\&. This is why guest shares don\*(Aqt work in user level security without allowing the server to automatically map unknown users into the
+\m[blue]\fBguest account\fR\m[]\&. See the
+\m[blue]\fBmap to guest\fR\m[]
+parameter for details on doing this\&.
+.sp
+See also the
+\m[blue]\fBpassword server\fR\m[]
+parameter and the
+\m[blue]\fBencrypted passwords\fR\m[]
+parameter\&.
+.sp
+\fISECURITY = ADS\fR
+.sp
+In this mode, Samba will act as a domain member in an ADS realm\&. To operate in this mode, the machine running Samba will need to have Kerberos installed and configured and Samba will need to be joined to the ADS realm using the net utility\&.
+.sp
+Note that this mode does NOT make Samba operate as a Active Directory Domain Controller\&.
+.sp
+Note that this forces
+\m[blue]\fBrequire strong key = yes\fR\m[]
+and
+\m[blue]\fBclient schannel = yes\fR\m[]
+for the primary domain\&.
+.sp
+Read the chapter about Domain Membership in the HOWTO for details\&.
+.sp
+Default:
+\fI\fIsecurity\fR\fR\fI = \fR\fIAUTO\fR\fI \fR
+.sp
+Example:
+\fI\fIsecurity\fR\fR\fI = \fR\fIDOMAIN\fR\fI \fR
+.RE
+
+security mask (S)
+.PP
+.RS 4
+This parameter has been removed for Samba 4\&.0\&.0\&.
+.sp
+\fINo default\fR
+.RE
+
+max protocol
+.PP
+.RS 4
+This parameter is a synonym for
+server max protocol\&.
+.RE
+
+protocol
+.PP
+.RS 4
+This parameter is a synonym for
+server max protocol\&.
+.RE
+
+server max protocol (G)
+.PP
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported by the server\&.
+.sp
+Possible values are :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBLANMAN1\fR: First
+\fImodern\fR
+version of the protocol\&. Long filename support\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBLANMAN2\fR: Updates to Lanman1 protocol\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBNT1\fR: Current up to date version of the protocol\&. Used by Windows NT\&. Known as CIFS\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB2\fR: Re\-implementation of the SMB protocol\&. Used by Windows Vista and later versions of Windows\&. SMB2 has sub protocols available\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB2_02\fR: The earliest SMB2 version\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB2_10\fR: Windows 7 SMB2 version\&.
+.RE
+.sp
+.RE
+By default SMB2 selects the SMB2_10 variant\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB3\fR: The same as SMB2\&. Used by Windows 8\&. SMB3 has sub protocols available\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB3_00\fR: Windows 8 SMB3 version\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB3_02\fR: Windows 8\&.1 SMB3 version\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBSMB3_11\fR: Windows 10 SMB3 version\&.
+.RE
+.sp
+.RE
+By default SMB3 selects the SMB3_11 variant\&.
+.RE
+.sp
+.RE
+Normally this option should not be set as the automatic negotiation phase in the SMB protocol takes care of choosing the appropriate protocol\&.
+.sp
+Default:
+\fI\fIserver max protocol\fR\fR\fI = \fR\fISMB3\fR\fI \fR
+.sp
+Example:
+\fI\fIserver max protocol\fR\fR\fI = \fR\fILANMAN1\fR\fI \fR
+.RE
+
+min protocol
+.PP
+.RS 4
+This parameter is a synonym for
+server min protocol\&.
+.RE
+
+server min protocol (G)
+.PP
+.RS 4
+This setting controls the minimum protocol version that the server will allow the client to use\&.
+.sp
+Normally this option should not be set as the automatic negotiation phase in the SMB protocol takes care of choosing the appropriate protocol unless you have legacy clients which are SMB1 capable only\&.
+.sp
+See
+Related command: \m[blue]\fBserver max protocol\fR\m[]
+for a full list of available protocols\&.
+.sp
+Default:
+\fI\fIserver min protocol\fR\fR\fI = \fR\fISMB2_02\fR\fI \fR
+.sp
+Example:
+\fI\fIserver min protocol\fR\fR\fI = \fR\fINT1\fR\fI \fR
+.RE
+
+server multi channel support (G)
+.PP
+.RS 4
+This boolean parameter controls whether
+\fBsmbd\fR(8)
+will support SMB3 multi\-channel\&.
+.sp
+This parameter was added with version 4\&.4\&.
+.sp
+Note that this feature was still considered experimental up to 4\&.14\&.
+.sp
+Due to dependencies to kernel APIs of Linux or FreeBSD, it\*(Aqs only possible to use this feature on Linux and FreeBSD for now\&. For testing this restriction can be overwritten by specifying
+\fBforce:server multi channel support=yes\fR
+in addition\&.
+.sp
+This option is enabled by default starting with to 4\&.15 (on Linux and FreeBSD)\&.
+.sp
+Default:
+\fI\fIserver multi channel support\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+server role (G)
+.PP
+.RS 4
+This option determines the basic operating mode of a Samba server and is one of the most important settings in the
+smb\&.conf
+file\&.
+.sp
+The default is
+server role = auto, as causes Samba to operate according to the
+\m[blue]\fBsecurity\fR\m[]
+setting, or if not specified as a simple file server that is not connected to any domain\&.
+.sp
+The alternatives are
+server role = standalone
+or
+server role = member server, which support joining Samba to a Windows domain, along with
+server role = domain controller, which run Samba as a Windows domain controller\&.
+.sp
+You should use
+server role = standalone
+and
+\m[blue]\fBmap to guest\fR\m[]
+if you want to mainly setup shares without a password (guest shares)\&. This is commonly used for a shared printer server\&.
+.sp
+\fISERVER ROLE = AUTO\fR
+.sp
+This is the default server role in Samba, and causes Samba to consult the
+\m[blue]\fBsecurity\fR\m[]
+parameter (if set) to determine the server role, giving compatible behaviours to previous Samba versions\&.
+.sp
+\fISERVER ROLE = STANDALONE\fR
+.sp
+If
+\m[blue]\fBsecurity\fR\m[]
+is also not specified, this is the default security setting in Samba\&. In standalone operation, a client must first "log\-on" with a valid username and password (which can be mapped using the
+\m[blue]\fBusername map\fR\m[]
+parameter) stored on this machine\&. Encrypted passwords (see the
+\m[blue]\fBencrypted passwords\fR\m[]
+parameter) are by default used in this security mode\&. Parameters such as
+\m[blue]\fBuser\fR\m[]
+and
+\m[blue]\fBguest only\fR\m[]
+if set are then applied and may change the UNIX user to use on this connection, but only after the user has been successfully authenticated\&.
+.sp
+\fISERVER ROLE = MEMBER SERVER\fR
+.sp
+This mode will only work correctly if
+\fBnet\fR(8)
+has been used to add this machine into a Windows Domain\&. It expects the
+\m[blue]\fBencrypted passwords\fR\m[]
+parameter to be set to
+\fByes\fR\&. In this mode Samba will try to validate the username/password by passing it to a Windows or Samba Domain Controller, in exactly the same way that a Windows Server would do\&.
+.sp
+\fINote\fR
+that a valid UNIX user must still exist as well as the account on the Domain Controller to allow Samba to have a valid UNIX account to map file access to\&. Winbind can provide this\&.
+.sp
+\fISERVER ROLE = CLASSIC PRIMARY DOMAIN CONTROLLER\fR
+.sp
+This mode of operation runs a classic Samba primary domain controller, providing domain logon services to Windows and Samba clients of an NT4\-like domain\&. Clients must be joined to the domain to create a secure, trusted path across the network\&. There must be only one PDC per NetBIOS scope (typcially a broadcast network or clients served by a single WINS server)\&.
+.sp
+\fISERVER ROLE = CLASSIC BACKUP DOMAIN CONTROLLER\fR
+.sp
+This mode of operation runs a classic Samba backup domain controller, providing domain logon services to Windows and Samba clients of an NT4\-like domain\&. As a BDC, this allows multiple Samba servers to provide redundant logon services to a single NetBIOS scope\&.
+.sp
+\fISERVER ROLE = ACTIVE DIRECTORY DOMAIN CONTROLLER\fR
+.sp
+This mode of operation runs Samba as an active directory domain controller, providing domain logon services to Windows and Samba clients of the domain\&. This role requires special configuration, see the
+Samba4 HOWTO
+.sp
+Default:
+\fI\fIserver role\fR\fR\fI = \fR\fIAUTO\fR\fI \fR
+.sp
+Example:
+\fI\fIserver role\fR\fR\fI = \fR\fIACTIVE DIRECTORY DOMAIN CONTROLLER\fR\fI \fR
+.RE
+
+server schannel (G)
+.PP
+.RS 4
+This option is deprecated and will be removed in future, as it is a security problem if not set to "yes" (which will be the hardcoded behavior in future)\&.
+.sp
+Samba will complain in the log files at log level 0, about the security problem if the option is not set to "yes"\&.
+.sp
+See CVE\-2020\-1472(ZeroLogon) https://bugzilla\&.samba\&.org/show_bug\&.cgi?id=14497
+.sp
+If you still have legacy domain members use the
+\m[blue]\fBserver require schannel:COMPUTERACCOUNT\fR\m[]
+option\&.
+.sp
+This option yields precedence to the
+\m[blue]\fBserver require schannel:COMPUTERACCOUNT\fR\m[]
+option\&.
+.sp
+Default:
+\fI\fIserver schannel\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+server require schannel:COMPUTERACCOUNT (G)
+.PP
+.RS 4
+If you still have legacy domain members, which required "server schannel = auto" before, it is possible to specify explicit expection per computer account by using \*(Aqserver require schannel:COMPUTERACCOUNT = no\*(Aq as option\&. Note that COMPUTERACCOUNT has to be the sAMAccountName value of the computer account (including the trailing \*(Aq$\*(Aq sign)\&.
+.sp
+Samba will complain in the log files at log level 0, about the security problem if the option is not set to "no", but the related computer is actually using the netlogon secure channel (schannel) feature\&.
+.sp
+Samba will warn in the log files at log level 5, if a setting is still needed for the specified computer account\&.
+.sp
+See CVE\-2020\-1472(ZeroLogon) https://bugzilla\&.samba\&.org/show_bug\&.cgi?id=14497
+.sp
+This option takes precedence to the
+\m[blue]\fBserver schannel\fR\m[]
+option\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	server require schannel:LEGACYCOMPUTER1$ = no
+	server require schannel:NASBOX$ = no
+	server require schannel:LEGACYCOMPUTER2$ = no
+    
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+\fINo default\fR
+.RE
+
+server services (G)
+.PP
+.RS 4
+This option contains the services that the Samba daemon will run\&.
+.sp
+An entry in the
+smb\&.conf
+file can either override the previous value completely or entries can be removed from or added to it by prefixing them with
+\fB+\fR
+or
+\fB\-\fR\&.
+.sp
+Default:
+\fI\fIserver services\fR\fR\fI = \fR\fIs3fs, rpc, nbt, wrepl, ldap, cldap, kdc, drepl, winbindd, ntp_signd, kcc, dnsupdate, dns\fR\fI \fR
+.sp
+Example:
+\fI\fIserver services\fR\fR\fI = \fR\fI\-s3fs, +smb\fR\fI \fR
+.RE
+
+server signing (G)
+.PP
+.RS 4
+This controls whether the client is allowed or required to use SMB1 and SMB2 signing\&. Possible values are
+\fIdefault\fR,
+\fIauto\fR,
+\fImandatory\fR
+and
+\fIdisabled\fR\&.
+.sp
+By default, and when smb signing is set to
+\fIdefault\fR, smb signing is required when
+\m[blue]\fBserver role\fR\m[]
+is
+\fIactive directory domain controller\fR
+and disabled otherwise\&.
+.sp
+When set to auto, SMB1 signing is offered, but not enforced\&. When set to mandatory, SMB1 signing is required and if set to disabled, SMB signing is not offered either\&.
+.sp
+For the SMB2 protocol, by design, signing cannot be disabled\&. In the case where SMB2 is negotiated, if this parameter is set to
+\fIdisabled\fR, it will be treated as
+\fIauto\fR\&. Setting it to
+\fImandatory\fR
+will still require SMB2 clients to use signing\&.
+.sp
+Default:
+\fI\fIserver signing\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.RE
+
+server smb encrypt (S)
+.PP
+.RS 4
+This parameter controls whether a remote client is allowed or required to use SMB encryption\&. It has different effects depending on whether the connection uses SMB1 or SMB2 and newer:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+If the connection uses SMB1, then this option controls the use of a Samba\-specific extension to the SMB protocol introduced in Samba 3\&.2 that makes use of the Unix extensions\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+If the connection uses SMB2 or newer, then this option controls the use of the SMB\-level encryption that is supported in SMB version 3\&.0 and above and available in Windows 8 and newer\&.
+.RE
+.sp
+.RE
+This parameter can be set globally and on a per\-share bases\&. Possible values are
+\fIoff\fR,
+\fIif_required\fR,
+\fIdesired\fR, and
+\fIrequired\fR\&. A special value is
+\fIdefault\fR
+which is the implicit default setting of
+\fIif_required\fR\&.
+.PP
+\fIEffects for SMB1\fR
+.RS 4
+The Samba\-specific encryption of SMB1 connections is an extension to the SMB protocol negotiated as part of the UNIX extensions\&. SMB encryption uses the GSSAPI (SSPI on Windows) ability to encrypt and sign every request/response in a SMB protocol stream\&. When enabled it provides a secure method of SMB/CIFS communication, similar to an ssh protected session, but using SMB/CIFS authentication to negotiate encryption and signing keys\&. Currently this is only supported smbclient of by Samba 3\&.2 and newer, and hopefully soon Linux CIFSFS and MacOS/X clients\&. Windows clients do not support this feature\&.
+.sp
+This may be set on a per\-share basis, but clients may chose to encrypt the entire session, not just traffic to a specific share\&. If this is set to mandatory then all traffic to a share
+\fImust\fR
+be encrypted once the connection has been made to the share\&. The server would return "access denied" to all non\-encrypted requests on such a share\&. Selecting encrypted traffic reduces throughput as smaller packet sizes must be used (no huge UNIX style read/writes allowed) as well as the overhead of encrypting and signing all the data\&.
+.sp
+If SMB encryption is selected, Windows style SMB signing (see the
+\m[blue]\fBserver signing\fR\m[]
+option) is no longer necessary, as the GSSAPI flags use select both signing and sealing of the data\&.
+.sp
+When set to auto or default, SMB encryption is offered, but not enforced\&. When set to mandatory, SMB encryption is required and if set to disabled, SMB encryption can not be negotiated\&.
+.RE
+.PP
+\fIEffects for SMB2 and newer\fR
+.RS 4
+Native SMB transport encryption is available in SMB version 3\&.0 or newer\&. It is only offered by Samba if
+\fIserver max protocol\fR
+is set to
+\fISMB3\fR
+or newer\&. Clients supporting this type of encryption include Windows 8 and newer, Windows server 2012 and newer, and smbclient of Samba 4\&.1 and newer\&.
+.sp
+The protocol implementation offers various options:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The capability to perform SMB encryption can be negotiated during protocol negotiation\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Data encryption can be enabled globally\&. In that case, an encryption\-capable connection will have all traffic in all its sessions encrypted\&. In particular all share connections will be encrypted\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Data encryption can also be enabled per share if not enabled globally\&. For an encryption\-capable connection, all connections to an encryption\-enabled share will be encrypted\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Encryption can be enforced\&. This means that session setups will be denied on non\-encryption\-capable connections if data encryption has been enabled globally\&. And tree connections will be denied for non\-encryption capable connections to shares with data encryption enabled\&.
+.RE
+.sp
+.RE
+These features can be controlled with settings of
+\fIserver smb encrypt\fR
+as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Leaving it as default, explicitly setting
+\fIdefault\fR, or setting it to
+\fIif_required\fR
+globally will enable negotiation of encryption but will not turn on data encryption globally or per share\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Setting it to
+\fIdesired\fR
+globally will enable negotiation and will turn on data encryption on sessions and share connections for those clients that support it\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Setting it to
+\fIrequired\fR
+globally will enable negotiation and turn on data encryption on sessions and share connections\&. Clients that do not support encryption will be denied access to the server\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Setting it to
+\fIoff\fR
+globally will completely disable the encryption feature for all connections\&. Setting
+\fIserver smb encrypt = required\fR
+for individual shares (while it\*(Aqs globally off) will deny access to this shares for all clients\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Setting it to
+\fIdesired\fR
+on a share will turn on data encryption for this share for clients that support encryption if negotiation has been enabled globally\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Setting it to
+\fIrequired\fR
+on a share will enforce data encryption for this share if negotiation has been enabled globally\&. I\&.e\&. clients that do not support encryption will be denied access to the share\&.
+.sp
+Note that this allows per\-share enforcing to be controlled in Samba differently from Windows: In Windows,
+\fIRejectUnencryptedAccess\fR
+is a global setting, and if it is set, all shares with data encryption turned on are automatically enforcing encryption\&. In order to achieve the same effect in Samba, one has to globally set
+\fIserver smb encrypt\fR
+to
+\fIif_required\fR, and then set all shares that should be encrypted to
+\fIrequired\fR\&. Additionally, it is possible in Samba to have some shares with encryption
+\fIrequired\fR
+and some other shares with encryption only
+\fIdesired\fR, which is not possible in Windows\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Setting it to
+\fIoff\fR
+or
+\fIif_required\fR
+for a share has no effect\&.
+.RE
+.sp
+.RE
+.RE
+.sp
+Default:
+\fI\fIserver smb encrypt\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.RE
+
+server smb3 encryption algorithms (G)
+.PP
+.RS 4
+This parameter specifies the availability and order of encryption algorithms which are available for negotiation in the SMB3_11 dialect\&.
+.sp
+It is also possible to remove individual algorithms from the default list, by prefixing them with \*(Aq\-\*(Aq\&. This can avoid having to specify a hardcoded list\&.
+.sp
+Note: that the removal of AES\-128\-CCM from the list will result in SMB3_00 and SMB3_02 being unavailable, as it is the default and only available algorithm for these dialects\&.
+.sp
+Default:
+\fI\fIserver smb3 encryption algorithms\fR\fR\fI = \fR\fIAES\-128\-GCM, AES\-128\-CCM, AES\-256\-GCM, AES\-256\-CCM\fR\fI \fR
+.sp
+Example:
+\fI\fIserver smb3 encryption algorithms\fR\fR\fI = \fR\fIAES\-256\-GCM\fR\fI \fR
+.sp
+Example:
+\fI\fIserver smb3 encryption algorithms\fR\fR\fI = \fR\fI\-AES\-128\-GCM \-AES\-128\-CCM\fR\fI \fR
+.RE
+
+server smb3 signing algorithms (G)
+.PP
+.RS 4
+This parameter specifies the availability and order of signing algorithms which are available for negotiation in the SMB3_11 dialect\&.
+.sp
+It is also possible to remove individual algorithms from the default list, by prefixing them with \*(Aq\-\*(Aq\&. This can avoid having to specify a hardcoded list\&.
+.sp
+Note: that the removal of AES\-128\-CMAC from the list will result in SMB3_00 and SMB3_02 being unavailable, and the removal of HMAC\-SHA256 will result in SMB2_02 and SMB2_10 being unavailable, as these are the default and only available algorithms for these dialects\&.
+.sp
+Default:
+\fI\fIserver smb3 signing algorithms\fR\fR\fI = \fR\fIAES\-128\-GMAC, AES\-128\-CMAC, HMAC\-SHA256\fR\fI \fR
+.sp
+Example:
+\fI\fIserver smb3 signing algorithms\fR\fR\fI = \fR\fIAES\-128\-CMAC, HMAC\-SHA256\fR\fI \fR
+.sp
+Example:
+\fI\fIserver smb3 signing algorithms\fR\fR\fI = \fR\fI\-AES\-128\-CMAC\fR\fI \fR
+.RE
+
+server string (G)
+.PP
+.RS 4
+This controls what string will show up in the printer comment box in print manager and next to the IPC connection in
+net view\&. It can be any string that you wish to show to your users\&.
+.sp
+It also sets what will appear in browse lists next to the machine name\&.
+.sp
+A
+\fI%v\fR
+will be replaced with the Samba version number\&.
+.sp
+A
+\fI%h\fR
+will be replaced with the hostname\&.
+.sp
+Default:
+\fI\fIserver string\fR\fR\fI = \fR\fISamba %v\fR\fI \fR
+.sp
+Example:
+\fI\fIserver string\fR\fR\fI = \fR\fIUniversity of GNUs Samba Server\fR\fI \fR
+.RE
+
+set primary group script (G)
+.PP
+.RS 4
+Thanks to the Posix subsystem in NT a Windows User has a primary group in addition to the auxiliary groups\&. This script sets the primary group in the unix user database when an administrator sets the primary group from the windows user manager or when fetching a SAM with
+net rpc vampire\&.
+\fI%u\fR
+will be replaced with the user whose primary group is to be set\&.
+\fI%g\fR
+will be replaced with the group to set\&.
+.sp
+Default:
+\fI\fIset primary group script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIset primary group script\fR\fR\fI = \fR\fI/usr/sbin/usermod \-g \*(Aq%g\*(Aq \*(Aq%u\*(Aq\fR\fI \fR
+.RE
+
+set quota command (G)
+.PP
+.RS 4
+The
+set quota command
+should only be used whenever there is no operating system API available from the OS that samba can use\&.
+.sp
+This option is only available if Samba was compiled with quota support\&.
+.sp
+This parameter should specify the path to a script that can set quota for the specified arguments\&.
+.sp
+The specified script should take the following arguments:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+1 \- path to where the quota needs to be set\&. This needs to be interpreted relative to the current working directory that the script may also check for\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+2 \- quota type
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+1 \- user quotas
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+2 \- user default quotas (uid = \-1)
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+3 \- group quotas
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+4 \- group default quotas (gid = \-1)
+.RE
+.sp
+.RE
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+3 \- id (uid for user, gid for group, \-1 if N/A)
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+4 \- quota state (0 = disable, 1 = enable, 2 = enable and enforce)
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+5 \- block softlimit
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+6 \- block hardlimit
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+7 \- inode softlimit
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+8 \- inode hardlimit
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+9(optional) \- block size, defaults to 1024
+.RE
+.sp
+.RE
+The script should output at least one line of data on success\&. And nothing on failure\&.
+.sp
+Default:
+\fI\fIset quota command\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIset quota command\fR\fR\fI = \fR\fI/usr/local/sbin/set_quota\fR\fI \fR
+.RE
+
+share:fake_fscaps (G)
+.PP
+.RS 4
+This is needed to support some special application that makes QFSINFO calls to check whether we set the SPARSE_FILES bit (0x40)\&. If this bit is not set that particular application refuses to work against Samba\&. With
+\m[blue]\fBshare:fake_fscaps = 64\fR\m[]
+the SPARSE_FILES file system capability flag is set\&. Use other decimal values to specify the bitmask you need to fake\&.
+.sp
+Default:
+\fI\fIshare:fake_fscaps\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+short preserve case (S)
+.PP
+.RS 4
+This boolean parameter controls if new files which conform to 8\&.3 syntax, that is all in upper case and of suitable length, are created upper case, or if they are forced to be the
+\m[blue]\fBdefault case\fR\m[]\&. This option can be use with
+\m[blue]\fBpreserve case = yes\fR\m[]
+to permit long filenames to retain their case, while short names are lowered\&.
+.sp
+See the section on
+NAME MANGLING\&.
+.sp
+Default:
+\fI\fIshort preserve case\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+show add printer wizard (G)
+.PP
+.RS 4
+With the introduction of MS\-RPC based printing support for Windows NT/2000 client in Samba 2\&.2, a "Printers\&.\&.\&." folder will appear on Samba hosts in the share listing\&. Normally this folder will contain an icon for the MS Add Printer Wizard (APW)\&. However, it is possible to disable this feature regardless of the level of privilege of the connected user\&.
+.sp
+Under normal circumstances, the Windows NT/2000 client will open a handle on the printer server with OpenPrinterEx() asking for Administrator privileges\&. If the user does not have administrative access on the print server (i\&.e is not root or has granted the SePrintOperatorPrivilege), the OpenPrinterEx() call fails and the client makes another open call with a request for a lower privilege level\&. This should succeed, however the APW icon will not be displayed\&.
+.sp
+Disabling the
+\fIshow add printer wizard\fR
+parameter will always cause the OpenPrinterEx() on the server to fail\&. Thus the APW icon will never be displayed\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+This does not prevent the same user from having administrative privilege on an individual printer\&.
+.sp .5v
+.RE
+Default:
+\fI\fIshow add printer wizard\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+shutdown script (G)
+.PP
+.RS 4
+This a full path name to a script called by
+\fBsmbd\fR(8)
+that should start a shutdown procedure\&.
+.sp
+If the connected user possesses the
+\fBSeRemoteShutdownPrivilege\fR, right, this command will be run as root\&.
+.sp
+The %z %t %r %f variables are expanded as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI%z\fR
+will be substituted with the shutdown message sent to the server\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI%t\fR
+will be substituted with the number of seconds to wait before effectively starting the shutdown procedure\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI%r\fR
+will be substituted with the switch
+\fI\-r\fR\&. It means reboot after shutdown for NT\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI%f\fR
+will be substituted with the switch
+\fI\-f\fR\&. It means force the shutdown even if applications do not respond for NT\&.
+.RE
+.sp
+.RE
+Shutdown script example:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+#!/bin/bash
+
+time=$2
+let time="${time} / 60"
+let time="${time} + 1"
+
+/sbin/shutdown $3 $4 +$time $1 &
+
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Shutdown does not return so we need to launch it in background\&.
+.sp
+Default:
+\fI\fIshutdown script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIshutdown script\fR\fR\fI = \fR\fI/usr/local/samba/sbin/shutdown %m %t %r %f\fR\fI \fR
+.RE
+
+smb2 disable lock sequence checking (G)
+.PP
+.RS 4
+This boolean parameter controls whether
+\fBsmbd\fR(8)
+will disable lock sequence checking even for multi\-channel connections as well as durable handles\&.
+.sp
+The [MS\-SMB2] specification (under 3\&.3\&.5\&.14 Receiving an SMB2 LOCK Request) documents that a server should do lock sequence if Open\&.IsResilient or Open\&.IsDurable or Open\&.IsPersistent is TRUE or if Connection\&.Dialect belongs to the SMB 3\&.x dialect family and Connection\&.ServerCapabilities includes SMB2_GLOBAL_CAP_MULTI_CHANNEL\&.
+.sp
+But Windows Server (at least up to v2004) only does these checks for the Open\&.IsResilient and Open\&.IsPersistent\&. That means they do not implement the behavior specified in [MS\-SMB2]\&.
+.sp
+By default Samba behaves according to the specification and implements lock sequence checking when multi\-channel is used\&.
+.sp
+Warning: Only enable this option if existing clients can\*(Aqt handle lock sequence checking for handles without Open\&.IsResilient and Open\&.IsPersistent\&. And it turns out that the Windows Server behavior is required\&.
+.sp
+Note: it\*(Aqs likely that this option will be removed again if future Windows versions change their behavior\&.
+.sp
+Note: Samba does not implement Open\&.IsResilient and Open\&.IsPersistent yet\&.
+.sp
+Default:
+\fI\fIsmb2 disable lock sequence checking\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIsmb2 disable lock sequence checking\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+smb2 disable oplock break retry (G)
+.PP
+.RS 4
+This boolean parameter controls whether
+\fBsmbd\fR(8)
+will trigger smb2 oplock break notification retries when using
+\m[blue]\fBserver multi channel support = yes\fR\m[]\&.
+.sp
+The [MS\-SMB2] specification documents that a server should send smb2 oplock break notification retries on all available channel to the given client\&.
+.sp
+But Windows Server versions (at least up to 2019) do not send smb2 oplock break notification retries on channel failures\&. That means they do not implement the behavior specified in [MS\-SMB2]\&.
+.sp
+By default Samba behaves according to the specification and send smb2 oplock break notification retries\&.
+.sp
+Warning: Only enable this option if existing clients can\*(Aqt handle possible retries and it turns out that the Windows Server behavior is required\&.
+.sp
+Note: it\*(Aqs likely that this option gets removed again if future Windows versions change their behavior\&.
+.sp
+Note: this only applies to oplocks and not SMB2 leases\&.
+.sp
+Default:
+\fI\fIsmb2 disable oplock break retry\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIsmb2 disable oplock break retry\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+smb2 leases (G)
+.PP
+.RS 4
+This boolean option tells
+smbd
+whether to globally negotiate SMB2 leases on file open requests\&. Leasing is an SMB2\-only feature which allows clients to aggressively cache files locally above and beyond the caching allowed by SMB1 oplocks\&.
+.sp
+This is only available with
+\m[blue]\fBoplocks = yes\fR\m[]
+and
+\m[blue]\fBkernel oplocks = no\fR\m[]\&.
+.sp
+Note that the write cache won\*(Aqt be used for file handles with a smb2 write lease\&.
+.sp
+Default:
+\fI\fIsmb2 leases\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+smb2 max credits (G)
+.PP
+.RS 4
+This option controls the maximum number of outstanding simultaneous SMB2 operations that Samba tells the client it will allow\&. This is similar to the
+\m[blue]\fBmax mux\fR\m[]
+parameter for SMB1\&. You should never need to set this parameter\&.
+.sp
+The default is 8192 credits, which is the same as a Windows 2008R2 SMB2 server\&.
+.sp
+Default:
+\fI\fIsmb2 max credits\fR\fR\fI = \fR\fI8192\fR\fI \fR
+.RE
+
+smb2 max read (G)
+.PP
+.RS 4
+This option specifies the protocol value that
+\fBsmbd\fR(8)
+will return to a client, informing the client of the largest size that may be returned by a single SMB2 read call\&.
+.sp
+The maximum is 8388608 bytes (8MiB), which is the same as a Windows Server 2012 r2\&.
+.sp
+Please note that the default is 8MiB, but it\*(Aqs limit is based on the smb2 dialect (64KiB for SMB == 2\&.0, 8MiB for SMB >= 2\&.1 with LargeMTU)\&. Large MTU is not supported over NBT (tcp port 139)\&.
+.sp
+Default:
+\fI\fIsmb2 max read\fR\fR\fI = \fR\fI8388608\fR\fI \fR
+.RE
+
+smb2 max trans (G)
+.PP
+.RS 4
+This option specifies the protocol value that
+\fBsmbd\fR(8)
+will return to a client, informing the client of the largest size of buffer that may be used in querying file meta\-data via QUERY_INFO and related SMB2 calls\&.
+.sp
+The maximum is 8388608 bytes (8MiB), which is the same as a Windows Server 2012 r2\&.
+.sp
+Please note that the default is 8MiB, but it\*(Aqs limit is based on the smb2 dialect (64KiB for SMB == 2\&.0, 1MiB for SMB >= 2\&.1 with LargeMTU)\&. Large MTU is not supported over NBT (tcp port 139)\&.
+.sp
+Default:
+\fI\fIsmb2 max trans\fR\fR\fI = \fR\fI8388608\fR\fI \fR
+.RE
+
+smb2 max write (G)
+.PP
+.RS 4
+This option specifies the protocol value that
+\fBsmbd\fR(8)
+will return to a client, informing the client of the largest size that may be sent to the server by a single SMB2 write call\&.
+.sp
+The maximum is 8388608 bytes (8MiB), which is the same as a Windows Server 2012 r2\&.
+.sp
+Please note that the default is 8MiB, but it\*(Aqs limit is based on the smb2 dialect (64KiB for SMB == 2\&.0, 8MiB for SMB => 2\&.1 with LargeMTU)\&. Large MTU is not supported over NBT (tcp port 139)\&.
+.sp
+Default:
+\fI\fIsmb2 max write\fR\fR\fI = \fR\fI8388608\fR\fI \fR
+.RE
+
+smbd async dosmode (S)
+.PP
+.RS 4
+This parameter control whether the fileserver will use sync or async methods for fetching the DOS attributes when doing a directory listing\&. By default sync methods will be used\&.
+.sp
+Default:
+\fI\fIsmbd async dosmode\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+smbd getinfo ask sharemode (S)
+.PP
+.RS 4
+This parameter allows disabling fetching file write time from the open file handle database locking\&.tdb when a client requests file or directory metadata\&. It\*(Aqs a performance optimisation at the expense of protocol correctness\&.
+.sp
+Default:
+\fI\fIsmbd getinfo ask sharemode\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+smbd max async dosmode (S)
+.PP
+.RS 4
+This parameter controls how many async operations to fetch the DOS attributes the fileserver will queue when doing directory listings\&.
+.sp
+Default:
+\fI\fIsmbd max async dosmode\fR\fR\fI = \fR\fIaio max threads * 2\fR\fI \fR
+.RE
+
+smbd max xattr size (S)
+.PP
+.RS 4
+This parameter controls the maximum size of extended attributes that may be written to the server as EAs or as alternate data streams if vfs_streams_xattr is enabled\&. The maximum size of extended attributes depends on the Samba server\*(Aqs operating system and the underlying filesystem\&. The Linux VFS currently sets an upper boundary of 64 KiB per extended attribute\&. FreeBSD does not set a practical upper limit, but since pread() and pwrite() are not possible via the extattr on FreeBSD, it is not recommended to increase this value above a few MiB\&. If a client attempts to write an overly\-large alternate datastream, the Samba server will return STATUS_FILESYSTEM_LIMITATION\&. If this error is encountered, users may try increasing the maximum size supported for xattr writes\&. If this is not possible, and writes are from a MacOS client and to an AFP_Resource extended attribute, the user may enable the vfs_fruit module and configure to allow stream writes for AFP_Resource to an alternative storage location\&. See vfs_fruit documentation for further details\&.
+.sp
+Default:
+\fI\fIsmbd max xattr size\fR\fR\fI = \fR\fI65536\fR\fI \fR
+.RE
+
+smbd profiling level (G)
+.PP
+.RS 4
+This parameter allows the administrator to enable profiling support\&.
+.sp
+Possible values are
+\fBoff\fR,
+\fBcount\fR
+and
+\fBon\fR\&.
+.sp
+Default:
+\fI\fIsmbd profiling level\fR\fR\fI = \fR\fIoff\fR\fI \fR
+.sp
+Example:
+\fI\fIsmbd profiling level\fR\fR\fI = \fR\fIon\fR\fI \fR
+.RE
+
+smbd search ask sharemode (S)
+.PP
+.RS 4
+This parameter allows disabling fetching file write time from the open file handle database locking\&.tdb\&. It\*(Aqs a performance optimisation at the expense of protocol correctness\&.
+.sp
+Default:
+\fI\fIsmbd search ask sharemode\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+smb encrypt (S)
+.PP
+.RS 4
+This is a synonym for
+\m[blue]\fBserver smb encrypt\fR\m[]\&.
+.sp
+Default:
+\fI\fIsmb encrypt\fR\fR\fI = \fR\fIdefault\fR\fI \fR
+.RE
+
+smb passwd file (G)
+.PP
+.RS 4
+This option sets the path to the encrypted smbpasswd file\&. By default the path to the smbpasswd file is compiled into Samba\&.
+.sp
+An example of use is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+smb passwd file = /etc/samba/smbpasswd
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIsmb passwd file\fR\fR\fI = \fR\fI${prefix}/private/smbpasswd\fR\fI \fR
+.RE
+
+smb ports (G)
+.PP
+.RS 4
+Specifies which ports the server should listen on for SMB traffic\&.
+.sp
+Default:
+\fI\fIsmb ports\fR\fR\fI = \fR\fI445 139\fR\fI \fR
+.RE
+
+socket options (G)
+.PP
+.RS 4
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBWarning\fR
+.ps -1
+.br
+Modern server operating systems are tuned for high network performance in the majority of situations; when you set socket options you are overriding those settings\&. Linux in particular has an auto\-tuning mechanism for buffer sizes that will be disabled if you specify a socket buffer size\&. This can potentially cripple your TCP/IP stack\&.
+.sp
+Getting the socket options correct can make a big difference to your performance, but getting them wrong can degrade it by just as much\&. As with any other low level setting, if you must make changes to it, make small changes and
+\fItest\fR
+the effect before making any large changes\&.
+.sp .5v
+.RE
+.sp
+This option allows you to set socket options to be used when talking with the client\&.
+.sp
+Socket options are controls on the networking layer of the operating systems which allow the connection to be tuned\&.
+.sp
+This option will typically be used to tune your Samba server for optimal performance for your local network\&. There is no way that Samba can know what the optimal parameters are for your net, so you must experiment and choose them yourself\&. We strongly suggest you read the appropriate documentation for your operating system first (perhaps
+man setsockopt
+will help)\&.
+.sp
+You may find that on some systems Samba will say "Unknown socket option" when you supply an option\&. This means you either incorrectly typed it or you need to add an include file to includes\&.h for your OS\&. If the latter is the case please send the patch to
+samba\-technical@lists\&.samba\&.org\&.
+.sp
+Any of the supported socket options may be combined in any way you like, as long as your OS allows it\&.
+.sp
+This is the list of socket options currently settable using this option:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SO_KEEPALIVE
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SO_REUSEADDR
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SO_BROADCAST
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_NODELAY
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_KEEPCNT *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_KEEPIDLE *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_KEEPINTVL *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+IPTOS_LOWDELAY
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+IPTOS_THROUGHPUT
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SO_REUSEPORT
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SO_SNDBUF *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SO_RCVBUF *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SO_SNDLOWAT *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SO_RCVLOWAT *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SO_SNDTIMEO *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+SO_RCVTIMEO *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_FASTACK *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_QUICKACK
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_NODELAYACK
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_KEEPALIVE_THRESHOLD *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_KEEPALIVE_ABORT_THRESHOLD *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_DEFER_ACCEPT *
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+TCP_USER_TIMEOUT *
+.RE
+.sp
+.RE
+Those marked with a
+\fI\*(Aq*\*(Aq\fR
+take an integer argument\&. The others can optionally take a 1 or 0 argument to enable or disable the option, by default they will be enabled if you don\*(Aqt specify 1 or 0\&.
+.sp
+To specify an argument use the syntax SOME_OPTION = VALUE for example
+SO_SNDBUF = 8192\&. Note that you must not have any spaces before or after the = sign\&.
+.sp
+If you are on a local network then a sensible option might be:
+.sp
+socket options = IPTOS_LOWDELAY
+.sp
+If you have a local network then you could try:
+.sp
+socket options = IPTOS_LOWDELAY TCP_NODELAY
+.sp
+If you are on a wide area network then perhaps try setting IPTOS_THROUGHPUT\&.
+.sp
+Note that several of the options may cause your Samba server to fail completely\&. Use these options with caution!
+.sp
+Default:
+\fI\fIsocket options\fR\fR\fI = \fR\fITCP_NODELAY\fR\fI \fR
+.sp
+Example:
+\fI\fIsocket options\fR\fR\fI = \fR\fIIPTOS_LOWDELAY\fR\fI \fR
+.RE
+
+spn update command (G)
+.PP
+.RS 4
+This option sets the command that for updating servicePrincipalName names from
+spn_update_list\&.
+.sp
+Default:
+\fI\fIspn update command\fR\fR\fI = \fR\fI${prefix}/sbin/samba_spnupdate\fR\fI \fR
+.sp
+Example:
+\fI\fIspn update command\fR\fR\fI = \fR\fI/usr/local/sbin/spnupdate\fR\fI \fR
+.RE
+
+spoolss: architecture (G)
+.PP
+.RS 4
+Windows spoolss print clients only allow association of server\-side drivers with printers when the driver architecture matches the advertised print server architecture\&. Samba\*(Aqs spoolss print server architecture can be changed using this parameter\&.
+.sp
+Default:
+\fI\fIspoolss: architecture\fR\fR\fI = \fR\fIWindows x64\fR\fI \fR
+.sp
+Example:
+\fI\fIspoolss: architecture\fR\fR\fI = \fR\fIWindows NT x86\fR\fI \fR
+.RE
+
+spoolss: os_major (G)
+.PP
+.RS 4
+Windows might require a new os version number\&. This option allows to modify the build number\&. The complete default version number is: 5\&.0\&.2195 (Windows 2000)\&. The example is 6\&.1\&.7601 (Windows 2008 R2)\&.
+.sp
+Default:
+\fI\fIspoolss: os_major\fR\fR\fI = \fR\fI5\fR\fI \fR
+.sp
+Example:
+\fI\fIspoolss: os_major\fR\fR\fI = \fR\fI6\fR\fI \fR
+.RE
+
+spoolss: os_minor (G)
+.PP
+.RS 4
+Windows might require a new os version number\&. This option allows to modify the build number\&. The complete default version number is: 5\&.0\&.2195 (Windows 2000)\&. The example is 6\&.1\&.7601 (Windows 2008 R2)\&.
+.sp
+Default:
+\fI\fIspoolss: os_minor\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fIspoolss: os_minor\fR\fR\fI = \fR\fI1\fR\fI \fR
+.RE
+
+spoolss: os_build (G)
+.PP
+.RS 4
+Windows might require a new os version number\&. This option allows to modify the build number\&. The complete default version number is: 5\&.0\&.2195 (Windows 2000)\&. The example is 6\&.1\&.7601 (Windows 2008 R2)\&.
+.sp
+Default:
+\fI\fIspoolss: os_build\fR\fR\fI = \fR\fI2195\fR\fI \fR
+.sp
+Example:
+\fI\fIspoolss: os_build\fR\fR\fI = \fR\fI7601\fR\fI \fR
+.RE
+
+spoolss_client: os_major (G)
+.PP
+.RS 4
+Windows might require a new os version number\&. This option allows to modify the build number\&. The complete default version number is: 6\&.1\&.7007 (Windows 7 and Windows Server 2008 R2)\&.
+.sp
+Default:
+\fI\fIspoolss_client: os_major\fR\fR\fI = \fR\fI6\fR\fI \fR
+.RE
+
+spoolss_client: os_minor (G)
+.PP
+.RS 4
+Windows might require a new os version number\&. This option allows to modify the build number\&. The complete default version number is: 6\&.1\&.7007 (Windows 7 and Windows Server 2008 R2)\&.
+.sp
+Default:
+\fI\fIspoolss_client: os_minor\fR\fR\fI = \fR\fI1\fR\fI \fR
+.RE
+
+spoolss_client: os_build (G)
+.PP
+.RS 4
+Windows might require a new os version number\&. This option allows to modify the build number\&. The complete default version number is: 6\&.1\&.7007 (Windows 7 and Windows Server 2008 R2)\&.
+.sp
+Default:
+\fI\fIspoolss_client: os_build\fR\fR\fI = \fR\fI7007\fR\fI \fR
+.RE
+
+spotlight (S)
+.PP
+.RS 4
+This parameter controls whether Samba allows Spotlight queries on a share\&. For controlling indexing of filesystems you also have to use Tracker\*(Aqs own configuration system\&.
+.sp
+Spotlight has several prerequisites:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Samba must be configured and built with Spotlight support\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The
+\fImdssvc\fR
+RPC service must be enabled, see below\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Tracker integration must be setup and the share must be indexed by Tracker\&.
+.RE
+.sp
+.RE
+For a detailed set of instructions please see
+https://wiki\&.samba\&.org/index\&.php/Spotlight\&.
+.sp
+The Spotlight RPC service can either be enabled as embedded RPC service:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+\fI[Global]\fR
+\m[blue]\fBrpc_server:mdsvc = embedded\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Or it can be run in a separate RPC service daemon:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+\fI[Global]\fR
+\m[blue]\fBrpc_server:mdssd = fork\fR\m[]
+\m[blue]\fBrpc_server:mdsvc = external\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIspotlight\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+spotlight backend (S)
+.PP
+.RS 4
+Spotlight search backend\&. Available backends:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBnoindex\fR
+\- a backend that returns no results\&.
+.RE
+.sp
+.RE
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBtracker\fR
+\- Gnome Tracker\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBelasticsearch\fR
+\- a backend that uses JSON and REST over HTTP(s) to query an Elasticsearch server\&.
+.RE
+.sp
+.RE
+.sp
+Default:
+\fI\fIspotlight backend\fR\fR\fI = \fR\fInoindex\fR\fI \fR
+.RE
+
+stat cache (G)
+.PP
+.RS 4
+This parameter determines if
+\fBsmbd\fR(8)
+will use a cache in order to speed up case insensitive name mappings\&. You should never need to change this parameter\&.
+.sp
+Default:
+\fI\fIstat cache\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+state directory (G)
+.PP
+.RS 4
+Usually, most of the TDB files are stored in the
+\fIlock directory\fR\&. Since Samba 3\&.4\&.0, it is possible to differentiate between TDB files with persistent data and TDB files with non\-persistent data using the
+\fIstate directory\fR
+and the
+\fIcache directory\fR
+options\&.
+.sp
+This option specifies the directory where TDB files containing important persistent data will be stored\&.
+.sp
+Default:
+\fI\fIstate directory\fR\fR\fI = \fR\fI${prefix}/var/locks\fR\fI \fR
+.sp
+Example:
+\fI\fIstate directory\fR\fR\fI = \fR\fI/var/run/samba/locks/state\fR\fI \fR
+.RE
+
+store dos attributes (S)
+.PP
+.RS 4
+If this parameter is set Samba attempts to first read DOS attributes (SYSTEM, HIDDEN, ARCHIVE or READ\-ONLY) from a filesystem extended attribute, before mapping DOS attributes to UNIX permission bits (such as occurs with
+\m[blue]\fBmap hidden\fR\m[]
+and
+\m[blue]\fBmap readonly\fR\m[])\&. When set, DOS attributes will be stored onto an extended attribute in the UNIX filesystem, associated with the file or directory\&. When this parameter is set it will override the parameters
+\m[blue]\fBmap hidden\fR\m[],
+\m[blue]\fBmap system\fR\m[],
+\m[blue]\fBmap archive\fR\m[]
+and
+\m[blue]\fBmap readonly\fR\m[]
+and they will behave as if they were set to off\&. This parameter writes the DOS attributes as a string into the extended attribute named "user\&.DOSATTRIB"\&. This extended attribute is explicitly hidden from smbd clients requesting an EA list\&. On Linux the filesystem must have been mounted with the mount option user_xattr in order for extended attributes to work, also extended attributes must be compiled into the Linux kernel\&. In Samba 3\&.5\&.0 and above the "user\&.DOSATTRIB" extended attribute has been extended to store the create time for a file as well as the DOS attributes\&. This is done in a backwards compatible way so files created by Samba 3\&.5\&.0 and above can still have the DOS attribute read from this extended attribute by earlier versions of Samba, but they will not be able to read the create time stored there\&. Storing the create time separately from the normal filesystem meta\-data allows Samba to faithfully reproduce NTFS semantics on top of a POSIX filesystem\&. The default has changed to yes in Samba release 4\&.9\&.0 and above to allow better Windows fileserver compatibility in a default install\&.
+.sp
+Default:
+\fI\fIstore dos attributes\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+strict allocate (S)
+.PP
+.RS 4
+This is a boolean that controls the handling of disk space allocation in the server\&. When this is set to
+\fByes\fR
+the server will change from UNIX behaviour of not committing real disk storage blocks when a file is extended to the Windows behaviour of actually forcing the disk system to allocate real storage blocks when a file is created or extended to be a given size\&. In UNIX terminology this means that Samba will stop creating sparse files\&.
+.sp
+This option is really designed for file systems that support fast allocation of large numbers of blocks such as extent\-based file systems\&. On file systems that don\*(Aqt support extents (most notably ext3) this can make Samba slower\&. When you work with large files over >100MB on file systems without extents you may even run into problems with clients running into timeouts\&.
+.sp
+When you have an extent based filesystem it\*(Aqs likely that we can make use of unwritten extents which allows Samba to allocate even large amounts of space very fast and you will not see any timeout problems caused by strict allocate\&. With strict allocate in use you will also get much better out of quota messages in case you use quotas\&. Another advantage of activating this setting is that it will help to reduce file fragmentation\&.
+.sp
+To give you an idea on which filesystems this setting might currently be a good option for you: XFS, ext4, btrfs, ocfs2 on Linux and JFS2 on AIX support unwritten extents\&. On Filesystems that do not support it, preallocation is probably an expensive operation where you will see reduced performance and risk to let clients run into timeouts when creating large files\&. Examples are ext3, ZFS, HFS+ and most others, so be aware if you activate this setting on those filesystems\&.
+.sp
+Default:
+\fI\fIstrict allocate\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+strict locking (S)
+.PP
+.RS 4
+This is an enumerated type that controls the handling of file locking in the server\&. When this is set to
+\fByes\fR, the server will check every read and write access for file locks, and deny access if locks exist\&. This can be slow on some systems\&.
+.sp
+When strict locking is set to Auto (the default), the server performs file lock checks only on non\-oplocked files\&. As most Windows redirectors perform file locking checks locally on oplocked files this is a good trade off for improved performance\&.
+.sp
+When strict locking is disabled, the server performs file lock checks only when the client explicitly asks for them\&.
+.sp
+Well\-behaved clients always ask for lock checks when it is important\&. So in the vast majority of cases,
+strict locking = Auto
+or
+strict locking = no
+is acceptable\&.
+.sp
+Default:
+\fI\fIstrict locking\fR\fR\fI = \fR\fIAuto\fR\fI \fR
+.RE
+
+strict rename (S)
+.PP
+.RS 4
+By default a Windows SMB server prevents directory renames when there are open file or directory handles below it in the filesystem hierarchy\&. Historically Samba has always allowed this as POSIX filesystem semantics require it\&.
+.sp
+This boolean parameter allows Samba to match the Windows behavior\&. Setting this to "yes" is a very expensive change, as it forces Samba to travers the entire open file handle database on every directory rename request\&. In a clustered Samba system the cost is even greater than the non\-clustered case\&.
+.sp
+When set to "no" smbd only checks the local process the client is attached to for open files below a directory being renamed, instead of checking for open files across all smbd processes\&.
+.sp
+Because of the expense in fully searching the database, the default is "no", and it is recommended to be left that way unless a specific Windows application requires it to be changed\&.
+.sp
+If the client has requested UNIX extensions (POSIX pathnames) then renames are always allowed and this parameter has no effect\&.
+.sp
+Default:
+\fI\fIstrict rename\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+strict sync (S)
+.PP
+.RS 4
+This parameter controls whether Samba honors a request from an SMB client to ensure any outstanding operating system buffer contents held in memory are safely written onto stable storage on disk\&. If set to
+\fByes\fR, which is the default, then Windows applications can force the smbd server to synchronize unwritten data onto the disk\&. If set to
+\fBno\fR
+then smbd will ignore client requests to synchronize unwritten data onto stable storage on disk\&.
+.sp
+In Samba 4\&.7\&.0, the default for this parameter changed from
+\fBno\fR
+to
+\fByes\fR
+to better match the expectations of SMB2/3 clients and improve application safety when running against smbd\&.
+.sp
+The flush request from SMB2/3 clients is handled asynchronously inside smbd, so leaving the parameter as the default value of
+\fByes\fR
+does not block the processing of other requests to the smbd process\&.
+.sp
+Legacy Windows applications (such as the Windows 98 explorer shell) seemed to confuse writing buffer contents to the operating system with synchronously writing outstanding data onto stable storage on disk\&. Changing this parameter to
+\fBno\fR
+means that
+\fBsmbd\fR(8)
+will ignore the Windows applications request to synchronize unwritten data onto disk\&. Only consider changing this if smbd is serving obsolete SMB1 Windows clients prior to Windows XP (Windows 98 and below)\&. There should be no need to change this setting for normal operations\&.
+.sp
+Default:
+\fI\fIstrict sync\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+svcctl list (G)
+.PP
+.RS 4
+This option defines a list of init scripts that smbd will use for starting and stopping Unix services via the Win32 ServiceControl API\&. This allows Windows administrators to utilize the MS Management Console plug\-ins to manage a Unix server running Samba\&.
+.sp
+The administrator must create a directory name
+svcctl
+in Samba\*(Aqs $(libdir) and create symbolic links to the init scripts in
+/etc/init\&.d/\&. The name of the links must match the names given as part of the
+\fIsvcctl list\fR\&.
+.sp
+Default:
+\fI\fIsvcctl list\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIsvcctl list\fR\fR\fI = \fR\fIcups postfix portmap httpd\fR\fI \fR
+.RE
+
+sync always (S)
+.PP
+.RS 4
+This is a boolean parameter that controls whether writes will always be written to stable storage before the write call returns\&. If this is
+\fBno\fR
+then the server will be guided by the client\*(Aqs request in each write call (clients can set a bit indicating that a particular write should be synchronous)\&. If this is
+\fByes\fR
+then every write will be followed by a
+fsync()
+call to ensure the data is written to disk\&. Note that the
+\fIstrict sync\fR
+parameter must be set to
+\fByes\fR
+in order for this parameter to have any effect\&.
+.sp
+Default:
+\fI\fIsync always\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+syslog (G)
+.PP
+.RS 4
+This parameter maps how Samba debug messages are logged onto the system syslog logging levels\&. Samba debug level zero maps onto syslog
+\fBLOG_ERR\fR, debug level one maps onto
+\fBLOG_WARNING\fR, debug level two maps onto
+\fBLOG_NOTICE\fR, debug level three maps onto LOG_INFO\&. All higher levels are mapped to
+\fBLOG_DEBUG\fR\&.
+.sp
+This parameter sets the threshold for sending messages to syslog\&. Only messages with debug level less than this value will be sent to syslog\&. There still will be some logging to log\&.[sn]mbd even if
+\fIsyslog only\fR
+is enabled\&.
+.sp
+The
+\m[blue]\fBlogging\fR\m[]
+parameter should be used instead\&. When
+\m[blue]\fBlogging\fR\m[]
+is set, it overrides the
+\m[blue]\fBsyslog\fR\m[]
+parameter\&.
+.sp
+Default:
+\fI\fIsyslog\fR\fR\fI = \fR\fI1\fR\fI \fR
+.RE
+
+syslog only (G)
+.PP
+.RS 4
+If this parameter is set then Samba debug messages are logged into the system syslog only, and not to the debug log files\&. There still will be some logging to log\&.[sn]mbd even if
+\fIsyslog only\fR
+is enabled\&.
+.sp
+The
+\m[blue]\fBlogging\fR\m[]
+parameter should be used instead\&. When
+\m[blue]\fBlogging\fR\m[]
+is set, it overrides the
+\m[blue]\fBsyslog only\fR\m[]
+parameter\&.
+.sp
+Default:
+\fI\fIsyslog only\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+template homedir (G)
+.PP
+.RS 4
+When filling out the user information for a Windows NT user, the
+\fBwinbindd\fR(8)
+daemon uses this parameter to fill in the home directory for that user\&. If the string
+\fI%D\fR
+is present it is substituted with the user\*(Aqs Windows NT domain name\&. If the string
+\fI%U\fR
+is present it is substituted with the user\*(Aqs Windows NT user name\&.
+.sp
+Default:
+\fI\fItemplate homedir\fR\fR\fI = \fR\fI/home/%D/%U\fR\fI \fR
+.RE
+
+template shell (G)
+.PP
+.RS 4
+When filling out the user information for a Windows NT user, the
+\fBwinbindd\fR(8)
+daemon uses this parameter to fill in the login shell for that user\&.
+.sp
+Default:
+\fI\fItemplate shell\fR\fR\fI = \fR\fI/bin/false\fR\fI \fR
+.RE
+
+time server (G)
+.PP
+.RS 4
+This parameter determines if
+\fBnmbd\fR(8)
+advertises itself as a time server to Windows clients\&.
+.sp
+Default:
+\fI\fItime server\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+debug timestamp
+.PP
+.RS 4
+This parameter is a synonym for
+timestamp logs\&.
+.RE
+
+timestamp logs (G)
+.PP
+.RS 4
+Samba debug log messages are timestamped by default\&. If you are running at a high
+\m[blue]\fBdebug level\fR\m[]
+these timestamps can be distracting\&. This boolean parameter allows timestamping to be turned off\&.
+.sp
+Default:
+\fI\fItimestamp logs\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+tls cafile (G)
+.PP
+.RS 4
+This option can be set to a file (PEM format) containing CA certificates of root CAs to trust to sign certificates or intermediate CA certificates\&.
+.sp
+This path is relative to
+\m[blue]\fBprivate dir\fR\m[]
+if the path does not start with a /\&.
+.sp
+Default:
+\fI\fItls cafile\fR\fR\fI = \fR\fItls/ca\&.pem\fR\fI \fR
+.RE
+
+tls certfile (G)
+.PP
+.RS 4
+This option can be set to a file (PEM format) containing the RSA certificate\&.
+.sp
+This path is relative to
+\m[blue]\fBprivate dir\fR\m[]
+if the path does not start with a /\&.
+.sp
+Default:
+\fI\fItls certfile\fR\fR\fI = \fR\fItls/cert\&.pem\fR\fI \fR
+.RE
+
+tls crlfile (G)
+.PP
+.RS 4
+This option can be set to a file containing a certificate revocation list (CRL)\&.
+.sp
+This path is relative to
+\m[blue]\fBprivate dir\fR\m[]
+if the path does not start with a /\&.
+.sp
+Default:
+\fI\fItls crlfile\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+tls dh params file (G)
+.PP
+.RS 4
+This option can be set to a file with Diffie\-Hellman parameters which will be used with DH ciphers\&.
+.sp
+This path is relative to
+\m[blue]\fBprivate dir\fR\m[]
+if the path does not start with a /\&.
+.sp
+Default:
+\fI\fItls dh params file\fR\fR\fI = \fR\fI\fR\fI \fR
+.RE
+
+tls enabled (G)
+.PP
+.RS 4
+If this option is set to
+\fByes\fR, then Samba will use TLS when possible in communication\&.
+.sp
+Default:
+\fI\fItls enabled\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+tls keyfile (G)
+.PP
+.RS 4
+This option can be set to a file (PEM format) containing the RSA private key\&. This file must be accessible without a pass\-phrase, i\&.e\&. it must not be encrypted\&.
+.sp
+This path is relative to
+\m[blue]\fBprivate dir\fR\m[]
+if the path does not start with a /\&.
+.sp
+Default:
+\fI\fItls keyfile\fR\fR\fI = \fR\fItls/key\&.pem\fR\fI \fR
+.RE
+
+tls priority (G)
+.PP
+.RS 4
+This option can be set to a string describing the TLS protocols to be supported in the parts of Samba that use GnuTLS, specifically the AD DC\&.
+.sp
+The string is appended to the default priority list of GnuTLS\&.
+.sp
+The valid options are described in the
+GNUTLS Priority\-Strings documentation at http://gnutls\&.org/manual/html_node/Priority\-Strings\&.html
+.sp
+The SSL3\&.0 protocol will be disabled\&.
+.sp
+Default:
+\fI\fItls priority\fR\fR\fI = \fR\fINORMAL:\-VERS\-SSL3\&.0\fR\fI \fR
+.RE
+
+tls verify peer (G)
+.PP
+.RS 4
+This controls if and how strict the client will verify the peer\*(Aqs certificate and name\&. Possible values are (in increasing order):
+\fBno_check\fR,
+\fBca_only\fR,
+\fBca_and_name_if_available\fR,
+\fBca_and_name\fR
+and
+\fBas_strict_as_possible\fR\&.
+.sp
+When set to
+\fBno_check\fR
+the certificate is not verified at all, which allows trivial man in the middle attacks\&.
+.sp
+When set to
+\fBca_only\fR
+the certificate is verified to be signed from a ca specified in the
+\m[blue]\fBtls ca file\fR\m[]
+option\&. Setting
+\m[blue]\fBtls ca file\fR\m[]
+to a valid file is required\&. The certificate lifetime is also verified\&. If the
+\m[blue]\fBtls crl file\fR\m[]
+option is configured, the certificate is also verified against the ca crl\&.
+.sp
+When set to
+\fBca_and_name_if_available\fR
+all checks from
+\fBca_only\fR
+are performed\&. In addition, the peer hostname is verified against the certificate\*(Aqs name, if it is provided by the application layer and not given as an ip address string\&.
+.sp
+When set to
+\fBca_and_name\fR
+all checks from
+\fBca_and_name_if_available\fR
+are performed\&. In addition the peer hostname needs to be provided and even an ip address is checked against the certificate\*(Aqs name\&.
+.sp
+When set to
+\fBas_strict_as_possible\fR
+all checks from
+\fBca_and_name\fR
+are performed\&. In addition the
+\m[blue]\fBtls crl file\fR\m[]
+needs to be configured\&. Future versions of Samba may implement additional checks\&.
+.sp
+Default:
+\fI\fItls verify peer\fR\fR\fI = \fR\fIas_strict_as_possible\fR\fI \fR
+.RE
+
+unicode (G)
+.PP
+.RS 4
+Specifies whether the server and client should support unicode\&.
+.sp
+If this option is set to false, the use of ASCII will be forced\&.
+.sp
+Default:
+\fI\fIunicode\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+unix charset (G)
+.PP
+.RS 4
+Specifies the charset the unix machine Samba runs on uses\&. Samba needs to know this in order to be able to convert text to the charsets other SMB clients use\&.
+.sp
+This is also the charset Samba will use when specifying arguments to scripts that it invokes\&.
+.sp
+Default:
+\fI\fIunix charset\fR\fR\fI = \fR\fIUTF\-8\fR\fI \fR
+.sp
+Example:
+\fI\fIunix charset\fR\fR\fI = \fR\fIASCII\fR\fI \fR
+.RE
+
+unix extensions (G)
+.PP
+.RS 4
+This boolean parameter controls whether Samba implements the CIFS UNIX extensions, as defined by HP\&. These extensions enable Samba to better serve UNIX CIFS clients by supporting features such as symbolic links, hard links, etc\&.\&.\&. These extensions require a similarly enabled client, and are of no current use to Windows clients\&.
+.sp
+Note if this parameter is turned on, the
+\m[blue]\fBwide links\fR\m[]
+parameter will automatically be disabled\&.
+.sp
+See the parameter
+\m[blue]\fBallow insecure wide links\fR\m[]
+if you wish to change this coupling between the two parameters\&.
+.sp
+Default:
+\fI\fIunix extensions\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+unix password sync (G)
+.PP
+.RS 4
+This boolean parameter controls whether Samba attempts to synchronize the UNIX password with the SMB password when the encrypted SMB password in the smbpasswd file is changed\&. If this is set to
+\fByes\fR
+the program specified in the
+\fIpasswd program\fR
+parameter is called
+\fIAS ROOT\fR
+\- to allow the new UNIX password to be set without access to the old UNIX password (as the SMB password change code has no access to the old password cleartext, only the new)\&.
+.sp
+This option has no effect if
+samba
+is running as an active directory domain controller, in that case have a look at the
+\m[blue]\fBpassword hash gpg key ids\fR\m[]
+option and the
+samba\-tool user syncpasswords
+command\&.
+.sp
+Default:
+\fI\fIunix password sync\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+use client driver (S)
+.PP
+.RS 4
+This parameter applies only to Windows NT/2000 clients\&. It has no effect on Windows 95/98/ME clients\&. When serving a printer to Windows NT/2000 clients without first installing a valid printer driver on the Samba host, the client will be required to install a local printer driver\&. From this point on, the client will treat the print as a local printer and not a network printer connection\&. This is much the same behavior that will occur when
+disable spoolss = yes\&.
+.sp
+The differentiating factor is that under normal circumstances, the NT/2000 client will attempt to open the network printer using MS\-RPC\&. The problem is that because the client considers the printer to be local, it will attempt to issue the OpenPrinterEx() call requesting access rights associated with the logged on user\&. If the user possesses local administrator rights but not root privilege on the Samba host (often the case), the OpenPrinterEx() call will fail\&. The result is that the client will now display an "Access Denied; Unable to connect" message in the printer queue window (even though jobs may successfully be printed)\&.
+.sp
+If this parameter is enabled for a printer, then any attempt to open the printer with the PRINTER_ACCESS_ADMINISTER right is mapped to PRINTER_ACCESS_USE instead\&. Thus allowing the OpenPrinterEx() call to succeed\&.
+\fIThis parameter MUST not be enabled on a print share which has valid print driver installed on the Samba server\&.\fR
+.sp
+Default:
+\fI\fIuse client driver\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+use mmap (G)
+.PP
+.RS 4
+This global parameter determines if the tdb internals of Samba can depend on mmap working correctly on the running system\&. Samba requires a coherent mmap/read\-write system memory cache\&. Currently only OpenBSD and HPUX do not have such a coherent cache, and on those platforms this paramter is overridden internally to be effeceively
+\fBno\fR\&. On all systems this parameter should be left alone\&. This parameter is provided to help the Samba developers track down problems with the tdb internal code\&.
+.sp
+Default:
+\fI\fIuse mmap\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+username level (G)
+.PP
+.RS 4
+This option helps Samba to try and \*(Aqguess\*(Aq at the real UNIX username, as many DOS clients send an all\-uppercase username\&. By default Samba tries all lowercase, followed by the username with the first letter capitalized, and fails if the username is not found on the UNIX machine\&.
+.sp
+If this parameter is set to non\-zero the behavior changes\&. This parameter is a number that specifies the number of uppercase combinations to try while trying to determine the UNIX user name\&. The higher the number the more combinations will be tried, but the slower the discovery of usernames will be\&. Use this parameter when you have strange usernames on your UNIX machine, such as
+\fBAstrangeUser \fR\&.
+.sp
+This parameter is needed only on UNIX systems that have case sensitive usernames\&.
+.sp
+Default:
+\fI\fIusername level\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fIusername level\fR\fR\fI = \fR\fI5\fR\fI \fR
+.RE
+
+username map (G)
+.PP
+.RS 4
+This option allows you to specify a file containing a mapping of usernames from the clients to the server\&. This can be used for several purposes\&. The most common is to map usernames that users use on DOS or Windows machines to those that the UNIX box uses\&. The other is to map multiple users to a single username so that they can more easily share files\&.
+.sp
+Please note that for user mode security, the username map is applied prior to validating the user credentials\&. Domain member servers (domain or ads) apply the username map after the user has been successfully authenticated by the domain controller and require fully qualified entries in the map table (e\&.g\&. biddle =
+DOMAIN\efoo)\&.
+.sp
+The map file is parsed line by line\&. Each line should contain a single UNIX username on the left then a \*(Aq=\*(Aq followed by a list of usernames on the right\&. The list of usernames on the right may contain names of the form @group in which case they will match any UNIX username in that group\&. The special client name \*(Aq*\*(Aq is a wildcard and matches any name\&. Each line of the map file may be up to 1023 characters long\&.
+.sp
+The file is processed on each line by taking the supplied username and comparing it with each username on the right hand side of the \*(Aq=\*(Aq signs\&. If the supplied name matches any of the names on the right hand side then it is replaced with the name on the left\&. Processing then continues with the next line\&.
+.sp
+If any line begins with a \*(Aq#\*(Aq or a \*(Aq;\*(Aq then it is ignored\&.
+.sp
+If any line begins with an \*(Aq!\*(Aq then the processing will stop after that line if a mapping was done by the line\&. Otherwise mapping continues with every line being processed\&. Using \*(Aq!\*(Aq is most useful when you have a wildcard mapping line later in the file\&.
+.sp
+For example to map from the name
+\fBadmin\fR
+or
+\fBadministrator\fR
+to the UNIX name
+\fB root\fR
+you would use:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+root = admin administrator
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Or to map anyone in the UNIX group
+\fBsystem\fR
+to the UNIX name
+\fBsys\fR
+you would use:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+sys = @system
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+You can have as many mappings as you like in a username map file\&.
+.sp
+You can map Windows usernames that have spaces in them by using double quotes around the name\&. For example:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+tridge = "Andrew Tridgell"
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+would map the windows username "Andrew Tridgell" to the unix username "tridge"\&.
+.sp
+The following example would map mary and fred to the unix user sys, and map the rest to guest\&. Note the use of the \*(Aq!\*(Aq to tell Samba to stop processing if it gets a match on that line:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+!sys = mary fred
+guest = *
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Note that the remapping is applied to all occurrences of usernames\&. Thus if you connect to \e\eserver\efred and
+\fBfred\fR
+is remapped to
+\fBmary\fR
+then you will actually be connecting to \e\eserver\emary and will need to supply a password suitable for
+\fBmary\fR
+not
+\fBfred\fR\&. The only exception to this is the username passed to a Domain Controller (if you have one)\&. The DC will receive whatever username the client supplies without modification\&.
+.sp
+Also note that no reverse mapping is done\&. The main effect this has is with printing\&. Users who have been mapped may have trouble deleting print jobs as PrintManager under WfWg will think they don\*(Aqt own the print job\&.
+.sp
+Samba versions prior to 3\&.0\&.8 would only support reading the fully qualified username (e\&.g\&.:
+DOMAIN\euser) from the username map when performing a kerberos login from a client\&. However, when looking up a map entry for a user authenticated by NTLM[SSP], only the login name would be used for matches\&. This resulted in inconsistent behavior sometimes even on the same server\&.
+.sp
+The following functionality is obeyed in version 3\&.0\&.8 and later:
+.sp
+When performing local authentication, the username map is applied to the login name before attempting to authenticate the connection\&.
+.sp
+When relying upon a external domain controller for validating authentication requests, smbd will apply the username map to the fully qualified username (i\&.e\&.
+DOMAIN\euser) only after the user has been successfully authenticated\&.
+.sp
+An example of use is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+username map = /usr/local/samba/lib/users\&.map
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIusername map\fR\fR\fI = \fR\fI # no username map\fR\fI \fR
+.RE
+
+username map cache time (G)
+.PP
+.RS 4
+Mapping usernames with the
+\m[blue]\fBusername map\fR\m[]
+or
+\m[blue]\fBusername map script\fR\m[]
+features of Samba can be relatively expensive\&. During login of a user, the mapping is done several times\&. In particular, calling the
+\m[blue]\fBusername map script\fR\m[]
+can slow down logins if external databases have to be queried from the script being called\&.
+.sp
+The parameter
+\m[blue]\fBusername map cache time\fR\m[]
+controls a mapping cache\&. It specifies the number of seconds a mapping from the username map file or script is to be efficiently cached\&. The default of 0 means no caching is done\&.
+.sp
+Default:
+\fI\fIusername map cache time\fR\fR\fI = \fR\fI0\fR\fI \fR
+.sp
+Example:
+\fI\fIusername map cache time\fR\fR\fI = \fR\fI60\fR\fI \fR
+.RE
+
+username map script (G)
+.PP
+.RS 4
+This script is a mutually exclusive alternative to the
+\m[blue]\fBusername map\fR\m[]
+parameter\&. This parameter specifies and external program or script that must accept a single command line option (the username transmitted in the authentication request) and return a line on standard output (the name to which the account should mapped)\&. In this way, it is possible to store username map tables in an LDAP directory services\&.
+.sp
+Default:
+\fI\fIusername map script\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIusername map script\fR\fR\fI = \fR\fI/etc/samba/scripts/mapusers\&.sh\fR\fI \fR
+.RE
+
+usershare allow guests (G)
+.PP
+.RS 4
+This parameter controls whether user defined shares are allowed to be accessed by non\-authenticated users or not\&. It is the equivalent of allowing people who can create a share the option of setting
+\fIguest ok = yes\fR
+in a share definition\&. Due to its security sensitive nature, the default is set to off\&.
+.sp
+Default:
+\fI\fIusershare allow guests\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+usershare max shares (G)
+.PP
+.RS 4
+This parameter specifies the number of user defined shares that are allowed to be created by users belonging to the group owning the usershare directory\&. If set to zero (the default) user defined shares are ignored\&.
+.sp
+Default:
+\fI\fIusershare max shares\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+usershare owner only (G)
+.PP
+.RS 4
+This parameter controls whether the pathname exported by a user defined shares must be owned by the user creating the user defined share or not\&. If set to True (the default) then smbd checks that the directory path being shared is owned by the user who owns the usershare file defining this share and refuses to create the share if not\&. If set to False then no such check is performed and any directory path may be exported regardless of who owns it\&.
+.sp
+Default:
+\fI\fIusershare owner only\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+usershare path (G)
+.PP
+.RS 4
+This parameter specifies the absolute path of the directory on the filesystem used to store the user defined share definition files\&. This directory must be owned by root, and have no access for other, and be writable only by the group owner\&. In addition the "sticky" bit must also be set, restricting rename and delete to owners of a file (in the same way the /tmp directory is usually configured)\&. Members of the group owner of this directory are the users allowed to create usershares\&.
+.sp
+For example, a valid usershare directory might be /usr/local/samba/lib/usershares, set up as follows\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	ls \-ld /usr/local/samba/lib/usershares/
+	drwxrwx\-\-T  2 root power_users 4096 2006\-05\-05 12:27 /usr/local/samba/lib/usershares/
+	
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+In this case, only members of the group "power_users" can create user defined shares\&.
+.sp
+Default:
+\fI\fIusershare path\fR\fR\fI = \fR\fI${prefix}/var/locks/usershares\fR\fI \fR
+.RE
+
+usershare prefix allow list (G)
+.PP
+.RS 4
+This parameter specifies a list of absolute pathnames the root of which are allowed to be exported by user defined share definitions\&. If the pathname to be exported doesn\*(Aqt start with one of the strings in this list, the user defined share will not be allowed\&. This allows the Samba administrator to restrict the directories on the system that can be exported by user defined shares\&.
+.sp
+If there is a "usershare prefix deny list" and also a "usershare prefix allow list" the deny list is processed first, followed by the allow list, thus leading to the most restrictive interpretation\&.
+.sp
+Default:
+\fI\fIusershare prefix allow list\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIusershare prefix allow list\fR\fR\fI = \fR\fI/home /data /space\fR\fI \fR
+.RE
+
+usershare prefix deny list (G)
+.PP
+.RS 4
+This parameter specifies a list of absolute pathnames the root of which are NOT allowed to be exported by user defined share definitions\&. If the pathname exported starts with one of the strings in this list the user defined share will not be allowed\&. Any pathname not starting with one of these strings will be allowed to be exported as a usershare\&. This allows the Samba administrator to restrict the directories on the system that can be exported by user defined shares\&.
+.sp
+If there is a "usershare prefix deny list" and also a "usershare prefix allow list" the deny list is processed first, followed by the allow list, thus leading to the most restrictive interpretation\&.
+.sp
+Default:
+\fI\fIusershare prefix deny list\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIusershare prefix deny list\fR\fR\fI = \fR\fI/etc /dev /private\fR\fI \fR
+.RE
+
+usershare template share (G)
+.PP
+.RS 4
+User defined shares only have limited possible parameters such as path, guest ok, etc\&. This parameter allows usershares to "cloned" from an existing share\&. If "usershare template share" is set to the name of an existing share, then all usershares created have their defaults set from the parameters set on this share\&.
+.sp
+The target share may be set to be invalid for real file sharing by setting the parameter "\-valid = False" on the template share definition\&. This causes it not to be seen as a real exported share but to be able to be used as a template for usershares\&.
+.sp
+Default:
+\fI\fIusershare template share\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIusershare template share\fR\fR\fI = \fR\fItemplate_share\fR\fI \fR
+.RE
+
+use sendfile (S)
+.PP
+.RS 4
+If this parameter is
+\fByes\fR, and the
+\fBsendfile()\fR
+system call is supported by the underlying operating system, then some SMB read calls (mainly ReadAndX and ReadRaw) will use the more efficient sendfile system call for files that are exclusively oplocked\&. This may make more efficient use of the system CPU\*(Aqs and cause Samba to be faster\&. Samba automatically turns this off for clients that use protocol levels lower than NT LM 0\&.12 and when it detects a client is Windows 9x (using sendfile from Linux will cause these clients to fail)\&.
+.sp
+Default:
+\fI\fIuse sendfile\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+utmp (G)
+.PP
+.RS 4
+This boolean parameter is only available if Samba has been configured and compiled with the option
+\-\-with\-utmp\&. If set to
+\fByes\fR
+then Samba will attempt to add utmp or utmpx records (depending on the UNIX system) whenever a connection is made to a Samba server\&. Sites may use this to record the user connecting to a Samba share\&.
+.sp
+Due to the requirements of the utmp record, we are required to create a unique identifier for the incoming user\&. Enabling this option creates an n^2 algorithm to find this number\&. This may impede performance on large installations\&.
+.sp
+Default:
+\fI\fIutmp\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+utmp directory (G)
+.PP
+.RS 4
+This parameter is only available if Samba has been configured and compiled with the option
+\-\-with\-utmp\&. It specifies a directory pathname that is used to store the utmp or utmpx files (depending on the UNIX system) that record user connections to a Samba server\&. By default this is not set, meaning the system will use whatever utmp file the native system is set to use (usually
+/var/run/utmp
+on Linux)\&.
+.sp
+Default:
+\fI\fIutmp directory\fR\fR\fI = \fR\fI # Determined automatically\fR\fI \fR
+.sp
+Example:
+\fI\fIutmp directory\fR\fR\fI = \fR\fI/var/run/utmp\fR\fI \fR
+.RE
+
+\-valid (S)
+.PP
+.RS 4
+This parameter indicates whether a share is valid and thus can be used\&. When this parameter is set to false, the share will be in no way visible nor accessible\&.
+.sp
+This option should not be used by regular users but might be of help to developers\&. Samba uses this option internally to mark shares as deleted\&.
+.sp
+Default:
+\fI\fI\-valid\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+valid users (S)
+.PP
+.RS 4
+This is a list of users that should be allowed to login to this service\&. Names starting with an \*(Aq@\*(Aq are interpreted using the same rules as described in the
+\fIinvalid users\fR
+parameter\&.
+.sp
+If this is empty (the default) then any user can login\&. If a username is in both this list and the
+\fIinvalid users\fR
+list then access is denied for that user\&.
+.sp
+The current servicename is substituted for
+\fI%S\fR\&. This is useful in the [homes] section\&.
+.sp
+\fINote: \fRWhen used in the [global] section this parameter may have unwanted side effects\&. For example: If samba is configured as a MASTER BROWSER (see
+\fIlocal master\fR,
+\fIos level\fR,
+\fIdomain master\fR,
+\fIpreferred master\fR) this option will prevent workstations from being able to browse the network\&.
+.sp
+Default:
+\fI\fIvalid users\fR\fR\fI = \fR\fI # No valid users list (anyone can login) \fR\fI \fR
+.sp
+Example:
+\fI\fIvalid users\fR\fR\fI = \fR\fIgreg, @pcusers\fR\fI \fR
+.RE
+
+veto files (S)
+.PP
+.RS 4
+This is a list of files and directories that are neither visible nor accessible\&. Each entry in the list must be separated by a \*(Aq/\*(Aq, which allows spaces to be included in the entry\&. \*(Aq*\*(Aq and \*(Aq?\*(Aq can be used to specify multiple files or directories as in DOS wildcards\&.
+.sp
+Each entry must be a unix path, not a DOS path and must
+\fInot\fR
+include the unix directory separator \*(Aq/\*(Aq\&.
+.sp
+Note that the
+\m[blue]\fBcase sensitive\fR\m[]
+option is applicable in vetoing files\&.
+.sp
+One feature of the veto files parameter that it is important to be aware of is Samba\*(Aqs behaviour when trying to delete a directory\&. If a directory that is to be deleted contains nothing but veto files this deletion will
+\fIfail\fR
+unless you also set the
+\m[blue]\fBdelete veto files\fR\m[]
+parameter to
+\fIyes\fR\&.
+.sp
+Setting this parameter will affect the performance of Samba, as it will be forced to check all files and directories for a match as they are scanned\&.
+.sp
+Examples of use include:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+; Veto any files containing the word Security,
+; any ending in \&.tmp, and any directory containing the
+; word root\&.
+veto files = /*Security*/*\&.tmp/*root*/
+
+; Veto the Apple specific files that a NetAtalk server
+; creates\&.
+veto files = /\&.AppleDouble/\&.bin/\&.AppleDesktop/Network Trash Folder/
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIveto files\fR\fR\fI = \fR\fI # No files or directories are vetoed\fR\fI \fR
+.RE
+
+veto oplock files (S)
+.PP
+.RS 4
+This parameter is only valid when the
+\m[blue]\fBoplocks\fR\m[]
+parameter is turned on for a share\&. It allows the Samba administrator to selectively turn off the granting of oplocks on selected files that match a wildcarded list, similar to the wildcarded list used in the
+\m[blue]\fBveto files\fR\m[]
+parameter\&.
+.sp
+You might want to do this on files that you know will be heavily contended for by clients\&. A good example of this is in the NetBench SMB benchmark program, which causes heavy client contention for files ending in
+\&.SEM\&. To cause Samba not to grant oplocks on these files you would use the line (either in the [global] section or in the section for the particular NetBench share\&.
+.sp
+An example of use is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+veto oplock files = /\&.*SEM/
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Default:
+\fI\fIveto oplock files\fR\fR\fI = \fR\fI # No files are vetoed for oplock grants\fR\fI \fR
+.RE
+
+vfs object
+.PP
+.RS 4
+This parameter is a synonym for
+vfs objects\&.
+.RE
+
+vfs objects (S)
+.PP
+.RS 4
+This parameter specifies the backend names which are used for Samba VFS I/O operations\&. By default, normal disk I/O operations are used but these can be overloaded with one or more VFS objects\&. Be aware that the definition of this parameter will overwrite a possible previous definition of the vfs objects parameter\&.
+.sp
+Default:
+\fI\fIvfs objects\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIvfs objects\fR\fR\fI = \fR\fIextd_audit recycle\fR\fI \fR
+.RE
+
+volume (S)
+.PP
+.RS 4
+This allows you to override the volume label returned for a share\&. Useful for CDROMs with installation programs that insist on a particular volume label\&.
+.sp
+Default:
+\fI\fIvolume\fR\fR\fI = \fR\fI # the name of the share\fR\fI \fR
+.RE
+
+wide links (S)
+.PP
+.RS 4
+This parameter controls whether or not links in the UNIX file system may be followed by the server\&. Links that point to areas within the directory tree exported by the server are always allowed; this parameter controls access only to areas that are outside the directory tree being exported\&.
+.sp
+Note: Turning this parameter on when UNIX extensions are enabled will allow UNIX clients to create symbolic links on the share that can point to files or directories outside restricted path exported by the share definition\&. This can cause access to areas outside of the share\&. Due to this problem, this parameter will be automatically disabled (with a message in the log file) if the
+\m[blue]\fBunix extensions\fR\m[]
+option is on\&.
+.sp
+See the parameter
+\m[blue]\fBallow insecure wide links\fR\m[]
+if you wish to change this coupling between the two parameters\&.
+.sp
+Default:
+\fI\fIwide links\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+winbind cache time (G)
+.PP
+.RS 4
+This parameter specifies the number of seconds the
+\fBwinbindd\fR(8)
+daemon will cache user and group information before querying a Windows NT server again\&.
+.sp
+This does not apply to authentication requests, these are always evaluated in real time unless the
+\m[blue]\fBwinbind offline logon\fR\m[]
+option has been enabled\&.
+.sp
+Default:
+\fI\fIwinbind cache time\fR\fR\fI = \fR\fI300\fR\fI \fR
+.RE
+
+winbindd socket directory (G)
+.PP
+.RS 4
+This setting controls the location of the winbind daemon\*(Aqs socket\&.
+.sp
+Except within automated test scripts, this should not be altered, as the client tools (nss_winbind etc) do not honour this parameter\&. Client tools must then be advised of the altered path with the WINBINDD_SOCKET_DIR environment variable\&.
+.sp
+Default:
+\fI\fIwinbindd socket directory\fR\fR\fI = \fR\fI${prefix}/var/run/winbindd\fR\fI \fR
+.RE
+
+winbind enum groups (G)
+.PP
+.RS 4
+On large installations using
+\fBwinbindd\fR(8)
+it may be necessary to suppress the enumeration of groups through the
+setgrent(),
+getgrent()
+and
+endgrent()
+group of system calls\&. If the
+\fIwinbind enum groups\fR
+parameter is
+\fBno\fR, calls to the
+getgrent()
+system call will not return any data\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBWarning\fR
+.ps -1
+.br
+Turning off group enumeration may cause some programs to behave oddly\&.
+.sp .5v
+.RE
+Default:
+\fI\fIwinbind enum groups\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+winbind enum users (G)
+.PP
+.RS 4
+On large installations using
+\fBwinbindd\fR(8)
+it may be necessary to suppress the enumeration of users through the
+setpwent(),
+getpwent()
+and
+endpwent()
+group of system calls\&. If the
+\fIwinbind enum users\fR
+parameter is
+\fBno\fR, calls to the
+getpwent
+system call will not return any data\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBWarning\fR
+.ps -1
+.br
+Turning off user enumeration may cause some programs to behave oddly\&. For example, the finger program relies on having access to the full user list when searching for matching usernames\&.
+.sp .5v
+.RE
+Default:
+\fI\fIwinbind enum users\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+winbind expand groups (G)
+.PP
+.RS 4
+This option controls the maximum depth that winbindd will traverse when flattening nested group memberships of Windows domain groups\&. This is different from the
+\m[blue]\fBwinbind nested groups\fR\m[]
+option which implements the Windows NT4 model of local group nesting\&. The "winbind expand groups" parameter specifically applies to the membership of domain groups\&.
+.sp
+This option also affects the return of non nested group memberships of Windows domain users\&. With the new default "winbind expand groups = 0" winbind does not query group memberships at all\&.
+.sp
+Be aware that a high value for this parameter can result in system slowdown as the main parent winbindd daemon must perform the group unrolling and will be unable to answer incoming NSS or authentication requests during this time\&.
+.sp
+The default value was changed from 1 to 0 with Samba 4\&.2\&. Some broken applications (including some implementations of newgrp and sg) calculate the group memberships of users by traversing groups, such applications will require "winbind expand groups = 1"\&. But the new default makes winbindd more reliable as it doesn\*(Aqt require SAMR access to domain controllers of trusted domains\&.
+.sp
+Default:
+\fI\fIwinbind expand groups\fR\fR\fI = \fR\fI0\fR\fI \fR
+.RE
+
+winbind:ignore domains (G)
+.PP
+.RS 4
+Allows one to enter a list of trusted domains winbind should ignore (untrust)\&. This can avoid the overhead of resources from attempting to login to DCs that should not be communicated with\&.
+.sp
+Default:
+\fI\fIwinbind:ignore domains\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIwinbind:ignore domains\fR\fR\fI = \fR\fIDOMAIN1, DOMAIN2\fR\fI \fR
+.RE
+
+winbind max clients (G)
+.PP
+.RS 4
+This parameter specifies the maximum number of clients the
+\fBwinbindd\fR(8)
+daemon can connect with\&. The parameter is not a hard limit\&. The
+\fBwinbindd\fR(8)
+daemon configures itself to be able to accept at least that many connections, and if the limit is reached, an attempt is made to disconnect idle clients\&.
+.sp
+Default:
+\fI\fIwinbind max clients\fR\fR\fI = \fR\fI200\fR\fI \fR
+.RE
+
+winbind max domain connections (G)
+.PP
+.RS 4
+This parameter specifies the maximum number of simultaneous connections that the
+\fBwinbindd\fR(8)
+daemon should open to the domain controller of one domain\&. Setting this parameter to a value greater than 1 can improve scalability with many simultaneous winbind requests, some of which might be slow\&.
+.sp
+Note that if
+\m[blue]\fBwinbind offline logon\fR\m[]
+is set to
+\fBYes\fR, then only one DC connection is allowed per domain, regardless of this setting\&.
+.sp
+Default:
+\fI\fIwinbind max domain connections\fR\fR\fI = \fR\fI1\fR\fI \fR
+.sp
+Example:
+\fI\fIwinbind max domain connections\fR\fR\fI = \fR\fI10\fR\fI \fR
+.RE
+
+winbind nested groups (G)
+.PP
+.RS 4
+If set to yes, this parameter activates the support for nested groups\&. Nested groups are also called local groups or aliases\&. They work like their counterparts in Windows: Nested groups are defined locally on any machine (they are shared between DC\*(Aqs through their SAM) and can contain users and global groups from any trusted SAM\&. To be able to use nested groups, you need to run nss_winbind\&.
+.sp
+Default:
+\fI\fIwinbind nested groups\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+winbind normalize names (G)
+.PP
+.RS 4
+This parameter controls whether winbindd will replace whitespace in user and group names with an underscore (_) character\&. For example, whether the name "Space Kadet" should be replaced with the string "space_kadet"\&. Frequently Unix shell scripts will have difficulty with usernames contains whitespace due to the default field separator in the shell\&. If your domain possesses names containing the underscore character, this option may cause problems unless the name aliasing feature is supported by your nss_info plugin\&.
+.sp
+This feature also enables the name aliasing API which can be used to make domain user and group names to a non\-qualified version\&. Please refer to the manpage for the configured idmap and nss_info plugin for the specifics on how to configure name aliasing for a specific configuration\&. Name aliasing takes precedence (and is mutually exclusive) over the whitespace replacement mechanism discussed previously\&.
+.sp
+Default:
+\fI\fIwinbind normalize names\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIwinbind normalize names\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+winbind nss info (G)
+.PP
+.RS 4
+This parameter is designed to control how Winbind retrieves Name Service Information to construct a user\*(Aqs home directory and login shell\&. Currently the following settings are available:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fItemplate\fR
+\- The default, using the parameters of
+\fItemplate shell\fR
+and
+\fItemplate homedir\fR)
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI<sfu | sfu20 | rfc2307 >\fR
+\- When Samba is running in security = ads and your Active Directory Domain Controller does support the Microsoft "Services for Unix" (SFU) LDAP schema, winbind can retrieve the login shell and the home directory attributes directly from your Directory Server\&. For SFU 3\&.0 or 3\&.5 simply choose "sfu", if you use SFU 2\&.0 please choose "sfu20"\&.
+.sp
+Note that for the idmap backend
+idmap_ad
+you need to configure those settings in the idmap configuration section\&. Make sure to consult the documentation of the idmap backend that you are using\&.
+.RE
+.sp
+.RE
+.sp
+Default:
+\fI\fIwinbind nss info\fR\fR\fI = \fR\fItemplate\fR\fI \fR
+.sp
+Example:
+\fI\fIwinbind nss info\fR\fR\fI = \fR\fIsfu\fR\fI \fR
+.RE
+
+winbind offline logon (G)
+.PP
+.RS 4
+This parameter is designed to control whether Winbind should allow one to login with the
+\fIpam_winbind\fR
+module using Cached Credentials\&. If enabled, winbindd will store user credentials from successful logins encrypted in a local cache\&.
+.sp
+Default:
+\fI\fIwinbind offline logon\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIwinbind offline logon\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+winbind reconnect delay (G)
+.PP
+.RS 4
+This parameter specifies the number of seconds the
+\fBwinbindd\fR(8)
+daemon will wait between attempts to contact a Domain controller for a domain that is determined to be down or not contactable\&.
+.sp
+Default:
+\fI\fIwinbind reconnect delay\fR\fR\fI = \fR\fI30\fR\fI \fR
+.RE
+
+winbind refresh tickets (G)
+.PP
+.RS 4
+This parameter is designed to control whether Winbind should refresh Kerberos Tickets retrieved using the
+\fIpam_winbind\fR
+module\&.
+.sp
+Default:
+\fI\fIwinbind refresh tickets\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIwinbind refresh tickets\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+winbind request timeout (G)
+.PP
+.RS 4
+This parameter specifies the number of seconds the
+\fBwinbindd\fR(8)
+daemon will wait before disconnecting either a client connection with no outstanding requests (idle) or a client connection with a request that has remained outstanding (hung) for longer than this number of seconds\&.
+.sp
+Default:
+\fI\fIwinbind request timeout\fR\fR\fI = \fR\fI60\fR\fI \fR
+.RE
+
+winbind rpc only (G)
+.PP
+.RS 4
+Setting this parameter to
+yes
+forces winbindd to use RPC instead of LDAP to retrieve information from Domain Controllers\&.
+.sp
+Default:
+\fI\fIwinbind rpc only\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+winbind scan trusted domains (G)
+.PP
+.RS 4
+This option only takes effect when the
+\m[blue]\fBsecurity\fR\m[]
+option is set to
+\fBdomain\fR
+or
+\fBads\fR\&. If it is set to yes, winbindd periodically tries to scan for new trusted domains and adds them to a global list inside of winbindd\&. The list can be extracted with
+wbinfo \-\-trusted\-domains \-\-verbose\&. Setting it to yes matches the behaviour of Samba 4\&.7 and older\&.
+.sp
+The construction of that global list is not reliable and often incomplete in complex trust setups\&. In most situations the list is not needed any more for winbindd to operate correctly\&. E\&.g\&. for plain file serving via SMB using a simple idmap setup with
+\fBautorid\fR,
+\fBtdb\fR
+or
+\fBad\fR\&. However some more complex setups require the list, e\&.g\&. if you specify idmap backends for specific domains\&. Some pam_winbind setups may also require the global list\&.
+.sp
+If you have a setup that doesn\*(Aqt require the global list, you should set
+\m[blue]\fBwinbind scan trusted domains = no\fR\m[]\&.
+.sp
+Default:
+\fI\fIwinbind scan trusted domains\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+winbind sealed pipes (G)
+.PP
+.RS 4
+This option controls whether any requests from winbindd to domain controllers pipe will be sealed\&. Disabling sealing can be useful for debugging purposes\&.
+.sp
+The behavior can be controlled per netbios domain by using \*(Aqwinbind sealed pipes:NETBIOSDOMAIN = no\*(Aq as option\&.
+.sp
+Default:
+\fI\fIwinbind sealed pipes\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+winbind separator (G)
+.PP
+.RS 4
+This parameter allows an admin to define the character used when listing a username of the form of
+\fIDOMAIN \fR\e\fIuser\fR\&. This parameter is only applicable when using the
+pam_winbind\&.so
+and
+nss_winbind\&.so
+modules for UNIX services\&.
+.sp
+Please note that setting this parameter to + can cause problems with group membership at least on glibc systems, as the character + was used as a special character for NIS in /etc/group\&.
+.sp
+Default:
+\fI\fIwinbind separator\fR\fR\fI = \fR\fI\e\fR\fI \fR
+.sp
+Example:
+\fI\fIwinbind separator\fR\fR\fI = \fR\fI+\fR\fI \fR
+.RE
+
+winbind use default domain (G)
+.PP
+.RS 4
+This parameter specifies whether the
+\fBwinbindd\fR(8)
+daemon should operate on users without domain component in their username\&. Users without a domain component are treated as is part of the winbindd server\*(Aqs own domain\&. While this does not benefit Windows users, it makes SSH, FTP and e\-mail function in a way much closer to the way they would in a native unix system\&.
+.sp
+This option should be avoided if possible\&. It can cause confusion about responsibilities for a user or group\&. In many situations it is not clear whether winbind or /etc/passwd should be seen as authoritative for a user, likewise for groups\&.
+.sp
+Default:
+\fI\fIwinbind use default domain\fR\fR\fI = \fR\fIno\fR\fI \fR
+.sp
+Example:
+\fI\fIwinbind use default domain\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+winbind use krb5 enterprise principals (G)
+.PP
+.RS 4
+winbindd is able to get kerberos tickets for pam_winbind with krb5_auth or wbinfo \-K/\-\-krb5auth=\&.
+.sp
+winbindd (at least on a domain member) is never be able to have a complete picture of the trust topology (which is managed by the DCs)\&. There might be uPNSuffixes and msDS\-SPNSuffixes values, which don\*(Aqt belong to any AD domain at all\&.
+.sp
+With
+\m[blue]\fBwinbind scan trusted domains = no\fR\m[]
+winbindd doesn\*(Aqt even get a complete picture of the topology\&.
+.sp
+It is not really required to know about the trust topology\&. We can just rely on the [K]DCs of our primary domain (e\&.g\&. PRIMARY\&.A\&.EXAMPLE\&.COM) and use enterprise principals e\&.g\&. upnfromB@B\&.EXAMPLE\&.COM@PRIMARY\&.A\&.EXAMPLE\&.COM and follow the WRONG_REALM referrals in order to find the correct DC\&. The final principal might be userfromB@INTERNALB\&.EXAMPLE\&.PRIVATE\&.
+.sp
+With
+\m[blue]\fBwinbind use krb5 enterprise principals = yes\fR\m[]
+winbindd enterprise principals will be used\&.
+.sp
+Default:
+\fI\fIwinbind use krb5 enterprise principals\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.sp
+Example:
+\fI\fIwinbind use krb5 enterprise principals\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+winsdb:local_owner (G)
+.PP
+.RS 4
+This specifies the address that is stored in the winsOwner attribute, of locally registered winsRecord\-objects\&. The default is to use the ip\-address of the first network interface\&.
+.sp
+\fINo default\fR
+.RE
+
+winsdb:dbnosync (G)
+.PP
+.RS 4
+This parameter disables fsync() after changes of the WINS database\&.
+.sp
+Default:
+\fI\fIwinsdb:dbnosync\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+wins hook (G)
+.PP
+.RS 4
+When Samba is running as a WINS server this allows you to call an external program for all changes to the WINS database\&. The primary use for this option is to allow the dynamic update of external name resolution databases such as dynamic DNS\&.
+.sp
+The wins hook parameter specifies the name of a script or executable that will be called as follows:
+.sp
+wins_hook operation name nametype ttl IP_list
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The first argument is the operation and is one of "add", "delete", or "refresh"\&. In most cases the operation can be ignored as the rest of the parameters provide sufficient information\&. Note that "refresh" may sometimes be called when the name has not previously been added, in that case it should be treated as an add\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The second argument is the NetBIOS name\&. If the name is not a legal name then the wins hook is not called\&. Legal names contain only letters, digits, hyphens, underscores and periods\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The third argument is the NetBIOS name type as a 2 digit hexadecimal number\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The fourth argument is the TTL (time to live) for the name in seconds\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The fifth and subsequent arguments are the IP addresses currently registered for that name\&. If this list is empty then the name should be deleted\&.
+.RE
+.sp
+.RE
+An example script that calls the BIND dynamic DNS update program
+nsupdate
+is provided in the examples directory of the Samba source code\&.
+.sp
+\fINo default\fR
+.RE
+
+wins proxy (G)
+.PP
+.RS 4
+This is a boolean that controls if
+\fBnmbd\fR(8)
+will respond to broadcast name queries on behalf of other hosts\&. You may need to set this to
+\fByes\fR
+for some older clients\&.
+.sp
+Default:
+\fI\fIwins proxy\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+wins server (G)
+.PP
+.RS 4
+This specifies the IP address (or DNS name: IP address for preference) of the WINS server that
+\fBnmbd\fR(8)
+should register with\&. If you have a WINS server on your network then you should set this to the WINS server\*(Aqs IP\&.
+.sp
+You should point this at your WINS server if you have a multi\-subnetted network\&.
+.sp
+If you want to work in multiple namespaces, you can give every wins server a \*(Aqtag\*(Aq\&. For each tag, only one (working) server will be queried for a name\&. The tag should be separated from the ip address by a colon\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+You need to set up Samba to point to a WINS server if you have multiple subnets and wish cross\-subnet browsing to work correctly\&.
+.sp .5v
+.RE
+See the chapter in the Samba3\-HOWTO on Network Browsing\&.
+.sp
+Default:
+\fI\fIwins server\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIwins server\fR\fR\fI = \fR\fImary:192\&.9\&.200\&.1 fred:192\&.168\&.3\&.199 mary:192\&.168\&.2\&.61 # For this example when querying a certain name, 192\&.19\&.200\&.1 will be asked first and if that doesn\*(Aqt respond 192\&.168\&.2\&.61\&. If either of those doesn\*(Aqt know the name 192\&.168\&.3\&.199 will be queried\&.\fR\fI \fR
+.sp
+Example:
+\fI\fIwins server\fR\fR\fI = \fR\fI192\&.9\&.200\&.1 192\&.168\&.2\&.61\fR\fI \fR
+.RE
+
+wins support (G)
+.PP
+.RS 4
+This boolean controls if the
+\fBnmbd\fR(8)
+process in Samba will act as a WINS server\&. You should not set this to
+\fByes\fR
+unless you have a multi\-subnetted network and you wish a particular
+nmbd
+to be your WINS server\&. Note that you should
+\fINEVER\fR
+set this to
+\fByes\fR
+on more than one machine in your network\&.
+.sp
+Default:
+\fI\fIwins support\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+workgroup (G)
+.PP
+.RS 4
+This controls what workgroup your server will appear to be in when queried by clients\&. Note that this parameter also controls the Domain name used with the
+\m[blue]\fBsecurity = domain\fR\m[]
+setting\&.
+.sp
+Default:
+\fI\fIworkgroup\fR\fR\fI = \fR\fIWORKGROUP\fR\fI \fR
+.sp
+Example:
+\fI\fIworkgroup\fR\fR\fI = \fR\fIMYGROUP\fR\fI \fR
+.RE
+
+wreplsrv:periodic_interval (G)
+.PP
+.RS 4
+This maximum interval in seconds between 2 periodically scheduled runs where we check for wins\&.ldb changes and do push notifications to our push partners\&. Also wins_config\&.ldb changes are checked in that interval and partner configuration reloads are done\&.
+.sp
+Default:
+\fI\fIwreplsrv:periodic_interval\fR\fR\fI = \fR\fI15\fR\fI \fR
+.RE
+
+wreplsrv:propagate name releases (G)
+.PP
+.RS 4
+If this parameter is enabled, then explicit (from the client) and implicit (via the scavenging) name releases are propagated to the other servers directly, even if there are still other addresses active, this applies to SPECIAL GROUP (2) and MULTIHOMED (3) entries\&. Also the replication conflict merge algorithm for SPECIAL GROUP (2) entries discards replica addresses where the address owner is the local server, if the address was not stored locally before\&. The merge result is propagated directly in case an address was discarded\&. A Windows servers doesn\*(Aqt propagate name releases of SPECIAL GROUP (2) and MULTIHOMED (3) entries directly, which means that Windows servers may return different results to name queries for SPECIAL GROUP (2) and MULTIHOMED (3) names\&. The option doesn\*(Aqt have much negative impact if Windows servers are around, but be aware that they might return unexpected results\&.
+.sp
+Default:
+\fI\fIwreplsrv:propagate name releases\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+wreplsrv:scavenging_interval (G)
+.PP
+.RS 4
+This is the interval in s between 2 scavenging runs which clean up the WINS database and changes the states of expired name records\&. Defaults to half of the value of wreplsrv:renew_interval\&.
+.sp
+\fINo default\fR
+.RE
+
+wreplsrv:tombstone_extra_timeout (G)
+.PP
+.RS 4
+This is the time in s the server needs to be up till we\*(Aqll remove tombstone records from our database\&. Defaults to 3 days\&.
+.sp
+Default:
+\fI\fIwreplsrv:tombstone_extra_timeout\fR\fR\fI = \fR\fI259200\fR\fI \fR
+.RE
+
+wreplsrv:tombstone_interval (G)
+.PP
+.RS 4
+This is the interval in s till released records of the WINS server become tombstone\&. Defaults to 6 days\&.
+.sp
+Default:
+\fI\fIwreplsrv:tombstone_interval\fR\fR\fI = \fR\fI518400\fR\fI \fR
+.RE
+
+wreplsrv:tombstone_timeout (G)
+.PP
+.RS 4
+This is the interval in s till tombstone records are deleted from the WINS database\&. Defaults to 1 day\&.
+.sp
+Default:
+\fI\fIwreplsrv:tombstone_timeout\fR\fR\fI = \fR\fI86400\fR\fI \fR
+.RE
+
+wreplsrv:verify_interval (G)
+.PP
+.RS 4
+This is the interval in s till we verify active replica records with the owning WINS server\&. Unfortunately not implemented yet\&. Defaults to 24 days\&.
+.sp
+Default:
+\fI\fIwreplsrv:verify_interval\fR\fR\fI = \fR\fI2073600\fR\fI \fR
+.RE
+
+writable
+.PP
+.RS 4
+This parameter is a synonym for
+writeable\&.
+.RE
+
+write ok
+.PP
+.RS 4
+This parameter is a synonym for
+writeable\&.
+.RE
+
+writeable (S)
+.PP
+.RS 4
+Inverted synonym for
+\m[blue]\fBread only\fR\m[]\&.
+.sp
+Default:
+\fI\fIwriteable\fR\fR\fI = \fR\fIno\fR\fI \fR
+.RE
+
+write list (S)
+.PP
+.RS 4
+This is a list of users that are given read\-write access to a service\&. If the connecting user is in this list then they will be given write access, no matter what the
+\m[blue]\fBread only\fR\m[]
+option is set to\&. The list can include group names using the @group syntax\&.
+.sp
+Note that if a user is in both the read list and the write list then they will be given write access\&.
+.sp
+Default:
+\fI\fIwrite list\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIwrite list\fR\fR\fI = \fR\fIadmin, root, @staff\fR\fI \fR
+.RE
+
+write raw (G)
+.PP
+.RS 4
+This is ignored if
+\m[blue]\fBasync smb echo handler\fR\m[]
+is set, because this feature is incompatible with raw write SMB requests
+.sp
+If enabled, raw writes allow writes of 65535 bytes in one packet\&. This typically provides a major performance benefit for some very, very old clients\&.
+.sp
+However, some clients either negotiate the allowable block size incorrectly or are incapable of supporting larger block sizes, and for these clients you may need to disable raw writes\&.
+.sp
+In general this parameter should be viewed as a system tuning tool and left severely alone\&.
+.sp
+Default:
+\fI\fIwrite raw\fR\fR\fI = \fR\fIyes\fR\fI \fR
+.RE
+
+wtmp directory (G)
+.PP
+.RS 4
+This parameter is only available if Samba has been configured and compiled with the option
+\-\-with\-utmp\&. It specifies a directory pathname that is used to store the wtmp or wtmpx files (depending on the UNIX system) that record user connections to a Samba server\&. The difference with the utmp directory is the fact that user info is kept after a user has logged out\&.
+.sp
+By default this is not set, meaning the system will use whatever utmp file the native system is set to use (usually
+/var/run/wtmp
+on Linux)\&.
+.sp
+Default:
+\fI\fIwtmp directory\fR\fR\fI = \fR\fI\fR\fI \fR
+.sp
+Example:
+\fI\fIwtmp directory\fR\fR\fI = \fR\fI/var/log/wtmp\fR\fI \fR
+.RE
+.SH "WARNINGS"
+.PP
+Although the configuration file permits service names to contain spaces, your client software may not\&. Spaces will be ignored in comparisons anyway, so it shouldn\*(Aqt be a problem \- but be aware of the possibility\&.
+.PP
+On a similar note, many clients \- especially DOS clients \- limit service names to eight characters\&.
+\fBsmbd\fR(8)
+has no such limitation, but attempts to connect from such clients will fail if they truncate the service names\&. For this reason you should probably keep your service names down to eight characters in length\&.
+.PP
+Use of the
+[homes]
+and
+[printers]
+special sections make life for an administrator easy, but the various combinations of default attributes can be tricky\&. Take extreme care when designing these sections\&. In particular, ensure that the permissions on spool directories are correct\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsamba\fR(7),
+\fBsmbpasswd\fR(8),
+\fBsmbd\fR(8),
+\fBnmbd\fR(8),
+\fBwinbindd\fR(8),
+\fBsamba\fR(8),
+\fBsamba-tool\fR(8),
+\fBsmbclient\fR(1),
+\fBnmblookup\fR(1),
+\fBtestparm\fR(1)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/smbcacls.1 b/docs/manpages/smbcacls.1
new file mode 100644
index 0000000000..a82de0ae0e
--- /dev/null
+++ b/docs/manpages/smbcacls.1
@@ -0,0 +1,1044 @@
+'\" t
+.\"     Title: smbcacls
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBCACLS" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbcacls \- Set or get ACLs on an NT file or directory names
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbcacls {//server/share} {/filename} [\-D|\-\-delete=ACL] [\-M|\-\-modify=ACL] [\-a|\-\-add=ACL] [\-S|\-\-set=ACLS] [\-C|\-\-chown=USERNAME] [\-G|\-\-chgrp=GROUPNAME] [\-I|\-\-inherit=STRING] [\-\-propagate\-inheritance] [\-\-numeric] [\-\-sddl] [\-\-query\-security\-info=INT] [\-\-set\-security\-info=INT] [\-t|\-\-test\-args] [\-\-domain\-sid=SID] [\-x|\-\-maximum\-access] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER] [\-O|\-\-socket\-options=SOCKETOPTIONS] [\-m|\-\-max\-protocol=MAXPROTOCOL] [\-n|\-\-netbiosname=NETBIOSNAME] [\-\-netbios\-scope=SCOPE] [\-W|\-\-workgroup=WORKGROUP] [\-\-realm=REALM] [\-U|\-\-user=[DOMAIN/]USERNAME[%PASSWORD]] [\-N|\-\-no\-pass] [\-\-password=STRING] [\-\-pw\-nt\-hash] [\-A|\-\-authentication\-file=FILE] [\-P|\-\-machine\-pass] [\-\-simple\-bind\-dn=DN] [\-\-use\-kerberos=desired|required|off] [\-\-use\-krb5\-ccache=CCACHE] [\-\-use\-winbind\-ccache] [\-\-client\-protection=sign|encrypt|off] [\-V|\-\-version]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+smbcacls
+program manipulates NT Access Control Lists (ACLs) on SMB file shares\&. An ACL is comprised zero or more Access Control Entries (ACEs), which define access restrictions for a specific user or group\&.
+.SH "OPTIONS"
+.PP
+The following options are available to the
+smbcacls
+program\&. The format of ACLs is described in the section ACL FORMAT
+.PP
+\-a|\-\-add acl
+.RS 4
+Add the entries specified to the ACL\&. Existing access control entries are unchanged\&.
+.RE
+.PP
+\-M|\-\-modify acl
+.RS 4
+Modify the mask value (permissions) for the ACEs specified on the command line\&. An error will be printed for each ACE specified that was not already present in the object\*(Aqs ACL\&.
+.RE
+.PP
+\-D|\-\-delete acl
+.RS 4
+Delete any ACEs specified on the command line\&. An error will be printed for each ACE specified that was not already present in the object\*(Aqs ACL\&.
+.RE
+.PP
+\-S|\-\-set acl
+.RS 4
+This command sets the ACL on the object with only what is specified on the command line\&. Any existing ACL is erased\&. Note that the ACL specified must contain at least a revision, type, owner and group for the call to succeed\&.
+.RE
+.PP
+\-C|\-\-chown name
+.RS 4
+The owner of a file or directory can be changed to the name given using the
+\fI\-C\fR
+option\&. The name can be a sid in the form S\-1\-x\-y\-z or a name resolved against the server specified in the first argument\&.
+.sp
+This command is a shortcut for \-M OWNER:name\&.
+.RE
+.PP
+\-G|\-\-chgrp name
+.RS 4
+The group owner of a file or directory can be changed to the name given using the
+\fI\-G\fR
+option\&. The name can be a sid in the form S\-1\-x\-y\-z or a name resolved against the server specified n the first argument\&.
+.sp
+This command is a shortcut for \-M GROUP:name\&.
+.RE
+.PP
+\-I|\-\-inherit allow|remove|copy
+.RS 4
+Set or unset the windows "Allow inheritable permissions" check box using the
+\fI\-I\fR
+option\&. To set the check box pass allow\&. To unset the check box pass either remove or copy\&. Remove will remove all inherited ACEs\&. Copy will copy all the inherited ACEs\&.
+.RE
+.PP
+\-\-propagate\-inheritance
+.RS 4
+Add, modify, delete or set ACEs on an entire directory tree according to the inheritance flags\&. Refer to the INHERITANCE section for details\&.
+.RE
+.PP
+\-\-numeric
+.RS 4
+This option displays all ACL information in numeric format\&. The default is to convert SIDs to names and ACE types and masks to a readable string format\&.
+.RE
+.PP
+\-m|\-\-max\-protocol PROTOCOL_NAME
+.RS 4
+This allows the user to select the highest SMB protocol level that smbcacls will use to connect to the server\&. By default this is set to NT1, which is the highest available SMB1 protocol\&. To connect using SMB2 or SMB3 protocol, use the strings SMB2 or SMB3 respectively\&. Note that to connect to a Windows 2012 server with encrypted transport selecting a max\-protocol of SMB3 is required\&.
+.RE
+.PP
+\-t|\-\-test\-args
+.RS 4
+Don\*(Aqt actually do anything, only validate the correctness of the arguments\&.
+.RE
+.PP
+\-\-query\-security\-info FLAGS
+.RS 4
+The security\-info flags for queries\&.
+.RE
+.PP
+\-\-set\-security\-info FLAGS
+.RS 4
+The security\-info flags for queries\&.
+.RE
+.PP
+\-\-sddl
+.RS 4
+Output and input acls in sddl format\&.
+.RE
+.PP
+\-\-domain\-sid SID
+.RS 4
+SID used for sddl processing\&.
+.RE
+.PP
+\-x|\-\-maximum\-access
+.RS 4
+When displaying an ACL additionally query the server for effective maximum permissions\&. Note that this is only supported with SMB protocol version 2 or higher\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER
+.RS 4
+This option is used to determine what naming services and in what order to resolve host names to IP addresses\&. The option takes a space\-separated string of different name resolution options\&. The best ist to wrap the whole \-\-name\-resolve=NAME\-RESOLVE\-ORDER into quotes\&.
+.sp
+The options are: "lmhosts", "host", "wins" and "bcast"\&. They cause names to be resolved as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBlmhosts\fR: Lookup an IP address in the Samba lmhosts file\&. If the line in lmhosts has no name type attached to the NetBIOS name (see the
+\fBlmhosts\fR(5)
+for details) then any name type matches for lookup\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBhost\fR: Do a standard host name to IP address resolution, using the system
+/etc/hosts, NIS, or DNS lookups\&. This method of name resolution is operating system dependent, for instance on IRIX or Solaris this may be controlled by the
+/etc/nsswitch\&.conf
+file)\&. Note that this method is only used if the NetBIOS name type being queried is the 0x20 (server) name type, otherwise it is ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwins\fR: Query a name with the IP address listed in the
+\fIwins server\fR
+parameter\&. If no WINS server has been specified this method will be ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBbcast\fR: Do a broadcast on each of the known local interfaces listed in the
+\fIinterfaces\fR
+parameter\&. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet\&.
+.RE
+.sp
+.RE
+If this parameter is not set then the name resolve order defined in the
+smb\&.conf
+file parameter (\m[blue]\fBname resolve order\fR\m[]) will be used\&.
+.sp
+The default order is lmhosts, host, wins, bcast\&. Without this parameter or any entry in the
+\m[blue]\fBname resolve order\fR\m[]
+parameter of the
+smb\&.conf
+file, the name resolution methods will be attempted in this order\&.
+.RE
+.PP
+\-O|\-\-socket\-options=SOCKETOPTIONS
+.RS 4
+TCP socket options to set on the client socket\&. See the socket options parameter in the
+smb\&.conf
+manual page for the list of valid options\&.
+.RE
+.PP
+\-m|\-\-max\-protocol=MAXPROTOCOL
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported by the client\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient max protocol\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-n|\-\-netbiosname=NETBIOSNAME
+.RS 4
+This option allows you to override the NetBIOS name that Samba uses for itself\&. This is identical to setting the
+\m[blue]\fBnetbios name\fR\m[]
+parameter in the
+smb\&.conf
+file\&. However, a command line setting will take precedence over settings in
+smb\&.conf\&.
+.RE
+.PP
+\-\-netbios\-scope=SCOPE
+.RS 4
+This specifies a NetBIOS scope that
+nmblookup
+will use to communicate with when generating NetBIOS names\&. For details on the use of NetBIOS scopes, see rfc1001\&.txt and rfc1002\&.txt\&. NetBIOS scopes are
+\fIvery\fR
+rarely used, only set this parameter if you are the system administrator in charge of all the NetBIOS systems you communicate with\&.
+.RE
+.PP
+\-W|\-\-workgroup=WORKGROUP
+.RS 4
+Set the SMB domain of the username\&. This overrides the default domain which is the domain defined in smb\&.conf\&. If the domain specified is the same as the servers NetBIOS name, it causes the client to log on using the servers local SAM (as opposed to the Domain SAM)\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBworkgroup\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-r|\-\-realm=REALM
+.RS 4
+Set the realm for the domain\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBrealm\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-U|\-\-user=[DOMAIN\e]USERNAME[%PASSWORD]
+.RS 4
+Sets the SMB username or username and password\&.
+.sp
+If %PASSWORD is not specified, the user will be prompted\&. The client will first check the
+\fBUSER\fR
+environment variable (which is also permitted to also contain the password seperated by a %), then the
+\fBLOGNAME\fR
+variable (which is not permitted to contain a password) and if either exists, the value is used\&. If these environmental variables are not found, the username found in a Kerberos Credentials cache may be used\&.
+.sp
+A third option is to use a credentials file which contains the plaintext of the username and password\&. This option is mainly provided for scripts where the admin does not wish to pass the credentials on the command line or via environment variables\&. If this method is used, make certain that the permissions on the file restrict access from unwanted users\&. See the
+\fI\-A\fR
+for more details\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-N|\-\-no\-pass
+.RS 4
+If specified, this parameter suppresses the normal password prompt from the client to the user\&. This is useful when accessing a service that does not require a password\&.
+.sp
+Unless a password is specified on the command line or this parameter is specified, the client will request a password\&.
+.sp
+If a password is specified on the command line and this option is also defined the password on the command line will be silently ignored and no password will be used\&.
+.RE
+.PP
+\-\-password
+.RS 4
+Specify the password on the commandline\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+If \-\-password is not specified, the tool will check the
+\fBPASSWD\fR
+environment variable, followed by
+\fBPASSWD_FD\fR
+which is expected to contain an open file descriptor (FD) number\&.
+.sp
+Finally it will check
+\fBPASSWD_FILE\fR
+(containing a file path to be opened)\&. The file should only contain the password\&. Make certain that the permissions on the file restrict access from unwanted users!
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-\-pw\-nt\-hash
+.RS 4
+The supplied password is the NT hash\&.
+.RE
+.PP
+\-A|\-\-authentication\-file=filename
+.RS 4
+This option allows you to specify a file from which to read the username and password used in the connection\&. The format of the file is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+				username = <value>
+				password = <value>
+				domain   = <value>
+			
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Make certain that the permissions on the file restrict access from unwanted users!
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Use stored machine account password\&.
+.RE
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind\&.
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-use\-krb5\-ccache=CCACHE
+.RS 4
+Specifies the credential cache location for Kerberos authentication\&.
+.sp
+This will set \-\-use\-kerberos=required too\&.
+.RE
+.PP
+\-\-use\-winbind\-ccache
+.RS 4
+Try to use the credential cache by winbind\&.
+.RE
+.PP
+\-\-client\-protection=sign|encrypt|off
+.RS 4
+Sets the connection protection the client tool should use\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient protection\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.sp
+In case you need more fine grained control you can use:
+\-\-option=clientsmbencrypt=OPTION,
+\-\-option=clientipcsigning=OPTION,
+\-\-option=clientsigning=OPTION\&.
+.RE
+.SH "ACL FORMAT"
+.PP
+The format of an ACL is one or more entries separated by either commas or newlines\&. An ACL entry is one of the following:
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
+ 
+REVISION:<revision number>
+OWNER:<sid or name>
+GROUP:<sid or name>
+ACL:<sid or name>:<type>/<flags>/<mask>
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Control bits related to automatic inheritance
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIOD\fR
+\- "Owner Defaulted" \- Indicates that the SID of the owner of the security descriptor was provided by a default mechanism\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIGD\fR
+\- "Group Defaulted" \- Indicates that the SID of the security descriptor group was provided by a default mechanism\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIDP\fR
+\- "DACL Present" \- Indicates a security descriptor that has a discretionary access control list (DACL)\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIDD\fR
+\- "DACL Defaulted" \- Indicates a security descriptor with a default DACL\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fISP\fR
+\- "SACL Present" \- Indicates a security descriptor that has a system access control list (SACL)\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fISD\fR
+\- "SACL Defaulted" \- A default mechanism, rather than the original provider of the security descriptor, provided the SACL\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIDT\fR
+\- "DACL Trusted"
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fISS\fR
+\- "Server Security"
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIDR\fR
+\- "DACL Inheritance Required" \- Indicates a required security descriptor in which the DACL is set up to support automatic propagation of inheritable access control entries (ACEs) to existing child objects\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fISR\fR
+\- "SACL Inheritance Required" \- Indicates a required security descriptor in which the SACL is set up to support automatic propagation of inheritable ACEs to existing child objects\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIDI\fR
+\- "DACL Auto Inherited" \- Indicates a security descriptor in which the DACL is set up to support automatic propagation of inheritable access control entries (ACEs) to existing child objects\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fISI\fR
+\- "SACL Auto Inherited" \- Indicates a security descriptor in which the SACL is set up to support automatic propagation of inheritable ACEs to existing child objects\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIPD\fR
+\- "DACL Protected" \- Prevents the DACL of the security descriptor from being modified by inheritable ACEs\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIPS\fR
+\- "SACL Protected" \- Prevents the SACL of the security descriptor from being modified by inheritable ACEs\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIRM\fR
+\- "RM Control Valid" \- Indicates that the resource manager control is valid\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fISR\fR
+\- "Self Relative" \- Indicates a self\-relative security descriptor\&.
+.RE
+.sp
+.RE
+.PP
+The revision of the ACL specifies the internal Windows NT ACL revision for the security descriptor\&. If not specified it defaults to 1\&. Using values other than 1 may cause strange behaviour\&.
+.PP
+The owner and group specify the owner and group sids for the object\&. If a SID in the format S\-1\-x\-y\-z is specified this is used, otherwise the name specified is resolved using the server on which the file or directory resides\&.
+.PP
+ACEs are specified with an "ACL:" prefix, and define permissions granted to an SID\&. The SID again can be specified in S\-1\-x\-y\-z format or as a name in which case it is resolved against the server on which the file or directory resides\&. The type, flags and mask values determine the type of access granted to the SID\&.
+.PP
+The type can be either ALLOWED or DENIED to allow/deny access to the SID\&.
+.PP
+The flags field defines how the ACE should be considered when performing inheritance\&.
+smbcacls
+uses these flags when run with
+\fI\-\-propagate\-inheritance\fR\&.
+.PP
+Flags can be specified as decimal or hexadecimal values, or with the respective (XX) aliases, separated by a vertical bar "|"\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI(OI)\fR
+Object Inherit 0x1
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI(CI)\fR
+Container Inherit 0x2
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI(NP)\fR
+No Propagate Inherit 0x4
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI(IO)\fR
+Inherit Only 0x8
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fI(I)\fR
+ACE was inherited 0x10
+.RE
+.sp
+.RE
+.PP
+The mask is a value which expresses the access right granted to the SID\&. It can be given as a decimal or hexadecimal value, or by using one of the following text strings which map to the NT file permissions of the same name\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIR\fR
+\- Allow read access
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIW\fR
+\- Allow write access
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIX\fR
+\- Execute permission on the object
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fID\fR
+\- Delete the object
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIP\fR
+\- Change permissions
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIO\fR
+\- Take ownership
+.RE
+.sp
+.RE
+.PP
+The following combined permissions can be specified:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIREAD\fR
+\- Equivalent to \*(AqRX\*(Aq permissions
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fICHANGE\fR
+\- Equivalent to \*(AqRXWD\*(Aq permissions
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIFULL\fR
+\- Equivalent to \*(AqRWXDPO\*(Aq permissions
+.RE
+.SH "INHERITANCE"
+.PP
+Per\-ACE inheritance flags can be set in the ACE flags field\&. By default, inheritable ACEs e\&.g\&. those marked for object inheritance (OI) or container inheritance (CI), are not propagated to sub\-files or folders\&. However, with the
+\fI\-\-propagate\-inheritance\fR
+argument specified, such ACEs are automatically propagated according to some inheritance rules\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Inheritable (OI)(OI) ACE flags can only be applied to folders\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Any inheritable ACEs applied to sub\-files or folders are marked with the inherited (I) flag\&. Inheritable ACE(s) are applied to folders unless the no propagation (NP) flag is set\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+When an ACE with the (OI) flag alone set is progagated to a child folder the inheritance only flag (IO) is also applied\&. This indicates the permissions associated with the ACE don\*(Aqt apply to the folder itself (only to it\*(Aqs child files)\&. When applying the ACE to a child file the ACE is inherited as normal\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+When an ace with the (CI) flag alone set is propagated to a child file there is no effect, when propagated to a child folder it is inherited as normal\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+When an ACE that has both (OI) & (CI) flags set the ACE is inherited as normal by both folders and files\&.
+.RE
+.sp
+.RE
+.PP
+(OI)(READ) added to parent folder
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
++\-parent/        (OI)(READ)
+| +\-file\&.1       (I)(READ)
+| +\-nested/      (OI)(IO)(I)(READ)
+  |   +\-file\&.2   (I)(READ)
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+(CI)(READ) added to parent folder
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
++\-parent/        (CI)(READ)
+| +\-file\&.1
+| +\-nested/      (CI)(I)(READ)
+  |   +\-file\&.2
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+(OI)(CI)(READ) added to parent folder
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
++\-parent/        (OI)(CI)(READ)
+| +\-file\&.1       (I)(READ)
+| +\-nested/      (OI)(CI)(I)(READ)
+  |   +\-file\&.2   (I)(READ)
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+(OI)(NP)(READ) added to parent folder
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
++\-oi_dir/        (OI)(NP)(READ)
+| +\-file\&.1       (I)(READ)
+| +\-nested/
+|   +\-file\&.2
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+(CI)(NP)(READ) added to parent folder
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
++\-oi_dir/        (CI)(NP)(READ)
+| +\-file\&.1
+| +\-nested/      (I)(READ)
+|   +\-file\&.2
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+(OI)(CI)(NP)(READ) added to parent folder
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
++\-parent/        (CI)(OI)(NP)(READ)
+| +\-file\&.1       (I)(READ)
+| +\-nested/      (I)(READ)
+|   +\-file\&.2
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Files and folders with protected ACLs do not allow inheritable permissions (set with
+\fI\-I\fR)\&. Such objects will not receive ACEs flagged for inheritance with (CI) or (OI)\&.
+.SH "EXIT STATUS"
+.PP
+The
+smbcacls
+program sets the exit status depending on the success or otherwise of the operations performed\&. The exit status may be one of the following values\&.
+.PP
+If the operation succeeded, smbcacls returns and exit status of 0\&. If
+smbcacls
+couldn\*(Aqt connect to the specified server, or there was an error getting or setting the ACLs, an exit status of 1 is returned\&. If there was an error parsing any command line arguments, an exit status of 2 is returned\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+smbcacls
+was written by Andrew Tridgell and Tim Potter\&.
+.PP
+The conversion to DocBook for Samba 2\&.2 was done by Gerald Carter\&. The conversion to DocBook XML 4\&.2 for Samba 3\&.0 was done by Alexander Bokovoy\&.
diff --git a/docs/manpages/smbclient.1 b/docs/manpages/smbclient.1
new file mode 100644
index 0000000000..f9dafeebf7
--- /dev/null
+++ b/docs/manpages/smbclient.1
@@ -0,0 +1,1253 @@
+'\" t
+.\"     Title: smbclient
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBCLIENT" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbclient \- ftp\-like client to access SMB/CIFS resources on servers
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbclient [\-M|\-\-message=HOST] [\-I|\-\-ip\-address=IP] [\-E|\-\-stderr] [\-L|\-\-list=HOST] [\-T|\-\-tar=<c|x>IXFvgbNan] [\-D|\-\-directory=DIR] [\-b|\-\-send\-buffer=BYTES] [\-t|\-\-timeout=SECONDS] [\-p|\-\-port=PORT] [\-g|\-\-grepable] [\-q|\-\-quiet] [\-B|\-\-browse] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-s|\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER] [\-O|\-\-socket\-options=SOCKETOPTIONS] [\-m|\-\-max\-protocol=MAXPROTOCOL] [\-n|\-\-netbiosname=NETBIOSNAME] [\-\-netbios\-scope=SCOPE] [\-W|\-\-workgroup=WORKGROUP] [\-\-realm=REALM] [\-U|\-\-user=[DOMAIN/]USERNAME%[PASSWORD]] [\-N|\-\-no\-pass] [\-\-password=STRING] [\-\-pw\-nt\-hash] [\-A|\-\-authentication\-file=FILE] [\-P|\-\-machine\-pass] [\-\-simple\-bind\-dn=DN] [\-\-use\-kerberos=desired|required|off] [\-\-use\-krb5\-ccache=CCACHE] [\-\-use\-winbind\-ccache] [\-\-client\-protection=sign|encrypt|off] [\-V|\-\-version] [\-c|\-\-command=STRING]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+smbclient
+is a client that can \*(Aqtalk\*(Aq to an SMB/CIFS server\&. It offers an interface similar to that of the ftp program (see
+\fBftp\fR(1))\&. Operations include things like getting files from the server to the local machine, putting files from the local machine to the server, retrieving directory information from the server and so on\&.
+.SH "OPTIONS"
+.PP
+servicename
+.RS 4
+servicename is the name of the service you want to use on the server\&. A service name takes the form
+//server/service
+where
+\fIserver \fR
+is the NetBIOS name of the SMB/CIFS server offering the desired service and
+\fIservice\fR
+is the name of the service offered\&. Thus to connect to the service "printer" on the SMB/CIFS server "smbserver", you would use the servicename
+//smbserver/printer
+.sp
+Note that the server name required is NOT necessarily the IP (DNS) host name of the server ! The name required is a NetBIOS server name, which may or may not be the same as the IP hostname of the machine running the server\&.
+.sp
+The server name is looked up according to either the
+\fI\-R|\-\-name\-resolve\fR
+parameter to
+smbclient
+or using the name resolve order parameter in the
+\fBsmb.conf\fR(5)
+file, allowing an administrator to change the order and methods by which server names are looked up\&.
+.RE
+.PP
+password
+.RS 4
+The password required to access the specified service on the specified server\&. If this parameter is supplied, the
+\fI\-N\fR
+option (suppress password prompt) is assumed\&.
+.sp
+There is no default password\&. If no password is supplied on the command line (either by using this parameter or adding a password to the
+\fI\-U\fR
+option (see below)) and the
+\fI\-N\fR
+option is not specified, the client will prompt for a password, even if the desired service does not require one\&. (If no password is required, simply press ENTER to provide a null password\&.)
+.sp
+Note: Some servers (including OS/2 and Windows for Workgroups) insist on an uppercase password\&. Lowercase or mixed case passwords may be rejected by these servers\&.
+.sp
+Be cautious about including passwords in scripts\&.
+.RE
+.PP
+\-M|\-\-message NetBIOS name
+.RS 4
+This options allows you to send messages, using the "WinPopup" protocol, to another computer\&. Once a connection is established you then type your message, pressing ^D (control\-D) to end\&.
+.sp
+If the receiving computer is running WinPopup the user will receive the message and probably a beep\&. If they are not running WinPopup the message will be lost, and no error message will occur\&.
+.sp
+The message is also automatically truncated if the message is over 1600 bytes, as this is the limit of the protocol\&.
+.sp
+One useful trick is to pipe the message through
+smbclient\&. For example: smbclient \-M FRED < mymessage\&.txt will send the message in the file
+mymessage\&.txt
+to the machine FRED\&.
+.sp
+You may also find the
+\fI\-U\fR
+and
+\fI\-I\fR
+options useful, as they allow you to control the FROM and TO parts of the message\&.
+.sp
+See the
+\fImessage command\fR
+parameter in the
+\fBsmb.conf\fR(5)
+for a description of how to handle incoming WinPopup messages in Samba\&.
+.sp
+\fINote\fR: Copy WinPopup into the startup group on your WfWg PCs if you want them to always be able to receive messages\&.
+.RE
+.PP
+\-p|\-\-port port
+.RS 4
+This number is the TCP port number that will be used when making connections to the server\&. The standard (well\-known) TCP port number for an SMB/CIFS server is 139, which is the default\&.
+.RE
+.PP
+\-g|\-\-grepable
+.RS 4
+This parameter provides combined with
+\fI\-L\fR
+easy parseable output that allows processing with utilities such as grep and cut\&.
+.RE
+.PP
+\-m|\-\-max\-protocol protocol
+.RS 4
+This allows the user to select the highest SMB protocol level that smbclient will use to connect to the server\&. By default this is set to highest available SMB3 protocol version\&. To connect using SMB2 or SMB1 protocol, use the strings SMB2 or NT1 respectively\&. Note that to connect to a Windows 2012 server with encrypted transport selecting a max\-protocol of SMB3 is required\&.
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Make queries to the external server using the machine account of the local server\&.
+.RE
+.PP
+\-I|\-\-ip\-address IP\-address
+.RS 4
+\fIIP address\fR
+is the address of the server to connect to\&. It should be specified in standard "a\&.b\&.c\&.d" notation\&.
+.sp
+Normally the client would attempt to locate a named SMB/CIFS server by looking it up via the NetBIOS name resolution mechanism described above in the
+\fIname resolve order\fR
+parameter above\&. Using this parameter will force the client to assume that the server is on the machine with the specified IP address and the NetBIOS name component of the resource being connected to will be ignored\&.
+.sp
+There is no default for this parameter\&. If not supplied, it will be determined automatically by the client as described above\&.
+.RE
+.PP
+\-E|\-\-stderr
+.RS 4
+This parameter causes the client to write messages to the standard error stream (stderr) rather than to the standard output stream\&.
+.sp
+By default, the client writes messages to standard output \- typically the user\*(Aqs tty\&.
+.RE
+.PP
+\-L|\-\-list
+.RS 4
+This option allows you to look at what services are available on a server\&. You use it as
+smbclient \-L host
+and a list should appear\&. The
+\fI\-I \fR
+option may be useful if your NetBIOS names don\*(Aqt match your TCP/IP DNS host names or if you are trying to reach a host on another network\&.
+.RE
+.PP
+\-b|\-\-send\-buffer buffersize
+.RS 4
+When sending or receiving files, smbclient uses an internal buffer sized by the maximum number of allowed requests to the connected server\&. This command allows this size to be set to any range between 0 (which means use the default server controlled size) bytes and 16776960 (0xFFFF00) bytes\&. Using the server controlled size is the most efficient as smbclient will pipeline as many simultaneous reads or writes needed to keep the server as busy as possible\&. Setting this to any other size will slow down the transfer\&. This can also be set using the
+iosize
+command inside smbclient\&.
+.RE
+.PP
+\-B|\-\-browse
+.RS 4
+Browse SMB servers using DNS\&.
+.RE
+.PP
+\-t|\-\-timeout <timeout\-seconds>
+.RS 4
+This allows the user to tune the default timeout used for each SMB request\&. The default setting is 20 seconds\&. Increase it if requests to the server sometimes time out\&. This can happen when SMB3 encryption is selected and smbclient is overwhelming the server with requests\&. This can also be set using the
+timeout
+command inside smbclient\&.
+.RE
+.PP
+\-T|\-\-tar tar options
+.RS 4
+smbclient may be used to create
+tar(1)
+compatible backups of all the files on an SMB/CIFS share\&. The secondary tar flags that can be given to this option are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIc\fR
+\- Create a tar backup archive on the local system\&. Must be followed by the name of a tar file, tape device or "\-" for standard output\&. If using standard output you must turn the log level to its lowest value \-d0 to avoid corrupting your tar file\&. This flag is mutually exclusive with the
+\fIx\fR
+flag\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIn\fR
+\- In combination with the
+\fIc\fR
+flag, do not actually create the archive, instead perform a dry run that attempts everything that involved in creation other than writing the file\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIx\fR
+\- Extract (restore) a local tar file back to a share\&. Unless the \-D option is given, the tar files will be restored from the top level of the share\&. Must be followed by the name of the tar file, device or "\-" for standard input\&. Mutually exclusive with the
+\fIc\fR
+flag\&. Restored files have their creation times (mtime) set to the date saved in the tar file\&. Directories currently do not get their creation dates restored properly\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fII\fR
+\- Include files and directories\&. Is the default behavior when filenames are specified above\&. Causes files to be included in an extract or create (and therefore everything else to be excluded)\&. See example below\&. Filename globbing works in one of two ways\&. See
+\fIr\fR
+below\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIX\fR
+\- Exclude files and directories\&. Causes files to be excluded from an extract or create\&. See example below\&. Filename globbing works in one of two ways\&. See
+\fIr\fR
+below\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIF\fR
+\- File containing a list of files and directories\&. The
+\fIF\fR
+causes the name following the tarfile to create to be read as a filename that contains a list of files and directories to be included in an extract or create (and therefore everything else to be excluded)\&. See example below\&. Filename globbing works in one of two ways\&. See
+\fIr\fR
+below\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIb\fR
+\- Blocksize\&. Must be followed by a valid (greater than zero) blocksize\&. Causes tar file to be written out in blocksize*TBLOCK (512 byte) blocks\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIg\fR
+\- Incremental\&. Only back up files that have the archive bit set\&. Useful only with the
+\fIc\fR
+flag\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIv\fR
+\- Verbose\&. Makes tar print out the files being processed\&. By default tar is not verbose\&. This is the same as tarmode verbose\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIr\fR
+\- Use wildcard matching to include or exclude\&. Deprecated\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIN\fR
+\- Newer than\&. Must be followed by the name of a file whose date is compared against files found on the share during a create\&. Only files newer than the file specified are backed up to the tar file\&. Useful only with the
+\fIc\fR
+flag\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIa\fR
+\- Set archive bit\&. Causes the archive bit to be reset when a file is backed up\&. Useful with the
+\fIg\fR
+and
+\fIc\fR
+flags\&.
+.RE
+.sp
+.RE
+\fITar Long File Names\fR
+.sp
+smbclient\*(Aqs tar option now supports long file names both on backup and restore\&. However, the full path name of the file must be less than 1024 bytes\&. Also, when a tar archive is created,
+smbclient\*(Aqs tar option places all files in the archive with relative names, not absolute names\&.
+.sp
+\fITar Filenames\fR
+.sp
+All file names can be given as DOS path names (with \*(Aq\e\e\*(Aq as the component separator) or as UNIX path names (with \*(Aq/\*(Aq as the component separator)\&.
+.sp
+\fIExamples\fR
+.sp
+Restore from tar file
+backup\&.tar
+into myshare on mypc (no password on share)\&.
+.sp
+smbclient //mypc/myshare "" \-N \-Tx backup\&.tar
+.sp
+Restore everything except
+users/docs
+.sp
+smbclient //mypc/myshare "" \-N \-TXx backup\&.tar users/docs
+.sp
+Create a tar file of the files beneath
+users/docs\&.
+.sp
+smbclient //mypc/myshare "" \-N \-Tc backup\&.tar users/docs
+.sp
+Create the same tar file as above, but now use a DOS path name\&.
+.sp
+smbclient //mypc/myshare "" \-N \-Tc backup\&.tar users\eedocs
+.sp
+Create a tar file of the files listed in the file
+tarlist\&.
+.sp
+smbclient //mypc/myshare "" \-N \-TcF backup\&.tar tarlist
+.sp
+Create a tar file of all the files and directories in the share\&.
+.sp
+smbclient //mypc/myshare "" \-N \-Tc backup\&.tar *
+.RE
+.PP
+\-D|\-\-directory initial directory
+.RS 4
+Change to initial directory before starting\&. Probably only of any use with the tar \-T option\&.
+.RE
+.PP
+\-c|\-\-command command string
+.RS 4
+command string is a semicolon\-separated list of commands to be executed instead of prompting from stdin\&.
+\fI \-N\fR
+is implied by
+\fI\-c\fR\&.
+.sp
+This is particularly useful in scripts and for printing stdin to the server, e\&.g\&.
+\-c \*(Aqprint \-\*(Aq\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER
+.RS 4
+This option is used to determine what naming services and in what order to resolve host names to IP addresses\&. The option takes a space\-separated string of different name resolution options\&. The best ist to wrap the whole \-\-name\-resolve=NAME\-RESOLVE\-ORDER into quotes\&.
+.sp
+The options are: "lmhosts", "host", "wins" and "bcast"\&. They cause names to be resolved as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBlmhosts\fR: Lookup an IP address in the Samba lmhosts file\&. If the line in lmhosts has no name type attached to the NetBIOS name (see the
+\fBlmhosts\fR(5)
+for details) then any name type matches for lookup\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBhost\fR: Do a standard host name to IP address resolution, using the system
+/etc/hosts, NIS, or DNS lookups\&. This method of name resolution is operating system dependent, for instance on IRIX or Solaris this may be controlled by the
+/etc/nsswitch\&.conf
+file)\&. Note that this method is only used if the NetBIOS name type being queried is the 0x20 (server) name type, otherwise it is ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwins\fR: Query a name with the IP address listed in the
+\fIwins server\fR
+parameter\&. If no WINS server has been specified this method will be ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBbcast\fR: Do a broadcast on each of the known local interfaces listed in the
+\fIinterfaces\fR
+parameter\&. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet\&.
+.RE
+.sp
+.RE
+If this parameter is not set then the name resolve order defined in the
+smb\&.conf
+file parameter (\m[blue]\fBname resolve order\fR\m[]) will be used\&.
+.sp
+The default order is lmhosts, host, wins, bcast\&. Without this parameter or any entry in the
+\m[blue]\fBname resolve order\fR\m[]
+parameter of the
+smb\&.conf
+file, the name resolution methods will be attempted in this order\&.
+.RE
+.PP
+\-O|\-\-socket\-options=SOCKETOPTIONS
+.RS 4
+TCP socket options to set on the client socket\&. See the socket options parameter in the
+smb\&.conf
+manual page for the list of valid options\&.
+.RE
+.PP
+\-m|\-\-max\-protocol=MAXPROTOCOL
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported by the client\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient max protocol\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-n|\-\-netbiosname=NETBIOSNAME
+.RS 4
+This option allows you to override the NetBIOS name that Samba uses for itself\&. This is identical to setting the
+\m[blue]\fBnetbios name\fR\m[]
+parameter in the
+smb\&.conf
+file\&. However, a command line setting will take precedence over settings in
+smb\&.conf\&.
+.RE
+.PP
+\-\-netbios\-scope=SCOPE
+.RS 4
+This specifies a NetBIOS scope that
+nmblookup
+will use to communicate with when generating NetBIOS names\&. For details on the use of NetBIOS scopes, see rfc1001\&.txt and rfc1002\&.txt\&. NetBIOS scopes are
+\fIvery\fR
+rarely used, only set this parameter if you are the system administrator in charge of all the NetBIOS systems you communicate with\&.
+.RE
+.PP
+\-W|\-\-workgroup=WORKGROUP
+.RS 4
+Set the SMB domain of the username\&. This overrides the default domain which is the domain defined in smb\&.conf\&. If the domain specified is the same as the servers NetBIOS name, it causes the client to log on using the servers local SAM (as opposed to the Domain SAM)\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBworkgroup\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-r|\-\-realm=REALM
+.RS 4
+Set the realm for the domain\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBrealm\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-U|\-\-user=[DOMAIN\e]USERNAME[%PASSWORD]
+.RS 4
+Sets the SMB username or username and password\&.
+.sp
+If %PASSWORD is not specified, the user will be prompted\&. The client will first check the
+\fBUSER\fR
+environment variable (which is also permitted to also contain the password seperated by a %), then the
+\fBLOGNAME\fR
+variable (which is not permitted to contain a password) and if either exists, the value is used\&. If these environmental variables are not found, the username found in a Kerberos Credentials cache may be used\&.
+.sp
+A third option is to use a credentials file which contains the plaintext of the username and password\&. This option is mainly provided for scripts where the admin does not wish to pass the credentials on the command line or via environment variables\&. If this method is used, make certain that the permissions on the file restrict access from unwanted users\&. See the
+\fI\-A\fR
+for more details\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-N|\-\-no\-pass
+.RS 4
+If specified, this parameter suppresses the normal password prompt from the client to the user\&. This is useful when accessing a service that does not require a password\&.
+.sp
+Unless a password is specified on the command line or this parameter is specified, the client will request a password\&.
+.sp
+If a password is specified on the command line and this option is also defined the password on the command line will be silently ignored and no password will be used\&.
+.RE
+.PP
+\-\-password
+.RS 4
+Specify the password on the commandline\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+If \-\-password is not specified, the tool will check the
+\fBPASSWD\fR
+environment variable, followed by
+\fBPASSWD_FD\fR
+which is expected to contain an open file descriptor (FD) number\&.
+.sp
+Finally it will check
+\fBPASSWD_FILE\fR
+(containing a file path to be opened)\&. The file should only contain the password\&. Make certain that the permissions on the file restrict access from unwanted users!
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-\-pw\-nt\-hash
+.RS 4
+The supplied password is the NT hash\&.
+.RE
+.PP
+\-A|\-\-authentication\-file=filename
+.RS 4
+This option allows you to specify a file from which to read the username and password used in the connection\&. The format of the file is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+				username = <value>
+				password = <value>
+				domain   = <value>
+			
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Make certain that the permissions on the file restrict access from unwanted users!
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Use stored machine account password\&.
+.RE
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind\&.
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-use\-krb5\-ccache=CCACHE
+.RS 4
+Specifies the credential cache location for Kerberos authentication\&.
+.sp
+This will set \-\-use\-kerberos=required too\&.
+.RE
+.PP
+\-\-use\-winbind\-ccache
+.RS 4
+Try to use the credential cache by winbind\&.
+.RE
+.PP
+\-\-client\-protection=sign|encrypt|off
+.RS 4
+Sets the connection protection the client tool should use\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient protection\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.sp
+In case you need more fine grained control you can use:
+\-\-option=clientsmbencrypt=OPTION,
+\-\-option=clientipcsigning=OPTION,
+\-\-option=clientsigning=OPTION\&.
+.RE
+.SH "OPERATIONS"
+.PP
+Once the client is running, the user is presented with a prompt :
+.PP
+smb:\e>
+.PP
+The backslash ("\e\e") indicates the current working directory on the server, and will change if the current working directory is changed\&.
+.PP
+The prompt indicates that the client is ready and waiting to carry out a user command\&. Each command is a single word, optionally followed by parameters specific to that command\&. Command and parameters are space\-delimited unless these notes specifically state otherwise\&. All commands are case\-insensitive\&. Parameters to commands may or may not be case sensitive, depending on the command\&.
+.PP
+You can specify file names which have spaces in them by quoting the name with double quotes, for example "a long file name"\&.
+.PP
+Parameters shown in square brackets (e\&.g\&., "[parameter]") are optional\&. If not given, the command will use suitable defaults\&. Parameters shown in angle brackets (e\&.g\&., "<parameter>") are required\&.
+.PP
+Note that all commands operating on the server are actually performed by issuing a request to the server\&. Thus the behavior may vary from server to server, depending on how the server was implemented\&.
+.PP
+The commands available are given here in alphabetical order\&.
+.PP
+? [command]
+.RS 4
+If
+\fIcommand\fR
+is specified, the ? command will display a brief informative message about the specified command\&. If no command is specified, a list of available commands will be displayed\&.
+.RE
+.PP
+! [shell command]
+.RS 4
+If
+\fIshell command\fR
+is specified, the ! command will execute a shell locally and run the specified shell command\&. If no command is specified, a local shell will be run\&.
+.RE
+.PP
+allinfo file
+.RS 4
+The client will request that the server return all known information about a file or directory (including streams)\&.
+.RE
+.PP
+altname file
+.RS 4
+The client will request that the server return the "alternate" name (the 8\&.3 name) for a file or directory\&.
+.RE
+.PP
+archive <number>
+.RS 4
+Sets the archive level when operating on files\&. 0 means ignore the archive bit, 1 means only operate on files with this bit set, 2 means only operate on files with this bit set and reset it after operation, 3 means operate on all files and reset it after operation\&. The default is 0\&.
+.RE
+.PP
+backup
+.RS 4
+Toggle the state of the "backup intent" flag sent to the server on directory listings and file opens\&. If the "backup intent" flag is true, the server will try and bypass some file system checks if the user has been granted SE_BACKUP or SE_RESTORE privileges\&. This state is useful when performing a backup or restore operation\&.
+.RE
+.PP
+blocksize <number>
+.RS 4
+Sets the blocksize parameter for a tar operation\&. The default is 20\&. Causes tar file to be written out in blocksize*TBLOCK (normally 512 byte) units\&.
+.RE
+.PP
+cancel jobid0 [jobid1] \&.\&.\&. [jobidN]
+.RS 4
+The client will request that the server cancel the printjobs identified by the given numeric print job ids\&.
+.RE
+.PP
+case_sensitive
+.RS 4
+Toggles the setting of the flag in SMB packets that tells the server to treat filenames as case sensitive\&. Set to OFF by default (tells file server to treat filenames as case insensitive)\&. Only currently affects Samba 3\&.0\&.5 and above file servers with the case sensitive parameter set to auto in the smb\&.conf\&.
+.RE
+.PP
+cd <directory name>
+.RS 4
+If "directory name" is specified, the current working directory on the server will be changed to the directory specified\&. This operation will fail if for any reason the specified directory is inaccessible\&.
+.sp
+If no directory name is specified, the current working directory on the server will be reported\&.
+.RE
+.PP
+chmod file mode in octal
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. The client requests that the server change the UNIX permissions to the given octal mode, in standard UNIX format\&.
+.RE
+.PP
+chown file uid gid
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. The client requests that the server change the UNIX user and group ownership to the given decimal values\&. Note there is currently no way to remotely look up the UNIX uid and gid values for a given name\&. This may be addressed in future versions of the CIFS UNIX extensions\&.
+.RE
+.PP
+close <fileid>
+.RS 4
+Closes a file explicitly opened by the open command\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+del <mask>
+.RS 4
+The client will request that the server attempt to delete all files matching
+\fImask\fR
+from the current working directory on the server\&.
+.RE
+.PP
+deltree <mask>
+.RS 4
+The client will request that the server attempt to delete all files and directories matching
+\fImask\fR
+from the current working directory on the server\&. Note this will recursively delete files and directories within the directories selected even without the recurse command being set\&. If any of the delete requests fail the command will stop processing at that point, leaving files and directories not yet processed untouched\&. This is by design\&.
+.RE
+.PP
+dir <mask>
+.RS 4
+A list of the files matching
+\fImask\fR
+in the current working directory on the server will be retrieved from the server and displayed\&.
+.RE
+.PP
+du <filename>
+.RS 4
+Does a directory listing and then prints out the current disk usage and free space on a share\&.
+.RE
+.PP
+echo <number> <data>
+.RS 4
+Does an SMBecho request to ping the server\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+exit
+.RS 4
+Terminate the connection with the server and exit from the program\&.
+.RE
+.PP
+get <remote file name> [local file name]
+.RS 4
+Copy the file called
+remote file name
+from the server to the machine running the client\&. If specified, name the local copy
+local file name\&. Note that all transfers in
+smbclient
+are binary\&. See also the lowercase command\&.
+.RE
+.PP
+getfacl <filename>
+.RS 4
+Requires the server support the UNIX extensions\&. Requests and prints the POSIX ACL on a file\&.
+.RE
+.PP
+hardlink <src> <dest>
+.RS 4
+Creates a hardlink on the server using Windows CIFS semantics\&.
+.RE
+.PP
+help [command]
+.RS 4
+See the ? command above\&.
+.RE
+.PP
+history
+.RS 4
+Displays the command history\&.
+.RE
+.PP
+iosize <bytes>
+.RS 4
+When sending or receiving files, smbclient uses an internal buffer sized by the maximum number of allowed requests to the connected server\&. This command allows this size to be set to any range between 0 (which means use the default server controlled size) bytes and 16776960 (0xFFFF00) bytes\&. Using the server controlled size is the most efficient as smbclient will pipeline as many simultaneous reads or writes needed to keep the server as busy as possible\&. Setting this to any other size will slow down the transfer\&.
+.RE
+.PP
+lcd [directory name]
+.RS 4
+If
+\fIdirectory name\fR
+is specified, the current working directory on the local machine will be changed to the directory specified\&. This operation will fail if for any reason the specified directory is inaccessible\&.
+.sp
+If no directory name is specified, the name of the current working directory on the local machine will be reported\&.
+.RE
+.PP
+link target linkname
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. The client requests that the server create a hard link between the linkname and target files\&. The linkname file must not exist\&.
+.RE
+.PP
+listconnect
+.RS 4
+Show the current connections held for DFS purposes\&.
+.RE
+.PP
+lock <filenum> <r|w> <hex\-start> <hex\-len>
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. Tries to set a POSIX fcntl lock of the given type on the given range\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+logon <username> <password>
+.RS 4
+Establishes a new vuid for this session by logging on again\&. Replaces the current vuid\&. Prints out the new vuid\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+logoff
+.RS 4
+Logs the user off the server, closing the session\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+lowercase
+.RS 4
+Toggle lowercasing of filenames for the get and mget commands\&.
+.sp
+When lowercasing is toggled ON, local filenames are converted to lowercase when using the get and mget commands\&. This is often useful when copying (say) MSDOS files from a server, because lowercase filenames are the norm on UNIX systems\&.
+.RE
+.PP
+ls <mask>
+.RS 4
+See the dir command above\&.
+.RE
+.PP
+mask <mask>
+.RS 4
+This command allows the user to set up a mask which will be used during recursive operation of the mget and mput commands\&.
+.sp
+The masks specified to the mget and mput commands act as filters for directories rather than files when recursion is toggled ON\&.
+.sp
+The mask specified with the mask command is necessary to filter files within those directories\&. For example, if the mask specified in an mget command is "source*" and the mask specified with the mask command is "*\&.c" and recursion is toggled ON, the mget command will retrieve all files matching "*\&.c" in all directories below and including all directories matching "source*" in the current working directory\&.
+.sp
+Note that the value for mask defaults to blank (equivalent to "*") and remains so until the mask command is used to change it\&. It retains the most recently specified value indefinitely\&. To avoid unexpected results it would be wise to change the value of mask back to "*" after using the mget or mput commands\&.
+.RE
+.PP
+md <directory name>
+.RS 4
+See the mkdir command\&.
+.RE
+.PP
+mget <mask>
+.RS 4
+Copy all files matching
+\fImask\fR
+from the server to the machine running the client\&.
+.sp
+Note that
+\fImask\fR
+is interpreted differently during recursive operation and non\-recursive operation \- refer to the recurse and mask commands for more information\&. Note that all transfers in
+smbclient
+are binary\&. See also the lowercase command\&.
+.RE
+.PP
+mkdir <directory name>
+.RS 4
+Create a new directory on the server (user access privileges permitting) with the specified name\&.
+.RE
+.PP
+more <file name>
+.RS 4
+Fetch a remote file and view it with the contents of your PAGER environment variable\&.
+.RE
+.PP
+mput <mask>
+.RS 4
+Copy all files matching
+\fImask\fR
+in the current working directory on the local machine to the current working directory on the server\&.
+.sp
+Note that
+\fImask\fR
+is interpreted differently during recursive operation and non\-recursive operation \- refer to the recurse and mask commands for more information\&. Note that all transfers in
+smbclient
+are binary\&.
+.RE
+.PP
+notify <dir name>
+.RS 4
+Query a directory for change notifications\&. This command issues a recursive filechangenotify call for all possible changes\&. As changes come in will print one line per change\&. See
+https://msdn\&.microsoft\&.com/en\-us/library/dn392331\&.aspx
+for a description of the action numbers that this command prints\&.
+.sp
+This command never ends, it waits for event indefinitely\&.
+.RE
+.PP
+posix
+.RS 4
+Query the remote server to see if it supports the CIFS UNIX extensions and prints out the list of capabilities supported\&. If so, turn on POSIX pathname processing and large file read/writes (if available),\&.
+.RE
+.PP
+posix_encrypt <domain> <username> <password>
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. Attempt to negotiate SMB encryption on this connection\&. If smbclient connected with kerberos credentials (\-k) the arguments to this command are ignored and the kerberos credentials are used to negotiate GSSAPI signing and sealing instead\&. See also the \-e option to smbclient to force encryption on initial connection\&. This command is new with Samba 3\&.2\&.
+.RE
+.PP
+posix_open <filename> <octal mode>
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. Opens a remote file using the CIFS UNIX extensions and prints a fileid\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+posix_mkdir <directoryname> <octal mode>
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. Creates a remote directory using the CIFS UNIX extensions with the given mode\&.
+.RE
+.PP
+posix_rmdir <directoryname>
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. Deletes a remote directory using the CIFS UNIX extensions\&.
+.RE
+.PP
+posix_unlink <filename>
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. Deletes a remote file using the CIFS UNIX extensions\&.
+.RE
+.PP
+posix_whoami
+.RS 4
+Query the remote server for the user token using the CIFS UNIX extensions WHOAMI call\&. Prints out the guest status, user, group, group list and sid list that the remote server is using on behalf of the logged on user\&.
+.RE
+.PP
+print <file name>
+.RS 4
+Print the specified file from the local machine through a printable service on the server\&.
+.RE
+.PP
+prompt
+.RS 4
+Toggle prompting for filenames during operation of the mget and mput commands\&.
+.sp
+When toggled ON, the user will be prompted to confirm the transfer of each file during these commands\&. When toggled OFF, all specified files will be transferred without prompting\&.
+.RE
+.PP
+put <local file name> [remote file name]
+.RS 4
+Copy the file called
+local file name
+from the machine running the client to the server\&. If specified, name the remote copy
+remote file name\&. Note that all transfers in
+smbclient
+are binary\&. See also the lowercase command\&.
+.RE
+.PP
+queue
+.RS 4
+Displays the print queue, showing the job id, name, size and current status\&.
+.RE
+.PP
+quit
+.RS 4
+See the exit command\&.
+.RE
+.PP
+readlink symlinkname
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. Print the value of the symlink "symlinkname"\&.
+.RE
+.PP
+rd <directory name>
+.RS 4
+See the rmdir command\&.
+.RE
+.PP
+recurse
+.RS 4
+Toggle directory recursion for the commands mget and mput\&.
+.sp
+When toggled ON, these commands will process all directories in the source directory (i\&.e\&., the directory they are copying from ) and will recurse into any that match the mask specified to the command\&. Only files that match the mask specified using the mask command will be retrieved\&. See also the mask command\&.
+.sp
+When recursion is toggled OFF, only files from the current working directory on the source machine that match the mask specified to the mget or mput commands will be copied, and any mask specified using the mask command will be ignored\&.
+.RE
+.PP
+rename <old filename> <new filename> [\-f]
+.RS 4
+Rename files in the current working directory on the server from
+\fIold filename\fR
+to
+\fInew filename\fR\&. The optional \-f switch allows for superseding the destination file, if it exists\&. This is supported by NT1 protocol dialect and SMB2 protocol family\&.
+.RE
+.PP
+rm <mask>
+.RS 4
+Remove all files matching
+\fImask\fR
+from the current working directory on the server\&.
+.RE
+.PP
+rmdir <directory name>
+.RS 4
+Remove the specified directory (user access privileges permitting) from the server\&.
+.RE
+.PP
+scopy <source filename> <destination filename>
+.RS 4
+Attempt to copy a file on the server using the most efficient server\-side copy calls\&. Falls back to using read then write if server doesn\*(Aqt support server\-side copy\&.
+.RE
+.PP
+setmode <filename> <perm=[+|\e\-]rsha>
+.RS 4
+A version of the DOS attrib command to set file permissions\&. For example:
+.sp
+setmode myfile +r
+.sp
+would make myfile read only\&.
+.RE
+.PP
+showconnect
+.RS 4
+Show the currently active connection held for DFS purposes\&.
+.RE
+.PP
+stat file
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. The client requests the UNIX basic info level and prints out the same info that the Linux stat command would about the file\&. This includes the size, blocks used on disk, file type, permissions, inode number, number of links and finally the three timestamps (access, modify and change)\&. If the file is a special file (symlink, character or block device, fifo or socket) then extra information may also be printed\&.
+.RE
+.PP
+symlink target linkname
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. The client requests that the server create a symbolic hard link between the target and linkname files\&. The linkname file must not exist\&. Note that the server will not create a link to any path that lies outside the currently connected share\&. This is enforced by the Samba server\&.
+.RE
+.PP
+tar <c|x>[IXbgNa]
+.RS 4
+Performs a tar operation \- see the
+\fI\-T\fR
+command line option above\&. Behavior may be affected by the tarmode command (see below)\&. Using g (incremental) and N (newer) will affect tarmode settings\&. Note that using the "\-" option with tar x may not work \- use the command line option instead\&.
+.RE
+.PP
+blocksize <blocksize>
+.RS 4
+Blocksize\&. Must be followed by a valid (greater than zero) blocksize\&. Causes tar file to be written out in
+\fIblocksize\fR*TBLOCK (512 byte) blocks\&.
+.RE
+.PP
+tarmode <full|inc|reset|noreset|system|nosystem|hidden|nohidden|verbose|noverbose>
+.RS 4
+Changes tar\*(Aqs behavior with regard to DOS attributes\&. There are 4 modes which can be turned on or off\&.
+.sp
+Incremental mode (default off)\&. When off (using
+full) tar will back up everything regardless of the
+\fIarchive\fR
+bit setting\&. When on (using
+inc), tar will only back up files with the archive bit set\&.
+.sp
+Reset mode (default off)\&. When on (using
+reset), tar will remove the archive bit on all files it backs up (implies read/write share)\&. Use
+noreset
+to turn off\&.
+.sp
+System mode (default on)\&. When off, tar will not backup system files\&. Use
+nosystem
+to turn off\&.
+.sp
+Hidden mode (default on)\&. When off, tar will not backup hidden files\&. Use
+nohidden
+to turn off\&.
+.RE
+.PP
+timeout <per\-operation timeout in seconds>
+.RS 4
+This allows the user to tune the default timeout used for each SMB request\&. The default setting is 20 seconds\&. Increase it if requests to the server sometimes time out\&. This can happen when SMB3 encryption is selected and smbclient is overwhelming the server with requests\&.
+.RE
+.PP
+unlock <filenum> <hex\-start> <hex\-len>
+.RS 4
+This command depends on the server supporting the CIFS UNIX extensions and will fail if the server does not\&. Tries to unlock a POSIX fcntl lock on the given range\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+volume
+.RS 4
+Prints the current volume name of the share\&.
+.RE
+.PP
+vuid <number>
+.RS 4
+Changes the currently used vuid in the protocol to the given arbitrary number\&. Without an argument prints out the current vuid being used\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+tcon <sharename>
+.RS 4
+Establishes a new tree connect (connection to a share)\&. Replaces the current tree connect\&. Prints the new tid (tree id)\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+tdis
+.RS 4
+Close the current share connection (tree disconnect)\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+tid <number>
+.RS 4
+Changes the current tree id (tid) in the protocol to a new arbitrary number\&. Without an argument, it prints out the tid currently used\&. Used for internal Samba testing purposes\&.
+.RE
+.PP
+utimes <filename> <create time> <access time> <write time> < change time>
+.RS 4
+Changes the timestamps on a file by name\&. Times should be specified in the format [YY]YY:MM:DD\-HH:MM:SS or \-1 for no change\&.
+.RE
+.SH "NOTES"
+.PP
+Some servers are fussy about the case of supplied usernames, passwords, share names (AKA service names) and machine names\&. If you fail to connect try giving all parameters in uppercase\&.
+.PP
+It is often necessary to use the \-n option when connecting to some types of servers\&. For example OS/2 LanManager insists on a valid NetBIOS name being used, so you need to supply a valid name that would be known to the server\&.
+.PP
+smbclient supports long file names where the server supports the LANMAN2 protocol or above\&.
+.SH "ENVIRONMENT VARIABLES"
+.PP
+See the
+\-\-user
+and
+\-\-password
+options for details on ways to specify a username and password via an environment variable\&.
+.SH "INSTALLATION"
+.PP
+The location of the client program is a matter for individual system administrators\&. The following are thus suggestions only\&.
+.PP
+It is recommended that the smbclient software be installed in the
+/usr/local/samba/bin/
+or
+/usr/samba/bin/
+directory, this directory readable by all, writeable only by root\&. The client program itself should be executable by all\&. The client should
+\fINOT\fR
+be setuid or setgid!
+.PP
+The client log files should be put in a directory readable and writeable only by the user\&.
+.PP
+To test the client, you will need to know the name of a running SMB/CIFS server\&. It is possible to run
+\fBsmbd\fR(8)
+as an ordinary user \- running that server as a daemon on a user\-accessible port (typically any port number over 1024) would provide a suitable test server\&.
+.SH "DIAGNOSTICS"
+.PP
+Most diagnostics issued by the client are logged in a specified log file\&. The log file name is specified at compile time, but may be overridden on the command line\&.
+.PP
+The number and nature of diagnostics available depends on the debug level used by the client\&. If you have problems, set the debug level to 3 and peruse the log files\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/smbcontrol.1 b/docs/manpages/smbcontrol.1
new file mode 100644
index 0000000000..9996cc933f
--- /dev/null
+++ b/docs/manpages/smbcontrol.1
@@ -0,0 +1,343 @@
+'\" t
+.\"     Title: smbcontrol
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBCONTROL" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbcontrol \- send messages to smbd, nmbd or winbindd processes
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbcontrol [\-?|\-\-help] [\-\-usage] [\-t|\-\-timeout] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full]
+.HP \w'\ 'u
+smbcontrol [destination] [message\-type] [parameter]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+smbcontrol
+is a very small program, which sends messages to a
+\fBsmbd\fR(8), a
+\fBnmbd\fR(8), or a
+\fBwinbindd\fR(8)
+daemon running on the system\&.
+.SH "OPTIONS"
+.PP
+\-t|\-\-timeout
+.RS 4
+Set timeout to seconds\&.
+.RE
+.PP
+destination
+.RS 4
+One of
+\fInmbd\fR,
+\fIsmbd\fR,
+\fIwinbindd\fR
+or a process ID\&.
+.sp
+The
+\fIall\fR
+destination causes the message to "broadcast" to all running daemons including nmbd and winbind\&. This is a change for Samba 3\&.3, prior to this the parameter smbd used to do this\&.
+.sp
+The
+\fIsmbd\fR
+destination causes the message to be sent to the smbd daemon specified in the
+smbd\&.pid
+file\&.
+.sp
+The
+\fInmbd\fR
+destination causes the message to be sent to the nmbd daemon specified in the
+nmbd\&.pid
+file\&.
+.sp
+The
+\fIwinbindd\fR
+destination causes the message to be sent to the winbind daemon specified in the
+winbindd\&.pid
+file\&.
+.sp
+If a single process ID is given, the message is sent to only that process\&.
+.RE
+.PP
+message\-type
+.RS 4
+Type of message to send\&. See the section
+\fBMESSAGE\-TYPES\fR
+for details\&.
+.RE
+.PP
+parameters
+.RS 4
+any parameters required for the message\-type
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.SH "MESSAGE\-TYPES"
+.PP
+Available message types are:
+.PP
+close\-share
+.RS 4
+Order smbd to close the client connections to the named share\&. Note that this doesn\*(Aqt affect client connections to any other shares\&. This message\-type takes an argument of the share name for which client connections will be closed, or the "*" character which will close all currently open shares\&. This may be useful if you made changes to the access controls on the share\&. This message can only be sent to
+\fBsmbd\fR\&.
+.RE
+.PP
+close\-denied\-share
+.RS 4
+Behave like
+\fBclose\-share\fR, but don\*(Aqt disconnect users that are still allowed to access the share\&. It can safely be sent to all smbds after changing share access controls\&. It will only affect users who have been denied access since having connected initially\&. This message can only be sent to
+\fBsmbd\fR\&.
+.RE
+.PP
+debug
+.RS 4
+Set debug level to the value specified by the parameter\&. This can be sent to any of the destinations\&. If this message is sent to either the smbd or winbindd daemons, the parent process will rebroadcast the message to all child processes changing the debug level in each one\&.
+.RE
+.PP
+kill\-client\-ip
+.RS 4
+Order smbd to close the client connections from a given IP address\&. This message\-type takes an argument of the IP address from which client connections will be closed\&. This message can only be sent to
+\fBsmbd\fR\&.
+.RE
+.PP
+force\-election
+.RS 4
+This message causes the
+nmbd
+daemon to force a new browse master election\&.
+.RE
+.PP
+ping
+.RS 4
+Send specified number of "ping" messages and wait for the same number of reply "pong" messages\&. This can be sent to any of the destinations\&.
+.RE
+.PP
+profile
+.RS 4
+Change profile settings of a daemon, based on the parameter\&. The parameter can be "on" to turn on profile stats collection, "off" to turn off profile stats collection, "count" to enable only collection of count stats (time stats are disabled), and "flush" to zero the current profile stats\&. This can be sent to any smbd or nmbd destinations\&.
+.RE
+.PP
+debuglevel
+.RS 4
+Request debuglevel of a certain daemon and write it to stdout\&. This can be sent to any of the destinations\&.
+.RE
+.PP
+profilelevel
+.RS 4
+Request profilelevel of a certain daemon and write it to stdout\&. This can be sent to any smbd or nmbd destinations\&.
+.RE
+.PP
+printnotify
+.RS 4
+Order smbd to send a printer notify message to any Windows NT clients connected to a printer\&. This message\-type takes the following arguments:
+.PP
+queuepause printername
+.RS 4
+Send a queue pause change notify message to the printer specified\&.
+.RE
+.PP
+queueresume printername
+.RS 4
+Send a queue resume change notify message for the printer specified\&.
+.RE
+.PP
+jobpause printername unixjobid
+.RS 4
+Send a job pause change notify message for the printer and unix jobid specified\&.
+.RE
+.PP
+jobresume printername unixjobid
+.RS 4
+Send a job resume change notify message for the printer and unix jobid specified\&.
+.RE
+.PP
+jobdelete printername unixjobid
+.RS 4
+Send a job delete change notify message for the printer and unix jobid specified\&.
+.RE
+.sp
+Note that this message only sends notification that an event has occurred\&. It doesn\*(Aqt actually cause the event to happen\&.
+.sp
+This message can only be sent to
+\fBsmbd\fR\&.
+.RE
+.PP
+dmalloc\-mark
+.RS 4
+Set a mark for dmalloc\&. Can be sent to both smbd and nmbd\&. Only available if samba is built with dmalloc support\&.
+.RE
+.PP
+dmalloc\-log\-changed
+.RS 4
+Dump the pointers that have changed since the mark set by dmalloc\-mark\&. Can be sent to both smbd and nmbd\&. Only available if samba is built with dmalloc support\&.
+.RE
+.PP
+shutdown
+.RS 4
+Shut down specified daemon\&. Can be sent to both smbd and nmbd\&.
+.RE
+.PP
+pool\-usage
+.RS 4
+Print a human\-readable description of all talloc(pool) memory usage by the specified daemon/process\&. Available for both smbd and nmbd\&.
+.RE
+.PP
+ringbuf\-log
+.RS 4
+Fetch and print the ringbuf log\&. Requires
+\fIlogging = ringbuf\fR\&. Available for smbd, winbindd and nmbd\&.
+.RE
+.PP
+drvupgrade
+.RS 4
+Force clients of printers using specified driver to update their local version of the driver\&. Can only be sent to smbd\&.
+.RE
+.PP
+reload\-config
+.RS 4
+Force daemon to reload smb\&.conf configuration file\&. Can be sent to
+\fBsmbd\fR,
+\fBnmbd\fR, or
+\fBwinbindd\fR\&.
+.RE
+.PP
+reload\-printers
+.RS 4
+Force smbd to reload printers\&. Can only be sent to
+\fBsmbd\fR\&.
+.RE
+.PP
+idmap
+.RS 4
+Notify about changes of id mapping\&. Can be sent to
+\fBsmbd\fR
+or (not implemented yet)
+\fBwinbindd\fR\&.
+.PP
+flush [uid|gid]
+.RS 4
+Flush caches for sid <\-> gid and/or sid <\-> uid mapping\&.
+.RE
+.PP
+delete <ID>
+.RS 4
+Remove a mapping from cache\&. The mapping is given by <ID> which may either be a sid: S\-x\-\&.\&.\&., a gid: "GID number" or a uid: "UID number"\&.
+.RE
+.PP
+kill <ID>
+.RS 4
+Remove a mapping from cache\&. Terminate
+\fBsmbd\fR
+if the id is currently in use\&.
+.RE
+.RE
+.PP
+num\-children
+.RS 4
+Query the number of smbd child processes\&. This message can only be sent to
+\fBsmbd\fR\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBnmbd\fR(8)
+and
+\fBsmbd\fR(8)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/smbcquotas.1 b/docs/manpages/smbcquotas.1
new file mode 100644
index 0000000000..a566ac1931
--- /dev/null
+++ b/docs/manpages/smbcquotas.1
@@ -0,0 +1,440 @@
+'\" t
+.\"     Title: smbcquotas
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBCQUOTAS" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbcquotas \- Set or get QUOTAs of NTFS 5 shares
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbcquotas {//server/share} [\-u|\-\-quota\-user=USER] [\-L|\-\-list] [\-F|\-\-fs] [\-S|\-\-set=SETSTRING] [\-n|\-\-numeric] [\-v|\-\-verbose] [\-t|\-\-test\-args] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER] [\-O|\-\-socket\-options=SOCKETOPTIONS] [\-m|\-\-max\-protocol=MAXPROTOCOL] [\-n|\-\-netbiosname=NETBIOSNAME] [\-\-netbios\-scope=SCOPE] [\-W|\-\-workgroup=WORKGROUP] [\-\-realm=REALM] [\-U|\-\-user=[DOMAIN/]USERNAME[%PASSWORD]] [\-N|\-\-no\-pass] [\-\-password=STRING] [\-\-pw\-nt\-hash] [\-A|\-\-authentication\-file=FILE] [\-P|\-\-machine\-pass] [\-\-simple\-bind\-dn=DN] [\-\-use\-kerberos=desired|required|off] [\-\-use\-krb5\-ccache=CCACHE] [\-\-use\-winbind\-ccache] [\-\-client\-protection=sign|encrypt|off] [\-V|\-\-version]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+smbcquotas
+program manipulates NT Quotas on SMB file shares\&.
+.SH "OPTIONS"
+.PP
+The following options are available to the
+smbcquotas
+program\&.
+.PP
+\-u|\-\-quota\-user user
+.RS 4
+Specifies the user of whom the quotas are get or set\&. By default the current user\*(Aqs username will be used\&.
+.RE
+.PP
+\-L|\-\-list
+.RS 4
+Lists all quota records of the share\&.
+.RE
+.PP
+\-F|\-\-fs
+.RS 4
+Show the share quota status and default limits\&.
+.RE
+.PP
+\-S|\-\-set QUOTA_SET_COMMAND
+.RS 4
+This command sets/modifies quotas for a user or on the share, depending on the QUOTA_SET_COMMAND parameter which is described later\&.
+.RE
+.PP
+\-n|\-\-numeric
+.RS 4
+This option displays all QUOTA information in numeric format\&. The default is to convert SIDs to names and QUOTA limits to a readable string format\&.
+.RE
+.PP
+\-t|\-\-test\-args
+.RS 4
+Don\*(Aqt actually do anything, only validate the correctness of the arguments\&.
+.RE
+.PP
+\-v|\-\-verbose
+.RS 4
+Be verbose\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER
+.RS 4
+This option is used to determine what naming services and in what order to resolve host names to IP addresses\&. The option takes a space\-separated string of different name resolution options\&. The best ist to wrap the whole \-\-name\-resolve=NAME\-RESOLVE\-ORDER into quotes\&.
+.sp
+The options are: "lmhosts", "host", "wins" and "bcast"\&. They cause names to be resolved as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBlmhosts\fR: Lookup an IP address in the Samba lmhosts file\&. If the line in lmhosts has no name type attached to the NetBIOS name (see the
+\fBlmhosts\fR(5)
+for details) then any name type matches for lookup\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBhost\fR: Do a standard host name to IP address resolution, using the system
+/etc/hosts, NIS, or DNS lookups\&. This method of name resolution is operating system dependent, for instance on IRIX or Solaris this may be controlled by the
+/etc/nsswitch\&.conf
+file)\&. Note that this method is only used if the NetBIOS name type being queried is the 0x20 (server) name type, otherwise it is ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwins\fR: Query a name with the IP address listed in the
+\fIwins server\fR
+parameter\&. If no WINS server has been specified this method will be ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBbcast\fR: Do a broadcast on each of the known local interfaces listed in the
+\fIinterfaces\fR
+parameter\&. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet\&.
+.RE
+.sp
+.RE
+If this parameter is not set then the name resolve order defined in the
+smb\&.conf
+file parameter (\m[blue]\fBname resolve order\fR\m[]) will be used\&.
+.sp
+The default order is lmhosts, host, wins, bcast\&. Without this parameter or any entry in the
+\m[blue]\fBname resolve order\fR\m[]
+parameter of the
+smb\&.conf
+file, the name resolution methods will be attempted in this order\&.
+.RE
+.PP
+\-O|\-\-socket\-options=SOCKETOPTIONS
+.RS 4
+TCP socket options to set on the client socket\&. See the socket options parameter in the
+smb\&.conf
+manual page for the list of valid options\&.
+.RE
+.PP
+\-m|\-\-max\-protocol=MAXPROTOCOL
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported by the client\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient max protocol\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-n|\-\-netbiosname=NETBIOSNAME
+.RS 4
+This option allows you to override the NetBIOS name that Samba uses for itself\&. This is identical to setting the
+\m[blue]\fBnetbios name\fR\m[]
+parameter in the
+smb\&.conf
+file\&. However, a command line setting will take precedence over settings in
+smb\&.conf\&.
+.RE
+.PP
+\-\-netbios\-scope=SCOPE
+.RS 4
+This specifies a NetBIOS scope that
+nmblookup
+will use to communicate with when generating NetBIOS names\&. For details on the use of NetBIOS scopes, see rfc1001\&.txt and rfc1002\&.txt\&. NetBIOS scopes are
+\fIvery\fR
+rarely used, only set this parameter if you are the system administrator in charge of all the NetBIOS systems you communicate with\&.
+.RE
+.PP
+\-W|\-\-workgroup=WORKGROUP
+.RS 4
+Set the SMB domain of the username\&. This overrides the default domain which is the domain defined in smb\&.conf\&. If the domain specified is the same as the servers NetBIOS name, it causes the client to log on using the servers local SAM (as opposed to the Domain SAM)\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBworkgroup\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-r|\-\-realm=REALM
+.RS 4
+Set the realm for the domain\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBrealm\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-U|\-\-user=[DOMAIN\e]USERNAME[%PASSWORD]
+.RS 4
+Sets the SMB username or username and password\&.
+.sp
+If %PASSWORD is not specified, the user will be prompted\&. The client will first check the
+\fBUSER\fR
+environment variable (which is also permitted to also contain the password seperated by a %), then the
+\fBLOGNAME\fR
+variable (which is not permitted to contain a password) and if either exists, the value is used\&. If these environmental variables are not found, the username found in a Kerberos Credentials cache may be used\&.
+.sp
+A third option is to use a credentials file which contains the plaintext of the username and password\&. This option is mainly provided for scripts where the admin does not wish to pass the credentials on the command line or via environment variables\&. If this method is used, make certain that the permissions on the file restrict access from unwanted users\&. See the
+\fI\-A\fR
+for more details\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-N|\-\-no\-pass
+.RS 4
+If specified, this parameter suppresses the normal password prompt from the client to the user\&. This is useful when accessing a service that does not require a password\&.
+.sp
+Unless a password is specified on the command line or this parameter is specified, the client will request a password\&.
+.sp
+If a password is specified on the command line and this option is also defined the password on the command line will be silently ignored and no password will be used\&.
+.RE
+.PP
+\-\-password
+.RS 4
+Specify the password on the commandline\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+If \-\-password is not specified, the tool will check the
+\fBPASSWD\fR
+environment variable, followed by
+\fBPASSWD_FD\fR
+which is expected to contain an open file descriptor (FD) number\&.
+.sp
+Finally it will check
+\fBPASSWD_FILE\fR
+(containing a file path to be opened)\&. The file should only contain the password\&. Make certain that the permissions on the file restrict access from unwanted users!
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-\-pw\-nt\-hash
+.RS 4
+The supplied password is the NT hash\&.
+.RE
+.PP
+\-A|\-\-authentication\-file=filename
+.RS 4
+This option allows you to specify a file from which to read the username and password used in the connection\&. The format of the file is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+				username = <value>
+				password = <value>
+				domain   = <value>
+			
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Make certain that the permissions on the file restrict access from unwanted users!
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Use stored machine account password\&.
+.RE
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind\&.
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-use\-krb5\-ccache=CCACHE
+.RS 4
+Specifies the credential cache location for Kerberos authentication\&.
+.sp
+This will set \-\-use\-kerberos=required too\&.
+.RE
+.PP
+\-\-use\-winbind\-ccache
+.RS 4
+Try to use the credential cache by winbind\&.
+.RE
+.PP
+\-\-client\-protection=sign|encrypt|off
+.RS 4
+Sets the connection protection the client tool should use\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient protection\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.sp
+In case you need more fine grained control you can use:
+\-\-option=clientsmbencrypt=OPTION,
+\-\-option=clientipcsigning=OPTION,
+\-\-option=clientsigning=OPTION\&.
+.RE
+.SH "QUOTA_SET_COMMAND"
+.PP
+The format of an the QUOTA_SET_COMMAND is an operation name followed by a set of parameters specific to that operation\&.
+.PP
+To set user quotas for the user specified by \-u or for the current username:
+.PP
+\fB UQLIM:<username>:<softlimit>/<hardlimit> \fR
+.PP
+To set the default quotas for a share:
+.PP
+\fB FSQLIM:<softlimit>/<hardlimit> \fR
+.PP
+To change the share quota settings:
+.PP
+\fB FSQFLAGS:QUOTA_ENABLED/DENY_DISK/LOG_SOFTLIMIT/LOG_HARD_LIMIT \fR
+.PP
+All limits are specified as a number of bytes\&.
+.SH "EXIT STATUS"
+.PP
+The
+smbcquotas
+program sets the exit status depending on the success or otherwise of the operations performed\&. The exit status may be one of the following values\&.
+.PP
+If the operation succeeded, smbcquotas returns an exit status of 0\&. If
+smbcquotas
+couldn\*(Aqt connect to the specified server, or when there was an error getting or setting the quota(s), an exit status of 1 is returned\&. If there was an error parsing any command line arguments, an exit status of 2 is returned\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+smbcquotas
+was written by Stefan Metzmacher\&.
diff --git a/docs/manpages/smbd.8 b/docs/manpages/smbd.8
new file mode 100644
index 0000000000..8b3254785b
--- /dev/null
+++ b/docs/manpages/smbd.8
@@ -0,0 +1,422 @@
+'\" t
+.\"     Title: smbd
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBD" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbd \- server to provide SMB/CIFS services to clients
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbd [\-D|\-\-daemon] [\-i|\-\-interactive] [\-F|\-\-foreground] [\-\-no\-process\-group] [\-b|\-\-build\-options] [\-p\ <port\ number(s)>] [\-P\ <profiling\ level>] [\-d\ <debug\ level>] [\-\-debug\-stdout] [\-\-configfile=<configuration\ file>] [\-\-option=<name>=<value>] [\-l|\-\-log\-basename\ <log\ directory>] [\-\-leak\-report] [\-\-leak\-report\-full] [\-V|\-\-version]
+.SH "DESCRIPTION"
+.PP
+This program is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+smbd
+is the server daemon that provides filesharing and printing services to Windows clients\&. The server provides filespace and printer services to clients using the SMB (or CIFS) protocol\&. This is compatible with the LanManager protocol, and can service LanManager clients\&. These include MSCLIENT 3\&.0 for DOS, Windows for Workgroups, Windows 95/98/ME, Windows NT, Windows 2000, OS/2, DAVE for Macintosh, and smbfs for Linux\&.
+.PP
+An extensive description of the services that the server can provide is given in the man page for the configuration file controlling the attributes of those services (see
+\fBsmb.conf\fR(5)\&. This man page will not describe the services, but will concentrate on the administrative aspects of running the server\&.
+.PP
+Please note that there are significant security implications to running this server, and the
+\fBsmb.conf\fR(5)
+manual page should be regarded as mandatory reading before proceeding with installation\&.
+.PP
+A session is created whenever a client requests one\&. Each client gets a copy of the server for each session\&. This copy then services all connections made by the client during that session\&. When all connections from its client are closed, the copy of the server for that client terminates\&.
+.PP
+The configuration file, and any files that it includes, are automatically reloaded every three minutes, if they change\&. One can force a reload by sending a SIGHUP to the server\&. Reloading the configuration file will not affect connections to any service that is already established\&. Either the user will have to disconnect from the service, or
+smbd
+killed and restarted\&.
+.PP
+Instead of sending a SIGHUP signal, a request to reload configuration file may be sent using
+\fBsmbcontrol\fR(1)
+program\&.
+.SH "OPTIONS"
+.PP
+\-D|\-\-daemon
+.RS 4
+If specified, this parameter causes the server to operate as a daemon\&. That is, it detaches itself and runs in the background, fielding requests on the appropriate port\&. Operating the server as a daemon is the recommended way of running
+smbd
+for servers that provide more than casual use file and print services\&. This switch is assumed if
+smbd
+is executed on the command line of a shell\&.
+.RE
+.PP
+\-i|\-\-interactive
+.RS 4
+If this parameter is specified it causes the server to run "interactively", not as a daemon, even if the server is executed on the command line of a shell\&. Setting this parameter negates the implicit daemon mode when run from the command line\&.
+smbd
+will only accept one connection and terminate\&. It will also log to standard output, as if the
+\-S
+parameter had been given\&.
+.RE
+.PP
+\-F|\-\-foreground
+.RS 4
+If specified, this parameter causes the main
+smbd
+process to not daemonize, i\&.e\&. double\-fork and disassociate with the terminal\&. Child processes are still created as normal to service each connection request, but the main process does not exit\&. This operation mode is suitable for running
+smbd
+under process supervisors such as
+supervise
+and
+svscan
+from Daniel J\&. Bernstein\*(Aqs
+daemontools
+package, or the AIX process monitor\&.
+.RE
+.PP
+\-\-no\-process\-group
+.RS 4
+Do not create a new process group for smbd\&.
+.RE
+.PP
+\-b|\-\-build\-options
+.RS 4
+Prints information about how Samba was built\&.
+.RE
+.PP
+\-p|\-\-port<port number(s)>
+.RS 4
+\fIport number(s)\fR
+is a space or comma\-separated list of TCP ports smbd should listen on\&. The default value is taken from the
+\m[blue]\fBports\fR\m[]
+parameter in
+smb\&.conf
+.sp
+The default ports are 139 (used for SMB over NetBIOS over TCP) and port 445 (used for plain SMB over TCP)\&.
+.RE
+.PP
+\-P|\-\-profiling\-level<profiling level>
+.RS 4
+\fIprofiling level\fR
+is a number specifying the level of profiling data to be collected\&. 0 turns off profiling, 1 turns on counter profiling only, 2 turns on complete profiling, and 3 resets all profiling data\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL, \-\-debug\-stdout
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 0\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+This will redirect debug output to STDOUT\&. By default server daemons are logging to a log file\&.
+.RE
+.PP
+\-\-configfile=CONFIGFILE
+.RS 4
+The file specified contains the configuration details required by the server\&. The information in this file includes server\-specific information such as what printcap file to use, as well as descriptions of all the services that the server is to provide\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.SH "FILES"
+.PP
+/etc/inetd\&.conf
+.RS 4
+If the server is to be run by the
+inetd
+meta\-daemon, this file must contain suitable startup information for the meta\-daemon\&.
+.RE
+.PP
+/etc/rc
+.RS 4
+or whatever initialization script your system uses)\&.
+.sp
+If running the server as a daemon at startup, this file will need to contain an appropriate startup sequence for the server\&.
+.RE
+.PP
+/etc/services
+.RS 4
+If running the server via the meta\-daemon
+inetd, this file must contain a mapping of service name (e\&.g\&., netbios\-ssn) to service port (e\&.g\&., 139) and protocol type (e\&.g\&., tcp)\&.
+.RE
+.PP
+/usr/local/samba/lib/smb\&.conf
+.RS 4
+This is the default location of the
+\fBsmb.conf\fR(5)
+server configuration file\&. Other common places that systems install this file are
+/usr/samba/lib/smb\&.conf
+and
+/etc/samba/smb\&.conf\&.
+.sp
+This file describes all the services the server is to make available to clients\&. See
+\fBsmb.conf\fR(5)
+for more information\&.
+.RE
+.SH "LIMITATIONS"
+.PP
+On some systems
+smbd
+cannot change uid back to root after a setuid() call\&. Such systems are called trapdoor uid systems\&. If you have such a system, you will be unable to connect from a client (such as a PC) as two different users at once\&. Attempts to connect the second user will result in access denied or similar\&.
+.SH "ENVIRONMENT VARIABLES"
+.PP
+\fBPRINTER\fR
+.RS 4
+If no printer name is specified to printable services, most systems will use the value of this variable (or
+\fBlp\fR
+if this variable is not defined) as the name of the printer to use\&. This is not specific to the server, however\&.
+.RE
+.SH "PAM INTERACTION"
+.PP
+Samba uses PAM for authentication (when presented with a plaintext password), for account checking (is this account disabled?) and for session management\&. The degree too which samba supports PAM is restricted by the limitations of the SMB protocol and the
+\m[blue]\fBobey pam restrictions\fR\m[]
+\fBsmb.conf\fR(5)
+parameter\&. When this is set, the following restrictions apply:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIAccount Validation\fR: All accesses to a samba server are checked against PAM to see if the account is valid, not disabled and is permitted to login at this time\&. This also applies to encrypted logins\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fISession Management\fR: When not using share level security, users must pass PAM\*(Aqs session checks before access is granted\&. Note however, that this is bypassed in share level security\&. Note also that some older pam configuration files may need a line added for session support\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "DIAGNOSTICS"
+.PP
+Most diagnostics issued by the server are logged in a specified log file\&. The log file name is specified at compile time, but may be overridden on the command line\&.
+.PP
+The number and nature of diagnostics available depends on the debug level used by the server\&. If you have problems, set the debug level to 3 and peruse the log files\&.
+.PP
+Most messages are reasonably self\-explanatory\&. Unfortunately, at the time this man page was created, there are too many diagnostics available in the source code to warrant describing each and every diagnostic\&. At this stage your best bet is still to grep the source code and inspect the conditions that gave rise to the diagnostics you are seeing\&.
+.SH "TDB FILES"
+.PP
+Samba stores it\*(Aqs data in several TDB (Trivial Database) files, usually located in
+/var/lib/samba\&.
+.PP
+(*) information persistent across restarts (but not necessarily important to backup)\&.
+.PP
+account_policy\&.tdb*
+.RS 4
+NT account policy settings such as pw expiration, etc\&.\&.\&.
+.RE
+.PP
+brlock\&.tdb
+.RS 4
+byte range locks
+.RE
+.PP
+browse\&.dat
+.RS 4
+browse lists
+.RE
+.PP
+gencache\&.tdb
+.RS 4
+generic caching db
+.RE
+.PP
+group_mapping\&.tdb*
+.RS 4
+group mapping information
+.RE
+.PP
+locking\&.tdb
+.RS 4
+share modes & oplocks
+.RE
+.PP
+login_cache\&.tdb*
+.RS 4
+bad pw attempts
+.RE
+.PP
+messages\&.tdb
+.RS 4
+Samba messaging system
+.RE
+.PP
+netsamlogon_cache\&.tdb*
+.RS 4
+cache of user net_info_3 struct from net_samlogon() request (as a domain member)
+.RE
+.PP
+ntdrivers\&.tdb*
+.RS 4
+installed printer drivers
+.RE
+.PP
+ntforms\&.tdb*
+.RS 4
+installed printer forms
+.RE
+.PP
+ntprinters\&.tdb*
+.RS 4
+installed printer information
+.RE
+.PP
+printing/
+.RS 4
+directory containing tdb per print queue of cached lpq output
+.RE
+.PP
+registry\&.tdb
+.RS 4
+Windows registry skeleton (connect via regedit\&.exe)
+.RE
+.PP
+smbXsrv_session_global\&.tdb
+.RS 4
+session information (e\&.g\&. support for \*(Aqutmp = yes\*(Aq)
+.RE
+.PP
+smbXsrv_tcon_global\&.tdb
+.RS 4
+share connections (used to enforce max connections, etc\&.\&.\&.)
+.RE
+.PP
+smbXsrv_open_global\&.tdb
+.RS 4
+open file handles (used durable handles, etc\&.\&.\&.)
+.RE
+.PP
+share_info\&.tdb*
+.RS 4
+share acls
+.RE
+.PP
+winbindd_cache\&.tdb
+.RS 4
+winbindd\*(Aqs cache of user lists, etc\&.\&.\&.
+.RE
+.PP
+winbindd_idmap\&.tdb*
+.RS 4
+winbindd\*(Aqs local idmap db
+.RE
+.PP
+wins\&.dat*
+.RS 4
+wins database when \*(Aqwins support = yes\*(Aq
+.RE
+.SH "SIGNALS"
+.PP
+Sending the
+smbd
+a SIGHUP will cause it to reload its
+smb\&.conf
+configuration file within a short period of time\&.
+.PP
+To shut down a user\*(Aqs
+smbd
+process it is recommended that
+SIGKILL (\-9)
+\fINOT\fR
+be used, except as a last resort, as this may leave the shared memory area in an inconsistent state\&. The safe way to terminate an
+smbd
+is to send it a SIGTERM (\-15) signal and wait for it to die on its own\&.
+.PP
+The debug log level of
+smbd
+may be raised or lowered using
+\fBsmbcontrol\fR(1)
+program (SIGUSR[1|2] signals are no longer used since Samba 2\&.2)\&. This is to allow transient problems to be diagnosed, whilst still running at a normally low log level\&.
+.PP
+Note that as the signal handlers send a debug write, they are not re\-entrant in
+smbd\&. This you should wait until
+smbd
+is in a state of waiting for an incoming SMB before issuing them\&. It is possible to make the signal handlers safe by un\-blocking the signals before the select call and re\-blocking them after, however this would affect performance\&.
+.SH "SEE ALSO"
+.PP
+\fBhosts_access\fR(5),
+\fBinetd\fR(8),
+\fBnmbd\fR(8),
+\fBsmb.conf\fR(5),
+\fBsmbclient\fR(1),
+\fBtestparm\fR(1), and the Internet RFC\*(Aqs
+rfc1001\&.txt,
+rfc1002\&.txt\&. In addition the CIFS (formerly SMB) specification is available as a link from the Web page
+https://www\&.samba\&.org/cifs/\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/smbget.1 b/docs/manpages/smbget.1
new file mode 100644
index 0000000000..27dc9d178a
--- /dev/null
+++ b/docs/manpages/smbget.1
@@ -0,0 +1,192 @@
+'\" t
+.\"     Title: smbget
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBGET" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbget \- wget\-like utility for download files over SMB
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbget [\-a,\ \-\-guest] [\-r,\ \-\-resume] [\-R,\ \-\-recursive] [\-U,\ \-\-user=STRING] [\-w,\ \-\-workgroup=STRING] [\-n,\ \-\-nonprompt] [\-d,\ \-\-debuglevel=INT] [\-D,\ \-\-dots] [\-o,\ \-\-outputfile] [\-f,\ \-\-rcfile] [\-q,\ \-\-quiet] [\-v,\ \-\-verbose] [\-b,\ \-\-blocksize] [\-O,\ \-\-stdout] [\-u,\ \-\-update] [\-?,\ \-\-help] [\-\-usage] {smb://host/share/path/to/file} [smb://url2/] [\&.\&.\&.]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+smbget is a simple utility with wget\-like semantics, that can download files from SMB servers\&. You can specify the files you would like to download on the command\-line\&.
+.PP
+The files should be in the smb\-URL standard, e\&.g\&. use smb://host/share/file for the UNC path
+\fI\e\e\e\eHOST\e\eSHARE\e\efile\fR\&.
+.SH "OPTIONS"
+.PP
+\-a, \-\-guest
+.RS 4
+Work as user guest
+.RE
+.PP
+\-r, \-\-resume
+.RS 4
+Automatically resume aborted files
+.RE
+.PP
+\-R, \-\-recursive
+.RS 4
+Recursively download files
+.RE
+.PP
+\-U, \-\-user=\fIusername[%password]\fR
+.RS 4
+Username (and password) to use
+.RE
+.PP
+\-w, \-\-workgroup=STRING
+.RS 4
+Workgroup to use (optional)
+.RE
+.PP
+\-n, \-\-nonprompt
+.RS 4
+Don\*(Aqt ask anything (non\-interactive)
+.RE
+.PP
+\-d, \-\-debuglevel=INT
+.RS 4
+Debuglevel to use
+.RE
+.PP
+\-D, \-\-dots
+.RS 4
+Show dots as progress indication
+.RE
+.PP
+\-o, \-\-outputfile
+.RS 4
+Write the file that is being downloaded to the specified file\&. Can not be used together with \-R\&.
+.RE
+.PP
+\-O, \-\-stdout
+.RS 4
+Write the file that is being downloaded to standard output\&.
+.RE
+.PP
+\-f, \-\-rcfile
+.RS 4
+Use specified rcfile\&. This will be loaded in the order it was specified \- e\&.g\&. if you specify any options before this one, they might get overridden by the contents of the rcfile\&.
+.RE
+.PP
+\-q, \-\-quiet
+.RS 4
+Be quiet
+.RE
+.PP
+\-v, \-\-verbose
+.RS 4
+Be verbose
+.RE
+.PP
+\-b, \-\-blocksize
+.RS 4
+Number of bytes to download in a block\&. Defaults to 64000\&.
+.RE
+.PP
+\-?, \-\-help
+.RS 4
+Show help message
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message
+.RE
+.PP
+\-u, \-\-update
+.RS 4
+Download only when remote file is newer than local file or local file is missing\&.
+.RE
+.SH "SMB URLS"
+.PP
+SMB URL\*(Aqs should be specified in the following format:
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
+smb://[[[domain;]user[:password@]]server[/share[/path[/file]]]]
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
+smb:// means all the workgroups
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+.if n \{\
+.RS 4
+.\}
+.nf
+smb://name/ means, if \fIname\fR is a workgroup, all the servers in this workgroup, or if \fIname\fR is a server, all the shares on this server\&.
+.fi
+.if n \{\
+.RE
+.\}
+.SH "EXAMPLES"
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+# Recursively download \*(Aqsrc\*(Aq directory
+smbget \-R smb://rhonwyn/jelmer/src
+# Download FreeBSD ISO and enable resuming
+smbget \-r smb://rhonwyn/isos/FreeBSD5\&.1\&.iso
+# Recursively download all ISOs
+smbget \-Rr smb://rhonwyn/isos
+# Backup my data on rhonwyn
+smbget \-Rr smb://rhonwyn/
+.fi
+.if n \{\
+.RE
+.\}
+.SH "BUGS"
+.PP
+Permission denied is returned in some cases where the cause of the error is unknown (such as an illegally formatted smb:// url or trying to get a directory without \-R turned on)\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The smbget manpage was written by Jelmer Vernooij\&.
diff --git a/docs/manpages/smbgetrc.5 b/docs/manpages/smbgetrc.5
new file mode 100644
index 0000000000..19f31d130c
--- /dev/null
+++ b/docs/manpages/smbgetrc.5
@@ -0,0 +1,100 @@
+'\" t
+.\"     Title: smbgetrc
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: File Formats and Conventions
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBGETRC" "5" "09/20/2021" "Samba 4\&.15\&.0" "File Formats and Conventions"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbgetrc \- configuration file for smbget
+.SH "SYNOPSIS"
+.PP
+smbgetrc
+.SH "DESCRIPTION"
+.PP
+This manual page documents the format and options of the
+\fIsmbgetrc\fR
+file\&. This is the configuration file used by the
+\fBsmbget\fR(1)
+utility\&. The file contains of key\-value pairs, one pair on each line\&. The key and value should be separated by a space\&.
+.PP
+By default, smbget reads its configuration from
+\fI$HOME/\&.smbgetrc\fR, though other locations can be specified using the command\-line options\&.
+.SH "OPTIONS"
+.PP
+The following keys can be set:
+.PP
+resume on|off
+.RS 4
+Whether aborted downloads should be automatically resumed\&.
+.RE
+.PP
+recursive on|off
+.RS 4
+Whether directories should be downloaded recursively
+.RE
+.PP
+user \fIname[%password]\fR
+.RS 4
+Username (and password) to use when logging in to the remote server\&. Use an empty string for anonymous access\&.
+.RE
+.PP
+workgroup \fIwg\fR
+.RS 4
+Workgroup to use when logging in
+.RE
+.PP
+nonprompt on|off
+.RS 4
+Turns off asking for username and password\&. Useful for scripts\&.
+.RE
+.PP
+debuglevel \fIint\fR
+.RS 4
+(Samba) debuglevel to run at\&. Useful for tracking down protocol level problems\&.
+.RE
+.PP
+dots on|off
+.RS 4
+Whether a single dot should be printed for each block that has been downloaded, instead of the default progress indicator\&.
+.RE
+.PP
+blocksize \fIint\fR
+.RS 4
+Number of bytes to put in a block\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbget\fR(1)
+and
+\fBSamba\fR(7)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+This manual page was written by Jelmer Vernooij
diff --git a/docs/manpages/smbpasswd.5 b/docs/manpages/smbpasswd.5
new file mode 100644
index 0000000000..1a9ace083d
--- /dev/null
+++ b/docs/manpages/smbpasswd.5
@@ -0,0 +1,175 @@
+'\" t
+.\"     Title: smbpasswd
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: File Formats and Conventions
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBPASSWD" "5" "09/20/2021" "Samba 4\&.15\&.0" "File Formats and Conventions"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbpasswd \- The Samba encrypted password file
+.SH "SYNOPSIS"
+.PP
+smbpasswd
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+smbpasswd is the Samba encrypted password file\&. It contains the username, Unix user id and the SMB hashed passwords of the user, as well as account flag information and the time the password was last changed\&. This file format has been evolving with Samba and has had several different formats in the past\&.
+.SH "FILE FORMAT"
+.PP
+The format of the smbpasswd file used by Samba 2\&.2 is very similar to the familiar Unix
+passwd(5)
+file\&. It is an ASCII file containing one line for each user\&. Each field within each line is separated from the next by a colon\&. Any entry beginning with \*(Aq#\*(Aq is ignored\&. The smbpasswd file contains the following information for each user:
+.PP
+name
+.RS 4
+This is the user name\&. It must be a name that already exists in the standard UNIX passwd file\&.
+.RE
+.PP
+uid
+.RS 4
+This is the UNIX uid\&. It must match the uid field for the same user entry in the standard UNIX passwd file\&. If this does not match then Samba will refuse to recognize this smbpasswd file entry as being valid for a user\&.
+.RE
+.PP
+Lanman Password Hash
+.RS 4
+This is the LANMAN hash of the user\*(Aqs password, encoded as 32 hex digits\&. The LANMAN hash is created by DES encrypting a well known string with the user\*(Aqs password as the DES key\&. This is the same password used by Windows 95/98 machines\&. Note that this password hash is regarded as weak as it is vulnerable to dictionary attacks and if two users choose the same password this entry will be identical (i\&.e\&. the password is not "salted" as the UNIX password is)\&. If the user has a null password this field will contain the characters "NO PASSWORD" as the start of the hex string\&. If the hex string is equal to 32 \*(AqX\*(Aq characters then the user\*(Aqs account is marked as
+\fBdisabled\fR
+and the user will not be able to log onto the Samba server\&.
+.sp
+\fIWARNING !!\fR
+Note that, due to the challenge\-response nature of the SMB/CIFS authentication protocol, anyone with a knowledge of this password hash will be able to impersonate the user on the network\&. For this reason these hashes are known as
+\fIplain text equivalents\fR
+and must
+\fINOT\fR
+be made available to anyone but the root user\&. To protect these passwords the smbpasswd file is placed in a directory with read and traverse access only to the root user and the smbpasswd file itself must be set to be read/write only by root, with no other access\&.
+.RE
+.PP
+NT Password Hash
+.RS 4
+This is the Windows NT hash of the user\*(Aqs password, encoded as 32 hex digits\&. The Windows NT hash is created by taking the user\*(Aqs password as represented in 16\-bit, little\-endian UNICODE and then applying the MD4 (internet rfc1321) hashing algorithm to it\&.
+.sp
+This password hash is considered more secure than the LANMAN Password Hash as it preserves the case of the password and uses a much higher quality hashing algorithm\&. However, it is still the case that if two users choose the same password this entry will be identical (i\&.e\&. the password is not "salted" as the UNIX password is)\&.
+.sp
+\fIWARNING !!\fR\&. Note that, due to the challenge\-response nature of the SMB/CIFS authentication protocol, anyone with a knowledge of this password hash will be able to impersonate the user on the network\&. For this reason these hashes are known as
+\fIplain text equivalents\fR
+and must
+\fINOT\fR
+be made available to anyone but the root user\&. To protect these passwords the smbpasswd file is placed in a directory with read and traverse access only to the root user and the smbpasswd file itself must be set to be read/write only by root, with no other access\&.
+.RE
+.PP
+Account Flags
+.RS 4
+This section contains flags that describe the attributes of the users account\&. This field is bracketed by \*(Aq[\*(Aq and \*(Aq]\*(Aq characters and is always 13 characters in length (including the \*(Aq[\*(Aq and \*(Aq]\*(Aq characters)\&. The contents of this field may be any of the following characters:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIU\fR
+\- This means this is a "User" account, i\&.e\&. an ordinary user\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIN\fR
+\- This means the account has no password (the passwords in the fields LANMAN Password Hash and NT Password Hash are ignored)\&. Note that this will only allow users to log on with no password if the
+\fI null passwords\fR
+parameter is set in the
+\fBsmb.conf\fR(5)
+config file\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fID\fR
+\- This means the account is disabled and no SMB/CIFS logins will be allowed for this user\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIX\fR
+\- This means the password does not expire\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIW\fR
+\- This means this account is a "Workstation Trust" account\&. This kind of account is used in the Samba PDC code stream to allow Windows NT Workstations and Servers to join a Domain hosted by a Samba PDC\&.
+.RE
+.sp
+.RE
+Other flags may be added as the code is extended in future\&. The rest of this field space is filled in with spaces\&. For further information regarding the flags that are supported please refer to the man page for the
+pdbedit
+command\&.
+.RE
+.PP
+Last Change Time
+.RS 4
+This field consists of the time the account was last modified\&. It consists of the characters \*(AqLCT\-\*(Aq (standing for "Last Change Time") followed by a numeric encoding of the UNIX time in seconds since the epoch (1970) that the last change was made\&.
+.RE
+.PP
+All other colon separated fields are ignored at this time\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbpasswd\fR(8),
+\fBSamba\fR(7), and the Internet RFC1321 for details on the MD4 algorithm\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/smbpasswd.8 b/docs/manpages/smbpasswd.8
new file mode 100644
index 0000000000..349a8eb014
--- /dev/null
+++ b/docs/manpages/smbpasswd.8
@@ -0,0 +1,324 @@
+'\" t
+.\"     Title: smbpasswd
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBPASSWD" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbpasswd \- change a user\*(Aqs SMB password
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbpasswd [\-a] [\-c\ <config\ file>] [\-x] [\-d] [\-e] [\-D\ debuglevel] [\-n] [\-r\ <remote\ machine>] [\-R\ <name\ resolve\ order>] [\-m] [\-U\ username[%password]] [\-h] [\-s] [\-w\ pass] [\-W] [\-i] [\-L] [username]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The smbpasswd program has several different functions, depending on whether it is run by the
+\fIroot\fR
+user or not\&. When run as a normal user it allows the user to change the password used for their SMB sessions on any machines that store SMB passwords\&.
+.PP
+By default (when run with no arguments) it will attempt to change the current user\*(Aqs SMB password on the local machine\&. This is similar to the way the
+passwd(1)
+program works\&.
+smbpasswd
+differs from how the passwd program works however in that it is not
+\fIsetuid root\fR
+but works in a client\-server mode and communicates with a locally running
+\fBsmbd\fR(8)\&. As a consequence in order for this to succeed the smbd daemon must be running on the local machine\&. On a UNIX machine the encrypted SMB passwords are usually stored in the default passdb backend\&.
+.PP
+When run by an ordinary user with no options, smbpasswd will prompt them for their old SMB password and then ask them for their new password twice, to ensure that the new password was typed correctly\&. No passwords will be echoed on the screen whilst being typed\&. If you have a blank SMB password (specified by the string "NO PASSWORD" in the smbpasswd file) then just press the <Enter> key when asked for your old password\&.
+.PP
+smbpasswd can also be used by a normal user to change their SMB password on remote machines, such as Windows NT Primary Domain Controllers\&. See the (\fI\-r\fR) and
+\fI\-U\fR
+options below\&.
+.PP
+When run by root, smbpasswd allows new users to be added and deleted in the smbpasswd file, as well as allows changes to the attributes of the user in this file to be made\&. When run by root,
+smbpasswd
+accesses the local smbpasswd file directly, thus enabling changes to be made even if smbd is not running\&.
+.SH "OPTIONS"
+.PP
+\-a
+.RS 4
+This option specifies that the username following should be added to the local smbpasswd file, with the new password typed (type <Enter> for the old password)\&. This option is ignored if the username following already exists in the smbpasswd file and it is treated like a regular change password command\&. Note that the default passdb backends require the user to already exist in the system password file (usually
+/etc/passwd), else the request to add the user will fail\&.
+.sp
+This option is only available when running smbpasswd as root\&.
+.RE
+.PP
+\-c
+.RS 4
+This option can be used to specify the path and file name of the
+smb\&.conf
+configuration file when it is important to use other than the default file and / or location\&.
+.RE
+.PP
+\-x
+.RS 4
+This option specifies that the username following should be deleted from the local smbpasswd file\&.
+.sp
+This option is only available when running smbpasswd as root\&.
+.RE
+.PP
+\-d
+.RS 4
+This option specifies that the username following should be
+\fBdisabled\fR
+in the local smbpasswd file\&. This is done by writing a
+\fB\*(AqD\*(Aq\fR
+flag into the account control space in the smbpasswd file\&. Once this is done all attempts to authenticate via SMB using this username will fail\&.
+.sp
+If the smbpasswd file is in the \*(Aqold\*(Aq format (pre\-Samba 2\&.0 format) there is no space in the user\*(Aqs password entry to write this information and the command will FAIL\&. See
+\fBsmbpasswd\fR(5)
+for details on the \*(Aqold\*(Aq and new password file formats\&.
+.sp
+This option is only available when running smbpasswd as root\&.
+.RE
+.PP
+\-e
+.RS 4
+This option specifies that the username following should be
+\fBenabled\fR
+in the local smbpasswd file, if the account was previously disabled\&. If the account was not disabled this option has no effect\&. Once the account is enabled then the user will be able to authenticate via SMB once again\&.
+.sp
+If the smbpasswd file is in the \*(Aqold\*(Aq format, then
+smbpasswd
+will FAIL to enable the account\&. See
+\fBsmbpasswd\fR(5)
+for details on the \*(Aqold\*(Aq and new password file formats\&.
+.sp
+This option is only available when running smbpasswd as root\&.
+.RE
+.PP
+\-D debuglevel
+.RS 4
+\fIdebuglevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is zero\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of smbpasswd\&. At level 0, only critical errors and serious warnings will be logged\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.RE
+.PP
+\-n
+.RS 4
+This option specifies that the username following should have their password set to null (i\&.e\&. a blank password) in the local smbpasswd file\&. This is done by writing the string "NO PASSWORD" as the first part of the first password stored in the smbpasswd file\&.
+.sp
+Note that to allow users to logon to a Samba server once the password has been set to "NO PASSWORD" in the smbpasswd file the administrator must set the following parameter in the [global] section of the
+smb\&.conf
+file :
+.sp
+null passwords = yes
+.sp
+This option is only available when running smbpasswd as root\&.
+.RE
+.PP
+\-r remote machine name
+.RS 4
+This option allows a user to specify what machine they wish to change their password on\&. Without this parameter smbpasswd defaults to the local host\&. The
+\fIremote machine name\fR
+is the NetBIOS name of the SMB/CIFS server to contact to attempt the password change\&. This name is resolved into an IP address using the standard name resolution mechanism in all programs of the Samba suite\&. See the
+\fI\-R name resolve order\fR
+parameter for details on changing this resolving mechanism\&.
+.sp
+The username whose password is changed is that of the current UNIX logged on user\&. See the
+\fI\-U username\fR
+parameter for details on changing the password for a different username\&.
+.sp
+Note that if changing a Windows NT Domain password the remote machine specified must be the Primary Domain Controller for the domain (Backup Domain Controllers only have a read\-only copy of the user account database and will not allow the password change)\&.
+.sp
+\fINote\fR
+that Windows 95/98 do not have a real password database so it is not possible to change passwords specifying a Win95/98 machine as remote machine target\&.
+.RE
+.PP
+\-R name resolve order
+.RS 4
+This option allows the user of smbpasswd to determine what name resolution services to use when looking up the NetBIOS name of the host being connected to\&.
+.sp
+The options are :"lmhosts", "host", "wins" and "bcast"\&. They cause names to be resolved as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBlmhosts\fR: Lookup an IP address in the Samba lmhosts file\&. If the line in lmhosts has no name type attached to the NetBIOS name (see the
+\fBlmhosts\fR(5)
+for details) then any name type matches for lookup\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBhost\fR: Do a standard host name to IP address resolution, using the system
+/etc/hosts, NIS, or DNS lookups\&. This method of name resolution is operating system depended for instance on IRIX or Solaris this may be controlled by the
+/etc/nsswitch\&.conf
+file)\&. Note that this method is only used if the NetBIOS name type being queried is the 0x20 (server) name type, otherwise it is ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwins\fR: Query a name with the IP address listed in the
+\fIwins server\fR
+parameter\&. If no WINS server has been specified this method will be ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBbcast\fR: Do a broadcast on each of the known local interfaces listed in the
+\fIinterfaces\fR
+parameter\&. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet\&.
+.RE
+.sp
+.RE
+The default order is
+lmhosts, host, wins, bcast
+and without this parameter or any entry in the
+\fBsmb.conf\fR(5)
+file the name resolution methods will be attempted in this order\&.
+.RE
+.PP
+\-m
+.RS 4
+This option tells smbpasswd that the account being changed is a MACHINE account\&. Currently this is used when Samba is being used as an NT Primary Domain Controller\&.
+.sp
+This option is only available when running smbpasswd as root\&.
+.RE
+.PP
+\-U username
+.RS 4
+This option may only be used in conjunction with the
+\fI\-r\fR
+option\&. When changing a password on a remote machine it allows the user to specify the user name on that machine whose password will be changed\&. It is present to allow users who have different user names on different systems to change these passwords\&.
+.RE
+.PP
+\-h
+.RS 4
+This option prints the help string for
+smbpasswd, selecting the correct one for running as root or as an ordinary user\&.
+.RE
+.PP
+\-s
+.RS 4
+This option causes smbpasswd to be silent (i\&.e\&. not issue prompts) and to read its old and new passwords from standard input, rather than from
+/dev/tty
+(like the
+passwd(1)
+program does)\&. This option is to aid people writing scripts to drive smbpasswd
+.RE
+.PP
+\-w password
+.RS 4
+This parameter is only available if Samba has been compiled with LDAP support\&. The
+\fI\-w\fR
+switch is used to specify the password to be used with the
+\m[blue]\fBldap admin dn\fR\m[]\&. Note that the password is stored in the
+secrets\&.tdb
+and is keyed off of the admin\*(Aqs DN\&. This means that if the value of
+\fIldap admin dn\fR
+ever changes, the password will need to be manually updated as well\&.
+.RE
+.PP
+\-W
+.RS 4
+NOTE:
+This option is same as "\-w" except that the password should be entered using stdin\&.
+.sp
+This parameter is only available if Samba has been compiled with LDAP support\&. The
+\fI\-W\fR
+switch is used to specify the password to be used with the
+\m[blue]\fBldap admin dn\fR\m[]\&. Note that the password is stored in the
+secrets\&.tdb
+and is keyed off of the admin\*(Aqs DN\&. This means that if the value of
+\fIldap admin dn\fR
+ever changes, the password will need to be manually updated as well\&.
+.RE
+.PP
+\-i
+.RS 4
+This option tells smbpasswd that the account being changed is an interdomain trust account\&. Currently this is used when Samba is being used as an NT Primary Domain Controller\&. The account contains the info about another trusted domain\&.
+.sp
+This option is only available when running smbpasswd as root\&.
+.RE
+.PP
+\-L
+.RS 4
+Run in local mode\&.
+.RE
+.PP
+username
+.RS 4
+This specifies the username for all of the
+\fIroot only\fR
+options to operate on\&. Only root can specify this parameter as only root has the permission needed to modify attributes directly in the local smbpasswd file\&.
+.RE
+.SH "NOTES"
+.PP
+Since
+smbpasswd
+works in client\-server mode communicating with a local smbd for a non\-root user then the smbd daemon must be running for this to work\&. A common problem is to add a restriction to the hosts that may access the
+smbd
+running on the local machine by specifying either
+\fIallow hosts\fR
+or
+\fIdeny hosts\fR
+entry in the
+\fBsmb.conf\fR(5)
+file and neglecting to allow "localhost" access to the smbd\&.
+.PP
+In addition, the smbpasswd command is only useful if Samba has been set up to use encrypted passwords\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbpasswd\fR(5),
+\fBSamba\fR(7)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/smbspool.8 b/docs/manpages/smbspool.8
new file mode 100644
index 0000000000..506cf1b3b2
--- /dev/null
+++ b/docs/manpages/smbspool.8
@@ -0,0 +1,187 @@
+'\" t
+.\"     Title: smbspool
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBSPOOL" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbspool \- send a print file to an SMB printer
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbspool {job} {user} {title} {copies} {options} [filename]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+smbspool is a very small print spooling program that sends a print file to an SMB printer\&. The command\-line arguments are position\-dependent for compatibility with the Common UNIX Printing System, but you can use smbspool with any printing system or from a program or script\&.
+.PP
+\fIDEVICE URI\fR
+.PP
+smbspool specifies the destination using a Uniform Resource Identifier ("URI") with a method of "smb"\&. This string can take a number of forms:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+smb://server[:port]/printer
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+smb://workgroup/server[:port]/printer
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+smb://username:password@server[:port]/printer
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+smb://username:password@workgroup/server[:port]/printer
+.RE
+.sp
+.RE
+.PP
+smbspool tries to get the URI from the environment variable
+\fBDEVICE_URI\fR\&. If
+\fBDEVICE_URI\fR
+is not present, smbspool will use argv[0] if that starts with
+\(lqsmb://\(rq
+or argv[1] if that is not the case\&.
+.PP
+Programs using the
+exec(2)
+functions can pass the URI in argv[0], while shell scripts must set the
+\fBDEVICE_URI\fR
+environment variable prior to running smbspool\&.
+.SH "OPTIONS"
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The job argument (argv[1]) contains the job ID number and is presently not used by smbspool\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The user argument (argv[2]) contains the print user\*(Aqs name and is presently not used by smbspool\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The title argument (argv[3]) contains the job title string and is passed as the remote file name when sending the print job\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The copies argument (argv[4]) contains the number of copies to be printed of the named file\&. If no filename is provided then this argument is not used by smbspool\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The options argument (argv[5]) contains the print options in a single string and is currently not used by smbspool\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The filename argument (argv[6]) contains the name of the file to print\&. If this argument is not specified then the print file is read from the standard input\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbd\fR(8)
+and
+\fBsamba\fR(7)\&.
+.SH "AUTHOR"
+.PP
+smbspool
+was written by Michael Sweet at Easy Software Products\&.
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/smbspool_krb5_wrapper.8 b/docs/manpages/smbspool_krb5_wrapper.8
new file mode 100644
index 0000000000..17abc8055b
--- /dev/null
+++ b/docs/manpages/smbspool_krb5_wrapper.8
@@ -0,0 +1,49 @@
+'\" t
+.\"     Title: smbspool_krb5_wrapper
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBSPOOL_KRB5_WRAPPE" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbspool_krb5_wrapper \- This is a CUPS printing backend which calls smbspool
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbspool_krb5_wrapper {job} {user} {title} {copies} {options} [filename]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+smbspool_krb5_wrapper is a tool that can be used to print using Kerberos credentials\&. To get this working smbspool_krb5_wrapper needs to be the smb backend of CUPS\&. It needs to be owned by root and the permissions for the binary need to be 0700\&. Once smbspool_krb5_wrapper switched to the user trying to print it executes smbspool\&. It should not be called by a user\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbspool\fR(8)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The smbspool_krb5_wrapper manpage was written by Andreas Schneider\&.
diff --git a/docs/manpages/smbstatus.1 b/docs/manpages/smbstatus.1
new file mode 100644
index 0000000000..4f24a29077
--- /dev/null
+++ b/docs/manpages/smbstatus.1
@@ -0,0 +1,186 @@
+'\" t
+.\"     Title: smbstatus
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBSTATUS" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbstatus \- report on current Samba connections
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbstatus [\-p|\-\-processes] [\-v|\-\-verbose] [\-L|\-\-locks] [\-S|\-\-shares] [\-N|\-\-notify] [\-u|\-\-user=STRING] [\-b|\-\-brief] [\-P|\-\-profile] [\-R|\-\-profile\-rates] [\-B|\-\-byterange] [\-n|\-\-numeric] [\-f|\-\-fast] [\-\-resolve\-uids] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+smbstatus
+is a very simple program to list the current Samba connections\&.
+.SH "OPTIONS"
+.PP
+\-P|\-\-profile
+.RS 4
+If samba has been compiled with the profiling option, print only the contents of the profiling shared memory area\&.
+.RE
+.PP
+\-R|\-\-profile\-rates
+.RS 4
+If samba has been compiled with the profiling option, print the contents of the profiling shared memory area and the call rates\&.
+.RE
+.PP
+\-b|\-\-brief
+.RS 4
+gives brief output\&.
+.RE
+.PP
+\-v|\-\-verbose
+.RS 4
+gives verbose output\&.
+.RE
+.PP
+\-L|\-\-locks
+.RS 4
+causes smbstatus to only list locks\&.
+.RE
+.PP
+\-B|\-\-byterange
+.RS 4
+causes smbstatus to include byte range locks\&.
+.RE
+.PP
+\-p|\-\-processes
+.RS 4
+print a list of
+\fBsmbd\fR(8)
+processes and exit\&. Useful for scripting\&.
+.RE
+.PP
+\-S|\-\-shares
+.RS 4
+causes smbstatus to only list shares\&.
+.RE
+.PP
+\-N|\-\-notify
+.RS 4
+causes smbstatus to display registered file notifications
+.RE
+.PP
+\-f|\-\-fast
+.RS 4
+causes smbstatus to not check if the status data is valid by checking if the processes that the status data refer to all still exist\&. This speeds up execution on busy systems and clusters but might display stale data of processes that died without cleaning up properly\&.
+.RE
+.PP
+\-u|\-\-user=<username>
+.RS 4
+selects information relevant to
+\fIusername\fR
+only\&.
+.RE
+.PP
+\-n|\-\-numeric
+.RS 4
+causes smbstatus to display numeric UIDs and GIDs instead of resolving them to names\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbd\fR(8)
+and
+\fBsmb.conf\fR(5)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/smbtar.1 b/docs/manpages/smbtar.1
new file mode 100644
index 0000000000..2651a692fd
--- /dev/null
+++ b/docs/manpages/smbtar.1
@@ -0,0 +1,163 @@
+'\" t
+.\"     Title: smbtar
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBTAR" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbtar \- shell script for backing up SMB/CIFS shares directly to UNIX tape drives
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbtar [\-r] [\-i] [\-a] [\-v] {\-s\ server} [\-p\ password] [\-x\ services] [\-X] [\-N\ filename] [\-b\ blocksize] [\-d\ directory] [\-l\ loglevel] [\-u\ user] [\-t\ tape] {filenames}
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+smbtar
+is a very small shell script on top of
+\fBsmbclient\fR(1)
+which dumps SMB shares directly to tape\&.
+.SH "OPTIONS"
+.PP
+\-s server
+.RS 4
+The SMB/CIFS server that the share resides upon\&.
+.RE
+.PP
+\-x service
+.RS 4
+The share name on the server to connect to\&. The default is "backup"\&.
+.RE
+.PP
+\-X
+.RS 4
+Exclude mode\&. Exclude filenames\&.\&.\&. from tar create or restore\&.
+.RE
+.PP
+\-d directory
+.RS 4
+Change to initial
+\fIdirectory \fR
+before restoring / backing up files\&.
+.RE
+.PP
+\-v
+.RS 4
+Verbose mode\&.
+.RE
+.PP
+\-p password
+.RS 4
+The password to use to access a share\&. Default: none
+.RE
+.PP
+\-u user
+.RS 4
+The user id to connect as\&. Default: UNIX login name\&.
+.RE
+.PP
+\-a
+.RS 4
+Reset DOS archive bit mode to indicate file has been archived\&.
+.RE
+.PP
+\-t tape
+.RS 4
+Tape device\&. May be regular file or tape device\&. Default:
+\fI$TAPE\fR
+environmental variable; if not set, a file called
+tar\&.out\&.
+.RE
+.PP
+\-b blocksize
+.RS 4
+Blocking factor\&. Defaults to 20\&. See
+tar(1)
+for a fuller explanation\&.
+.RE
+.PP
+\-N filename
+.RS 4
+Backup only files newer than filename\&. Could be used (for example) on a log file to implement incremental backups\&.
+.RE
+.PP
+\-i
+.RS 4
+Incremental mode; tar files are only backed up if they have the archive bit set\&. The archive bit is reset after each file is read\&.
+.RE
+.PP
+\-r
+.RS 4
+Restore\&. Files are restored to the share from the tar file\&.
+.RE
+.PP
+\-l log level
+.RS 4
+Log (debug) level\&. Corresponds to the
+\fI\-d\fR
+flag of
+\fBsmbclient\fR(1)\&.
+.RE
+.SH "ENVIRONMENT VARIABLES"
+.PP
+The
+\fI$TAPE\fR
+variable specifies the default tape device to write to\&. May be overridden with the \-t option\&.
+.SH "BUGS"
+.PP
+The
+smbtar
+script has different options from ordinary tar and from smbclient\*(Aqs tar command\&.
+.SH "CAVEATS"
+.PP
+Sites that are more careful about security may not like the way the script handles PC passwords\&. Backup and restore work on entire shares; should work on file lists\&. smbtar works best with GNU tar and may not work well with other versions\&.
+.SH "DIAGNOSTICS"
+.PP
+See the
+\fIDIAGNOSTICS\fR
+section for the
+\fBsmbclient\fR(1)
+command\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmbd\fR(8),
+\fBsmbclient\fR(1),
+\fBsmb.conf\fR(5)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+Ricky Poulten
+wrote the tar extension and this man page\&. The
+smbtar
+script was heavily rewritten and improved by
+Martin Kraemer\&. Many thanks to everyone who suggested extensions, improvements, bug fixes, etc\&. The man page sources were converted to YODL format (another excellent piece of Open Source software, available at
+ftp://ftp\&.icce\&.rug\&.nl/pub/unix/) and updated for the Samba 2\&.0 release by Jeremy Allison\&. The conversion to DocBook for Samba 2\&.2 was done by Gerald Carter\&. The conversion to DocBook XML 4\&.2 for Samba 3\&.0 was done by Alexander Bokovoy\&.
diff --git a/docs/manpages/smbtree.1 b/docs/manpages/smbtree.1
new file mode 100644
index 0000000000..ec5e23f354
--- /dev/null
+++ b/docs/manpages/smbtree.1
@@ -0,0 +1,252 @@
+'\" t
+.\"     Title: smbtree
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "SMBTREE" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+smbtree \- A text based smb network browser
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+smbtree [\-D|\-\-domains] [\-S|\-\-servers] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-U|\-\-user=[DOMAIN/]USERNAME[%PASSWORD]] [\-N|\-\-no\-pass] [\-\-password=STRING] [\-\-pw\-nt\-hash] [\-A|\-\-authentication\-file=FILE] [\-P|\-\-machine\-pass] [\-\-simple\-bind\-dn=DN] [\-\-use\-kerberos=desired|required|off] [\-\-use\-krb5\-ccache=CCACHE] [\-\-use\-winbind\-ccache] [\-\-client\-protection=sign|encrypt|off] [\-V|\-\-version]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+smbtree
+is a smb browser program in text mode\&. It is similar to the "Network Neighborhood" found on Windows computers\&. It prints a tree with all the known domains, the servers in those domains and the shares on the servers\&.
+.SH "OPTIONS"
+.PP
+\-D|\-\-domains
+.RS 4
+Only print a list of all the domains known on broadcast or by the master browser
+.RE
+.PP
+\-S|\-\-servers
+.RS 4
+Only print a list of all the domains and servers responding on broadcast or known by the master browser\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-U|\-\-user=[DOMAIN\e]USERNAME[%PASSWORD]
+.RS 4
+Sets the SMB username or username and password\&.
+.sp
+If %PASSWORD is not specified, the user will be prompted\&. The client will first check the
+\fBUSER\fR
+environment variable (which is also permitted to also contain the password seperated by a %), then the
+\fBLOGNAME\fR
+variable (which is not permitted to contain a password) and if either exists, the value is used\&. If these environmental variables are not found, the username found in a Kerberos Credentials cache may be used\&.
+.sp
+A third option is to use a credentials file which contains the plaintext of the username and password\&. This option is mainly provided for scripts where the admin does not wish to pass the credentials on the command line or via environment variables\&. If this method is used, make certain that the permissions on the file restrict access from unwanted users\&. See the
+\fI\-A\fR
+for more details\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-N|\-\-no\-pass
+.RS 4
+If specified, this parameter suppresses the normal password prompt from the client to the user\&. This is useful when accessing a service that does not require a password\&.
+.sp
+Unless a password is specified on the command line or this parameter is specified, the client will request a password\&.
+.sp
+If a password is specified on the command line and this option is also defined the password on the command line will be silently ignored and no password will be used\&.
+.RE
+.PP
+\-\-password
+.RS 4
+Specify the password on the commandline\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+If \-\-password is not specified, the tool will check the
+\fBPASSWD\fR
+environment variable, followed by
+\fBPASSWD_FD\fR
+which is expected to contain an open file descriptor (FD) number\&.
+.sp
+Finally it will check
+\fBPASSWD_FILE\fR
+(containing a file path to be opened)\&. The file should only contain the password\&. Make certain that the permissions on the file restrict access from unwanted users!
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-\-pw\-nt\-hash
+.RS 4
+The supplied password is the NT hash\&.
+.RE
+.PP
+\-A|\-\-authentication\-file=filename
+.RS 4
+This option allows you to specify a file from which to read the username and password used in the connection\&. The format of the file is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+				username = <value>
+				password = <value>
+				domain   = <value>
+			
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Make certain that the permissions on the file restrict access from unwanted users!
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Use stored machine account password\&.
+.RE
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind\&.
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-use\-krb5\-ccache=CCACHE
+.RS 4
+Specifies the credential cache location for Kerberos authentication\&.
+.sp
+This will set \-\-use\-kerberos=required too\&.
+.RE
+.PP
+\-\-use\-winbind\-ccache
+.RS 4
+Try to use the credential cache by winbind\&.
+.RE
+.PP
+\-\-client\-protection=sign|encrypt|off
+.RS 4
+Sets the connection protection the client tool should use\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient protection\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.sp
+In case you need more fine grained control you can use:
+\-\-option=clientsmbencrypt=OPTION,
+\-\-option=clientipcsigning=OPTION,
+\-\-option=clientsigning=OPTION\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The smbtree man page was written by Jelmer Vernooij\&.
diff --git a/docs/manpages/testparm.1 b/docs/manpages/testparm.1
new file mode 100644
index 0000000000..19c27e32ab
--- /dev/null
+++ b/docs/manpages/testparm.1
@@ -0,0 +1,194 @@
+'\" t
+.\"     Title: testparm
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "TESTPARM" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+testparm \- check an smb\&.conf configuration file for internal correctness
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+testparm [\-s|\-\-suppress\-prompt] [\-v|\-\-verbose] [\-?|\-\-help] [\-\-usage] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] {config\ filename} [hostname\ hostIP]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+testparm
+is a very simple test program to check an
+\fBsmbd\fR(8)
+configuration file for internal correctness\&. If this program reports no problems, you can use the configuration file with confidence that
+smbd
+will successfully load the configuration file\&.
+.PP
+Note that this is
+\fINOT\fR
+a guarantee that the services specified in the configuration file will be available or will operate as expected\&.
+.PP
+If the optional host name and host IP address are specified on the command line, this test program will run through the service entries reporting whether the specified host has access to each service\&.
+.PP
+If
+testparm
+finds an error in the
+smb\&.conf
+file it returns an exit code of 1 to the calling program, else it returns an exit code of 0\&. This allows shell scripts to test the output from
+testparm\&.
+.SH "OPTIONS"
+.PP
+\-s|\-\-suppress\-prompt
+.RS 4
+Without this option,
+testparm
+will prompt for a carriage return after printing the service names and before dumping the service definitions\&.
+.RE
+.PP
+\-v|\-\-verbose
+.RS 4
+If this option is specified, testparm will also output all options that were not used in
+\fBsmb.conf\fR(5)
+and are thus set to their defaults\&.
+.RE
+.PP
+\-\-parameter\-name parametername
+.RS 4
+Dumps the named parameter\&. If no section\-name is set the view is limited by default to the global section\&. It is also possible to dump a parametrical option\&. Therefore the option has to be separated by a colon from the parametername\&.
+.RE
+.PP
+\-\-section\-name sectionname
+.RS 4
+Dumps the named section\&.
+.RE
+.PP
+\-\-show\-all\-parameters
+.RS 4
+Show the parameters, type, possible values\&.
+.RE
+.PP
+\-l|\-\-skip\-logic\-checks
+.RS 4
+Skip the global checks\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+configfilename
+.RS 4
+This is the name of the configuration file to check\&. If this parameter is not present then the default
+\fBsmb.conf\fR(5)
+file will be checked\&.
+.RE
+.PP
+hostname
+.RS 4
+If this parameter and the following are specified, then
+testparm
+will examine the
+\fIhosts allow\fR
+and
+\fIhosts deny\fR
+parameters in the
+\fBsmb.conf\fR(5)
+file to determine if the hostname with this IP address would be allowed access to the
+smbd
+server\&. If this parameter is supplied, the hostIP parameter must also be supplied\&.
+.RE
+.PP
+hostIP
+.RS 4
+This is the IP address of the host specified in the previous parameter\&. This address must be supplied if the hostname parameter is supplied\&.
+.RE
+.SH "FILES"
+.PP
+\fBsmb.conf\fR(5)
+.RS 4
+This is usually the name of the configuration file used by
+\fBsmbd\fR(8)\&.
+.RE
+.SH "DIAGNOSTICS"
+.PP
+The program will issue a message saying whether the configuration file loaded OK or not\&. This message may be preceded by errors and warnings if the file did not load\&. If the file was loaded OK, the program then dumps all known service details to stdout\&.
+.PP
+For certain use cases, SMB protocol requires use of cryptographic algorithms which are known to be weak and already broken\&. DES and ARCFOUR (RC4) ciphers and the SHA1 and MD5 hash algorithms are considered weak but they are required for backward compatibility\&. The testparm utility shows whether the Samba tools will fall back to these weak crypto algorithms if it is not possible to use strong cryptography by default\&. In FIPS mode weak crypto cannot be enabled\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBsmb.conf\fR(5),
+\fBsmbd\fR(8)
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/traffic_learner.7 b/docs/manpages/traffic_learner.7
new file mode 100644
index 0000000000..ba83c23aae
--- /dev/null
+++ b/docs/manpages/traffic_learner.7
@@ -0,0 +1,128 @@
+'\" t
+.\"     Title: traffic_learner
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "TRAFFIC_LEARNER" "7" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+traffic_learner \- Samba tool to assist with traffic generation\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+traffic_learner {\-o\ OUTPUT_FILE\ \&.\&.\&.} [\-h] [\-\-dns\-mode\ {inline|count}] [SUMMARY_FILE] [SUMMARY_FILE\ \&.\&.\&.]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+This tool assists with generation of Samba traffic\&. It takes a traffic\-summary file (produced by
+traffic_summary\&.pl) as input and produces a traffic\-model file that can be used by
+traffic_replay
+for traffic generation\&.
+.PP
+The model file summarizes the types of traffic (\*(Aqconversations\*(Aq between a host and a Samba DC) that occur on a network\&. The model file describes the traffic in a way that allows it to be scaled so that either more (or fewer) packets get sent, and the packets can be sent at a faster (or slower) rate than that seen in the network\&.
+.SH "OPTIONS"
+.PP
+\-h|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+SUMMARY_FILE
+.RS 4
+File containing a network traffic\-summary\&. The traffic\-summary file should be generated by
+traffic_summary\&.pl
+from a packet capture of actual network traffic\&. More than one file can be specified, in which case the traffic will be combined into a single traffic\-model\&. If no SUMMARY_FILE is specified, this tool will read the traffic\-summary from STDIN, i\&.e\&. you can pipe the output from traffic_summary\&.pl directly to this tool\&.
+.RE
+.PP
+\-o|\-\-out OUTPUT_FILE
+.RS 4
+The traffic\-model that is produced will be written to this file\&. The OUTPUT_FILE can then be passed to
+traffic_replay
+to generate (and manipulate) Samba network traffic\&.
+.RE
+.PP
+\-\-dns\-mode [inline|count]
+.RS 4
+How DNS traffic should be handled by the model\&.
+.RE
+.SH "EXAMPLES"
+.PP
+To take a traffic\-summary file and produce a traffic\-model file, use:
+.PP
+traffic_learner traffic\-summary\&.txt \-o traffic\-model\&.txt
+.PP
+To generate a traffic\-model from a packet capture, you can pipe the traffic summary to STDIN using:
+.PP
+tshark \-r capture\&.pcapng \-T pdml | traffic_summary\&.pl | traffic_learner \-o traffic\-model\&.txt
+.SH "OUTPUT FILE FORMAT"
+.PP
+The output model file describes a Markov model estimating the probability of a packet occurring given the last two packets\&.
+.PP
+The count of each continuation after a pair of successive packets is stored, and the ratios of these counts is used to calculate probabilities for the next packet\&.
+.PP
+The model is stored in JSON format, and also contains information about the packet rate and DNS traffic rate\&.
+.SS "Example ngram listing"
+.PP
+The following listing shows a contrived example of a single ngram entry\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+          "ngrams": {
+             "ldap:0\etdcerpc:11": {
+                 "lsarpc:77": 1,
+                 "ldap:2": 370,
+                 "ldap:3": 62,
+                 "wait:3": 2,
+                 "\-": 1
+             }, [\&.\&.\&.]
+          }
+        
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+This counts the observed continuations after an ldap packet with opcode 0 (a bind) followed by a dcerpc packet with opcode 11 (also a bind)\&. The most common next packet is "ldap:2" which is an unbind, so this is the most likely packet type to be selected in replay\&. At the other extreme, lsarpc opcode 77 (lookup names) has been seen only once, and it is unlikely but possible that this will be selected in replay\&.
+.PP
+There are two special packet types here\&. "wait:3" refers to a temporary pause in the conversation, where the "3" pseudo\-opcode indicates the length of the wait on an exponential scale\&. That is, a "wait:4" pause would be about 2\&.7 times longer that a "wait:3", which in turn would be similarly longer than a "wait:2"\&.
+.PP
+The other special packet is "\-", which represents the limit of the conversation\&. In the example, this indicates that one observed conversation ended after this particular ngram\&. This special opcode is also used at the beginning of conversations, which are indicated by the ngram "\-\et\-"\&.
+.SH "VERSION"
+.PP
+This man page is complete for version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBtraffic_replay\fR(7)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The traffic_learner tool was developed by the Samba team at Catalyst IT Ltd\&.
+.PP
+The traffic_learner manpage was written by Tim Beale\&.
diff --git a/docs/manpages/traffic_replay.7 b/docs/manpages/traffic_replay.7
new file mode 100644
index 0000000000..727365c1e7
--- /dev/null
+++ b/docs/manpages/traffic_replay.7
@@ -0,0 +1,380 @@
+'\" t
+.\"     Title: traffic_replay
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "TRAFFIC_REPLAY" "7" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+traffic_replay \- Samba traffic generation tool\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+traffic_replay [\-F,\ \-\-fixed\-password\ <test\-password>] [\-T,\ \-\-packets\-per\-second\ <number>] [\-S,\ \-\-scale\-traffic\ <scale\ by\ factor>] [\-r,\ \-\-replay\-rate\ <scale\ by\ factor>] [\-D,\ \-\-duration\ <seconds>] [\-\-traffic\-summary\ <output\ file>] [\-I,\ \-\-instance\-id\ <id>] [\-K,\ \-\-prefer\-kerberos] [\-B,\ \-\-badpassword\-frequency\ <frequency>] [\-\-dns\-rate\ <rate>] [\-t,\ \-\-timing\-data\ <file>] [\-\-random\-seed\ <seed>] [\-U,\ \-\-username\ user] [\-\-password\ <password>] [\-W\ \-\-workgroup\ <workgroup>] [\-\-realm\ <realm>] [\-s,\ \-\-config\-file\ <file>] [\-k,\ \-\-kerberos\ <kerberos>] [\-\-ipaddress\ <address>] [\-P,\ \-\-machine\-pass] [\-\-option\ <option>] [\-d,\ \-\-debuglevel\ <debug\ level>] [\-\-conversation\-persistence\ <0\-1>] [\-\-latency\-timeout\ <seconds>] [\-\-stop\-on\-any\-error] {summary\-file} {dns\-hostname}
+.HP \w'\ 'u
+traffic_replay [\-G,\ \-\-generate\-users\-only] [\-F,\ \-\-fixed\-password\ <test\-password>] [\-n,\ \-\-number\-of\-users\ <total\ users>] [\-\-number\-of\-groups\ <total\ groups>] [\-\-average\-groups\-per\-user\ <average\ number>] [\-\-group\-memberships\ <total\ memberships>] [\-\-max\-members\ <group\ size>] {dns\-hostname}
+.HP \w'\ 'u
+traffic_replay {\-c|\-\-clean\-up} {dns\-hostname}
+.HP \w'\ 'u
+traffic_replay [\-h,\ \-\-help] [\-V,\ \-\-version]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+This tool generates traffic in order to measure the performance of a Samba DC, and to test how well Samba will scale as a network increases in size\&. It can simulate multiple different hosts making multiple different types of requests to a DC\&.
+.PP
+This tool is intended to run against a dedicated test DC (rather than a live DC that is handling real network traffic)\&.
+.PP
+Note that a side\-effect of running this tool is that user accounts will be created on the DC, in order to test various Samba operations\&. As creating accounts can be very time\-consuming, these users will remain on the DC by default\&. To remove these accounts, use the \-\-clean\-up option\&.
+.SH "OPTIONS"
+.PP
+\-h|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+summary\-file
+.RS 4
+File containing the network traffic to replay\&. This should be a traffic\-model (generated by
+traffic_learner)\&. Based on this file, this tool will generate \*(Aqconversations\*(Aq which represent Samba activity between a network host and the DC\&.
+.RE
+.PP
+dns\-hostname
+.RS 4
+The full DNS hostname of the DC that\*(Aqs being tested\&. The Samba activity in the summary\-file will be replicated and directed at this DC\&. It\*(Aqs recommended that you use a dedicated DC for testing and don\*(Aqt try to run this tool against a DC that\*(Aqs processing live network traffic\&.
+.RE
+.PP
+\-F|\-\-fixed\-password <test\-password>
+.RS 4
+Test users are created when this tool is run, so that actual Samba activity, such as authorizing users, can be mimicked\&. This option specifies the password that will be used for any test users that are created\&.
+.sp
+Note that any users created by this tool will remain on the DC until you run the \-\-clean\-up option\&. Therefore, the fixed\-password option needs to be the same each time the tool is run, otherwise the test users won\*(Aqt authenticate correctly\&.
+.RE
+.PP
+random\-seed
+.RS 4
+A number to seed the random number generator with\&. When traffic is generated from a model\-file, use this option to keep the traffic consistent across multiple test runs\&. This allows you to compare the performance of Samba between different releases\&.
+.RE
+.PP
+Traffic Model Options
+.RS 4
+When the summary\-file is a traffic\-model (produced by
+traffic_learner), use these options to alter the traffic that gets generated\&.
+.PP
+\-D|\-\-duration <seconds>
+.RS 4
+Specifies the approximate duration in seconds to generate traffic for\&. The default is 60 seconds\&.
+.RE
+.PP
+\-T|\-\-packets\-per\-second <number>
+.RS 4
+Generate this many packets per second, regardless of the traffic rate of the sample on which the model was based\&. This cannot be used with
+\fB\-S\fR\&.
+.RE
+.PP
+\-S|\-\-scale\-traffic <factor>
+.RS 4
+Increases the number of conversations by this factor, relative to the original traffic sample on which the model was based\&. This option won\*(Aqt affect the rate at which packets get sent (which is still based on the traffic model), but it will mean more conversations get replayed\&. It cannot be combined with
+\fB\-T\fR, which sets the traffic rate in a different way\&.
+.RE
+.PP
+\-r|\-\-replay\-rate <factor>
+.RS 4
+Replays the traffic faster by this factor\&. This option won\*(Aqt affect the number of packets sent, but it will squeeze them into fewer conversations, which may reduce resource usage\&.
+.RE
+.PP
+\-\-traffic\-summary <output\-file>
+.RS 4
+Instead of replaying a traffic\-model, this option generates a traffic\-summary file based on what traffic would be sent\&. Using a traffic\-model allows you to scale the packet rate and number of packets sent\&. However, using a traffic\-model introduces some randomness into the traffic generation\&. So running the same traffic_replay command multiple times using a model file may result in some differences in the actual traffic sent\&. However, running the same traffic_replay command multiple times with a traffic\-summary file will always result in the same traffic being sent\&.
+.sp
+For taking performance measurements over several test runs, it\*(Aqs recommended to use this option and replay the traffic from a traffic\-summary file, or to use the \-\-random\-seed option\&.
+.RE
+.PP
+\-\-stop\-on\-any\-error
+.RS 4
+Any client error causes the whole run to stop\&.
+.RE
+.PP
+\-\-conversation\-persistence <0\-1>
+.RS 4
+Conversation termination (as decided by the model) is re\-interpreted as a long pause with this probability\&.
+.RE
+.PP
+\-\-latency\-timeout <seconds>
+.RS 4
+Wait this long at the end of the run for outstanding reply packets\&. The number of conversations that have not finished at the end of the timeout is a failure metric\&.
+.RE
+.RE
+.PP
+\-\-generate\-users\-only
+.RS 4
+Add extra user/groups on the DC to increase the DB size\&. By default, this tool automatically creates test users that map to the traffic conversations being generated\&. This option allows extra users to be created on top of this\&. Note that these extra users may not actually used for traffic generation \- the traffic generation is still based on the number of conversations from the model/summary file\&.
+.sp
+Generating a large number of users can take a long time, so it this option allows this to be done only once\&.
+.sp
+Note that the users created will remain on the DC until the tool is run with the \-\-clean\-up option\&. This means that it is best to only assign group memberships once, i\&.e\&. run \-\-clean\-up before assigning a different allocation of group memberships\&.
+.PP
+\-n|\-\-number\-of\-users <total\-users>
+.RS 4
+Specifies the total number of test users to create (excluding any machine accounts required for the traffic)\&. Note that these extra users simply populate the DC\*(Aqs DB \- the actual user traffic generated is still based on the summary\-file\&.
+.RE
+.PP
+\-\-number\-of\-groups <total\-groups>
+.RS 4
+Creates the specified number of groups, for assigning the test users to\&. Note that users are not automatically assigned to groups \- use either \-\-average\-groups\-per\-user or \-\-group\-memberships to do this\&.
+.RE
+.PP
+\-\-average\-groups\-per\-user <average\-groups>
+.RS 4
+Randomly assigns the test users to the test groups created\&. The group memberships are distributed so that the overall average groups that a user is member of matches this number\&. Some users will belong to more groups and some users will belong to fewer groups\&. This option is incompatible with the \-\-group\-membership option\&.
+.RE
+.PP
+\-\-group\-memberships <total\-memberships>
+.RS 4
+Randomly assigns the test users to the test groups created\&. The group memberships are distributed so that the total groups that a user is member of, across all users, matches this number\&. For example, with 100 users and 10 groups, \-\-group\-memberships=300 would assign a user to 3 groups on average\&. Some users will belong to more groups and some users will belong to fewer groups, but the total of all member linked attributes would be 300\&. This option is incompatible with the \-\-average\-groups\-per\-user option\&.
+.RE
+.PP
+\-\-max\-members <group size>
+.RS 4
+Limit the largest group to this size, even if the other group options would have it otherwise\&.
+.RE
+.RS
+.sp
+.RE
+.RE
+.PP
+\-\-clean\-up
+.RS 4
+Cleans up any users and groups that were created by previously running this tool\&. It is recommended you always clean up after running the tool\&.
+.RE
+.PP
+\-I|\-\-instance\-id <id>
+.RS 4
+Use this option to run multiple instances of the tool on the same DC at the same time\&. This adds a prefix to the test users generated to keep them separate on the DC\&.
+.RE
+.PP
+\-K|\-\-prefer\-kerberos
+.RS 4
+Use Kerberos to authenticate the test users\&.
+.RE
+.PP
+\-B|\-\-badpassword\-frequency <frequency>
+.RS 4
+Use this option to simulate users trying to authenticate with an incorrect password\&.
+.RE
+.PP
+\-\-dns\-rate <rate>
+.RS 4
+Increase the rate at which DNS packets get sent\&.
+.RE
+.PP
+\-t|\-\-timing\-data <file>
+.RS 4
+This writes extra timing data to the file specified\&. This is mostly used for reporting options, such as generating graphs\&.
+.RE
+.PP
+Samba Common Options
+.RS 4
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-\-realm=REALM
+.RS 4
+Set the realm name
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.RS
+.sp
+.RE
+.RE
+.PP
+Credential Options
+.RS 4
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind
+.RE
+.PP
+\-\-password=PASSWORD
+.RS 4
+Password
+.RE
+.PP
+\-U USERNAME|\-\-username=USERNAME
+.RS 4
+Username
+.RE
+.PP
+\-W WORKGROUP|\-\-workgroup=WORKGROUP
+.RS 4
+Workgroup
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-ipaddress=IPADDRESS
+.RS 4
+IP address of the server
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Use stored machine account password\&.
+.RE
+.RS
+.sp
+.RE
+.RE
+.SH "OPERATIONS"
+.SS "Generating a traffic\-summary file"
+.PP
+To use this tool, you need either a traffic\-summary file or a traffic\-model file\&. To generate either of these files, you will need a packet capture of actual Samba activity on your network\&.
+.PP
+Use Wireshark to take a packet capture on your network of the traffic you want to generate\&. For example, if you want to simulate lots of users logging on, then take a capture at 8:30am when users are logging in\&.
+.PP
+Next, you need to convert your packet capture into a traffic summary file, using
+traffic_summary\&.pl\&. Basically this removes any sensitive information from the capture and summarizes what type of packet was sent and when\&.
+.PP
+Refer to the
+traffic_summary\&.pl \-\-help
+help for more details, but the basic command will look something like:
+.PP
+tshark \-r capture\&.pcapng \-T pdml | traffic_summary\&.pl > traffic\-summary\&.txt
+.SS "Replaying a traffic\-summary file"
+.PP
+Once you have a traffic\-summary file, you can use it to generate traffic\&. The traffic_replay tool gets passed the traffic\-summary file, along with the full DNS hostname of the DC being tested\&. You also need to provide some user credentials, and possibly the Samba realm and workgroup (although the realm and workgroup may be determined automatically, for example from the /etc/smb\&.conf file, if one is present)\&. E\&.g\&.
+.PP
+traffic_replay traffic\-summary\&.txt my\-dc\&.samdom\&.example\&.com \-UAdmin%password \-W samdom \-\-realm=samdom\&.example\&.com \-\-fixed\-password=blahblah123!
+.PP
+This simply regenerates Samba activity seen in the traffic summary\&. The traffic is grouped into \*(Aqconversations\*(Aq between a host and the DC\&. A user and machine account is created on the DC for each conversation, in order to allow logon and other operations to succeed\&. The script generates the same types of packets as those seen in the summary\&.
+.PP
+Creating users can be quite a time\-consuming process, especially if a lot of conversations are being generated\&. To save time, the test users remain on the DC by default\&. You will need to run the \-\-clean\-up option to remove them, once you have finished generating traffic\&. Because the same test users are used across multiple runs of the tool, a consistent password for these users needs to be used \- this is specified by the \-\-fixed\-password option\&.
+.PP
+The benefit of this tool over simply using tcprelay is that the traffic generated is independent of any specific network\&. No setup is needed beforehand on the test DC\&. The traffic no longer contains sensitive details, so the traffic summary could be potentially shared with other Samba developers\&.
+.PP
+However, replaying a traffic\-summary directly is somewhat limited in what you can actually do\&. A more flexible approach is to generate the traffic using a model file\&.
+.SS "Generating a traffic\-model file"
+.PP
+To create a traffic\-model file, simply pass the traffic\-summary file to the
+traffic_learner
+script\&. E\&.g\&.
+.PP
+traffic_learner traffic\-summary\&.txt \-o traffic\-model\&.txt
+.PP
+This generates a model of the Samba activity in your network\&. This model\-file can now be used to generate traffic\&.
+.SS "Replaying the traffic\-model file"
+.PP
+Packet generation using a traffic\-model file uses the same command as a traffic\-summary file, e\&.g\&.
+.PP
+traffic_replay traffic\-model\&.txt my\-dc\&.samdom\&.example\&.com \-UAdmin%password
+.PP
+By default, this will generate 60 seconds worth of traffic based on the model\&. You can specify longer using the \-\-duration parameter\&.
+.PP
+The traffic generated is an approximation of what was seen in the network capture\&. The traffic generation involves some randomness, so running the same command multiple times may result in slightly different traffic being generated (although you can avoid this, by specifying the \-\-random\-seed option)\&.
+.PP
+As well as changing how long the model runs for, you can also change how many conversations get generated and how fast the traffic gets replayed\&. To roughly double the number of conversations that get replayed, use \-\-scale\-traffic=2 or to approximately halve the number use \-\-scale\-traffic=0\&.5\&. To approximately double how quickly the conversations get replayed, use \-\-replay\-rate=2, or to halve this use \-\-replay\-rate=0\&.5
+.PP
+For example, to generate approximately 10 times the amount of traffic seen over a two\-minute period (based on the network capture), use:
+.PP
+traffic_replay traffic\-model\&.txt my\-dc\&.samdom\&.example\&.com \-UAdmin%password \-\-fixed\-password=blahblah123! \-\-scale\-traffic=10 \-\-duration=120
+.SS "Scaling the number of users"
+.PP
+The performance of a Samba DC running a small subset of test users will be different to a fully\-populated Samba DC running in a network\&. As the number of users increases, the size of the DB increases, and a very large DB will perform worse than a smaller DB\&.
+.PP
+To increase the size of the Samba DB, this tool can also create extra users and groups\&. These extra users are basically \*(Aqfiller\*(Aq for the DB\&. They won\*(Aqt actually be used to generate traffic, but they may slow down authentication of the test users\&.
+.PP
+For example, to populate the DB with an extra 5000 users (note this will take a while), use the command:
+.PP
+traffic_replay my\-dc\&.samdom\&.example\&.com \-UAdmin%password \-\-generate\-users\-only \-\-fixed\-password=blahblah123! \-\-number\-of\-users=5000
+.PP
+You can also create groups and assign users to groups\&. The users can be randomly assigned to groups \- this includes any extra users created as well as the users that map to conversations\&. Use either \-\-average\-groups\-per\-user or \-\-group\-memberships to specify how many group memberships should be assigned to the test users\&.
+.PP
+For example, to assign the users in the replayed conversations into 10 groups on average, use a command like:
+.PP
+traffic_replay traffic\-model\&.txt my\-dc\&.samdom\&.example\&.com \-UAdmin%password \-\-fixed\-password=blahblah123! \-\-generate\-users\-only \-\-number\-of\-groups=25 \-\-average\-groups\-per\-user=10
+.PP
+The users created by the test will have names like STGU\-0\-xyz\&. The groups generated have names like STGG\-0\-xyz\&.
+.SH "VERSION"
+.PP
+This man page is complete for version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBtraffic_learner\fR(7)\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The traffic_replay tool was developed by the Samba team at Catalyst IT Ltd\&.
+.PP
+The traffic_replay manpage was written by Tim Beale\&.
diff --git a/docs/manpages/vfs_acl_tdb.8 b/docs/manpages/vfs_acl_tdb.8
new file mode 100644
index 0000000000..45382e67b7
--- /dev/null
+++ b/docs/manpages/vfs_acl_tdb.8
@@ -0,0 +1,206 @@
+'\" t
+.\"     Title: vfs_acl_tdb
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_ACL_TDB" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_acl_tdb \- Save NTFS\-ACLs in a tdb file
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = acl_tdb
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_acl_tdb
+VFS module stores NTFS Access Control Lists (ACLs) in a tdb file\&. This enables the full mapping of Windows ACLs on Samba servers\&.
+.PP
+The ACL settings are stored in
+$LOCKDIR/file_ntacls\&.tdb\&.
+.PP
+This module forces the following parameters:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+inherit acls = true
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+dos filemode = true
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+force unknown acl user = true
+.RE
+.sp
+.RE
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+acl_tdb:ignore system acls = [yes|no]
+.RS 4
+When set to
+\fIyes\fR, a best effort mapping from/to the POSIX ACL layer will
+\fInot\fR
+be done by this module\&. The default is
+\fIno\fR, which means that Samba keeps setting and evaluating both the system ACLs and the NT ACLs\&. This is better if you need your system ACLs be set for local or NFS file access, too\&. If you only access the data via Samba you might set this to yes to achieve better NT ACL compatibility\&.
+.sp
+If
+\fIacl_tdb:ignore system acls\fR
+is set to
+\fIyes\fR, the following additional settings will be enforced:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+create mask = 0666
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+directory mask = 0777
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+map archive = no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+map hidden = no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+map readonly = no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+map system = no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+store dos attributes = yes
+.RE
+.sp
+.RE
+.RE
+.PP
+acl_tdb:default acl style = [posix|windows|everyone]
+.RS 4
+This parameter determines the type of ACL that is synthesized in case a file or directory lacks an
+\fIsecurity\&.NTACL\fR
+xattr\&.
+.sp
+When set to
+\fIposix\fR, an ACL will be synthesized based on the POSIX mode permissions for user, group and others, with an additional ACE for
+\fINT Authority\eSYSTEM\fR
+will full rights\&.
+.sp
+When set to
+\fIwindows\fR, an ACL is synthesized the same way Windows does it, only including permissions for the owner and
+\fINT Authority\eSYSTEM\fR\&.
+.sp
+When set to
+\fIeveryone\fR, an ACL is synthesized giving full permissions to everyone (S\-1\-1\-0)\&.
+.sp
+The default for this option is
+\fIposix\fR\&.
+.RE
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_acl_xattr.8 b/docs/manpages/vfs_acl_xattr.8
new file mode 100644
index 0000000000..1d48566593
--- /dev/null
+++ b/docs/manpages/vfs_acl_xattr.8
@@ -0,0 +1,211 @@
+'\" t
+.\"     Title: vfs_acl_xattr
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_ACL_XATTR" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_acl_xattr \- Save NTFS\-ACLs in Extended Attributes (EAs)
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = acl_xattr
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_acl_xattr
+VFS module stores NTFS Access Control Lists (ACLs) in Extended Attributes (EAs)\&. This enables the full mapping of Windows ACLs on Samba servers\&.
+.PP
+The ACLs are stored in the Extended Attribute
+\fIsecurity\&.NTACL\fR
+of a file or directory\&. This Attribute is
+\fInot\fR
+listed by
+getfattr \-d filename\&. To show the current value, the name of the EA must be specified (e\&.g\&.
+getfattr \-n security\&.NTACL filename)\&.
+.PP
+This module forces the following parameters:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+inherit acls = true
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+dos filemode = true
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+force unknown acl user = true
+.RE
+.sp
+.RE
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+acl_xattr:ignore system acls = [yes|no]
+.RS 4
+When set to
+\fIyes\fR, a best effort mapping from/to the POSIX ACL layer will
+\fInot\fR
+be done by this module\&. The default is
+\fIno\fR, which means that Samba keeps setting and evaluating both the system ACLs and the NT ACLs\&. This is better if you need your system ACLs be set for local or NFS file access, too\&. If you only access the data via Samba you might set this to yes to achieve better NT ACL compatibility\&.
+.sp
+If
+\fIacl_xattr:ignore system acls\fR
+is set to
+\fIyes\fR, the following additional settings will be enforced:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+create mask = 0666
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+directory mask = 0777
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+map archive = no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+map hidden = no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+map readonly = no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+map system = no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+store dos attributes = yes
+.RE
+.sp
+.RE
+.RE
+.PP
+acl_xattr:default acl style = [posix|windows|everyone]
+.RS 4
+This parameter determines the type of ACL that is synthesized in case a file or directory lacks an
+\fIsecurity\&.NTACL\fR
+xattr\&.
+.sp
+When set to
+\fIposix\fR, an ACL will be synthesized based on the POSIX mode permissions for user, group and others, with an additional ACE for
+\fINT Authority\eSYSTEM\fR
+will full rights\&.
+.sp
+When set to
+\fIwindows\fR, an ACL is synthesized the same way Windows does it, only including permissions for the owner and
+\fINT Authority\eSYSTEM\fR\&.
+.sp
+When set to
+\fIeveryone\fR, an ACL is synthesized giving full permissions to everyone (S\-1\-1\-0)\&.
+.sp
+The default for this option is
+\fIposix\fR\&.
+.RE
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_aio_fork.8 b/docs/manpages/vfs_aio_fork.8
new file mode 100644
index 0000000000..3e7ce04d92
--- /dev/null
+++ b/docs/manpages/vfs_aio_fork.8
@@ -0,0 +1,68 @@
+'\" t
+.\"     Title: vfs_aio_fork
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_AIO_FORK" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_aio_fork \- implement async I/O in Samba vfs
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = aio_fork
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+aio_fork
+VFS module enables async I/O for Samba on platforms where the system level Posix AIO interface is insufficient\&. Posix AIO can suffer from severe limitations\&. For example, on some Linux versions the real\-time signals that it uses are broken under heavy load\&. Other systems only allow AIO when special kernel modules are loaded or only allow a certain system\-wide amount of async requests being scheduled\&. Systems based on glibc (most Linux systems) only allow a single outstanding request per file descriptor\&.
+.PP
+To work around all these limitations, the aio_fork module was written\&. It uses forked helper processes instead of the internal Posix AIO interface to create asynchronousity for read and write calls\&. It has no parameters, it will create helper processes when async requests come in as needed\&. Idle helper processes will be removed every 30 seconds\&.
+.PP
+This module is stackable\&.
+.SH "EXAMPLES"
+.PP
+Straight forward use:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[cooldata]\fR
+	\m[blue]\fBpath = /data/ice\fR\m[]
+	\m[blue]\fBvfs objects = aio_fork\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_aio_pthread.8 b/docs/manpages/vfs_aio_pthread.8
new file mode 100644
index 0000000000..4470e56060
--- /dev/null
+++ b/docs/manpages/vfs_aio_pthread.8
@@ -0,0 +1,81 @@
+'\" t
+.\"     Title: vfs_aio_pthread
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_AIO_PTHREAD" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_aio_pthread \- implement async open in Samba vfs using a pthread pool
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = aio_pthread
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+aio_pthread
+VFS module enables asynchronous opens (for new files) with
+\m[blue]\fBaio_pthread:aio open = yes\fR\m[]
+on platforms which have the pthreads API available, support the openat() syscall and support per thread credentials (modern Linux kernels)\&.
+.PP
+The module makes use of the global thread pool which uses the
+\m[blue]\fBaio max threads\fR\m[]
+option\&.
+.PP
+This module MUST be listed last in any module stack as the Samba VFS open interface is not thread\-safe\&. This module makes direct openat() system calls and does NOT call the Samba VFS open interfaces\&.
+.SH "EXAMPLES"
+.PP
+Straight forward use:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[cooldata]\fR
+	\m[blue]\fBpath = /data/ice\fR\m[]
+	\m[blue]\fBvfs objects = aio_pthread\fR\m[]
+	\m[blue]\fBaio_pthread:aio open = yes\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "OPTIONS"
+.PP
+aio_pthread:aio open = BOOL
+.RS 4
+Try async opens for creating new files\&.
+.sp
+The default is \*(Aqno\*(Aq\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_audit.8 b/docs/manpages/vfs_audit.8
new file mode 100644
index 0000000000..da525f430a
--- /dev/null
+++ b/docs/manpages/vfs_audit.8
@@ -0,0 +1,118 @@
+'\" t
+.\"     Title: vfs_audit
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_AUDIT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_audit \- record selected Samba VFS operations in the system log
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = audit
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_audit
+VFS module records selected client operations to the system log using
+\fBsyslog\fR(3)\&.
+.PP
+The following Samba VFS operations are recorded:
+.RS 4
+connect
+.RE
+.RS 4
+disconnect
+.RE
+.RS 4
+opendir
+.RE
+.RS 4
+mkdir
+.RE
+.RS 4
+rmdir
+.RE
+.RS 4
+open
+.RE
+.RS 4
+close
+.RE
+.RS 4
+rename
+.RE
+.RS 4
+unlink
+.RE
+.RS 4
+chmod
+.RE
+.RS 4
+fchmod
+.RE
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+audit:facility = FACILITY
+.RS 4
+Log messages to the named
+\fBsyslog\fR(3)
+facility\&.
+.RE
+.PP
+audit:priority = PRIORITY
+.RS 4
+Log messages with the named
+\fBsyslog\fR(3)
+priority\&.
+.RE
+.SH "EXAMPLES"
+.PP
+Log operations on all shares using the LOCAL1 facility and NOTICE priority:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[global]\fR
+	\m[blue]\fBvfs objects = audit\fR\m[]
+	\m[blue]\fBaudit:facility = LOCAL1\fR\m[]
+	\m[blue]\fBaudit:priority = NOTICE\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_btrfs.8 b/docs/manpages/vfs_btrfs.8
new file mode 100644
index 0000000000..4bc962d190
--- /dev/null
+++ b/docs/manpages/vfs_btrfs.8
@@ -0,0 +1,110 @@
+'\" t
+.\"     Title: vfs_btrfs
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_BTRFS" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_btrfs \- Utilize features provided by the Btrfs filesystem
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = btrfs
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(8)
+suite\&.
+.PP
+The
+vfs_btrfs
+VFS module exposes Btrfs specific features for use by Samba\&.
+.PP
+Btrfs allows for multiple files to share the same on\-disk data through the use cloned ranges\&. When an SMB client issues a request to copy duplicate data (via FSCTL_SRV_COPYCHUNK), this module maps the request to a Btrfs clone range IOCTL, instead of performing reads and writes required by a traditional copy\&. Doing so saves storage capacity and greatly reduces disk IO\&.
+.PP
+This module also exposes Btrfs per\-file compression support to SMB clients via the get/set compression fsctls\&.
+.PP
+Btrfs snapshots can be manipulated by Samba\*(Aqs FSRVP server\&. Snapshot manipulation using this module is currently considered experimental, and is therefore disabled by default\&. The
+vfs_snapper
+module is instead recommended for this purpose\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+btrfs: manipulate snapshots = [yes|no]
+.RS 4
+When set to
+\fIyes\fR, experimental support for the creation and deletion of snapshots via corresponding Btrfs IOCTLs will be enabled\&. The default is
+\fIno\fR, which means that such requests are passed through to any underlying VFS module\&.
+.RE
+.SH "CONFIGURATION"
+.PP
+vfs_btrfs
+requires that the underlying share path is a Btrfs subvolume\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[share]\fR
+		\m[blue]\fBvfs objects = btrfs\fR\m[]
+		\m[blue]\fBbtrfs: manipulate snapshots = no\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+To use the experimental snapshot manipulation functionality provided by this module, it must be explicitly enabled, and Samba\*(Aqs FSRVP server must be running\&.
+.PP
+The
+vfs_shadow_copy
+module can be used to expose snapshots created by
+vfs_btrfs
+to Windows Explorer as file / directory "previous versions"\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[global]\fR
+		\m[blue]\fBrpc_daemon:fssd = fork\fR\m[]
+		\m[blue]\fBregistry shares = yes\fR\m[]
+		\m[blue]\fBinclude = registry\fR\m[]
+
+		\fI[share]\fR
+		\m[blue]\fBvfs objects = btrfs shadow_copy\fR\m[]
+		\m[blue]\fBbtrfs: manipulate snapshots = yes\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_cacheprime.8 b/docs/manpages/vfs_cacheprime.8
new file mode 100644
index 0000000000..cab136e157
--- /dev/null
+++ b/docs/manpages/vfs_cacheprime.8
@@ -0,0 +1,121 @@
+'\" t
+.\"     Title: vfs_cacheprime
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_CACHEPRIME" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_cacheprime \- prime the kernel file data cache
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = cacheprime
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_cacheprime
+VFS module reads chunks of file data near the range requested by clients in order to make sure the data is present in the kernel file data cache at the time when it is actually requested by clients\&.
+.PP
+The size of the disk read operations performed by
+vfs_cacheprime
+is determined by the cacheprime:rsize option\&. All disk read operations are aligned on boundaries that are a multiple of this size\&. Each range of the file data is primed at most once during the time the client has the file open\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+cacheprime:rsize = BYTES
+.RS 4
+The number of bytes with which to prime the kernel data cache\&.
+.sp
+The following suffixes may be applied to BYTES:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+K
+\- BYTES is a number of kilobytes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+M
+\- BYTES is a number of megabytes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+G
+\- BYTES is a number of gigabytes
+.RE
+.sp
+.RE
+.RE
+.SH "EXAMPLES"
+.PP
+For a hypothetical disk array, it is necessary to ensure that all read operations are of size 1 megabyte (1048576 bytes), and aligned on 1 megabyte boundaries:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	\fI[hypothetical]\fR
+	\m[blue]\fBvfs objects = cacheprime\fR\m[]
+	\m[blue]\fBcacheprime:rsize = 1M\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "CAVEATS"
+.PP
+cacheprime
+is not a substitute for a general\-purpose readahead mechanism\&. It is intended for use only in very specific environments where disk operations must be aligned and sized to known values (as much as that is possible)\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_cap.8 b/docs/manpages/vfs_cap.8
new file mode 100644
index 0000000000..91173a6381
--- /dev/null
+++ b/docs/manpages/vfs_cap.8
@@ -0,0 +1,69 @@
+'\" t
+.\"     Title: vfs_cap
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_CAP" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_cap \- CAP encode filenames
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = cap
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+CAP (Columbia Appletalk Protocol) encoding is a technique for representing non\-ASCII filenames in ASCII\&. The
+vfs_cap
+VFS module translates filenames to and from CAP format, allowing users to name files in their native encoding\&.
+.PP
+CAP encoding is most commonly used in Japanese language environments\&.
+.PP
+This module is stackable\&.
+.SH "EXAMPLES"
+.PP
+On a system using GNU libiconv, use CAP encoding to support users in the Shift_JIS locale:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[global]\fR
+	\m[blue]\fBdos charset = CP932\fR\m[]
+	\m[blue]\fBdos charset = CP932\fR\m[]
+	\m[blue]\fBvfs objects = cap\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_catia.8 b/docs/manpages/vfs_catia.8
new file mode 100644
index 0000000000..92c1eb9981
--- /dev/null
+++ b/docs/manpages/vfs_catia.8
@@ -0,0 +1,126 @@
+'\" t
+.\"     Title: vfs_catia
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_CATIA" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_catia \- translate illegal characters in Catia filenames
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = catia
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The Catia CAD package commonly creates filenames that use characters that are illegal in CIFS filenames\&. The
+vfs_catia
+VFS module implements a character mapping so that these files can be shared with CIFS clients\&.
+.PP
+This module is stackable\&.
+.PP
+The parameter "catia:mappings" specifies the mapping on a per\-character basis, see below\&.
+.SH "OPTIONS"
+.PP
+catia:mappings = SERVER_HEX_CHAR:CLIENT_HEX_CHAR
+.RS 4
+SERVER_HEX_CHAR specifies a 0x prefixed hexedecimal character code that, when included in a Samba server\-side filename, will be mapped to CLIENT_HEX_CHAR for the CIFS client\&.
+.sp
+The same mapping occurs in the opposite direction\&. Multiple character mappings are separated by a comma\&.
+.RE
+.SH "EXAMPLES"
+.PP
+Map server\-side quotation\-marks (") to client\-side diaeresis (\(ad) on filenames in the [CAD] share:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[CAD]\fR
+	\m[blue]\fBpath = /data/cad\fR\m[]
+	\m[blue]\fBvfs objects = catia\fR\m[]
+	\m[blue]\fBcatia:mappings = 0x22:0xa8\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Perform comprehensive mapping of common Catia filename characters:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[CAD]\fR
+	\m[blue]\fBpath = /data/cad\fR\m[]
+	\m[blue]\fBvfs objects = catia\fR\m[]
+	\m[blue]\fBcatia:mappings = 0x22:0xa8,0x2a:0xa4,0x2f:0xf8,0x3a:0xf7,0x3c:0xab,0x3e:0xbb,0x3f:0xbf,0x5c:0xff,0x7c:0xa6\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Server\-side filename to be translated (Note that the path delimiter "/" is not used here):
+.PP
+a\ea:a*a?a"a<a>a|a
+.PP
+Resulting filename, as seen by the client:
+.PP
+aa\(dia\(Csa\(r?a\(ada\(Foa\(Fca\(bba
+.SH "CAVEATS"
+.PP
+Character mapping must work in BOTH directions (server \-> client and client \-> server) to get unique and existing file names!
+.PP
+A NOT working example:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[CAD]\fR
+	\m[blue]\fBpath = /data/cad\fR\m[]
+	\m[blue]\fBvfs objects = catia\fR\m[]
+	\m[blue]\fBcatia:mappings = 0x3a:0x5f\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Here the colon ":" is mapped to the underscore "_"\&.
+.PP
+Assuming a server\-side filename "a:should_work", which is translated to "a_should_work" for the client\&.
+.PP
+BUT the reverse mapping from client "a_should_work" to server will result in "a:should:work" \- something like "file not found" will be returned\&.
+.SH "VERSION"
+.PP
+This man page is part of Samba versions from 3\&.5\&.0 to 4\&.0\&.6\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+New version written by Guenter Kukkukk kukks@samba\&.org
diff --git a/docs/manpages/vfs_ceph.8 b/docs/manpages/vfs_ceph.8
new file mode 100644
index 0000000000..ced47b269f
--- /dev/null
+++ b/docs/manpages/vfs_ceph.8
@@ -0,0 +1,115 @@
+'\" t
+.\"     Title: vfs_ceph
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_CEPH" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_ceph \- Utilize features provided by CephFS
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = ceph
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(8)
+suite\&.
+.PP
+The
+vfs_ceph
+VFS module exposes CephFS specific features for use by Samba\&.
+.PP
+Ceph is a distributed network file system designed to provide excellent performance, reliability, and scalability\&. This is a shared library allowing applications to access a Ceph distributed file system via a POSIX\-like interface\&.
+.PP
+This module can be combined with other modules, but it should be the last module in the
+vfs objects
+list\&. Modules added to this list to the right of the ceph entry may not have any effect at all\&.
+.PP
+vfs_ceph
+performs mapping between Windows and POSIX Access Control Lists (ACLs)\&. To ensure correct processing and enforcement of POSIX ACLs, the following Ceph configuration parameters are automatically applied:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		client acl type = posix_acl
+		fuse default permissions = false
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "CONFIGURATION"
+.PP
+vfs_ceph
+requires that the underlying share path is a Ceph filesystem\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[share]\fR
+		\m[blue]\fBvfs objects = ceph\fR\m[]
+		\m[blue]\fBpath = /non\-mounted/cephfs/path\fR\m[]
+		\m[blue]\fBkernel share modes = no\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Since
+vfs_ceph
+does not require a filesystem mount, the share
+path
+is treated differently: it is interpreted as an absolute path within the Ceph filesystem on the attached Ceph cluster\&. In a ctdb cluster environment where ctdb manages Samba,
+CTDB_SAMBA_SKIP_SHARE_CHECK=yes
+must be configured to disable local share path checks, otherwise ctdb will not reach a healthy state\&.
+.PP
+Note that currently
+kernel share modes
+have to be disabled in a share running with the CephFS vfs module for file serving to work properly\&.
+.SH "OPTIONS"
+.PP
+ceph:config_file = path
+.RS 4
+Allows one to define a ceph configfile to use\&. Empty by default\&.
+.sp
+Example: ceph:config_file = /etc/ceph/ceph\&.conf
+.RE
+.PP
+ceph:user_id = name
+.RS 4
+Allows one to explicitly set the client ID used for the CephFS mount handle\&. Empty by default (CephFS uses the process id)\&.
+.sp
+Example: ceph:user_id = samba
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_ceph_snapshots.8 b/docs/manpages/vfs_ceph_snapshots.8
new file mode 100644
index 0000000000..90d40279cf
--- /dev/null
+++ b/docs/manpages/vfs_ceph_snapshots.8
@@ -0,0 +1,113 @@
+'\" t
+.\"     Title: vfs_ceph_snapshots
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_CEPH_SNAPSHOTS" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_ceph_snapshots \- Expose CephFS snapshots as shadow\-copies
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = ceph_snapshots
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(8)
+suite\&.
+.PP
+The
+vfs_ceph_snapshots
+VFS module exposes CephFS snapshots for use by Samba\&. When enabled, SMB clients such as Windows Explorer\*(Aqs Previous Versions dialog, can enumerate snapshots and access them via "timewarp" tokens\&.
+.PP
+This module can be combined with
+vfs_ceph, but
+vfs_ceph_snapshots
+must be listed first in the
+vfs objects
+parameter list\&.
+.PP
+CephFS support for ceph\&.snap\&.btime virtual extended attributes is required for this module to work properly\&. This support was added via https://tracker\&.ceph\&.com/issues/38838\&.
+.SH "CONFIGURATION"
+.PP
+When used atop
+vfs_ceph,
+path
+refers to an absolute path within the Ceph filesystem and should not be mounted locally:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[share]\fR
+		\m[blue]\fBvfs objects = ceph_snapshots ceph\fR\m[]
+		\m[blue]\fBpath = /non\-mounted/cephfs/path\fR\m[]
+		\m[blue]\fBkernel share modes = no\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+vfs_ceph_snapshots
+can also be used atop a kernel CephFS mounted share path, without
+vfs_ceph\&. In this case Samba\*(Aqs default VFS backend
+vfs_default
+is used:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[share]\fR
+		\m[blue]\fBvfs objects = ceph_snapshots\fR\m[]
+		\m[blue]\fBpath = /mnt/cephfs/\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "OPTIONS"
+.PP
+ceph:snapdir = subdirectory
+.RS 4
+Allows for the configuration of the special CephFS snapshot subdirectory name\&. This parameter should only be changed from the "\&.snap" default if the ceph\&.conf
+client snapdir
+or
+snapdirname
+mount option settings are changed from their matching "\&.snap" defaults\&.
+.sp
+Default:
+\m[blue]\fBceph:snapdir = \&.snap\fR\m[]
+.sp
+Example:
+\m[blue]\fBceph:snapdir = \&.snapshots\fR\m[]
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_commit.8 b/docs/manpages/vfs_commit.8
new file mode 100644
index 0000000000..881365db76
--- /dev/null
+++ b/docs/manpages/vfs_commit.8
@@ -0,0 +1,122 @@
+'\" t
+.\"     Title: vfs_commit
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_COMMIT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_commit \- flush dirty data at specified intervals
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = commit
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_commit
+VFS module keeps track of the amount of data written to a file and synchronizes it to disk when a specified amount accumulates\&.
+.PP
+vfs_commit
+is useful in two circumstances\&. First, if you have very precious data, the impact of unexpected power loss can be minimized by a small commit:dthresh value\&. Secondly, write performance can be improved on some systems by flushing file data early and at regular intervals\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+commit:dthresh = BYTES
+.RS 4
+Synchronize file data each time the specified number of bytes has been written\&.
+.sp
+The following suffixes may be applied to BYTES:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+K
+\- BYTES is a number of kilobytes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+M
+\- BYTES is a number of megabytes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+G
+\- BYTES is a number of gigabytes
+.RE
+.sp
+.RE
+.RE
+.SH "EXAMPLES"
+.PP
+Synchronize the file data on the [precious] share after every 512 kilobytes (524288 bytes) of data is written:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[precious]\fR
+	\m[blue]\fBpath = /data/precious\fR\m[]
+	\m[blue]\fBvfs objects = commit\fR\m[]
+	\m[blue]\fBcommit:dthresh = 512K\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "CAVEATS"
+.PP
+On some systems, the data synchronization performed by
+commit
+may reduce performance\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_crossrename.8 b/docs/manpages/vfs_crossrename.8
new file mode 100644
index 0000000000..992c305754
--- /dev/null
+++ b/docs/manpages/vfs_crossrename.8
@@ -0,0 +1,95 @@
+'\" t
+.\"     Title: vfs_crossrename
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_CROSSRENAME" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_crossrename \- server side rename files across filesystem boundaries
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = crossrename
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_crossrename
+VFS module allows server side rename operations even if source and target are on different physical devices\&. A "move" in Explorer is usually a rename operation if it is inside of a single share or device\&. Usually such a rename operation returns NT_STATUS_NOT_SAME_DEVICE and the client has to move the file by manual copy and delete operations\&. If the rename by copy is done by the server this can be much more efficient\&. vfs_crossrename tries to do this server\-side cross\-device rename operation\&.
+.PP
+There are however limitations that this module currently does not solve:
+.PP
+.RS 4
+.PP
+The ACLs of files are not preserved,
+.RE
+.PP
+.RS 4
+.PP
+meta data in EAs are not preserved,
+.RE
+.PP
+.RS 4
+.PP
+renames of whole subdirectories cannot be done recursively, in that case we still return STATUS_NOT_SAME_DEVICE and let the client decide what to do,
+.RE
+.PP
+.RS 4
+.PP
+rename operations of huge files can cause hangs on the client because clients expect a rename operation to return fast\&.
+.RE
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+crossrename:sizelimit = BYTES
+.RS 4
+server\-side cross\-device\-renames are only done for files if the filesize is not larger than the defined size in MiB to prevent timeouts\&. The default sizelimit is 20 (MiB)
+.RE
+.SH "EXAMPLES"
+.PP
+To add server\-side cross\-device renames inside of a share for all files sized up to 50MB:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[testshare]\fR
+	\m[blue]\fBpath = /data/mounts\fR\m[]
+	\m[blue]\fBvfs objects = crossrename\fR\m[]
+	\m[blue]\fBcrossrename:sizelimit = 50\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_default_quota.8 b/docs/manpages/vfs_default_quota.8
new file mode 100644
index 0000000000..28ec518bf9
--- /dev/null
+++ b/docs/manpages/vfs_default_quota.8
@@ -0,0 +1,92 @@
+'\" t
+.\"     Title: vfs_default_quota
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_DEFAULT_QUOTA" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_default_quota \- store default quota records for Windows clients
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = default_quota
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+Many common quota implementations only store quotas for users and groups, but do not store a default quota\&. The
+vfs_default_quota
+module allows Samba to store default quota values which can be examined using the Windows Explorer interface\&.
+.PP
+By default, Samba returns NO_LIMIT the default quota and refuses to update them\&.
+vfs_default_quota
+maps the default quota to the quota record of a user\&. By default the root user is taken because quota limits for root are typically not enforced\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+default_quota:uid = UID
+.RS 4
+UID specifies the user ID of the quota record where the default user quota values are stored\&.
+.RE
+.PP
+default_quota:gid = GID
+.RS 4
+GID specifies the group ID of the quota record where the default group quota values are stored\&.
+.RE
+.PP
+default_quota:uid nolimit = BOOL
+.RS 4
+If this parameter is True, then the user whose quota record is storing the default user quota will be reported as having a quota of NO_LIMIT\&. Otherwise, the stored values will be reported\&.
+.RE
+.PP
+default_quota:gid nolimit = BOOL
+.RS 4
+If this parameter is True, then the group whose quota record is storing the default group quota will be reported as having a quota of NO_LIMIT\&. Otherwise, the stored values will be reported\&.
+.RE
+.SH "EXAMPLES"
+.PP
+Store the default quota record in the quota record for the user with ID 65535 and report that user as having no quota limits:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[global]\fR
+	\m[blue]\fBvfs objects = default_quota\fR\m[]
+	\m[blue]\fBdefault_quota:uid = 65535\fR\m[]
+	\m[blue]\fBdefault_quota:uid nolimit = yes\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_dirsort.8 b/docs/manpages/vfs_dirsort.8
new file mode 100644
index 0000000000..b3a8665888
--- /dev/null
+++ b/docs/manpages/vfs_dirsort.8
@@ -0,0 +1,65 @@
+'\" t
+.\"     Title: vfs_dirsort
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_DIRSORT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_dirsort \- Sort directory contents
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = dirsort
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_dirsort
+module sorts directory entries alphabetically before sending them to the client\&.
+.PP
+Please be aware that adding this module might have negative performance implications for large directories\&.
+.SH "EXAMPLES"
+.PP
+Sort directories for all shares:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[global]\fR
+	\m[blue]\fBvfs objects = dirsort\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_extd_audit.8 b/docs/manpages/vfs_extd_audit.8
new file mode 100644
index 0000000000..345e678319
--- /dev/null
+++ b/docs/manpages/vfs_extd_audit.8
@@ -0,0 +1,61 @@
+'\" t
+.\"     Title: vfs_extd_audit
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_EXTD_AUDIT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_extd_audit \- record selected Samba VFS operations
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = extd_audit
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+extd_audit
+VFS module records selected client operations to both the
+\fBsmbd\fR(8)
+log and system log (using
+\fBsyslog\fR(3))\&.
+.PP
+Other than logging to the
+\fBsmbd\fR(8)
+log,
+vfs_extd_audit
+is identical to
+\fBvfs_audit\fR(8)\&.
+.PP
+This module is stackable\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_fake_perms.8 b/docs/manpages/vfs_fake_perms.8
new file mode 100644
index 0000000000..c7c10b5cb5
--- /dev/null
+++ b/docs/manpages/vfs_fake_perms.8
@@ -0,0 +1,64 @@
+'\" t
+.\"     Title: vfs_fake_perms
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_FAKE_PERMS" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_fake_perms \- enable read only Roaming Profiles
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = fake_perms
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_fake_perms
+VFS module was created to allow Roaming Profile files and directories to be set (on the Samba server under UNIX) as read only\&. This module will, if installed on the Profiles share, report to the client that the Profile files and directories are writeable\&. This satisfies the client even though the files will never be overwritten as the client logs out or shuts down\&.
+.PP
+This module is stackable\&.
+.SH "EXAMPLES"
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[Profiles]\fR
+	\m[blue]\fBpath = /profiles\fR\m[]
+	\m[blue]\fBvfs objects = fake_perms\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_fileid.8 b/docs/manpages/vfs_fileid.8
new file mode 100644
index 0000000000..f2c4a0c507
--- /dev/null
+++ b/docs/manpages/vfs_fileid.8
@@ -0,0 +1,148 @@
+'\" t
+.\"     Title: vfs_fileid
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_FILEID" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_fileid \- Generates file_id structs with unique device id values for cluster setups
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = fileid
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+Samba uses file_id structs to uniquely identify files for locking purpose\&. By default the file_id contains the device and inode number returned by the
+stat()
+system call\&. As the file_id is a unique identifier of a file, it must be the same on all nodes in a cluster setup\&. This module overloads the
+SMB_VFS_FILE_ID_CREATE()
+operation and generates the device number based on the configured algorithm (see the "fileid:algorithm" option)\&.
+.PP
+When using the fsname or fsid algorithm a
+stat()
+and
+statfs()
+call is required for all mounted file systems to generate the file_id\&. If e\&.g\&. an NFS file system is unresponsive such a call might block and the smbd process will become unresponsive\&. Use the "fileid:fstype deny", "fileid:fstype allow", "fileid:mntdir deny", or "fileid:mntdir allow" options to ignore potentially unresponsive file systems\&.
+.SH "OPTIONS"
+.PP
+fileid:algorithm = ALGORITHM
+.RS 4
+Available algorithms are
+fsname,
+fsname_nodirs,
+fsid
+and
+hostname\&. The default value is
+fsname\&.
+.sp
+The
+fsname
+algorithm generates device id by hashing the kernel device name\&.
+.sp
+The
+fsname_nodirs
+algorithm generates device id by hashing the kernel device name for files and by hashing the hostname for directories\&. This can be used to deliberately break lock coherency for directories in a cluster\&.
+.sp
+The
+fsid
+algorithm generates the device id from the
+f_fsid
+returned from the
+statfs()
+syscall\&.
+.sp
+The
+hostname
+algorithm generates device id by hashing the hostname\&. This can be used to deliberately break lock coherency in a cluster\&.
+.sp
+The
+fsname_norootdir
+algorithm generates device ids by hashing the kernel device name, except for the root directory of shares where it will use the hostname algorithm\&. This can be used to deliberately break lock coherency in a cluster for the root directory of a share\&.
+.sp
+The
+fsname_norootdir_ext
+algorithm generates device ids by hashing the kernel device name, except for the root directory of shares where it will use the hostname algorithm\&. Additionally it generates an extid based on the process pid\&. This can be used to deliberately break lock coherency between all smbd processes in the whole cluster for the root directory of a share\&.
+.RE
+.PP
+fileid:mapping = ALGORITHM
+.RS 4
+This option is the legacy version of the
+fileid:algorithm
+option, which was used in earlier versions of fileid mapping feature in custom Samba 3\&.0 versions\&.
+.RE
+.PP
+fileid:fstype deny = LIST
+.RS 4
+List of file system types to be ignored for file_id generation\&.
+.RE
+.PP
+fileid:fstype allow = LIST
+.RS 4
+List of file system types to be allowed for file_id generation\&. If this option is set, file system types not listed here are ignored\&.
+.RE
+.PP
+fileid:mntdir deny = LIST
+.RS 4
+List of file system mount points to be ignored for file_id generation\&.
+.RE
+.PP
+fileid:mntdir allow = LIST
+.RS 4
+List of file system mount points to be allowed for file_id generation\&. If this option is set, file system mount points not listed here are ignored\&.
+.RE
+.PP
+fileid:nolockinode
+.RS 4
+This option triggers use of the fileid hostname algorithm for the configured inode which can be used to deliberately break lock coherency for the corresponding file or directory in a cluster\&.
+.RE
+.SH "EXAMPLES"
+.PP
+Usage of the
+fileid
+module with the
+fsid
+algorithm:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[global]\fR
+	\m[blue]\fBvfs objects = fileid\fR\m[]
+	\m[blue]\fBfileid:algorithm = fsid\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_fruit.8 b/docs/manpages/vfs_fruit.8
new file mode 100644
index 0000000000..e365b9ad1b
--- /dev/null
+++ b/docs/manpages/vfs_fruit.8
@@ -0,0 +1,530 @@
+'\" t
+.\"     Title: vfs_fruit
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_FRUIT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_fruit \- Enhanced OS X and Netatalk interoperability
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = fruit
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_fruit
+module provides enhanced compatibility with Apple SMB clients and interoperability with a Netatalk 3 AFP fileserver\&.
+.PP
+The module should be stacked with
+vfs_catia
+if enabling character conversion and must be stacked with
+vfs_streams_xattr, see the example section for the correct config\&.
+.PP
+The module enables alternate data streams (ADS) support for a share, intercepts the OS X special streams "AFP_AfpInfo" and "AFP_Resource" and handles them in a special way\&. All other named streams are deferred to
+vfs_streams_xattr
+which must be loaded together with
+vfs_fruit\&.
+.PP
+Be careful when mixing shares with and without vfs_fruit\&. OS X clients negotiate SMB2 AAPL protocol extensions on the first tcon, so mixing shares with and without fruit will globally disable AAPL if the first tcon is without fruit\&.
+.PP
+Having shares with ADS support enabled for OS X client is worthwhile because it resembles the behaviour of Apple\*(Aqs own SMB server implementation and it avoids certain severe performance degradations caused by Samba\*(Aqs case sensitivity semantics\&.
+.PP
+The OS X metadata and resource fork stream can be stored in a way compatible with Netatalk 3 by setting
+fruit:resource = file
+and
+fruit:metadata = netatalk\&.
+.PP
+OS X maps NTFS illegal characters to the Unicode private range in SMB requests\&. By setting
+fruit:encoding = native, all mapped characters are converted to native ASCII characters\&.
+.PP
+Finally, share access modes are optionally checked against Netatalk AFP sharing modes by setting
+fruit:locking = netatalk\&.
+.PP
+This module is not stackable other than described in this manpage\&.
+.SH "GLOBAL OPTIONS"
+.PP
+The following options must be set in the global smb\&.conf section and won\*(Aqt take effect when set per share\&.
+.PP
+fruit:aapl = yes | no
+.RS 4
+A
+\fIglobal\fR
+option whether to enable Apple\*(Aqs SMB2+ extension codenamed AAPL\&. Default
+\fIyes\fR\&. This extension enhances several deficiencies when connecting from Macs:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+directory enumeration is enriched with Mac relevant filesystem metadata (UNIX mode, FinderInfo, resource fork size and effective permission), as a result the Mac client doesn\*(Aqt need to fetch this metadata individually per directory entry resulting in an often tremendous performance increase\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The ability to query and modify the UNIX mode of directory entries\&.
+.RE
+.sp
+.RE
+There\*(Aqs a set of per share options that come into play when
+\fIfruit:aapl\fR
+is enabled\&. These options, listed below, can be used to disable the computation of specific Mac metadata in the directory enumeration context, all are enabled by default:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+readdir_attr:aapl_rsize = yes | no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+readdir_attr:aapl_finder_info = yes | no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+readdir_attr:aapl_max_access = yes | no
+.RE
+.sp
+.RE
+See below for a description of these options\&.
+.RE
+.PP
+fruit:nfs_aces = yes | no
+.RS 4
+A
+\fIglobal\fR
+option whether support for querying and modifying the UNIX mode of directory entries via NFS ACEs is enabled, default
+\fIyes\fR\&.
+.RE
+.PP
+fruit:copyfile = yes | no
+.RS 4
+A
+\fIglobal\fR
+option whether to enable OS X specific copychunk ioctl that requests a copy of a whole file along with all attached metadata\&.
+.sp
+WARNING: the copyfile request is blocking the client while the server does the copy\&.
+.sp
+The default is
+\fIno\fR\&.
+.RE
+.PP
+fruit:model = MacSamba
+.RS 4
+This option defines the model string inside the AAPL extension and will determine the appearance of the icon representing the Samba server in the Finder window\&.
+.sp
+The default is
+\fIMacSamba\fR\&.
+.RE
+.SH "OPTIONS"
+.PP
+The following options can be set either in the global smb\&.conf section or per share\&.
+.PP
+fruit:resource = [ file | xattr | stream ]
+.RS 4
+Controls where the OS X resource fork is stored\&.
+.sp
+Due to a spelling bug in all Samba versions older then 4\&.6\&.0, this option can also be given as
+\fIfruit:ressource\fR, ie with two s\&.
+.sp
+Settings:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+file (default)
+\- use a \&._ AppleDouble file compatible with OS X and Netatalk
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+xattr
+\- use a xattr, requires a filesystem with large xattr support and a file IO API compatible with xattrs, this boils down to Solaris and derived platforms and ZFS
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+stream (experimental)
+\- pass the stream on to the next module in the VFS stack\&.
+\fIWarning: \fR
+this option should not be used with the
+\fIstreams_xattr\fR
+module due to the extended attributes size limitations of most filesystems\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+fruit:time machine = [ yes | no ]
+.RS 4
+Controls if Time Machine support via the FULLSYNC volume capability is advertised to clients\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+\- Enables Time Machine support for this share\&. Also registers the share with mDNS in case Samba is built with mDNS support\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no (default)
+Disables advertising Time Machine support\&.
+.RE
+.sp
+.RE
+This option enforces the following settings per share (or for all shares if enabled globally):
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+durable handles = yes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+kernel oplocks = no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+kernel share modes = no
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+posix locking = no
+.RE
+.sp
+.RE
+.RE
+.PP
+fruit:time machine max size = SIZE [K|M|G|T|P]
+.RS 4
+Useful for Time Machine: limits the reported disksize, thus preventing Time Machine from using the whole real disk space for backup\&. The option takes a number plus an optional unit\&.
+.sp
+\fIIMPORTANT\fR: This is an approximated calculation that only takes into account the contents of Time Machine sparsebundle images\&. Therefore you
+\fIMUST NOT\fR
+use this volume to store other content when using this option, because it would NOT be accounted\&.
+.sp
+The calculation works by reading the band size from the Info\&.plist XML file of the sparsebundle, reading the bands/ directory counting the number of band files, and then multiplying one with the other\&.
+.RE
+.PP
+fruit:metadata = [ stream | netatalk ]
+.RS 4
+Controls where the OS X metadata stream is stored:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+netatalk (default)
+\- use Netatalk compatible xattr
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+stream
+\- pass the stream on to the next module in the VFS stack
+.RE
+.sp
+.RE
+.RE
+.PP
+fruit:locking = [ netatalk | none ]
+.RS 4
+
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+none (default)
+\- no cross protocol locking
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+netatalk
+\- use cross protocol locking with Netatalk
+.RE
+.sp
+.RE
+.RE
+.PP
+fruit:encoding = [ native | private ]
+.RS 4
+Controls how the set of illegal NTFS ASCII character, commonly used by OS X clients, are stored in the filesystem\&.
+.sp
+\fIImportant:\fR
+this is known to not fully work with
+\fIfruit:metadata=stream\fR
+or
+\fIfruit:resource=stream\fR\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+private (default)
+\- store characters as encoded by the OS X client: mapped to the Unicode private range
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+native
+\- store characters with their native ASCII value\&.
+\fIImportant\fR: this option requires the use of
+\fIvfs_catia\fR
+in the VFS module stack as shown in the examples section\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+fruit:veto_appledouble = yes | no
+.RS 4
+\fINote:\fR
+this option only applies when
+\fIfruit:resource\fR
+is set to
+\fIfile\fR
+(the default)\&.
+.sp
+When
+\fIfruit:resource\fR
+is set to
+\fIfile\fR, vfs_fruit may create \&._ AppleDouble files\&. This options controls whether these \&._ AppleDouble files are vetoed which prevents the client from accessing them\&.
+.sp
+Vetoing \&._ files may break some applications, e\&.g\&. extracting Mac ZIP archives from Mac clients fails, because they contain \&._ files\&.
+rsync
+will also be unable to sync files beginning with underscores, as the temporary files it uses for these will start with \&._ and so cannot be created\&.
+.sp
+Setting this option to false will fix this, but the abstraction leak of exposing the internally created \&._ files may have other unknown side effects\&.
+.sp
+The default is
+\fIyes\fR\&.
+.RE
+.PP
+fruit:posix_rename = yes | no
+.RS 4
+Whether to enable POSIX directory rename behaviour for OS X clients\&. Without this, directories can\*(Aqt be renamed if any client has any file inside it (recursive!) open\&.
+.sp
+The default is
+\fIyes\fR\&.
+.RE
+.PP
+readdir_attr:aapl_rsize = yes | no
+.RS 4
+Return resource fork size in SMB2 FIND responses\&.
+.sp
+The default is
+\fIyes\fR\&.
+.RE
+.PP
+readdir_attr:aapl_finder_info = yes | no
+.RS 4
+Return FinderInfo in SMB2 FIND responses\&.
+.sp
+The default is
+\fIyes\fR\&.
+.RE
+.PP
+readdir_attr:aapl_max_access = yes | no
+.RS 4
+Return the user\*(Aqs effective maximum permissions in SMB2 FIND responses\&. This is an expensive computation, setting this to off pretends the use has maximum effective permissions\&.
+.sp
+The default is
+\fIyes\fR\&.
+.RE
+.PP
+fruit:wipe_intentionally_left_blank_rfork = yes | no
+.RS 4
+Whether to wipe Resource Fork data that matches the special 286 bytes sized placeholder blob that macOS client create on occasion\&. The blob contains a string
+\(lqThis resource fork intentionally left blank\(rq, the remaining bytes being mostly zero\&. There being no one use of this data, it is probably safe to discard it\&. When this option is enabled, this module truncates the Resource Fork stream to 0 bytes\&.
+.sp
+The default is
+\fIno\fR\&.
+.RE
+.PP
+fruit:delete_empty_adfiles = yes | no
+.RS 4
+Whether to delete empty AppleDouble files\&. Empty means that the resource fork entry in the AppleDouble files is of size 0, or the size is exactly 286 bytes and the content matches a special boilerplate resource fork created my macOS\&.
+.sp
+The default is
+\fIno\fR\&.
+.RE
+.PP
+fruit:zero_file_id = yes | no
+.RS 4
+Whether to return zero to queries of on\-disk file identifier if the client has negotiated AAPL\&.
+.sp
+Mac applications and / or the Mac SMB client code expect the on\-disk file identifier to have the semantics of HFS+ Catalog Node Identifier (CNID)\&. Samba provides File\-IDs based on a file\*(Aqs initial creation date if the option
+\m[blue]\fBstore dos attributes\fR\m[]
+is enabled\&. Returning a file identifier of zero causes the Mac client to stop using and trusting the file id returned from the server\&.
+.sp
+The default is
+\fIyes\fR\&.
+.RE
+.SH "EXAMPLES"
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[share]\fR
+	\m[blue]\fBvfs objects = catia fruit streams_xattr\fR\m[]
+	\m[blue]\fBfruit:resource = file\fR\m[]
+	\m[blue]\fBfruit:metadata = netatalk\fR\m[]
+	\m[blue]\fBfruit:locking = netatalk\fR\m[]
+	\m[blue]\fBfruit:encoding = native\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_full_audit.8 b/docs/manpages/vfs_full_audit.8
new file mode 100644
index 0000000000..fc85475b97
--- /dev/null
+++ b/docs/manpages/vfs_full_audit.8
@@ -0,0 +1,517 @@
+'\" t
+.\"     Title: vfs_full_audit
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_FULL_AUDIT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_full_audit \- record Samba VFS operations in the system log
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = full_audit
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_full_audit
+VFS module records selected client operations to the system log using
+\fBsyslog\fR(3)\&.
+.PP
+vfs_full_audit
+is able to record the complete set of Samba VFS operations:
+.RS 4
+aio_force
+.RE
+.RS 4
+audit_file
+.RE
+.RS 4
+brl_lock_windows
+.RE
+.RS 4
+brl_unlock_windows
+.RE
+.RS 4
+chdir
+.RE
+.RS 4
+chflags
+.RE
+.RS 4
+chmod
+.RE
+.RS 4
+close
+.RE
+.RS 4
+closedir
+.RE
+.RS 4
+connect
+.RE
+.RS 4
+connectpath
+.RE
+.RS 4
+create_dfs_pathat
+.RE
+.RS 4
+create_file
+.RE
+.RS 4
+disconnect
+.RE
+.RS 4
+disk_free
+.RE
+.RS 4
+durable_cookie
+.RE
+.RS 4
+durable_disconnect
+.RE
+.RS 4
+durable_reconnect
+.RE
+.RS 4
+fallocate
+.RE
+.RS 4
+fchmod
+.RE
+.RS 4
+fchown
+.RE
+.RS 4
+fdopendir
+.RE
+.RS 4
+fget_compression
+.RE
+.RS 4
+fget_dos_attributes
+.RE
+.RS 4
+fget_nt_acl_at
+.RE
+.RS 4
+fgetxattr
+.RE
+.RS 4
+file_id_create
+.RE
+.RS 4
+flistxattr
+.RE
+.RS 4
+fremovexattr
+.RE
+.RS 4
+fs_capabilities
+.RE
+.RS 4
+fsctl
+.RE
+.RS 4
+fset_dos_attributes
+.RE
+.RS 4
+fset_nt_acl
+.RE
+.RS 4
+fsetxattr
+.RE
+.RS 4
+fs_file_id
+.RE
+.RS 4
+fstat
+.RE
+.RS 4
+fsync
+.RE
+.RS 4
+fsync_recv
+.RE
+.RS 4
+fsync_send
+.RE
+.RS 4
+ftruncate
+.RE
+.RS 4
+get_alloc_size
+.RE
+.RS 4
+get_dfs_referrals
+.RE
+.RS 4
+get_dos_attributes
+.RE
+.RS 4
+get_dos_attributes_recv
+.RE
+.RS 4
+get_dos_attributes_send
+.RE
+.RS 4
+getlock
+.RE
+.RS 4
+get_nt_acl
+.RE
+.RS 4
+get_quota
+.RE
+.RS 4
+get_real_filename
+.RE
+.RS 4
+get_shadow_copy_data
+.RE
+.RS 4
+getwd
+.RE
+.RS 4
+getxattr
+.RE
+.RS 4
+getxattrat_recv
+.RE
+.RS 4
+getxattrat_send
+.RE
+.RS 4
+is_offline
+.RE
+.RS 4
+kernel_flock
+.RE
+.RS 4
+lchown
+.RE
+.RS 4
+linkat
+.RE
+.RS 4
+linux_setlease
+.RE
+.RS 4
+listxattr
+.RE
+.RS 4
+lock
+.RE
+.RS 4
+lseek
+.RE
+.RS 4
+lstat
+.RE
+.RS 4
+mkdirat
+.RE
+.RS 4
+mknodat
+.RE
+.RS 4
+ntimes
+.RE
+.RS 4
+offload_read_recv
+.RE
+.RS 4
+offload_read_send
+.RE
+.RS 4
+offload_write_recv
+.RE
+.RS 4
+offload_write_send
+.RE
+.RS 4
+open
+.RE
+.RS 4
+pread
+.RE
+.RS 4
+pread_recv
+.RE
+.RS 4
+pread_send
+.RE
+.RS 4
+pwrite
+.RE
+.RS 4
+pwrite_recv
+.RE
+.RS 4
+pwrite_send
+.RE
+.RS 4
+read
+.RE
+.RS 4
+readdir
+.RE
+.RS 4
+readdir_attr
+.RE
+.RS 4
+readlinkat
+.RE
+.RS 4
+realpath
+.RE
+.RS 4
+recvfile
+.RE
+.RS 4
+removexattr
+.RE
+.RS 4
+renameat
+.RE
+.RS 4
+rewinddir
+.RE
+.RS 4
+seekdir
+.RE
+.RS 4
+sendfile
+.RE
+.RS 4
+set_compression
+.RE
+.RS 4
+set_dos_attributes
+.RE
+.RS 4
+set_offline
+.RE
+.RS 4
+set_quota
+.RE
+.RS 4
+setxattr
+.RE
+.RS 4
+snap_check_path
+.RE
+.RS 4
+snap_create
+.RE
+.RS 4
+snap_delete
+.RE
+.RS 4
+stat
+.RE
+.RS 4
+statvfs
+.RE
+.RS 4
+streaminfo
+.RE
+.RS 4
+strict_lock_check
+.RE
+.RS 4
+symlinkat
+.RE
+.RS 4
+sys_acl_blob_get_fd
+.RE
+.RS 4
+sys_acl_blob_get_file
+.RE
+.RS 4
+sys_acl_get_fd
+.RE
+.RS 4
+sys_acl_get_file
+.RE
+.RS 4
+sys_acl_set_fd
+.RE
+.RS 4
+telldir
+.RE
+.RS 4
+translate_name
+.RE
+.RS 4
+unlinkat
+.RE
+.RS 4
+write
+.RE
+.PP
+In addition to these operations,
+vfs_full_audit
+recognizes the special operation names "all" and "none ", which refer to all the VFS operations and none of the VFS operations respectively\&.
+.PP
+vfs_full_audit
+records operations in fixed format consisting of fields separated by \*(Aq|\*(Aq characters\&. The format is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		smbd_audit: PREFIX|OPERATION|RESULT|FILE
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+The record fields are:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+PREFIX
+\- the result of the full_audit:prefix string after variable substitutions
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+OPERATION
+\- the name of the VFS operation
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+RESULT
+\- whether the operation succeeded or failed
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+FILE
+\- the name of the file or directory the operation was performed on
+.RE
+.sp
+.RE
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+full_audit:prefix = STRING
+.RS 4
+Prepend audit messages with STRING\&. STRING is processed for standard substitution variables listed in
+\fBsmb.conf\fR(5)\&. The default prefix is "%u|%I"\&.
+.RE
+.PP
+full_audit:success = LIST
+.RS 4
+LIST is a list of VFS operations that should be recorded if they succeed\&. Operations are specified using the names listed above\&. Operations can be unset by prefixing the names with "!"\&. The default is none operations\&.
+.RE
+.PP
+full_audit:failure = LIST
+.RS 4
+LIST is a list of VFS operations that should be recorded if they failed\&. Operations are specified using the names listed above\&. Operations can be unset by prefixing the names with "!"\&. The default is none operations\&.
+.RE
+.PP
+full_audit:facility = FACILITY
+.RS 4
+Log messages to the named
+\fBsyslog\fR(3)
+facility\&.
+.RE
+.PP
+full_audit:priority = PRIORITY
+.RS 4
+Log messages with the named
+\fBsyslog\fR(3)
+priority\&.
+.RE
+.PP
+full_audit:syslog = true/false
+.RS 4
+Log messages to syslog (default) or as a debug level 1 message\&.
+.RE
+.PP
+full_audit:log_secdesc = true/false
+.RS 4
+Log an sddl form of the security descriptor coming in when a client sets an acl\&. Defaults to false\&.
+.RE
+.SH "EXAMPLES"
+.PP
+Log file and directory open operations on the [records] share using the LOCAL7 facility and ALERT priority, including the username and IP address\&. Logging excludes the open VFS function on failures:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[records]\fR
+	\m[blue]\fBpath = /data/records\fR\m[]
+	\m[blue]\fBvfs objects = full_audit\fR\m[]
+	\m[blue]\fBfull_audit:prefix = %u|%I\fR\m[]
+	\m[blue]\fBfull_audit:success = open opendir\fR\m[]
+	\m[blue]\fBfull_audit:failure = all !open\fR\m[]
+	\m[blue]\fBfull_audit:facility = LOCAL7\fR\m[]
+	\m[blue]\fBfull_audit:priority = ALERT\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_glusterfs.8 b/docs/manpages/vfs_glusterfs.8
new file mode 100644
index 0000000000..36bf17ddd2
--- /dev/null
+++ b/docs/manpages/vfs_glusterfs.8
@@ -0,0 +1,135 @@
+'\" t
+.\"     Title: vfs_glusterfs
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_GLUSTERFS" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_glusterfs \- Utilize features provided by GlusterFS
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = glusterfs
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(8)
+suite\&.
+.PP
+GlusterFS (http://www\&.gluster\&.org) is an Open Source clustered file system capable of scaling to several peta\-bytes\&. With its FUSE based native client, GlusterFS is available as a POSIX compliant file system and can hence be shared by Samba without additional steps\&.
+.PP
+The
+vfs_glusterfs
+VFS module provides an alternative, and superior way to access a Gluster filesystem from Samba for sharing\&. It does not require a Gluster FUSE mount but directly accesses the GlusterFS daemon through its library
+libgfapi, thereby omitting the expensive kernel\-userspace context switches and taking advantage of some of the more advanced features of GlusterFS\&.
+.PP
+This module can be combined with other modules, but it should be the last module in the
+vfs objects
+list\&. Modules added to this list to the right of the glusterfs entry may not have any effect at all\&.
+.SH "CONFIGURATION"
+.PP
+A basic configuration looks like this\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[share]\fR
+		\m[blue]\fBvfs objects = glusterfs\fR\m[]
+		\m[blue]\fBpath = /relative/base/path\fR\m[]
+		\m[blue]\fBglusterfs:volume = gv0\fR\m[]
+		\m[blue]\fBkernel share modes = no\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Note that since
+vfs_glusterfs
+does not require a Gluster mount, the share
+path
+is treated differently than for other shares: It is interpreted as the base path of the share relative to the gluster volume used\&. Because this is usually not at the same time a system path, in a ctdb cluster setup where ctdb manages Samba, you need to set
+CTDB_SAMBA_SKIP_SHARE_CHECK=yes
+in ctdb\*(Aqs configuration file\&. Otherwise ctdb will not get healthy\&.
+.PP
+Note that currently kernel share modes have to be disabled in a share running with the glusterfs vfs module for file serving to work properly\&.
+.SH "OPTIONS"
+.PP
+glusterfs:logfile = path
+.RS 4
+Defines whether and where to store a vfs_glusterfs specific logfile\&. Client variable substitution is supported (i\&.e\&. %M, %m, %I), hence per client log file can be specified\&.
+.sp
+Example: glusterfs:logfile = /var/log/samba/glusterfs\-vol2\&.%M\&.log
+.RE
+.PP
+glusterfs:loglevel = 0\-9
+.RS 4
+Defines the level of logging, with higher numbers corresponding to more verbosity\&. 0 \- No logs; 9 \- Trace log level; 7 being the info log level is preferred\&.
+.sp
+If this option is not defined with an explicit loglevel, the glusterfs default is used (currently loglevel 7)\&.
+.RE
+.PP
+glusterfs:volfile_server = servername
+.RS 4
+Defines which volfile server to use, defaults to localhost\&. It could be list of white space separated elements where each element could be
+.sp
+1\&. unix+/path/to/socket/file
+.sp
+2\&. [tcp+]IP|hostname|\e[IPv6\e][:port]
+.sp
+Note the restriction on naming a IPv6 host, it follows the same restriction that is based on IPv6 naming in URL as per RFC 2732\&.
+.RE
+.PP
+glusterfs:volume = volumename
+.RS 4
+Defines the glusterfs volumename to use for this share\&.
+.RE
+.SH "CAVEATS"
+.PP
+The GlusterFS write\-behind performance translator, when used with Samba, could be a source of data corruption\&. The translator, while processing a write call, immediately returns success but continues writing the data to the server in the background\&. This can cause data corruption when two clients relying on Samba to provide data consistency are operating on the same file\&.
+.PP
+The write\-behind translator is enabled by default on GlusterFS\&. The vfs_glusterfs plugin will check for the presence of the translator and refuse to connect if detected\&. Please disable the write\-behind translator for the GlusterFS volume to allow the plugin to connect to the volume\&. The write\-behind translator can easily be disabled via calling
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+                        gluster volume set <volumename> performance\&.write\-behind off
+                
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+on the commandline\&.
+.PP
+With GlusterFS versions >= 9, we silently bypass write\-behind translator during initial connect and failure is avoided\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_glusterfs_fuse.8 b/docs/manpages/vfs_glusterfs_fuse.8
new file mode 100644
index 0000000000..fe8d998f79
--- /dev/null
+++ b/docs/manpages/vfs_glusterfs_fuse.8
@@ -0,0 +1,84 @@
+'\" t
+.\"     Title: vfs_glusterfs_fuse
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_GLUSTERFS_FUSE" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_glusterfs_fuse \- Utilize features provided by GlusterFS
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = glusterfs_fuse
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(8)
+suite\&.
+.PP
+GlusterFS (http://www\&.gluster\&.org) is an Open Source clustered file system capable of scaling to several peta\-bytes\&. With its FUSE based native client, GlusterFS is available as a POSIX compliant file system and can hence be shared by Samba without additional steps\&.
+.PP
+The
+vfs_glusterfs_fuse
+VFS module provides an enhanced way to access a Gluster filesystem using a Gluster FUSE mount\&. It provides support for the
+get_real_filename
+VFS call which enhances file access performance by avoiding multiple expensive case folding lookup calls to detect the appropriate case of an existing filename\&.
+.PP
+Furthermore, this module implements a substitute file\-id mechanism\&. The default file\-id mechanism is not working correctly for gluster fuse mount re\-exports, so in order to avoid data loss, users exporting gluster fuse mounts with Samba should enable this module\&.
+.PP
+This module can be combined with other modules, but it should be the last module in the
+vfs objects
+list\&. Modules added to this list to the right of the glusterfs entry may not have any effect at all\&.
+.SH "CONFIGURATION"
+.PP
+A basic configuration looks like this\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[share]\fR
+		\m[blue]\fBvfs objects = glusterfs_fuse\fR\m[]
+		\m[blue]\fBpath = /absolute/path_of_fusemount\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Note that
+vfs_glusterfs_fuse
+requires a Gluster mount\&. For accessing glusterfs directly over the GFAPI library please use the
+vfs_glusterfs
+module\&.
+.SH "OPTIONS"
+.PP
+This module does currently have no further options\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_gpfs.8 b/docs/manpages/vfs_gpfs.8
new file mode 100644
index 0000000000..dffd6d138a
--- /dev/null
+++ b/docs/manpages/vfs_gpfs.8
@@ -0,0 +1,670 @@
+'\" t
+.\"     Title: vfs_gpfs
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_GPFS" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_gpfs \- gpfs specific samba extensions like acls
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = gpfs
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+gpfs
+VFS module is the home for all gpfs extensions that Samba requires for proper integration with GPFS\&. It uses the GPL library interfaces provided by GPFS\&.
+.PP
+Currently the gpfs vfs module provides extensions in following areas :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+NFSv4 ACL Interfaces with configurable options for GPFS
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Kernel oplock support on GPFS
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Lease support on GPFS
+.RE
+.sp
+.RE
+.PP
+NOTE:
+This module follows the posix\-acl behaviour and hence allows permission stealing via chown\&. Samba might allow at a later point in time, to restrict the chown via this module as such restrictions are the responsibility of the underlying filesystem than of Samba\&.
+.PP
+This module makes use of the smb\&.conf parameter
+\m[blue]\fBacl map full control\fR\m[]\&. When set to yes (the default), this parameter will add in the FILE_DELETE_CHILD bit on a returned ACE entry for a file (not a directory) that already contains all file permissions except for FILE_DELETE and FILE_DELETE_CHILD\&. This can prevent Windows applications that request GENERIC_ALL access from getting ACCESS_DENIED errors when running against a filesystem with NFSv4 compatible ACLs\&.
+.PP
+This module is stackable\&.
+.PP
+Since Samba 4\&.0 all options are per share options\&.
+.SH "OPTIONS"
+.PP
+gpfs:sharemodes = [ yes | no ]
+.RS 4
+Enable/Disable cross node sharemode handling for GPFS\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes(default)
+\- propagate sharemodes across all GPFS nodes\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no
+\- do not propagate sharemodes across all GPFS nodes\&. This should only be used if the GPFS file system is exclusively exported by Samba\&. Access by local unix application or NFS exports could lead to corrupted files\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:leases = [ yes | no ]
+.RS 4
+Enable/Disable cross node leases (oplocks) for GPFS\&. You should also set the
+oplocks
+and
+kernel oplocks
+options to the same value\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes(default)
+\- propagate leases across all GPFS nodes\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no
+\- do not propagate leases across all GPFS nodes\&. This should only be used if the GPFS file system is exclusively exported by Samba\&. Access by local unix application or NFS exports could lead to corrupted files\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:hsm = [ yes | no ]
+.RS 4
+Enable/Disable announcing if this FS has HSM enabled\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no(default)
+\- Do not announce HSM\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+\- Announce HSM\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:recalls = [ yes | no ]
+.RS 4
+When this option is set to no, an attempt to open an offline file will be rejected with access denied\&. This helps preventing recall storms triggered by careless applications like Finder and Explorer\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes(default)
+\- Open files that are offline\&. This will recall the files from HSM\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no
+\- Reject access to offline files with access denied\&. This will prevent recalls of files from HSM\&. Using this setting also requires gpfs:hsm to be set to yes\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:getrealfilename = [ yes | no ]
+.RS 4
+Enable/Disable usage of the
+gpfs_get_realfilename_path()
+function\&. This improves the casesensitive wildcard file name access\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes(default)
+\- use
+gpfs_get_realfilename_path()\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no
+\- do not use
+gpfs_get_realfilename_path()\&. It seems that
+gpfs_get_realfilename_path()
+doesn\*(Aqt work on AIX\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:winattr = [ yes | no ]
+.RS 4
+Enable/Disable usage of the windows attributes in GPFS\&. GPFS is able to store windows file attributes e\&.g\&. HIDDEN, READONLY, SYSTEM and others natively\&. That means Samba doesn\*(Aqt need to map them to permission bits or extended attributes\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no(default)
+\- do not use GPFS windows attributes\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+\- use GPFS windows attributes\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:acl = [ yes | no ]
+.RS 4
+This option lets Samba use or ignore GPFS ACLs\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes(default)
+\- use GPFS ACLs\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no
+\- do not use GPFS ACLs and pass everything to the next SMB_VFS module\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:check_fstype = [ yes | no ]
+.RS 4
+Check for a mounted GPFS file system on access to a SMB share\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes(default)
+\- Check that the SMB share path is on a GPFS file system\&. Share access will be denied when a different file system is found\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no
+\- skip check for GPFS file system on SMB share path\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:refuse_dacl_protected = [ yes | no ]
+.RS 4
+As GPFS does not support the ACE4_FLAG_NO_PROPAGATE NFSv4 flag (which would be the mapping for the DESC_DACL_PROTECTED flag), the status of this flag is currently silently ignored by Samba\&. That means that if you deselect the "Allow inheritable permissions\&.\&.\&." checkbox in Windows\*(Aq ACL dialog and then apply the ACL, the flag will be back immediately\&.
+.sp
+To make sure that automatic migration with e\&.g\&. robocopy does not lead to ACLs silently (and unintentionally) changed, you can set
+gpfs:refuse_dacl_protected = yes
+to enable an explicit check for this flag and if set, it will return NT_STATUS_NOT_SUPPORTED so errors are shown up on the Windows side and the Administrator is aware of the ACLs not being settable like intended
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no(default)
+\- ignore the DESC_DACL_PROTECTED flags\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+\- reject ACLs with DESC_DACL_PROTECTED\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:dfreequota = [ yes | no ]
+.RS 4
+Adjust reporting of the size and free space of a share according to quotas\&. If this setting is "yes", a request for size and free space will also evaluate the user quota of the user requesting the data and the group quota of the primary group of the user\&. Fileset quotas are not queried, since GPFS already provides the option \-\-dfreequota to reflect the fileset quota in the free space query\&. Please use that option to include fileset quotas in the reported disk space\&.
+.sp
+If any of the soft or hard quota limits has been reached, the free space will be reported as 0\&. If a quota is in place, but the limits have not been reached, the free space will be reported according to the space left in the quota\&. If more than one quota applies the free space will be reported as the smallest space left in those quotas\&. The size of the share will be reported according to the quota usage\&. If more than one quota applies, the smallest size will be reported for the share size according to these quotas\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+\- include the quotas when reporting the share size and free space
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no(default)
+\- do not include quotas, simply report the size and free space of the file system
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:settimes = [ yes | no ]
+.RS 4
+Use the gpfs_set_times API when changing the timestamps of a file or directory\&. If the GPFS API is not available the old method of using utime and the GPFS winattr call will be used instead\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes(default)
+\- Use gpfs_set_times\&. Fall back to utime and winattr when it is not available\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no
+\- Do not use gpfs_set_times\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+nfs4:mode = [ simple | special ]
+.RS 4
+Controls substitution of special IDs (OWNER@ and GROUP@) on GPFS\&. The use of mode simple is recommended\&. In this mode only non inheriting ACL entries for the file owner and group are mapped to special IDs\&.
+.sp
+The following MODEs are understood by the module:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+simple(default)
+\- use OWNER@ and GROUP@ special IDs for non inheriting ACEs only\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+special(deprecated)
+\- use OWNER@ and GROUP@ special IDs in ACEs for all file owner and group ACEs\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+nfs4:acedup = [dontcare|reject|ignore|merge]
+.RS 4
+This parameter configures how Samba handles duplicate ACEs encountered in GPFS ACLs\&. GPFS allows/creates duplicate ACE for different bits for same ID\&.
+.sp
+Following is the behaviour of Samba for different values :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+dontcare
+\- copy the ACEs as they come
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+reject (deprecated)
+\- stop operation and exit with error on ACL set op
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ignore (deprecated)
+\- don\*(Aqt include the second matching ACE
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+merge (default)
+\- bitwise OR the 2 ace\&.flag fields and 2 ace\&.mask fields of the 2 duplicate ACEs into 1 ACE
+.RE
+.sp
+.RE
+.RE
+.PP
+nfs4:chown = [yes|no]
+.RS 4
+This parameter allows enabling or disabling the chown supported by the underlying filesystem\&. This parameter should be enabled with care as it might leave your system insecure\&.
+.sp
+Some filesystems allow chown as a) giving b) stealing\&. It is the latter that is considered a risk\&.
+.sp
+Following is the behaviour of Samba for different values :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+\- Enable chown if as supported by the under filesystem
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no (default)
+\- Disable chown
+.RE
+.sp
+.RE
+.RE
+.PP
+gpfs:syncio = [yes|no]
+.RS 4
+This parameter makes Samba open all files with O_SYNC\&. This triggers optimizations in GPFS for workloads that heavily share files\&.
+.sp
+Following is the behaviour of Samba for different values:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+\- Open files with O_SYNC
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no (default)
+\- Open files as normal Samba would do
+.RE
+.sp
+.RE
+.RE
+.SH "EXAMPLES"
+.PP
+A GPFS mount can be exported via Samba as follows :
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[samba_gpfs_share]\fR
+	\m[blue]\fBvfs objects = gpfs\fR\m[]
+	\m[blue]\fBpath = /test/gpfs_mount\fR\m[]
+	\m[blue]\fBnfs4: mode = special\fR\m[]
+	\m[blue]\fBnfs4: acedup = merge\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "CAVEATS"
+.PP
+Depending on the version of gpfs, the
+libgpfs_gpl
+library or the
+libgpfs
+library is needed at runtime by the
+gpfs
+VFS module: Starting with gpfs 3\&.2\&.1 PTF8, the complete
+libgpfs
+is available as open source and
+libgpfs_gpl
+does no longer exist\&. With earlier versions of gpfs, only the
+libgpfs_gpl
+library was open source and could be used at run time\&.
+.PP
+At build time, only the header file
+gpfs_gpl\&.h
+is required, which is a symlink to
+gpfs\&.h
+in gpfs versions newer than 3\&.2\&.1 PTF8\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The GPFS VFS module was created with contributions from Volker Lendecke and the developers at IBM\&.
+.PP
+This manpage was created by the IBM FSCC team
diff --git a/docs/manpages/vfs_io_uring.8 b/docs/manpages/vfs_io_uring.8
new file mode 100644
index 0000000000..79be343c0c
--- /dev/null
+++ b/docs/manpages/vfs_io_uring.8
@@ -0,0 +1,84 @@
+'\" t
+.\"     Title: vfs_io_uring
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_IO_URING" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_io_uring \- Implement async io in Samba vfs using io_uring of Linux (>= 5\&.1)\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = io_uring
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+io_uring
+VFS module enables asynchronous pread, pwrite and fsync using the io_uring infrastructure of Linux (>= 5\&.1)\&. This provides much less overhead compared to the usage of the pthreadpool for async io\&.
+.PP
+This module SHOULD be listed last in any module stack as it requires real kernel file descriptors\&.
+.SH "EXAMPLES"
+.PP
+Straight forward use:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[cooldata]\fR
+	\m[blue]\fBpath = /data/ice\fR\m[]
+	\m[blue]\fBvfs objects = io_uring\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "OPTIONS"
+.PP
+io_uring:num_entries = NUMBER_OF_QUEUE_ENTRIES
+.RS 4
+The number of entries in the submission queue\&. The maximum allowed value depends on the kernel version and the kernel will roundup the value to a power of 2\&.
+.sp
+The default is \*(Aq128\*(Aq\&.
+.RE
+.PP
+io_uring:sqpoll = BOOL
+.RS 4
+Use the IORING_SETUP_SQPOLL feature\&.
+.sp
+The default is \*(Aqno\*(Aq\&.
+.RE
+.SH "SEE ALSO"
+.PP
+\fBio_uring_setup\fR(2)\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_linux_xfs_sgid.8 b/docs/manpages/vfs_linux_xfs_sgid.8
new file mode 100644
index 0000000000..9b48976e37
--- /dev/null
+++ b/docs/manpages/vfs_linux_xfs_sgid.8
@@ -0,0 +1,70 @@
+'\" t
+.\"     Title: vfs_syncops
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_SYNCOPS" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_linux_xfs_sgid \- Workaround XFS sgid bit not inherited
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = linux_xfs_sgid
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+vfs_linux_xfs_sgid
+is a VFS module to work around an old Linux XFS bug fixed in 3\&.11: the SGID bit is not inherited during mkdir when a default ACL is set (https://web\&.archive\&.org/web/20160320180937/http://oss\&.sgi\&.com/bugzilla/show_bug\&.cgi?id=280
+fixed by
+https://git\&.kernel\&.org/pub/scm/linux/kernel/git/torvalds/linux\&.git/commit/?id=42c49d7f249c2487f36d3314753d5d8ebcee8249)\&. The
+vfs_linux_xfs_sgid
+VFS module will work around this bug by manually setting the SGID bit after a
+mkdir
+if the parent directory had the SGID bit set\&.
+.PP
+This module is stackable\&.
+.SH "EXAMPLES"
+.PP
+Add syncops functionality for [share]:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[share]\fR
+	\m[blue]\fBvfs objects = linux_xfs_sgid\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_media_harmony.8 b/docs/manpages/vfs_media_harmony.8
new file mode 100644
index 0000000000..c6c8f73e5e
--- /dev/null
+++ b/docs/manpages/vfs_media_harmony.8
@@ -0,0 +1,144 @@
+'\" t
+.\"     Title: vfs_media_harmony
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_MEDIA_HARMONY" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_media_harmony \- Allow multiple Avid clients to share a network drive\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = media_harmony
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_media_harmony
+VFS module allows Avid editorial workstations to share a network drive\&. It does this by:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 1.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  1." 4.2
+.\}
+Giving each client their own copy of the Avid msmMMOB\&.mdb and msmFMID\&.pmr files and Creating directories\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 2.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  2." 4.2
+.\}
+Allowing each client to explicitly control the write time the Avid application sees on Avid media directories\&.
+.RE
+.sp
+.RE
+.PP
+This module is stackable\&.
+.SH "CONFIGURATION"
+.PP
+vfs_media_harmony
+automatically redirects requests from clients for Avid database files or an Avid Creating directory to a client\-specific version of the file\&. No configuration beyond enabling the module is needed to get this portion of its functionality working\&.
+.PP
+If Mac and Windows Avid clients will be accessing the same folder, they should be given separate share definitions, with hidden Mac files vetoed on the Windows share\&. See EXAMPLES\&.
+.PP
+To allow each client to control when the Avid application refreshes their Avid databases, create files for each client and each Avid media directory with the name [avid_dir_name]_[client_ip_address]_[client_username]\&. To trigger Avid database refreshes, update the write time on those files\&. See EXAMPLES\&.
+.PP
+It is also necessary for the
+cache locked write times = no
+option to be set for clients to be able to control their Avid media folder write times\&.
+.SH "EXAMPLES"
+.PP
+Enable media_harmony for Mac and Windows clients:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[avid_mac]\fR
+	\m[blue]\fBpath = /avid\fR\m[]
+	\m[blue]\fBvfs objects = media_harmony\fR\m[]
+	\m[blue]\fBcache locked write times = no\fR\m[]
+        \fI[avid_win]\fR
+	\m[blue]\fBpath = /avid\fR\m[]
+	\m[blue]\fBvfs objects = media_harmony\fR\m[]
+	\m[blue]\fBcache locked write times = no\fR\m[]
+	\m[blue]\fBveto files = /\&.DS_Store/\&._@/\&.Trash@/\&.Spotlight@/\&.hidden/\&.hotfiles@/\&.vol/\fR\m[]
+	\m[blue]\fBdelete veto files = yes\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Create the files that will allow users david and susan to control their own Avid database refreshes:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	touch \*(Aq/avid/OMFI MediaFiles_192\&.168\&.1\&.10_david\*(Aq \e
+		\*(Aq/avid/OMFI MediaFiles_192\&.168\&.1\&.11_susan\*(Aq \e
+		\*(Aq/avid/Avid MediaFiles/MXF/1_192\&.168\&.1\&.10_david\*(Aq \e
+		\*(Aq/avid/Avid MediaFiles/MXF/1_192\&.168\&.1\&.11_susan\*(Aq
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Trigger an Avid database refresh for user david:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	touch \*(Aq/avid/OMFI MediaFiles_192\&.168\&.1\&.10_david\*(Aq \e
+		\*(Aq/avid/Avid MediaFiles/MXF/1_192\&.168\&.1\&.10_david\*(Aq
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+If you have a large number of Avid media folders to manage, you can give each editor a suitably modified version of examples/scripts/vfs/media_harmony/trigger_avid_update\&.py to create and update these files\&.
+.SH "CAVEATS"
+.PP
+vfs_media_harmony
+is designed to work with Avid editing applications that look in the Avid MediaFiles or OMFI MediaFiles directories for media\&. It is not designed to work as expected in all circumstances for general use\&. For example: It is possible to open a client\-specific file such as msmMMOB\&.mdb_192\&.168\&.1\&.10_userx even though it doesn\*(Aqt show up in a directory listing\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_nfs4acl_xattr.8 b/docs/manpages/vfs_nfs4acl_xattr.8
new file mode 100644
index 0000000000..265cad0a36
--- /dev/null
+++ b/docs/manpages/vfs_nfs4acl_xattr.8
@@ -0,0 +1,139 @@
+'\" t
+.\"     Title: vfs_nfs4acl_xattr
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_NFS4ACL_XATTR" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_nfs4acl_xattr \- Save NTFS\-ACLs as NFS4 encoded blobs in extended attributes
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = nfs4acl_xattr
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_acl_xattr
+VFS module stores NTFS Access Control Lists (ACLs) in Extended Attributes (EAs/xattrs)\&. This enables the full mapping of Windows ACLs on Samba servers\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+nfs4acl_xattr:encoding = [nfs|ndr|xdr]
+.RS 4
+This parameter configures the marshaling format used in the ACL blob and the default extended attribute name used to store the blob\&.
+.sp
+When set to
+\fInfs\fR
+\- fetch and store the NT ACL in NFS 4\&.0 or 4\&.1 compatible XDR encoding\&. By default this uses the extended attribute "system\&.nfs4_acl"\&. This setting also disables
+\fIvalidate_mode\fR\&.
+.sp
+When set to
+\fIndr (default)\fR
+\- store the NT ACL with POSIX draft NFSv4 compatible NDR encoding\&. By default this uses the extended attribute "security\&.nfs4acl_ndr"\&.
+.sp
+When set to
+\fIxdr\fR
+\- store the NT ACL in a format similar to NFS 4\&.1 RFC 5661 in XDR encoding\&. The main differences to RFC 5661 are the use of ids instead of strings as users and group identifiers and an additional attribute per nfsace4\&. By default this encoding stores the blob in the extended attribute "security\&.nfs4acl_xdr"\&.
+.RE
+.PP
+nfs4acl_xattr:version = [40|41]
+.RS 4
+This parameter configures the NFS4 ACL level\&. Only
+\fI41\fR
+fully supports mapping NT ACLs and should be used\&. The default is
+\fI41\fR\&.
+.RE
+.PP
+nfs4acl_xattr:default acl style = [posix|windows|everyone]
+.RS 4
+This parameter determines the type of ACL that is synthesized in case a file or directory lacks an ACL extended attribute\&.
+.sp
+When set to
+\fIposix\fR, an ACL will be synthesized based on the POSIX mode permissions for user, group and others, with an additional ACE for
+\fINT Authority\eSYSTEM\fR
+will full rights\&.
+.sp
+When set to
+\fIwindows\fR, an ACL is synthesized the same way Windows does it, only including permissions for the owner and
+\fINT Authority\eSYSTEM\fR\&.
+.sp
+When set to
+\fIeveryone\fR, an ACL is synthesized giving full permissions to everyone (S\-1\-1\-0)\&.
+.sp
+The default for this option is
+\fIeveryone\fR\&.
+.RE
+.PP
+nfs4acl_xattr:xattr_name = STRING
+.RS 4
+This parameter configures the extended attribute name used to store the marshaled ACL\&.
+.sp
+The default depends on the setting for
+\fInfs4acl_xattr:encoding\fR\&.
+.RE
+.PP
+nfs4acl_xattr:nfs4_id_numeric = yes|no (default: no)
+.RS 4
+This parameter tells the module how the NFS4 server encodes user and group identifiers on the network\&. With the default setting the module expects identifiers encoded as per the NFS4 RFC as user@domain\&.
+.sp
+When set to
+\fIyes\fR, the module expects the identifiers as numeric string\&.
+.sp
+The default for this options\fIno\fR\&.
+.RE
+.PP
+nfs4acl_xattr:validate_mode = yes|no
+.RS 4
+This parameter configures whether the module enforces the POSIX mode is set to 0777 for directories and 0666 for files\&. If this constrained is not met, the xattr with the ACL blob is discarded\&.
+.sp
+The default depends on the setting for
+\fInfs4acl_xattr:encoding\fR: when set to
+\fInfs\fR
+this setting is disabled by default, otherwise it is enabled\&.
+.RE
+.SH "EXAMPLES"
+.PP
+A directory can be exported via Samba using this module as follows:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+      \fI[samba_gpfs_share]\fR
+      \m[blue]\fBvfs objects = nfs4acl_xattr\fR\m[]
+      \m[blue]\fBpath = /foo/bar\fR\m[]
+    
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_offline.8 b/docs/manpages/vfs_offline.8
new file mode 100644
index 0000000000..4167da2305
--- /dev/null
+++ b/docs/manpages/vfs_offline.8
@@ -0,0 +1,65 @@
+'\" t
+.\"     Title: vfs_offline
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_OFFLINE" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_offline \- Mark all files as offline
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = offline
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_offline
+module marks all files in the share as having the offline DOS attribute\&.
+.PP
+Files with the offline DOS attribute are handled differently by the Windows SMB client, as well as by Windows Explorer\&. In particular, Windows Explorer does not read those files for the sole purpose of drawing a thumbnail, as it normally does\&. This can improve user experience with some remote file systems\&.
+.SH "EXAMPLES"
+.PP
+Mark all files in a share as offline:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[remote]\fR
+	\m[blue]\fBvfs objects = offline\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_prealloc.8 b/docs/manpages/vfs_prealloc.8
new file mode 100644
index 0000000000..73a6f44e0c
--- /dev/null
+++ b/docs/manpages/vfs_prealloc.8
@@ -0,0 +1,118 @@
+'\" t
+.\"     Title: vfs_prealloc
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_PREALLOC" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_prealloc \- preallocate matching files to a predetermined size
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = prealloc
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_prealloc
+VFS module preallocates files to a specified size each time a new file is created\&. This is useful in environments where files are of a predetermined size will be written to a disk subsystem where extending file allocations is expensive\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+prealloc:EXT = BYTES
+.RS 4
+Preallocate all files with the extension EXT to the size specified by BYTES\&.
+.sp
+The following suffixes may be applied to BYTES:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+K
+\- BYTES is a number of kilobytes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+M
+\- BYTES is a number of megabytes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+G
+\- BYTES is a number of gigabytes
+.RE
+.sp
+.RE
+.RE
+.SH "EXAMPLES"
+.PP
+A process writes TIFF files to a Samba share, and the is known these files will almost always be around 4 megabytes (4194304 bytes):
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[frames]\fR
+	\m[blue]\fBpath = /data/frames\fR\m[]
+	\m[blue]\fBvfs objects = prealloc\fR\m[]
+	\m[blue]\fBprealloc:tiff = 4M\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "CAVEATS"
+.PP
+vfs_prealloc
+is not supported on all platforms and filesystems\&. Currently only XFS filesystems on Linux and IRIX are supported\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_preopen.8 b/docs/manpages/vfs_preopen.8
new file mode 100644
index 0000000000..7c0ada8472
--- /dev/null
+++ b/docs/manpages/vfs_preopen.8
@@ -0,0 +1,155 @@
+'\" t
+.\"     Title: vfs_preopen
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_PREOPEN" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_preopen \- Hide read latencies for applications reading numbered files
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = preopen
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+This module assists applications that want to read numbered files in sequence with very strict latency requirements\&. One area where this happens in video streaming applications that want to read one file per frame\&.
+.PP
+When you use this module, a number of helper processes is started that speculatively open files and read a number of bytes to prime the file system cache, so that later on when the real application\*(Aqs request comes along, no disk access is necessary\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+preopen:posix\-basic\-regex = BOOL (default: no)
+.RS 4
+preopen:posix\-basic\-regex = yes
+changes the meaning of the
+preopen:names
+option\&. Further details are described there\&.
+.RE
+.PP
+preopen:names = /pattern1/pattern2/
+.RS 4
+preopen:names specifies the file name pattern(s) which should trigger the preopen helpers to do their work\&. We assume that the files are numbered incrementally\&. So if your file names are numbered FRAME00000\&.frm FRAME00001\&.frm and so on you would list them as
+preopen:names=/FRAME*\&.frm/\&. The default algorithm uses the first (at least 3) digits it finds in order to calculate the name of the next frames\&.
+.sp
+preopen:posix\-basic\-regex = yes
+changes the meaning of the
+preopen:names
+option\&. It means \*(AqPOSIX Basic Regular Expression\*(Aq strings are used as patterns\&. The key is each pattern requires exactly one \*(Aqsubexpression\*(Aq starting with \*(Aq\e(\*(Aq and ending with \*(Aq\e)\*(Aq in order to specify the position of the digits representing the incrementing frame numbers\&. Given a file names like Movie7599Frame0v1234\&.txt, Movie7599Frame1v1234\&.txt, Movie7599Frame2v1234\&.txt up to Movie7599Frame9v1234\&.txt you can use
+preopen:names = /\&.*Frame\e([0\-9]\e)\&.*\e\&.txt/
+in order to match just a single digits, this might not be a real world example, but it shows the flexiblity that is possible here\&.
+.RE
+.PP
+preopen:num_bytes = BYTES
+.RS 4
+Specifies the number of bytes the helpers should speculatively read, defaults to 1\&.
+.RE
+.PP
+preopen:helpers = NUM\-PROCS
+.RS 4
+Number of forked helper processes, defaults to 1\&.
+.RE
+.PP
+preopen:queuelen = NUM\-FILES
+.RS 4
+Number of files that should be speculatively opened\&. Defaults to the 10 subsequent files\&.
+.RE
+.PP
+preopen:nomatch_log_level = LOGLEVEL
+.RS 4
+In order to debug or audit the usage of the preopen logic you can use this option to specify at what log level details about filenames not matching any pattern from \*(Aqpreopen:names\*(Aq are logged\&.
+.sp
+Defaults to the log level 5\&. See also
+\fBsmb.conf\fR(5)
+in the \*(Aq\m[blue]\fBlog level\fR\m[]\*(Aq section for special handling of the \*(Aqpreopen\*(Aq debug class\&.
+.RE
+.PP
+preopen:match_log_level = LOGLEVEL
+.RS 4
+In order to debug or audit the usage of the preopen logic you can use this option to specify at what log level details about filenames actually matching a pattern from \*(Aqpreopen:names\*(Aq are logged\&.
+.sp
+See also \*(Aqpreopen:founddigits_log_level\*(Aq and \*(Aqpreopen:push_log_level\*(Aq\&.
+.sp
+Defaults to the log level 5\&. See also
+\fBsmb.conf\fR(5)
+in the \*(Aq\m[blue]\fBlog level\fR\m[]\*(Aq section for special handling of the \*(Aqpreopen\*(Aq debug class\&.
+.RE
+.PP
+preopen:nodigits_log_level = LOGLEVEL
+.RS 4
+In order to debug or audit problems with the preopen configuration you can use this option to specify at what log level details about filenames actually matching a pattern from \*(Aqpreopen:names\*(Aq, but at the same time don\*(Aqt contain the expected digits, are logged\&. This is typically something the administrator wants to notice and adjust the configuration in order to define more precisely where to find the digits in the filename\&.
+.sp
+Defaults to the log level 1\&. See also
+\fBsmb.conf\fR(5)
+in the \*(Aq\m[blue]\fBlog level\fR\m[]\*(Aq section for special handling of the \*(Aqpreopen\*(Aq debug class\&.
+.RE
+.PP
+preopen:founddigits_log_level = LOGLEVEL
+.RS 4
+In order to debug or audit the usage of the preopen logic you can use this option to specify at what log level details about filenames actually matching a pattern from \*(Aqpreopen:names\*(Aq, and at the same time having valid expected digits, are logged\&. This means enough information is available in order to queue preopens\&.
+.sp
+Defaults to the log level 3\&. See also
+\fBsmb.conf\fR(5)
+in the \*(Aq\m[blue]\fBlog level\fR\m[]\*(Aq section for special handling of the \*(Aqpreopen\*(Aq debug class\&.
+.RE
+.PP
+preopen:reset_log_level = LOGLEVEL
+.RS 4
+If a matching filename belongs to a different pattern from \*(Aqpreopen:names\*(Aq, a different parent directory or differs in a significant way from the last filename that was found before, the module needs to reset it\*(Aqs internal queue state\&. This means that no more preopens will be pushed to helper processes belonging to the former queue state\&. In order to debug or audit such queue resets you can use this option to specify at what log level details are logged\&.
+.sp
+Defaults to the log level 5\&. See also
+\fBsmb.conf\fR(5)
+in the \*(Aq\m[blue]\fBlog level\fR\m[]\*(Aq section for special handling of the \*(Aqpreopen\*(Aq debug class\&.
+.RE
+.PP
+preopen:push_log_level = LOGLEVEL
+.RS 4
+In order to debug or audit the usage of the preopen logic you can use this option to specify at what log level details about filenames actually pushed to preopen helper processes are logged\&. This means they will actually be preopened soon\&.
+.sp
+Defaults to the log level 3\&. See also
+\fBsmb.conf\fR(5)
+in the \*(Aq\m[blue]\fBlog level\fR\m[]\*(Aq section for special handling of the \*(Aqpreopen\*(Aq debug class\&.
+.RE
+.PP
+preopen:queue_log_level = LOGLEVEL
+.RS 4
+In order to debug details about internal queue processing you can use this option to specify at what log level the details are logged\&.
+.sp
+Defaults to the log level 10\&. See also
+\fBsmb.conf\fR(5)
+in the \*(Aq\m[blue]\fBlog level\fR\m[]\*(Aq section for special handling of the \*(Aqpreopen\*(Aq debug class\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The PREOPEN VFS module was created with contributions from Volker Lendecke and the developers at IBM\&.
diff --git a/docs/manpages/vfs_readahead.8 b/docs/manpages/vfs_readahead.8
new file mode 100644
index 0000000000..57983b88f8
--- /dev/null
+++ b/docs/manpages/vfs_readahead.8
@@ -0,0 +1,121 @@
+'\" t
+.\"     Title: vfs_readahead
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_READAHEAD" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_readahead \- pre\-load the kernel buffer cache
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = readahead
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+This
+vfs_readahead
+VFS module detects read requests at multiples of a given offset (hex 0x80000 by default) and then tells the kernel via either the readahead system call (on Linux) or the posix_fadvise system call to pre\-fetch this data into the buffer cache\&.
+.PP
+This module is useful for Windows Vista clients reading data using the Windows Explorer program, which asynchronously does multiple file read requests at offset boundaries of 0x80000 bytes\&.
+.PP
+The offset multiple used is given by the readahead:offset option, which defaults to 0x80000\&.
+.PP
+The size of the disk read operations performed by
+vfs_readahead
+is determined by the readahead:length option\&. By default this is set to the same value as the readahead:offset option and if not set explicitly will use the current value of readahead:offset\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+readahead:offset = BYTES
+.RS 4
+The offset multiple that causes readahead to be requested of the kernel buffer cache\&.
+.RE
+.PP
+readahead:length = BYTES
+.RS 4
+The number of bytes requested to be read into the kernel buffer cache on each readahead call\&.
+.RE
+.PP
+The following suffixes may be applied to BYTES:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+K
+\- BYTES is a number of kilobytes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+M
+\- BYTES is a number of megabytes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+G
+\- BYTES is a number of gigabytes
+.RE
+.SH "EXAMPLES"
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	\fI[hypothetical]\fR
+	\m[blue]\fBvfs objects = readahead\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_readonly.8 b/docs/manpages/vfs_readonly.8
new file mode 100644
index 0000000000..5c02d08a0e
--- /dev/null
+++ b/docs/manpages/vfs_readonly.8
@@ -0,0 +1,87 @@
+'\" t
+.\"     Title: vfs_readonly
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_READONLY" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_readonly \- make a Samba share read only for a specified time period
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = readonly
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_readonly
+VFS module marks a share as read only for all clients connecting within the configured time period\&. Clients connecting during this time will be denied write access to all files in the share, irrespective of their actual access privileges\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+readonly:period = BEGIN, END
+.RS 4
+Only mark the share as read only if the client connection was made between the times marked by the BEGIN and END date specifiers\&. The syntax of these date specifiers is the same as that accepted by the \-d option of GNU
+\fBdate\fR(1)\&.
+.RE
+.SH "EXAMPLES"
+.PP
+Mark all shares read only:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[global]\fR
+	\m[blue]\fBvfs objects = readonly\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Mark the [backup] share as read only during business hours:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[backup]\fR
+	\m[blue]\fBpath = /readonly\fR\m[]
+	\m[blue]\fBvfs objects = readonly\fR\m[]
+	\m[blue]\fBreadonly:period = readonly:period = "today 9:00","today 17:00"\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_recycle.8 b/docs/manpages/vfs_recycle.8
new file mode 100644
index 0000000000..5e0ededf80
--- /dev/null
+++ b/docs/manpages/vfs_recycle.8
@@ -0,0 +1,142 @@
+'\" t
+.\"     Title: vfs_recycle
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_RECYCLE" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_recycle \- Samba VFS recycle bin
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = recycle
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_recycle
+intercepts file deletion requests and moves the affected files to a temporary repository rather than deleting them immediately\&. This gives the same effect as the Recycle Bin on Windows computers\&.
+.PP
+The Recycle Bin will not appear in Windows Explorer views of the network file system (share) nor on any mapped drive\&. Instead, a directory called \&.recycle will be automatically created when the first file is deleted and recycle:repository is not configured\&. If recycle:repository is configured, the name of the created directory depends on recycle:repository\&. Users can recover files from the recycle bin\&. If the recycle:keeptree option has been specified, deleted files will be found in a path identical with that from which the file was deleted\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+recycle:repository = PATH
+.RS 4
+Path of the directory where deleted files should be moved\&.
+.sp
+If this option is not set, the default path \&.recycle is used\&.
+.RE
+.PP
+recycle:directory_mode = MODE
+.RS 4
+Set MODE to the octal mode the recycle repository should be created with\&. The recycle repository will be created when first file is deleted\&. If recycle:subdir_mode is not set, MODE also applies to subdirectories\&.
+.sp
+If this option is not set, the default mode 0700 is used\&.
+.RE
+.PP
+recycle:subdir_mode = MODE
+.RS 4
+Set MODE to the octal mode with which sub directories of the recycle repository should be created\&.
+.sp
+If this option is not set, subdirectories will be created with the mode from recycle:directory_mode\&.
+.RE
+.PP
+recycle:keeptree = BOOL
+.RS 4
+Specifies whether the directory structure should be preserved or whether the files in a directory that is being deleted should be kept separately in the repository\&.
+.RE
+.PP
+recycle:versions = BOOL
+.RS 4
+If this option is True, two files with the same name that are deleted will both be kept in the repository\&. Newer deleted versions of a file will be called "Copy #x of filename"\&.
+.RE
+.PP
+recycle:touch = BOOL
+.RS 4
+Specifies whether a file\*(Aqs access date should be updated when the file is moved to the repository\&.
+.RE
+.PP
+recycle:touch_mtime = BOOL
+.RS 4
+Specifies whether a file\*(Aqs last modified date should be updated when the file is moved to the repository\&.
+.RE
+.PP
+recycle:minsize = BYTES
+.RS 4
+Files that are smaller than the number of bytes specified by this parameter will not be put into the repository\&.
+.RE
+.PP
+recycle:maxsize = BYTES
+.RS 4
+Files that are larger than the number of bytes specified by this parameter will not be put into the repository\&.
+.RE
+.PP
+recycle:exclude = LIST
+.RS 4
+List of files that should not be put into the repository when deleted, but deleted in the normal way\&. Wildcards such as * and ? are supported\&.
+.RE
+.PP
+recycle:exclude_dir = LIST
+.RS 4
+List of directories whose files should not be put into the repository when deleted, but deleted in the normal way\&. Wildcards such as * and ? are supported\&.
+.RE
+.PP
+recycle:noversions = LIST
+.RS 4
+Specifies a list of paths (wildcards such as * and ? are supported) for which no versioning should be used\&. Only useful when recycle:versions is enabled\&.
+.RE
+.SH "EXAMPLES"
+.PP
+Move files "deleted" on
+\fIshare\fR
+to
+\fI/data/share/\&.recycle\fR
+instead of deleting them:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[share]\fR
+	\m[blue]\fBpath = /data/share\fR\m[]
+	\m[blue]\fBvfs objects = recycle\fR\m[]
+	\m[blue]\fBrecycle:repository = \&.recycle\fR\m[]
+	\m[blue]\fBrecycle:keeptree = yes\fR\m[]
+	\m[blue]\fBrecycle:versions = yes\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_shadow_copy.8 b/docs/manpages/vfs_shadow_copy.8
new file mode 100644
index 0000000000..809a87b423
--- /dev/null
+++ b/docs/manpages/vfs_shadow_copy.8
@@ -0,0 +1,173 @@
+'\" t
+.\"     Title: vfs_shadow_copy
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_SHADOW_COPY" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_shadow_copy \- Expose snapshots to Windows clients as shadow copies\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = shadow_copy
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_shadow_copy
+VFS module functionality that is similar to Microsoft Shadow Copy services\&. When setup properly, this module allows Microsoft Shadow Copy clients to browse "shadow copies" on Samba shares\&.
+.PP
+This module is stackable\&.
+.SH "CONFIGURATION"
+.PP
+vfs_shadow_copy
+relies on a filesystem snapshot implementation\&. Many common filesystems have native support for this\&.
+.PP
+Filesystem snapshots must be mounted on specially named directories in order to be recognized by
+vfs_shadow_copy\&. The snapshot mount points must be immediate children of a the directory being shared\&.
+.PP
+The snapshot naming convention is @GMT\-YYYY\&.MM\&.DD\-hh\&.mm\&.ss, where:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+YYYY
+is the 4 digit year
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+MM
+is the 2 digit month
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+DD
+is the 2 digit day
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+hh
+is the 2 digit hour
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+mm
+is the 2 digit minute
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ss
+is the 2 digit second\&.
+.RE
+.sp
+.RE
+.PP
+The
+vfs_shadow_copy
+snapshot naming convention can be produced with the following
+\fBdate\fR(1)
+command:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	TZ=GMT date +@GMT\-%Y\&.%m\&.%d\-%H\&.%M\&.%S
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "EXAMPLES"
+.PP
+Add shadow copy support to user home directories:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[homes]\fR
+	\m[blue]\fBvfs objects = shadow_copy\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "CAVEATS"
+.PP
+This is not a backup, archival, or version control solution\&.
+.PP
+With Samba or Windows servers,
+vfs_shadow_copy
+is designed to be an end\-user tool only\&. It does not replace or enhance your backup and archival solutions and should in no way be considered as such\&. Additionally, if you need version control, implement a version control system\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_shadow_copy2.8 b/docs/manpages/vfs_shadow_copy2.8
new file mode 100644
index 0000000000..018eb3ce75
--- /dev/null
+++ b/docs/manpages/vfs_shadow_copy2.8
@@ -0,0 +1,525 @@
+'\" t
+.\"     Title: vfs_shadow_copy2
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_SHADOW_COPY2" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_shadow_copy2 \- Expose snapshots to Windows clients as shadow copies\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = shadow_copy2
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_shadow_copy2
+VFS module offers a functionality similar to Microsoft Shadow Copy services\&. When set up properly, this module allows Microsoft Shadow Copy clients to browse through file system snapshots as "shadow copies" on Samba shares\&.
+.PP
+This is a second implementation of a shadow copy module which has the following additional features (compared to the original
+\fBshadow_copy\fR(8)
+module):
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 1.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  1." 4.2
+.\}
+There is no need any more to populate your share\*(Aqs root directory with symlinks to the snapshots if the file system stores the snapshots elsewhere\&. Instead, you can flexibly configure the module where to look for the file system snapshots\&. This can be very important when you have thousands of shares, or use [homes]\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 2.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  2." 4.2
+.\}
+Snapshot directories need not be in one fixed central place but can be located anywhere in the directory tree\&. This mode helps to support file systems that offer snapshotting of particular subtrees, for example the GPFS independent file sets\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 3.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  3." 4.2
+.\}
+Vanity naming for snapshots: snapshots can be named in any format compatible with str[fp]time conversions\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 4.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  4." 4.2
+.\}
+Timestamps can be represented in localtime rather than UTC\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 5.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  5." 4.2
+.\}
+The inode number of the files can optionally be altered to be different from the original\&. This fixes the \*(Aqrestore\*(Aq button in the Windows GUI to work without a sharing violation when serving from file systems, like GPFS, that return the same device and inode number for the snapshot file and the original\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 6.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  6." 4.2
+.\}
+Shadow copy results are by default sorted before being sent to the client\&. This is beneficial for filesystems that don\*(Aqt read directories alphabetically (the default unix)\&. Sort ordering can be configured and sorting can be turned off completely if the file system sorts its directory listing\&.
+.RE
+.sp
+.RE
+.PP
+This module is stackable\&.
+.SH "CONFIGURATION"
+.PP
+vfs_shadow_copy2
+relies on a filesystem snapshot implementation\&. Many common filesystems have native support for this\&.
+.PP
+Filesystem snapshots must be available under specially named directories in order to be recognized by
+vfs_shadow_copy2\&. These snapshot directory is typically a direct subdirectory of the share root\*(Aqs mountpoint but there are other modes that can be configured with the parameters described in detail below\&.
+.PP
+The snapshot at a given point in time is expected in a subdirectory of the snapshot directory where the snapshot\*(Aqs directory is expected to be a formatted version of the snapshot time\&. The default format which can be changed with the
+shadow:format
+option is @GMT\-YYYY\&.MM\&.DD\-hh\&.mm\&.ss, where:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+YYYY
+is the 4 digit year
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+MM
+is the 2 digit month
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+DD
+is the 2 digit day
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+hh
+is the 2 digit hour
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+mm
+is the 2 digit minute
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ss
+is the 2 digit second\&.
+.RE
+.sp
+.RE
+.PP
+The
+vfs_shadow_copy2
+snapshot naming convention can be produced with the following
+\fBdate\fR(1)
+command:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	TZ=GMT date +@GMT\-%Y\&.%m\&.%d\-%H\&.%M\&.%S
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "OPTIONS"
+.PP
+shadow:mountpoint = MOUNTPOINT
+.RS 4
+With this parameter, one can specify the mount point of the filesystem that contains the share path\&. Usually this mount point is automatically detected\&. But for some constellations, in particular tests, it can be convenient to be able to specify it\&.
+.sp
+Example: shadow:mountpoint = /path/to/filesystem
+.sp
+Default: shadow:mountpoint = NOT SPECIFIED
+.RE
+.PP
+shadow:snapdir = SNAPDIR
+.RS 4
+Path to the directory where the file system of the share keeps its snapshots\&. If an absolute path is specified, it is used as\-is\&. If a relative path is specified, then it is taken relative to the mount point of the filesystem of the share root\&. (See
+shadow:mountpoint\&.)
+.sp
+Note that
+shadow:snapdirseverywhere
+depends on this parameter and needs a relative path\&. Setting an absolute path disables
+shadow:snapdirseverywhere\&.
+.sp
+Note that the
+shadow:crossmountpoints
+option also requires a relative snapdir\&. Setting an absolute path disables
+shadow:crossmountpoints\&.
+.sp
+Example: shadow:snapdir = /some/absolute/path
+.sp
+Default: shadow:snapdir = \&.snapshots
+.RE
+.PP
+shadow:basedir = BASEDIR
+.RS 4
+The basedir option allows one to specify a directory between the share\*(Aqs mount point and the share root, relative to which the file system\*(Aqs snapshots are taken\&.
+.sp
+For example, if
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+basedir = mountpoint/rel_basedir
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+share_root = basedir/rel_share_root
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+snapshot_path = mountpoint/snapdir
+.sp
+or
+snapshot_path = snapdir
+if snapdir is absolute
+.RE
+.sp
+.RE
+then the snapshot of a
+file = mountpoint/rel_basedir/rel_share_root/rel_file
+at a time TIME will be found under
+snapshot_path/FS_GMT_TOKEN(TIME)/rel_share_root/rel_file, where FS_GMT_TOKEN(TIME) is the timestamp string belonging to TIME in the format required by the file system\&. (See
+shadow:format\&.)
+.sp
+The default for the basedir is the mount point of the file system of the share root (see
+shadow:mountpoint)\&.
+.sp
+Note that the
+shadow:snapdirseverywhere
+and
+shadow:crossmountpoints
+options are incompatible with
+shadow:basedir
+and disable the basedir setting\&.
+.RE
+.PP
+shadow:snapsharepath = SNAPSHAREPATH
+.RS 4
+With this parameter, one can specify the path of the share\*(Aqs root directory in snapshots, relative to the snapshot\*(Aqs root directory\&. It is an alternative method to
+shadow:basedir, allowing greater control\&.
+.sp
+For example, if within each snapshot the files of the share have a
+path/to/share/
+prefix, then
+shadow:snapsharepath
+can be set to
+path/to/share\&.
+.sp
+With this parameter, it is no longer assumed that a snapshot represents an image of the original file system or a portion of it\&. For example, a system could perform backups of only files contained in shares, and then expose the backup files in a logical structure:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+share1/
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+share2/
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\&.\&.\&./
+.RE
+.sp
+.RE
+Note that the
+shadow:snapdirseverywhere
+and the
+shadow:basedir
+options are incompatible with
+shadow:snapsharepath
+and disable
+shadow:snapsharepath
+setting\&.
+.sp
+Example: shadow:snapsharepath = path/to/share
+.sp
+Default: shadow:snapsharepath = NOT SPECIFIED
+.RE
+.PP
+shadow:sort = asc/desc
+.RS 4
+By default, this module sorts the shadow copy data alphabetically before sending it to the client\&. With this parameter, one can specify the sort order\&. Possible known values are desc (descending, the default) and asc (ascending)\&. If the file system lists directories alphabetically sorted, one can turn off sorting in this module by specifying any other value\&.
+.sp
+Example: shadow:sort = asc
+.sp
+Example: shadow:sort = none
+.sp
+Default: shadow:sort = desc
+.RE
+.PP
+shadow:localtime = yes/no
+.RS 4
+This is an optional parameter that indicates whether the snapshot names are in UTC/GMT or in local time\&. If it is disabled then UTC/GMT is expected\&.
+.sp
+shadow:localtime = no
+.RE
+.PP
+shadow:format = format specification for snapshot names
+.RS 4
+This is an optional parameter that specifies the format specification for the naming of snapshots in the file system\&. The format must be compatible with the conversion specifications recognized by str[fp]time\&.
+.sp
+Default: shadow:format = "@GMT\-%Y\&.%m\&.%d\-%H\&.%M\&.%S"
+.RE
+.PP
+shadow:sscanf = yes/no
+.RS 4
+This parameter can be used to specify that the time in format string is given as an unsigned long integer (%lu) rather than a time strptime() can parse\&. The result must be a unix time_t time\&.
+.sp
+Default: shadow:sscanf = no
+.RE
+.PP
+shadow:fixinodes = yes/no
+.RS 4
+If you enable
+shadow:fixinodes
+then this module will modify the apparent inode number of files in the snapshot directories using a hash of the files path\&. This is needed for snapshot systems where the snapshots have the same device:inode number as the original files (such as happens with GPFS snapshots)\&. If you don\*(Aqt set this option then the \*(Aqrestore\*(Aq button in the shadow copy UI will fail with a sharing violation\&.
+.sp
+Default: shadow:fixinodes = no
+.RE
+.PP
+shadow:snapdirseverywhere = yes/no
+.RS 4
+If you enable
+shadow:snapdirseverywhere
+then this module will look out for snapshot directories in the current working directory and all parent directories, stopping at the mount point by default\&. But see
+shadow:crossmountpoints
+how to change that behaviour\&.
+.sp
+An example where this is needed are independent filesets in IBM\*(Aqs GPFS, but other filesystems might support snapshotting only particular subtrees of the filesystem as well\&.
+.sp
+Note that
+shadow:snapdirseverywhere
+depends on
+shadow:snapdir
+and needs it to be a relative path\&. Setting an absolute snapdir path disables
+shadow:snapdirseverywhere\&.
+.sp
+Note that this option is incompatible with the
+shadow:basedir
+option and removes the
+shadow:basedir
+setting by itself\&.
+.sp
+Example: shadow:snapdirseverywhere = yes
+.sp
+Default: shadow:snapdirseverywhere = no
+.RE
+.PP
+shadow:crossmountpoints = yes/no
+.RS 4
+This option is effective in the case of
+shadow:snapdirseverywhere = yes\&. Setting this option makes the module not stop at the first mount point encountered when looking for snapdirs, but lets it search potentially all through the path instead\&.
+.sp
+An example where this is needed are independent filesets in IBM\*(Aqs GPFS, but other filesystems might support snapshotting only particular subtrees of the filesystem as well\&.
+.sp
+Note that
+shadow:crossmountpoints
+depends on
+shadow:snapdir
+and needs it to be a relative path\&. Setting an absolute snapdir path disables
+shadow:crossmountpoints\&.
+.sp
+Note that this option is incompatible with the
+shadow:basedir
+option and removes the
+shadow:basedir
+setting by itself\&.
+.sp
+Example: shadow:crossmountpoints = yes
+.sp
+Default: shadow:crossmountpoints = no
+.RE
+.PP
+shadow:snapprefix
+.RS 4
+With growing number of snapshots file\-systems need some mechanism to differentiate one set of snapshots from other, e\&.g\&. monthly, weekly, manual, special events, etc\&. Therefore these file\-systems provide different ways to tag snapshots, e\&.g\&. provide a configurable way to name snapshots, which is not just based on time\&. With only
+shadow:format
+it is very difficult to filter these snapshots\&. With this optional parameter, one can specify a variable prefix component for names of the snapshot directories in the file\-system\&. If this parameter is set, together with the
+shadow:format
+and
+shadow:delimiter
+parameters it determines the possible names of snapshot directories in the file\-system\&. The option only supports Basic Regular Expression (BRE)\&.
+.RE
+.PP
+shadow:delimiter
+.RS 4
+This optional parameter is used as a delimiter between
+shadow:snapprefix
+and
+shadow:format\&. This parameter is used only when
+shadow:snapprefix
+is set\&.
+.sp
+Default: shadow:delimiter = "_GMT"
+.RE
+.SH "EXAMPLES"
+.PP
+Add shadow copy support to user home directories:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[homes]\fR
+	\m[blue]\fBvfs objects = shadow_copy2\fR\m[]
+	\m[blue]\fBshadow:snapdir = /data/snapshots\fR\m[]
+	\m[blue]\fBshadow:basedir = /data/home\fR\m[]
+	\m[blue]\fBshadow:sort = desc\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "CAVEATS"
+.PP
+This is not a backup, archival, or version control solution\&.
+.PP
+With Samba or Windows servers,
+vfs_shadow_copy2
+is designed to be an end\-user tool only\&. It does not replace or enhance your backup and archival solutions and should in no way be considered as such\&. Additionally, if you need version control, implement a version control system\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_shell_snap.8 b/docs/manpages/vfs_shell_snap.8
new file mode 100644
index 0000000000..0ed2c787e2
--- /dev/null
+++ b/docs/manpages/vfs_shell_snap.8
@@ -0,0 +1,221 @@
+'\" t
+.\"     Title: vfs_shell_snap
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_SHELL_SNAP" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_shell_snap \- Shell script callouts for snapshot creation and deletion
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = shell_snap
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(8)
+suite\&.
+.PP
+The
+vfs_shell_snap
+VFS provides shell\-script callouts for snapshot creation and deletion operations issued by remote clients using the File Server Remote VSS Protocol (FSRVP)\&.
+.PP
+The following shell callouts may be configured in smb\&.conf:
+.PP
+\m[blue]\fBshell_snap:check path command\fR\m[]
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Called when an FSRVP client wishes to check whether a given share supports snapshot create/delete requests\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The command is called with a single
+\fIshare_path\fR
+argument\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The command must return 0 if
+\fIshare_path\fR
+is capable of being snapshotted\&.
+.RE
+.sp
+.RE
+.PP
+\m[blue]\fBshell_snap:create command\fR\m[]
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Called when an FSRVP client wishes to create a snapshot\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The command is called with a single
+\fIshare_path\fR
+argument\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The command must return 0 status if the snapshot was successfully taken\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The command must output the path of the newly created snapshot to stdout\&.
+.RE
+.sp
+.RE
+.PP
+\m[blue]\fBshell_snap:delete command\fR\m[]
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+Called when an FSRVP client wishes to delete a snapshot\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The command is called with
+\fIbase_share_path\fR
+and
+\fIsnapshot_share_path\fR
+arguments\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+The command must return 0 status if the snapshot was successfully removed\&.
+.RE
+.sp
+.RE
+All commands are executed as the authenticated FSRVP client user\&.
+.PP
+This module is stackable\&.
+.SH "CONFIGURATION"
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[share]\fR
+		\m[blue]\fBvfs objects = shell_snap\fR\m[]
+		\m[blue]\fBshell_snap:check path command = snap_check_path\&.sh\fR\m[]
+		\m[blue]\fBshell_snap:create command = snap_create\&.sh\fR\m[]
+		\m[blue]\fBshell_snap:delete command = snap_delete\&.sh\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Samba\*(Aqs FSRVP server must be configured in the [global] section:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[global]\fR
+		\m[blue]\fBrpc_daemon:fssd = fork\fR\m[]
+		\m[blue]\fBregistry shares = yes\fR\m[]
+		\m[blue]\fBinclude = registry\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_snapper.8 b/docs/manpages/vfs_snapper.8
new file mode 100644
index 0000000000..551bff82fa
--- /dev/null
+++ b/docs/manpages/vfs_snapper.8
@@ -0,0 +1,91 @@
+'\" t
+.\"     Title: vfs_snapper
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_SNAPPER" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_snapper \- Expose snapshots managed by snapper as shadow\-copies
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = snapper
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(8)
+suite\&.
+.PP
+The
+vfs_snapper
+VFS module exposes snapshots managed by snapper for use by Samba\&. This provides the ability for remote SMB clients to access shadow\-copies via Windows Explorer using the "previous versions" dialog\&.
+.PP
+Snapshots can also be created and remove remotely, using the File Server Remote VSS Protocol (FSRVP)\&. Snapshot creation and deletion requests are forwarded to snapper via DBus\&.
+.PP
+This module is stackable\&.
+.SH "CONFIGURATION"
+.PP
+The underlying share path must have a corresponding snapper configuration file\&. The snapshot directory tree must allow access for relevant users\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[share]\fR
+		\m[blue]\fBvfs objects = snapper\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+For remote snapshot creation and deletion, Samba\*(Aqs FSRVP server must be configured in the [global] section:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[global]\fR
+		\m[blue]\fBrpc_daemon:fssd = fork\fR\m[]
+		\m[blue]\fBregistry shares = yes\fR\m[]
+		\m[blue]\fBinclude = registry\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.SH "PERMISSIONS"
+.PP
+Snapper stores snapshots under a \&.snapshots subdirectory\&. This directory must permit traversal for any users wishing to access snapshots via the Windows Explorer previous versions dialog\&. By default, traversal is forbidden for all non\-root users\&. Additionally, users must be granted permission to list snapshots managed by snapper, via snapper\*(Aqs ALLOW_USERS or ALLOW_GROUPS options\&. Snapper can grant these users and groups \&.snapshots traversal access automatically via the SYNC_ACL option\&.
+.PP
+Remote snapshot creation and deletion is only permitted by Samba for Active Directory administrators, backup operators, or users explicitly granted SeBackupPrivilege\&. Snapper must also permit creation and deletion for the appropriate user, via snapper\*(Aqs ALLOW_USERS or ALLOW_GROUPS options\&.
+.PP
+The DiskShadow\&.exe FSRVP client initially authenticates as the Active Directory computer account\&. This account must therefore be granted the same permissions as the user account issuing the snapshot creation and deletion requests\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_streams_depot.8 b/docs/manpages/vfs_streams_depot.8
new file mode 100644
index 0000000000..0d777b581a
--- /dev/null
+++ b/docs/manpages/vfs_streams_depot.8
@@ -0,0 +1,98 @@
+'\" t
+.\"     Title: vfs_streams_depot
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_STREAMS_DEPOT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_streams_depot \- EXPERIMENTAL module to store alternate data streams in a central directory\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = streams_depot
+.SH "DESCRIPTION"
+.PP
+This
+\fIEXPERIMENTAL\fR
+VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_streams_depot
+enables storing of NTFS alternate data streams in the file system\&. As a normal posix file system does not support the concept of multiple data streams per file, the streams_depot module stores the data in files in a separate directory\&.
+.SH "OPTIONS"
+.PP
+streams_depot:directory = PATH
+.RS 4
+Path of the directory where the alternate data streams should be stored\&. Defaults to the sharepath/\&.streams\&.
+.RE
+.PP
+streams_depot:delete_lost = [ yes | no ]
+.RS 4
+In the case of an already existing data streams directory for a newly created file the streams directory will be renamed to "lost\-%lu", random()\&. With this option lost stream directories will be removed instead of renamed\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no(default)
+\- rename lost streams to "lost\-%lu", random()\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+\- remove lost streams\&.
+.RE
+.sp
+.RE
+.RE
+.SH "EXAMPLES"
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[share]\fR
+	\m[blue]\fBvfs objects = streams_depot\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_streams_xattr.8 b/docs/manpages/vfs_streams_xattr.8
new file mode 100644
index 0000000000..260658fd17
--- /dev/null
+++ b/docs/manpages/vfs_streams_xattr.8
@@ -0,0 +1,76 @@
+'\" t
+.\"     Title: vfs_streams_xattr
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_STREAMS_XATTR" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_streams_xattr \- Store alternate data streams in posix xattrs
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = streams_xattr
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_streams_xattr
+enables storing of NTFS alternate data streams in the file system\&. As a normal posix file system does not support the concept of multiple data streams per file, the streams_xattr module stores the data in posix extended attributes (xattrs)\&. The name of these attributes by default is user\&.DosStream\&."ADS\-NAME"\&. The prefix "user\&.DosStream\&." can be changed with the module option
+streams_xattr:prefix, but be aware that this will also expose those ADS over the SMB extended attributes interface\&.
+.PP
+The file system that is shared with this module enabled must support xattrs\&.
+.PP
+Please note that most file systems have severe limitations on the size of xattrs\&. So this module might work for applications like IE that stores small zone information in streams but will fail for applications that store serious amounts of data in ADSs\&.
+.SH "OPTIONS"
+.PP
+streams_xattr:prefix = STRING
+.RS 4
+Name prefix used when storing an ADS in an xattr, defaults to
+user\&.DosStream\&.\&. Changing this will also expose ADS over the SMB extended attributes interface\&.
+.RE
+.PP
+streams_xattr:store_stream_type = [yes|no]
+.RS 4
+Whether the xattr names for Alternate Data Streams of type "$DATA" are suffixed by the stream type string ":$DATA"\&. The default is
+yes\&.
+.RE
+.SH "EXAMPLES"
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[share]\fR
+	\m[blue]\fBvfs objects = streams_xattr\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_syncops.8 b/docs/manpages/vfs_syncops.8
new file mode 100644
index 0000000000..b3e2ef2471
--- /dev/null
+++ b/docs/manpages/vfs_syncops.8
@@ -0,0 +1,82 @@
+'\" t
+.\"     Title: vfs_syncops
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_SYNCOPS" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_syncops \- Ensure meta data operations are performed synchronously\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = syncops
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+Some filesystems (even some journaled filesystems) require that a fsync() be performed on many meta data operations to ensure that the operation is guaranteed to remain in the filesystem after a power failure\&. This is particularly important for some cluster filesystems which are participating in a node failover system with clustered Samba\&. On those filesystems the
+vfs_syncops
+VFS module provides a way to perform those operations safely\&.
+.PP
+This module is stackable\&.
+.SH "CONFIGURATION"
+.PP
+Most of the performance loss with the
+vfs_syncops
+VFS module is in fsync on close()\&. You can disable that with
+syncops:onclose = no
+that can be set either globally or per share\&.
+.PP
+On certain filesystems that only require the last data written to be fsync()\*(Aqed, you can disable the metadata synchronization of this module with
+syncops:onmeta = no\&. This option can be set either globally or per share\&.
+.PP
+The
+vfs_syncops
+VFS module can also be disabled completely for a share with
+syncops:disable = true\&.
+.SH "EXAMPLES"
+.PP
+Add syncops functionality for [share]:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[share]\fR
+	\m[blue]\fBpath = /data/share\fR\m[]
+	\m[blue]\fBvfs objects = syncops\fR\m[]
+	\m[blue]\fBsyncops:onclose = no\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_time_audit.8 b/docs/manpages/vfs_time_audit.8
new file mode 100644
index 0000000000..6ce0307d54
--- /dev/null
+++ b/docs/manpages/vfs_time_audit.8
@@ -0,0 +1,80 @@
+'\" t
+.\"     Title: vfs_time_audit
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_TIME_AUDIT" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_time_audit \- samba vfs module to log slow VFS operations
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = time_audit
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+time_audit
+VFS module logs system calls that take longer than the number of milliseconds defined by the variable
+time_audit:timeout\&. It will log the calls and the time spent in it\&.
+.PP
+It\*(Aqs kind of comparable with
+strace \-T
+and is helpful to reveal performance problems with the underlying file and storage subsystems\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+time_audit:timeout = number of milliseconds
+.RS 4
+VFS calls that take longer than the defined number of milliseconds that should be logged\&. The default is 10000 (10s)\&.
+.RE
+.SH "EXAMPLES"
+.PP
+This would log VFS calls that take longer than 3 seconds:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[sample_share]\fR
+	\m[blue]\fBpath = /test/sample_share\fR\m[]
+	\m[blue]\fBvfs objects = time_audit\fR\m[]
+	\m[blue]\fBtime_audit:timeout = 3000\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The time_audit VFS module was created with contributions from Abhidnya Chirmule\&.
diff --git a/docs/manpages/vfs_tsmsm.8 b/docs/manpages/vfs_tsmsm.8
new file mode 100644
index 0000000000..5d9fcf681c
--- /dev/null
+++ b/docs/manpages/vfs_tsmsm.8
@@ -0,0 +1,89 @@
+'\" t
+.\"     Title: vfs_tsmsm
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_TSMSM" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_tsmsm \- VFS module for handling offline files with Tivoli Storage Manager Space Management
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = tsmsm
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+tsmsm
+VFS module is an extension for handling offline files with Tivoli Storage Manager Space Management\&.
+.PP
+It tries to avoid calling expensive DMAPI calls with some heuristics based on the fact that number of blocks reported of a file multiplied by 512 will be bigger than \*(Aqonline ratio\*(Aq of actual size for online (non\-migrated) files\&. If heuristic check fails, the module calls DMAPI and asks for a specific attribute which is present for offline (migrated) files\&. If this attribute presents, the file is considered offline\&.
+.PP
+This module is not stackable\&.
+.SH "OPTIONS"
+.PP
+tsmsm:hsm script = [ path to hsm script ]
+.RS 4
+hsm script should point to a shell script which accepts two arguments: operation and filepath\&. the tsmsm module only uses "offline" for operation to set the file under filepath offline\&.
+.RE
+.PP
+tsmsm:online ratio = [ number ]
+.RS 4
+Ratio to check reported size against actual file size\&. The default value is 0\&.5\&.
+.RE
+.PP
+tsmsm:dmapi attribute = [ attribute\-name ]
+.RS 4
+Name of a DMAPI attribute that is present when a file is offline\&. The default is "IBMobj" (which is what GPFS uses)\&.
+.RE
+.PP
+tsmsm:dmapi value = [ value for the DMAPI attribute ]
+.RS 4
+Value that the DMAPI attribute should have for the file to be considered offline\&. The default is empty (no value required)\&.
+.RE
+.SH "EXAMPLES"
+.PP
+A GPFS mount with TSM support can be exported via Samba as follows:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[gpfs_tsm_share]\fR
+	\m[blue]\fBvfs objects = tsmsm gpfs\fR\m[]
+	\m[blue]\fBpath = /test/gpfs_mount\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_unityed_media.8 b/docs/manpages/vfs_unityed_media.8
new file mode 100644
index 0000000000..c0b838d98d
--- /dev/null
+++ b/docs/manpages/vfs_unityed_media.8
@@ -0,0 +1,117 @@
+'\" t
+.\"     Title: vfs_unityed_media
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_UNITYED_MEDIA" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_unityed_media \- Allow multiple Avid clients to share a network drive\&.
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = unityed_media
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+Unityed Media is related with Media Harmony VFS, the main difference between Unityed Media and Media Harmony is that Unityed Media doesn\*(Aqt need manual refreshing of media directories\&. Unityed Media handles your media files in a similar way to the way Unity, ISIS, EditShare or another dedicated solution does\&. Without client\-side application and on hardware of your choice\&.
+.PP
+This module is stackable\&.
+.SH "CONFIGURATION"
+.PP
+If Mac and Windows Avid clients will be accessing the same folder, they should be given separate share definitions, with hidden Mac files vetoed on the Windows share\&. See EXAMPLES\&.
+.SH "OPTIONS"
+.PP
+unityed_media:clientid = user | hostname | ip
+.RS 4
+Controls what client related identifier is appended to user specific paths:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+user (default)
+\- use the username\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+hostname
+\- use the hostname\&. Note this will not work with OS X clients as these always send a generic string ("workstation") to the server\&.\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ip
+\- use the client\*(Aqs IP address\&. NOTE: this is untested and may not work at all\&.
+.RE
+.sp
+.RE
+.RE
+.SH "EXAMPLES"
+.PP
+Enable unityed_media for Mac and Windows clients:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[avid_mac]\fR
+	\m[blue]\fBpath = /avid\fR\m[]
+	\m[blue]\fBvfs objects = unityed_media\fR\m[]
+        \fI[avid_win]\fR
+	\m[blue]\fBpath = /avid\fR\m[]
+	\m[blue]\fBvfs objects = unityed_media\fR\m[]
+	\m[blue]\fBveto files = /\&.DS_Store/\&._@/\&.Trash@/\&.Spotlight@/\&.hidden/\&.hotfiles@/\&.vol/\fR\m[]
+	\m[blue]\fBdelete veto files = yes\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_virusfilter.8 b/docs/manpages/vfs_virusfilter.8
new file mode 100644
index 0000000000..81a436a8fd
--- /dev/null
+++ b/docs/manpages/vfs_virusfilter.8
@@ -0,0 +1,319 @@
+'\" t
+.\"     Title: vfs_virusfilter
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.8
+.\"  Language: English
+.\"
+.TH "VFS_VIRUSFILTER" "8" "09/20/2021" "Samba 4\&.8" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_virusfilter \- On access virus scanner
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = virusfilter
+.SH "DESCRIPTION"
+.PP
+This is a set of various Samba VFS modules to scan and filter virus files on Samba file services with an anti\-virus scanner\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+virusfilter:scanner
+.RS 4
+The antivirus scan\-engine\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIsophos\fR, the Sophos AV scanner
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIfsav\fR, the F\-Secure AV scanner
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fIclamav\fR, the ClamAV scanner
+.RE
+.sp
+.RE
+.RE
+.PP
+virusfilter:socket path = PATH
+.RS 4
+Path of local socket for the virus scanner\&.
+.sp
+If this option is not set, the default path depends on the configured AV scanning engine\&.
+.sp
+For the
+\fIsophos\fRbackend the default is
+\fI/var/run/savdi/sssp\&.sock\fR\&.
+.sp
+For the
+\fIfsav\fR
+backend the default is
+\fI/tmp/\&.fsav\-0\fR\&.
+.sp
+For the
+\fIclamav\fR
+backend the default is
+\fI/var/run/clamav/clamd\&.ctl\fR\&.
+.RE
+.PP
+virusfilter:connect timeout = 30000
+.RS 4
+Controls how long to wait on connecting to the virus scanning process before timing out\&. Value is in milliseconds\&.
+.sp
+If this option is not set, the default is 30000\&.
+.RE
+.PP
+virusfilter:io timeout = 60000
+.RS 4
+Controls how long to wait on communications with the virus scanning process before timing out\&. Value is in milliseconds\&.
+.sp
+If this option is not set, the default is 60000\&.
+.RE
+.PP
+virusfilter:scan on open = yes
+.RS 4
+This option controls whether files are scanned on open\&.
+.sp
+If this option is not set, the default is yes\&.
+.RE
+.PP
+virusfilter:scan on close = no
+.RS 4
+This option controls whether files are scanned on close\&.
+.sp
+If this option is not set, the default is no\&.
+.RE
+.PP
+virusfilter:max file size = 100000000
+.RS 4
+This is the largest sized file, in bytes, which will be scanned\&.
+.sp
+If this option is not set, the default is 100MB\&.
+.RE
+.PP
+virusfilter:min file size = 10
+.RS 4
+This is the smallest sized file, in bytes, which will be scanned\&.
+.sp
+If this option is not set, the default is 10\&.
+.RE
+.PP
+virusfilter:infected file action = nothing
+.RS 4
+What to do with an infected file\&. The options are nothing, quarantine, rename, delete\&.
+.sp
+If this option is not set, the default is nothing\&.
+.RE
+.PP
+virusfilter:infected file errno on open = EACCES
+.RS 4
+What errno to return on open if the file is infected\&.
+.sp
+If this option is not set, the default is EACCES\&.
+.RE
+.PP
+virusfilter:infected file errno on close = 0
+.RS 4
+What errno to return on close if the file is infected\&.
+.sp
+If this option is not set, the default is 0\&.
+.RE
+.PP
+virusfilter:quarantine directory = PATH
+.RS 4
+Where to move infected files\&. This path must be an absolute path\&.
+.sp
+If this option is not set, the default is "\&.quarantine" relative to the share path\&.
+.RE
+.PP
+virusfilter:quarantine prefix = virusfilter\&.
+.RS 4
+Prefix for quarantined files\&.
+.sp
+If this option is not set, the default is "virusfilter\&."\&.
+.RE
+.PP
+virusfilter:quarantine suffix = \&.infected
+.RS 4
+Suffix for quarantined files\&. This option is only used if keep name is true\&. Otherwise it is ignored\&.
+.sp
+If this option is not set, the default is "\&.infected"\&.
+.RE
+.PP
+virusfilter:rename prefix = virusfilter\&.
+.RS 4
+Prefix for infected files\&.
+.sp
+If this option is not set, the default is "virusfilter\&."\&.
+.RE
+.PP
+virusfilter:rename suffix = \&.infected
+.RS 4
+Suffix for infected files\&.
+.sp
+If this option is not set, the default is "\&.infected"\&.
+.RE
+.PP
+virusfilter:quarantine keep tree = yes
+.RS 4
+If keep tree is set, the directory structure relative to the share is maintained in the quarantine directory\&.
+.sp
+If this option is not set, the default is yes\&.
+.RE
+.PP
+virusfilter:quarantine keep name = yes
+.RS 4
+Should the file name be left unmodified other than adding a suffix and/or prefix and a random suffix name as defined in virusfilter:rename prefix and virusfilter:rename suffix\&.
+.sp
+If this option is not set, the default is yes\&.
+.RE
+.PP
+virusfilter:infected file command = @SAMBA_DATADIR@/bin/virusfilter\-notify \-\-mail\-to virusmaster@example\&.com \-\-cc "%U@example\&.com" \-\-from samba@example\&.com \-\-subject\-prefix "Samba: Infected File: "
+.RS 4
+External command to run on an infected file is found\&.
+.sp
+If this option is not set, the default is none\&.
+.RE
+.PP
+virusfilter:scan archive = true
+.RS 4
+This defines whether or not to scan archives\&.
+.sp
+Sophos and F\-Secure support this and it defaults to false\&.
+.RE
+.PP
+virusfilter:max nested scan archive = 1
+.RS 4
+This defines the maximum depth to search nested archives\&.
+.sp
+The Sophos and F\-Secure support this and it defaults to 1\&.
+.RE
+.PP
+virusfilter:scan mime = true
+.RS 4
+This defines whether or not to scan mime files\&.
+.sp
+Only the
+\fIfsav\fRscanner supports this option and defaults to false\&.
+.RE
+.PP
+virusfilter:scan error command = @SAMBA_DATADIR@/bin/virusfilter\-notify \-\-mail\-to virusmaster@example\&.com \-\-from samba@example\&.com \-\-subject\-prefix "Samba: Scan Error: "
+.RS 4
+External command to run on scan error\&.
+.sp
+If this option is not set, the default is none\&.
+.RE
+.PP
+virusfilter:exclude files = empty
+.RS 4
+Files to exclude from scanning\&.
+.sp
+If this option is not set, the default is empty\&.
+.RE
+.PP
+virusfilter:block access on error = false
+.RS 4
+Controls whether or not access should be blocked on a scanning error\&.
+.sp
+If this option is not set, the default is false\&.
+.RE
+.PP
+virusfilter:scan error errno on open = EACCES
+.RS 4
+What errno to return on open if there is an error in scanning the file and block access on error is true\&.
+.sp
+If this option is not set, the default is EACCES\&.
+.RE
+.PP
+virusfilter:scan error errno on close = 0
+.RS 4
+What errno to return on close if there is an error in scanning the file and block access on error is true\&.
+.sp
+If this option is not set, the default is 0\&.
+.RE
+.PP
+virusfilter:cache entry limit = 100
+.RS 4
+The maximum number of entries in the scanning results cache\&. Due to how Samba\*(Aqs memcache works, this is approximate\&.
+.sp
+If this option is not set, the default is 100\&.
+.RE
+.PP
+virusfilter:cache time limit = 10
+.RS 4
+The maximum number of seconds that a scanning result will stay in the results cache\&. \-1 disables the limit\&. 0 disables caching\&.
+.sp
+If this option is not set, the default is 10\&.
+.RE
+.PP
+virusfilter:quarantine directory mode = 0755
+.RS 4
+This is the octet mode for the quarantine directory and its sub\-directories as they are created\&.
+.sp
+If this option is not set, the default is 0755 or S_IRUSR | S_IWUSR | S_IXUSR | S_IRGRP | S_IXGRP | S_IROTH | S_IXOTH\&.
+.sp
+Permissions must be such that all users can read and search\&. I\&.E\&. don\*(Aqt mess with this unless you really know what you are doing\&.
+.RE
+.PP
+virusfilter:block suspected file = false
+.RS 4
+With this option on, suspected malware will be blocked as well\&. Only the
+\fIfsav\fRscanner supports this option\&.
+.sp
+If this option is not set, the default is false\&.
+.RE
+.SH "NOTES"
+.PP
+This module can scan other than default streams, if the alternative datastreams are each backed as separate files, such as with the vfs module streams_depot\&.
+.PP
+For proper operation the streams support module must be before the virusfilter module in your vfs objects list (i\&.e\&. streams_depot must be called before virusfilter module)\&.
+.PP
+This module is intended for security in depth by providing virus scanning capability on the server\&. It is not intended to be used in lieu of proper client based security\&. Other modules for security may exist and may be desirable for security in depth on the server\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_widelinks.8 b/docs/manpages/vfs_widelinks.8
new file mode 100644
index 0000000000..3d8e2ad634
--- /dev/null
+++ b/docs/manpages/vfs_widelinks.8
@@ -0,0 +1,59 @@
+'\" t
+.\"     Title: vfs_widelinks
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_WIDELINKS" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_widelinks \- make a Samba share ignore filesystem symbolic links inside a share
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = widelinks
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_widelinks
+VFS module hides the existence of symbolic links in the filesystem inside a share\&. It is used in Samba verson 4\&.13 and above to implement the
+smb\&.conf"wide links = yes" functionality that used to be inside the core smbd code\&. The module should not be loaded explicitly by smb\&.conf as part of the "vfs objects =" parameter, but is loaded implicitly when "wide links = yes" is enabled\&. This is to prevent existing smb\&.conf files from having to be modified to keep the existing insecure "wide links" functionality on a share\&.
+.PP
+Please note that "wide links = yes" functionality is a deliberately insecure option, and should never be used in Samba installations\&. On Linux, bind mounts can be used instead to implement anything "wide links = yes" can enable\&. This module has been created to provide backwards compatibility with existing users of "wide links = yes" installations, but this use cannot be recommended and is not endorsed by the Samba developers\&.
+.PP
+Note that this implicit loading may become explicit in a later Samba release, and administrators wishing to keep the insecure "wide links" functionality may have to add this module into their "vfs objects =" module list\&. The Samba project release notes and this manpage will be updated to reflect this when this change is made\&.
+.PP
+This module is stackable\&.
+.SH "EXAMPLES"
+.PP
+No examples listed\&. This module is implicitly loaded by smbd as needed\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_worm.8 b/docs/manpages/vfs_worm.8
new file mode 100644
index 0000000000..bd31aab768
--- /dev/null
+++ b/docs/manpages/vfs_worm.8
@@ -0,0 +1,74 @@
+'\" t
+.\"     Title: vfs_worm
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_WORM" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_worm \- disallows writes for older file
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = worm
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_worm
+module controls the writability of files and folders depending on their change time and a adjustable grace period\&.
+.PP
+If the change time of a file or directory is older than the specified grace period, the write access will be denied, independent of further access controls (e\&.g\&. by the filesystem)\&.
+.PP
+In the case that the grace period is not exceed, the worm module will not impact any access controls\&.
+.SH "OPTIONS"
+.PP
+worm:grace_period = SECONDS
+.RS 4
+Period in seconds which defines the time how long the write access should be handled by the normal access controls\&. After this grace period the file or directory becomes read only\&.
+.RE
+.SH "EXAMPLES"
+.PP
+Deny the write access to files and folders, which are older than five minutes (300 seconds):
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+	\fI[wormshare]\fR
+	\m[blue]\fBvfs objects = worm\fR\m[]
+	\m[blue]\fBworm:grace_period = 300\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_xattr_tdb.8 b/docs/manpages/vfs_xattr_tdb.8
new file mode 100644
index 0000000000..7b211490ee
--- /dev/null
+++ b/docs/manpages/vfs_xattr_tdb.8
@@ -0,0 +1,56 @@
+'\" t
+.\"     Title: vfs_xattr_tdb
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_XATTR_TDB" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_xattr_tdb \- Save Extended Attributes (EAs) in a tdb file
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = xattr_tdb
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+vfs_xattr_tdb
+VFS module stores Extended Attributes (EAs) in a tdb file\&. This enables the usage of Extended Attributes on OS and filesystems which do not support Extended Attributes by themselves\&.
+.PP
+This module is stackable\&.
+.SH "OPTIONS"
+.PP
+xattr_tdb:file = PATH
+.RS 4
+Name of the tdb file the EAs are stored in\&. If this option is not set, the default filename
+xattr\&.tdb
+is used\&.
+.RE
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfs_zfsacl.8 b/docs/manpages/vfs_zfsacl.8
new file mode 100644
index 0000000000..ed7b8471ff
--- /dev/null
+++ b/docs/manpages/vfs_zfsacl.8
@@ -0,0 +1,316 @@
+'\" t
+.\"     Title: vfs_zfsacl
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFS_ZFSACL" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_zfsacl \- ZFS ACL samba module
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = zfsacl
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+zfsacl
+VFS module is the home for all ACL extensions that Samba requires for proper integration with ZFS\&.
+.PP
+Currently the zfsacl vfs module provides extensions in following areas :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+NFSv4 ACL Interfaces with configurable options for ZFS
+.RE
+.sp
+.RE
+.PP
+NOTE:This module follows the posix\-acl behaviour and hence allows permission stealing via chown\&. Samba might allow at a later point in time, to restrict the chown via this module as such restrictions are the responsibility of the underlying filesystem than of Samba\&.
+.PP
+This module makes use of the smb\&.conf parameter
+\m[blue]\fBacl map full control = acl map full control\fR\m[]
+When set to yes (the default), this parameter will add in the FILE_DELETE_CHILD bit on a returned ACE entry for a file (not a directory) that already contains all file permissions except for FILE_DELETE and FILE_DELETE_CHILD\&. This can prevent Windows applications that request GENERIC_ALL access from getting ACCESS_DENIED errors when running against a filesystem with NFSv4 compatible ACLs\&.
+.PP
+ZFS has mutiple dataset configuration parameters that determine ACL behavior\&. Although the nuances of these parameters are outside the scope of this manpage, the "aclmode" and "aclinherit" are of particular importance for samba shares\&. For datasets that are intended solely as Samba shares, "aclmode = restricted" and "aclinherit = passthrough" provide inheritance behavior most consistent with NTFS ACLs\&. A "restricted" aclmode prevents chmod() on files that have a non\-trivial ACL (one that cannot be expressed as a POSIX mode without loss of information)\&. Consult the relevant ZFS manpages for further information\&.
+.PP
+This module is stackable\&.
+.PP
+Since Samba 4\&.0 all options are per share options\&.
+.SH "OPTIONS"
+.PP
+nfs4:mode = [ simple | special ]
+.RS 4
+Controls substitution of special IDs (OWNER@ and GROUP@) on ZFS\&. The use of mode simple is recommended\&. In this mode only non inheriting ACL entries for the file owner and group are mapped to special IDs\&.
+.sp
+The following MODEs are understood by the module:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+simple(default)
+\- use OWNER@ and GROUP@ special IDs for non inheriting ACEs only\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+special(deprecated)
+\- use OWNER@ and GROUP@ special IDs in ACEs for all file owner and group ACEs\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+nfs4:acedup = [dontcare|reject|ignore|merge]
+.RS 4
+This parameter configures how Samba handles duplicate ACEs encountered in ZFS ACLs\&. ZFS allows/creates duplicate ACE for different bits for same ID\&.
+.sp
+Following is the behaviour of Samba for different values :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+dontcare (default)
+\- copy the ACEs as they come
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+reject (deprecated)
+\- stop operation and exit with error on ACL set op
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ignore (deprecated)
+\- don\*(Aqt include the second matching ACE
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+merge
+\- bitwise OR the 2 ace\&.flag fields and 2 ace\&.mask fields of the 2 duplicate ACEs into 1 ACE
+.RE
+.sp
+.RE
+.RE
+.PP
+nfs4:chown = [yes|no]
+.RS 4
+This parameter allows enabling or disabling the chown supported by the underlying filesystem\&. This parameter should be enabled with care as it might leave your system insecure\&.
+.sp
+Some filesystems allow chown as a) giving b) stealing\&. It is the latter that is considered a risk\&.
+.sp
+Following is the behaviour of Samba for different values :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+\- Enable chown if as supported by the under filesystem
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no (default)
+\- Disable chown
+.RE
+.sp
+.RE
+.RE
+.PP
+zfsacl:denymissingspecial = [yes|no]
+.RS 4
+Prevent users from setting an ACL that lacks NFSv4 special entries (owner@, group@, everyone@)\&. ZFS will automatically generate these these entries when calculating the inherited ACL of new files if the ACL of the parent directory lacks an inheriting special entry\&. This may result in user confusion and unexpected change in permissions of files and directories as the inherited ACL is generated\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no (default)
+.RE
+.sp
+.RE
+.RE
+.PP
+zfsacl:block_special = [yes|no]
+.RS 4
+Prevent ZFS from automatically adding NFSv4 special entries (owner@, group@, everyone@)\&. ZFS will automatically generate these these entries when calculating the inherited ACL of new files if the ACL of the parent directory lacks an inheriting special entry\&. This may result in user confusion and unexpected change in permissions of files and directories as the inherited ACL is generated\&. Blocking this behavior is achieved by setting an inheriting everyone@ that grants no permissions and not adding the entry to the file\*(Aqs Security Descriptor
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes (default)
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no
+.RE
+.sp
+.RE
+.RE
+.PP
+zfsacl:map_dacl_protected = [yes|no]
+.RS 4
+If enabled and the ZFS ACL on the underlying filesystem does not contain any inherited access control entires, then set the SEC_DESC_DACL_PROTECTED flag on the Security Descriptor returned to SMB clients\&. This ensures correct Windows client behavior when disabling inheritance on directories\&.
+.sp
+Following is the behaviour of Samba for different values :
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+yes
+\- Enable mapping to SEC_DESC_DACL_PROTECTED
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+no (default)
+.RE
+.sp
+.RE
+.RE
+.SH "EXAMPLES"
+.PP
+A ZFS mount can be exported via Samba as follows :
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+        \fI[samba_zfs_share]\fR
+	\m[blue]\fBvfs objects = zfsacl\fR\m[]
+	\m[blue]\fBpath = /test/zfs_mount\fR\m[]
+	\m[blue]\fBnfs4: mode = simple\fR\m[]
+	\m[blue]\fBnfs4: acedup = merge\fR\m[]
+.fi
+.if n \{\
+.RE
+.\}
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff --git a/docs/manpages/vfstest.1 b/docs/manpages/vfstest.1
new file mode 100644
index 0000000000..ab35fd8d1f
--- /dev/null
+++ b/docs/manpages/vfstest.1
@@ -0,0 +1,805 @@
+'\" t
+.\"     Title: vfstest
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "VFSTEST" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfstest \- tool for testing samba VFS modules
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfstest [\-?|\-\-help] [\-\-usage] [\-f|\-\-file=STRING] [\-c|\-\-command=STRING] [\-m|\-\-memreport=INT] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-V|\-\-version]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+vfstest
+is a small command line utility that has the ability to test dso samba VFS modules\&. It gives the user the ability to call the various VFS functions manually and supports cascaded VFS modules\&.
+.SH "OPTIONS"
+.PP
+\-c|\-\-command=command
+.RS 4
+Execute the specified (\fBsemicolon\fR\-separated) commands\&. See below for the commands that are available\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.SH "COMMANDS"
+.PP
+\fIVFS COMMANDS\fR
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+load <module\&.so>
+\- Load specified VFS module
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+populate <char> <size>
+\- Populate a data buffer with the specified data
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+showdata [<offset> <len>]
+\- Show data currently in data buffer
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+connect
+\- VFS connect()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+disconnect
+\- VFS disconnect()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+disk_free
+\- VFS disk_free()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+opendir
+\- VFS opendir()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+readdir
+\- VFS readdir()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+mkdir
+\- VFS mkdir()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+rmdir
+\- VFS rmdir()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+closedir
+\- VFS closedir()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+open
+\- VFS open()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+close
+\- VFS close()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+read
+\- VFS read()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+write
+\- VFS write()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+lseek
+\- VFS lseek()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+rename
+\- VFS rename()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+fsync
+\- VFS fsync()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+stat
+\- VFS stat()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+fstat
+\- VFS fstat()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+lstat
+\- VFS lstat()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+unlink
+\- VFS unlink()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+chmod
+\- VFS chmod()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+fchmod
+\- VFS fchmod()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+chown
+\- VFS chown()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+fchown
+\- VFS fchown()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+chdir
+\- VFS chdir()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+getwd
+\- VFS getwd()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+utime
+\- VFS utime()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+ftruncate
+\- VFS ftruncate()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+lock
+\- VFS lock()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+symlink
+\- VFS symlink()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+readlink
+\- VFS readlink()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+link
+\- VFS link()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+mknod
+\- VFS mknod()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+realpath
+\- VFS realpath()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+getxattr
+\- VFS getxattr()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+listxattr
+\- VFS listxattr()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+setxattr
+\- VFS setxattr()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+removexattr
+\- VFS removexattr()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+fget_nt_acl
+\- VFS fget_nt_acl()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+get_nt_acl
+\- VFS get_nt_acl()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+fset_nt_acl
+\- VFS fset_nt_acl()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+set_nt_acl
+\- VFS open() and fset_nt_acl()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+sys_acl_get_file
+\- VFS sys_acl_get_file()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+sys_acl_get_fd
+\- VFS sys_acl_get_fd()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+sys_acl_blob_get_file
+\- VFS sys_acl_blob_get_file()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+sys_acl_blob_get_fd
+\- VFS sys_acl_blob_get_fd()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+sys_acl_delete_def_file
+\- VFS sys_acl_delete_def_file()
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+test_chain
+\- test chain code
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+translate_name
+\- VFS translate_name()
+.RE
+.sp
+.RE
+.PP
+\fIGENERAL COMMANDS\fR
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+conf <smb\&.conf>
+\- Load a different configuration file
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+help [<command>]
+\- Get list of commands or info about specified command
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+debuglevel <level>
+\- Set debug level
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+freemem
+\- Free memory currently in use
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+exit
+\- Exit vfstest
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The vfstest man page was written by Jelmer Vernooij\&. Updated version by Guenter Kukkukk\&.
diff --git a/docs/manpages/wbinfo.1 b/docs/manpages/wbinfo.1
new file mode 100644
index 0000000000..183c50490c
--- /dev/null
+++ b/docs/manpages/wbinfo.1
@@ -0,0 +1,490 @@
+'\" t
+.\"     Title: wbinfo
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "WBINFO" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+wbinfo \- Query information from winbind daemon
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+wbinfo [\-a\ user%password] [\-\-all\-domains] [\-\-allocate\-gid] [\-\-allocate\-uid] [\-c] [\-\-ccache\-save] [\-\-change\-user\-password] [\-D\ domain] [\-\-dc\-info\ domain] [\-\-domain\ domain] [\-\-dsgetdcname\ domain] [\-g] [\-\-getdcname\ domain] [\-\-get\-auth\-user] [\-G\ gid] [\-\-gid\-info\ gid] [\-\-group\-info\ group] [\-\-help|\-?] [\-i\ user] [\-I\ ip] [\-K\ user%password] [\-\-krb5ccname\ cctype] [\-\-lanman] [\-\-logoff] [\-\-logoff\-uid\ uid] [\-\-logoff\-user\ username] [\-\-lookup\-sids] [\-m] [\-n\ name] [\-N\ netbios\-name] [\-\-ntlmv1] [\-\-ntlmv2] [\-\-online\-status] [\-\-own\-domain] [\-p] [\-P|\-\-ping\-dc] [\-\-pam\-logon\ user%password] [\-r\ user] [\-R|\-\-lookup\-rids] [\-\-remove\-gid\-mapping\ gid,sid] [\-\-remove\-uid\-mapping\ uid,sid] [\-s\ sid] [\-\-separator] [\-\-sequence] [\-\-set\-auth\-user\ user%password] [\-\-set\-gid\-mapping\ gid,sid] [\-\-set\-uid\-mapping\ uid,sid] [\-S\ sid] [\-\-sid\-aliases\ sid] [\-\-sid\-to\-fullname\ sid] [\-\-sids\-to\-unix\-ids\ sidlist] [\-t] [\-u] [\-\-uid\-info\ uid] [\-\-usage] [\-\-user\-domgroups\ sid] [\-\-user\-sidinfo\ sid] [\-\-user\-sids\ sid] [\-U\ uid] [\-V] [\-\-verbose] [\-Y\ sid]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+wbinfo
+program queries and returns information created and used by the
+\fBwinbindd\fR(8)
+daemon\&.
+.PP
+The
+\fBwinbindd\fR(8)
+daemon must be configured and running for the
+wbinfo
+program to be able to return information\&.
+.SH "OPTIONS"
+.PP
+\-a|\-\-authenticate \fIusername%password\fR
+.RS 4
+Attempt to authenticate a user via
+\fBwinbindd\fR(8)\&. This checks both authentication methods and reports its results\&.
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+Do not be tempted to use this functionality for authentication in third\-party applications\&. Instead use
+\fBntlm_auth\fR(1)\&.
+.sp .5v
+.RE
+.RE
+.PP
+\-\-allocate\-gid
+.RS 4
+Get a new GID out of idmap
+.RE
+.PP
+\-\-allocate\-uid
+.RS 4
+Get a new UID out of idmap
+.RE
+.PP
+\-\-all\-domains
+.RS 4
+List all domains (trusted and own domain)\&.
+.RE
+.PP
+\-c|\-\-change\-secret
+.RS 4
+Change the trust account password\&. May be used in conjunction with
+\fBdomain\fR
+in order to change interdomain trust account passwords\&.
+.RE
+.PP
+\-\-ccache\-save \fIusername%password\fR
+.RS 4
+Store user and password for ccache\&.
+.RE
+.PP
+\-\-change\-user\-password \fIusername\fR
+.RS 4
+Change the password of a user\&. The old and new password will be prompted\&.
+.RE
+.PP
+\-\-dc\-info \fIdomain\fR
+.RS 4
+Displays information about the current domain controller for a domain\&.
+.RE
+.PP
+\-\-domain \fIname\fR
+.RS 4
+This parameter sets the domain on which any specified operations will performed\&. If special domain name \*(Aq\&.\*(Aq is used to represent the current domain to which
+\fBwinbindd\fR(8)
+belongs\&. A \*(Aq*\*(Aq as the domain name means to enumerate over all domains (NOTE: This can take a long time and use a lot of memory)\&.
+.RE
+.PP
+\-D|\-\-domain\-info \fIdomain\fR
+.RS 4
+Show most of the info we have about the specified domain\&.
+.RE
+.PP
+\-\-dsgetdcname \fIdomain\fR
+.RS 4
+Find a DC for a domain\&.
+.RE
+.PP
+\-\-gid\-info \fIgid\fR
+.RS 4
+Get group info from gid\&.
+.RE
+.PP
+\-\-group\-info \fIgroup\fR
+.RS 4
+Get group info from group name\&.
+.RE
+.PP
+\-g|\-\-domain\-groups
+.RS 4
+This option will list all groups available in the Windows NT domain for which the
+\fBsamba\fR(7)
+daemon is operating in\&. Groups in all trusted domains can be listed with the \-\-domain=\*(Aq*\*(Aq option\&. Note that this operation does not assign group ids to any groups that have not already been seen by
+\fBwinbindd\fR(8)\&.
+.RE
+.PP
+\-\-get\-auth\-user
+.RS 4
+Print username and password used by
+\fBwinbindd\fR(8)
+during session setup to a domain controller\&. Username and password can be set using
+\fB\-\-set\-auth\-user\fR\&. Only available for root\&.
+.RE
+.PP
+\-\-getdcname \fIdomain\fR
+.RS 4
+Get the DC name for the specified domain\&.
+.RE
+.PP
+\-G|\-\-gid\-to\-sid \fIgid\fR
+.RS 4
+Try to convert a UNIX group id to a Windows NT SID\&. If the gid specified does not refer to one within the idmap gid range then the operation will fail\&.
+.RE
+.PP
+\-?
+.RS 4
+Print brief help overview\&.
+.RE
+.PP
+\-i|\-\-user\-info \fIuser\fR
+.RS 4
+Get user info\&.
+.RE
+.PP
+\-I|\-\-WINS\-by\-ip \fIip\fR
+.RS 4
+The
+\fI\-I\fR
+option queries
+\fBwinbindd\fR(8)
+to send a node status request to get the NetBIOS name associated with the IP address specified by the
+\fIip\fR
+parameter\&.
+.RE
+.PP
+\-K|\-\-krb5auth \fIusername%password\fR
+.RS 4
+Attempt to authenticate a user via Kerberos\&.
+.RE
+.PP
+\-\-krb5ccname \fIKRB5CCNAME\fR
+.RS 4
+Allows one to request a specific kerberos credential cache type used for authentication\&.
+.RE
+.PP
+\-\-lanman
+.RS 4
+Use lanman cryptography for user authentication\&.
+.RE
+.PP
+\-\-logoff
+.RS 4
+Logoff a user\&.
+.RE
+.PP
+\-\-logoff\-uid \fIUID\fR
+.RS 4
+Define user uid used during logoff request\&.
+.RE
+.PP
+\-\-logoff\-user \fIUSERNAME\fR
+.RS 4
+Define username used during logoff request\&.
+.RE
+.PP
+\-\-lookup\-sids \fISID1,SID2\&.\&.\&.\fR
+.RS 4
+Looks up SIDs\&. SIDs must be specified as ASCII strings in the traditional Microsoft format\&. For example, S\-1\-5\-21\-1455342024\-3071081365\-2475485837\-500\&.
+.RE
+.PP
+\-m|\-\-trusted\-domains
+.RS 4
+Produce a list of domains trusted by the Windows NT server
+\fBwinbindd\fR(8)
+contacts when resolving names\&. This list does not include the Windows NT domain the server is a Primary Domain Controller for\&.
+.RE
+.PP
+\-n|\-\-name\-to\-sid \fIname\fR
+.RS 4
+The
+\fI\-n\fR
+option queries
+\fBwinbindd\fR(8)
+for the SID associated with the name specified\&. Domain names can be specified before the user name by using the winbind separator character\&. For example CWDOM1/Administrator refers to the Administrator user in the domain CWDOM1\&. If no domain is specified then the domain used is the one specified in the
+\fBsmb.conf\fR(5)
+\fIworkgroup \fR
+parameter\&.
+.RE
+.PP
+\-N|\-\-WINS\-by\-name \fIname\fR
+.RS 4
+The
+\fI\-N\fR
+option queries
+\fBwinbindd\fR(8)
+to query the WINS server for the IP address associated with the NetBIOS name specified by the
+\fIname\fR
+parameter\&.
+.RE
+.PP
+\-\-ntlmv1
+.RS 4
+Use NTLMv1 cryptography for user authentication\&.
+.RE
+.PP
+\-\-ntlmv2
+.RS 4
+Use NTLMv2 cryptography for user authentication\&. NTLMv2 is the default method, this option is only maintained for compatibility\&.
+.RE
+.PP
+\-\-online\-status \fIdomain\fR
+.RS 4
+Display whether winbind currently maintains an active connection or not\&. An optional domain argument limits the output to the online status of a given domain\&.
+.RE
+.PP
+\-\-own\-domain
+.RS 4
+List own domain\&.
+.RE
+.PP
+\-\-pam\-logon \fIusername%password\fR
+.RS 4
+Attempt to authenticate a user in the same way pam_winbind would do\&.
+.RE
+.PP
+\-p|\-\-ping
+.RS 4
+Check whether
+\fBwinbindd\fR(8)
+is still alive\&. Prints out either \*(Aqsucceeded\*(Aq or \*(Aqfailed\*(Aq\&.
+.RE
+.PP
+\-P|\-\-ping\-dc
+.RS 4
+Issue a no\-effect command to our DC\&. This checks if our secure channel connection to our domain controller is still alive\&. It has much less impact than wbinfo \-t\&.
+.RE
+.PP
+\-r|\-\-user\-groups \fIusername\fR
+.RS 4
+Try to obtain the list of UNIX group ids to which the user belongs\&. This only works for users defined on a Domain Controller\&.
+.sp
+There are two scenaries:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 1.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  1." 4.2
+.\}
+User authenticated: When the user has been authenticated, the access token for the user is cached\&. The correct group memberships are then returned from the cached user token (which can be outdated)\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04' 2.\h'+01'\c
+.\}
+.el \{\
+.sp -1
+.IP "  2." 4.2
+.\}
+User *NOT* authenticated: The information is queries from the domain controller using the machine account credentials which have limited permissions\&. The result is normally incomplete and can be also incorrect\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+\-R|\-\-lookup\-rids \fIrid1, rid2, rid3\&.\&.\&.\fR
+.RS 4
+Converts RIDs to names\&. Uses a comma separated list of rids\&.
+.RE
+.PP
+\-\-remove\-gid\-mapping \fIGID,SID\fR
+.RS 4
+Removes an existing GID to SID mapping from the database\&.
+.RE
+.PP
+\-\-remove\-uid\-mapping \fIUID,SID\fR
+.RS 4
+Removes an existing UID to SID mapping from the database\&.
+.RE
+.PP
+\-s|\-\-sid\-to\-name \fIsid\fR
+.RS 4
+Use
+\fI\-s\fR
+to resolve a SID to a name\&. This is the inverse of the
+\fI\-n \fR
+option above\&. SIDs must be specified as ASCII strings in the traditional Microsoft format\&. For example, S\-1\-5\-21\-1455342024\-3071081365\-2475485837\-500\&.
+.RE
+.PP
+\-\-separator
+.RS 4
+Get the active winbind separator\&.
+.RE
+.PP
+\-\-sequence
+.RS 4
+This command has been deprecated\&. Please use the \-\-online\-status option instead\&.
+.RE
+.PP
+\-\-set\-auth\-user \fIusername%password\fR
+.RS 4
+Store username and password used by
+\fBwinbindd\fR(8)
+during session setup to a domain controller\&. This enables winbindd to operate in a Windows 2000 domain with Restrict Anonymous turned on (a\&.k\&.a\&. Permissions compatible with Windows 2000 servers only)\&.
+.RE
+.PP
+\-\-set\-gid\-mapping \fIGID,SID\fR
+.RS 4
+Create a GID to SID mapping in the database\&.
+.RE
+.PP
+\-\-set\-uid\-mapping \fIUID,SID\fR
+.RS 4
+Create a UID to SID mapping in the database\&.
+.RE
+.PP
+\-S|\-\-sid\-to\-uid \fIsid\fR
+.RS 4
+Convert a SID to a UNIX user id\&. If the SID does not correspond to a UNIX user mapped by
+\fBwinbindd\fR(8)
+then the operation will fail\&.
+.RE
+.PP
+\-\-sid\-aliases \fIsid\fR
+.RS 4
+Get SID aliases for a given SID\&.
+.RE
+.PP
+\-\-sid\-to\-fullname \fIsid\fR
+.RS 4
+Converts a SID to a full username (DOMAIN\eusername)\&.
+.RE
+.PP
+\-\-sids\-to\-unix\-ids \fIsid1,sid2,sid3\&.\&.\&.\fR
+.RS 4
+Resolve SIDs to Unix IDs\&. SIDs must be specified as ASCII strings in the traditional Microsoft format\&. For example, S\-1\-5\-21\-1455342024\-3071081365\-2475485837\-500\&.
+.RE
+.PP
+\-t|\-\-check\-secret
+.RS 4
+Verify that the workstation trust account created when the Samba server is added to the Windows NT domain is working\&. May be used in conjunction with
+\fBdomain\fR
+in order to verify interdomain trust accounts\&.
+.RE
+.PP
+\-u|\-\-domain\-users
+.RS 4
+This option will list all users available in the Windows NT domain for which the
+\fBwinbindd\fR(8)
+daemon is operating in\&. Users in all trusted domains can be listed with the \-\-domain=\*(Aq*\*(Aq option\&. Note that this operation does not assign user ids to any users that have not already been seen by
+\fBwinbindd\fR(8)
+\&.
+.RE
+.PP
+\-\-uid\-info \fIuid\fR
+.RS 4
+Get user info for the user connected to user id UID\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Print brief help overview\&.
+.RE
+.PP
+\-\-user\-domgroups \fIsid\fR
+.RS 4
+Get user domain groups\&.
+.RE
+.PP
+\-\-user\-sidinfo \fIsid\fR
+.RS 4
+Get user info by sid\&.
+.RE
+.PP
+\-\-user\-sids \fIsid\fR
+.RS 4
+Get user group SIDs for user\&.
+.RE
+.PP
+\-U|\-\-uid\-to\-sid \fIuid\fR
+.RS 4
+Try to convert a UNIX user id to a Windows NT SID\&. If the uid specified does not refer to one within the idmap range then the operation will fail\&.
+.RE
+.PP
+\-\-verbose
+.RS 4
+Print additional information about the query results\&.
+.RE
+.PP
+\-Y|\-\-sid\-to\-gid \fIsid\fR
+.RS 4
+Convert a SID to a UNIX group id\&. If the SID does not correspond to a UNIX group mapped by
+\fBwinbindd\fR(8)
+then the operation will fail\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.SH "EXIT STATUS"
+.PP
+The wbinfo program returns 0 if the operation succeeded, or 1 if the operation failed\&. If the
+\fBwinbindd\fR(8)
+daemon is not working
+wbinfo
+will always return failure\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+\fBwinbindd\fR(8)
+and
+\fBntlm_auth\fR(1)
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+wbinfo
+and
+winbindd
+were written by Tim Potter\&.
+.PP
+The conversion to DocBook for Samba 2\&.2 was done by Gerald Carter\&. The conversion to DocBook XML 4\&.2 for Samba 3\&.0 was done by Alexander Bokovoy\&.
diff --git a/docs/manpages/winbind_krb5_localauth.8 b/docs/manpages/winbind_krb5_localauth.8
new file mode 100644
index 0000000000..f6e6d8d7d1
--- /dev/null
+++ b/docs/manpages/winbind_krb5_localauth.8
@@ -0,0 +1,74 @@
+'\" t
+.\"     Title: winbind_krb5_localauth
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: 8
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "WINBIND_KRB5_LOCALAU" "8" "09/20/2021" "Samba 4\&.15\&.0" "8"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+winbind_krb5_localauth \- A plugin for MIT Kerberos for mapping user accounts\&.
+.SH "DESCRIPTION"
+.PP
+This plugin is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+winbind_krb5_localauth
+is a plugin that permits the MIT Kerberos libraries that Kerberos principals can be validated against local user accounts\&.
+.SH "PREREQUISITES"
+.PP
+MIT Kerberos (at least version 1\&.12) is required\&.
+.PP
+The plugin queries the
+\fBwinbindd\fR(8)
+daemon which needs to be configured and started separately\&.
+.PP
+The following sections needs to be added to the
+krb5\&.conf
+file\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+[plugins]
+	localauth = {
+		module = winbind:/usr/lib64/samba/krb5/winbind_krb5_localauth\&.so
+		enable_only = winbind
+	}
+		
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The winbind_krb5_localauth manpage was written by Andreas Schneider\&.
diff --git a/docs/manpages/winbind_krb5_locator.8 b/docs/manpages/winbind_krb5_locator.8
new file mode 100644
index 0000000000..1874557170
--- /dev/null
+++ b/docs/manpages/winbind_krb5_locator.8
@@ -0,0 +1,65 @@
+'\" t
+.\"     Title: winbind_krb5_locator
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: 8
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "WINBIND_KRB5_LOCATOR" "8" "09/20/2021" "Samba 4\&.15\&.0" "8"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+winbind_krb5_locator \- A plugin for MIT and Heimdal Kerberos for detecting KDCs using Windows semantics\&.
+.SH "DESCRIPTION"
+.PP
+This plugin is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+winbind_krb5_locator
+is a plugin that permits MIT and Heimdal Kerberos libraries to detect Kerberos Servers (for the KDC and kpasswd service) using the same semantics that other tools of the Samba suite use\&. This include site\-aware DNS service record lookups and caching of closest dc\&. The plugin uses the public locator API provided by most modern Kerberos implementations\&.
+.SH "PREREQUISITES"
+.PP
+MIT Kerberos (at least version 1\&.5) or Heimdal Kerberos (at least version 1\&.0) is required\&.
+.PP
+The plugin queries the
+\fBwinbindd\fR(8)
+daemon which needs to be configured and started separately\&.
+.PP
+The
+winbind_krb5_locator\&.so
+file needs to be manually copied to the plugin directory of the system Kerberos library\&. For MIT Kerberos this is often:
+/usr/lib/krb5/plugins/libkrb5/\&. For Heimdal Kerberos this is often:
+/usr/lib/plugin/krb5/\&. Please check your local Kerberos installation for the correct paths\&. No modification in
+/etc/krb5\&.conf
+is required to enable the use of this plugin\&.
+.PP
+After copying the locator plugin to the appropriate plugin directory it should immediately be available for use\&. Users should be able to kinit into their kerberized Windows environment without any modification or servers being put manually into
+/etc/krb5\&.conf\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The winbind_krb5_locator manpage was written by Guenther Deschner\&.
diff --git a/docs/manpages/winbindd.8 b/docs/manpages/winbindd.8
new file mode 100644
index 0000000000..4b67510d0b
--- /dev/null
+++ b/docs/manpages/winbindd.8
@@ -0,0 +1,603 @@
+'\" t
+.\"     Title: winbindd
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "WINBINDD" "8" "09/20/2021" "Samba 4\&.15\&.0" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+winbindd \- Name Service Switch daemon for resolving names from NT servers
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+winbindd [\-D|\-\-daemon] [\-i|\-\-interactive] [\-F|\-\-foreground] [\-\-no\-process\-group] [\-n|\-\-no\-caching] [\-d\ <debug\ level>] [\-\-debug\-stdout] [\-\-configfile=<configuration\ file>] [\-\-option=<name>=<value>] [\-l|\-\-log\-basename\ <log\ directory>] [\-\-leak\-report] [\-\-leak\-report\-full] [\-V|\-\-version]
+.SH "DESCRIPTION"
+.PP
+This program is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+winbindd
+is a daemon that provides a number of services to the Name Service Switch capability found in most modern C libraries, to arbitrary applications via PAM and
+ntlm_auth
+and to Samba itself\&.
+.PP
+Even if winbind is not used for nsswitch, it still provides a service to
+smbd,
+ntlm_auth
+and the
+pam_winbind\&.so
+PAM module, by managing connections to domain controllers\&. In this configuration the
+\m[blue]\fBidmap config * : range\fR\m[]
+parameter is not required\&. (This is known as `netlogon proxy only mode\*(Aq\&.)
+.PP
+The Name Service Switch allows user and system information to be obtained from different databases services such as NIS or DNS\&. The exact behaviour can be configured through the
+/etc/nsswitch\&.conf
+file\&. Users and groups are allocated as they are resolved to a range of user and group ids specified by the administrator of the Samba system\&.
+.PP
+The service provided by
+winbindd
+is called `winbind\*(Aq and can be used to resolve user and group information from a Windows NT server\&. The service can also provide authentication services via an associated PAM module\&.
+.PP
+The
+pam_winbind
+module supports the
+\fIauth\fR,
+\fIaccount\fR
+and
+\fIpassword\fR
+module\-types\&. It should be noted that the
+\fIaccount\fR
+module simply performs a getpwnam() to verify that the system can obtain a uid for the user, as the domain controller has already performed access control\&. If the
+libnss_winbind
+library has been correctly installed, or an alternate source of names configured, this should always succeed\&.
+.PP
+The following nsswitch databases are implemented by the winbindd service:
+.PP
+hosts
+.RS 4
+This feature is only available on IRIX\&. User information traditionally stored in the
+hosts(5)
+file and used by
+gethostbyname(3)
+functions\&. Names are resolved through the WINS server or by broadcast\&.
+.RE
+.PP
+passwd
+.RS 4
+User information traditionally stored in the
+passwd(5)
+file and used by
+getpwent(3)
+functions\&.
+.RE
+.PP
+group
+.RS 4
+Group information traditionally stored in the
+group(5)
+file and used by
+getgrent(3)
+functions\&.
+.RE
+.PP
+For example, the following simple configuration in the
+/etc/nsswitch\&.conf
+file can be used to initially resolve user and group information from
+/etc/passwd
+and
+/etc/group
+and then from the Windows NT server\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+passwd:         files winbind
+group:          files winbind
+## only available on IRIX: use winbind to resolve hosts:
+# hosts:        files dns winbind
+## All other NSS enabled systems should use libnss_wins\&.so like this:
+hosts:          files dns wins
+
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+The following simple configuration in the
+/etc/nsswitch\&.conf
+file can be used to initially resolve hostnames from
+/etc/hosts
+and then from the WINS server\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+hosts:		files wins
+.fi
+.if n \{\
+.RE
+.\}
+.SH "OPTIONS"
+.PP
+\-D|\-\-daemon
+.RS 4
+If specified, this parameter causes the server to operate as a daemon\&. That is, it detaches itself and runs in the background on the appropriate port\&. This switch is assumed if
+winbindd
+is executed on the command line of a shell\&.
+.RE
+.PP
+\-i|\-\-interactive
+.RS 4
+Tells
+winbindd
+to not become a daemon and detach from the current terminal\&. This option is used by developers when interactive debugging of
+winbindd
+is required\&.
+winbindd
+also logs to standard output, as if the
+\-S
+parameter had been given\&.
+.RE
+.PP
+\-F|\-\-foreground
+.RS 4
+If specified, this parameter causes the main
+winbindd
+process to not daemonize, i\&.e\&. double\-fork and disassociate with the terminal\&. Child processes are still created as normal to service each connection request, but the main process does not exit\&. This operation mode is suitable for running
+winbindd
+under process supervisors such as
+supervise
+and
+svscan
+from Daniel J\&. Bernstein\*(Aqs
+daemontools
+package, or the AIX process monitor\&.
+.RE
+.PP
+\-\-no\-process\-group
+.RS 4
+Do not create a new process group for winbindd\&.
+.RE
+.PP
+\-n|\-\-no\-caching
+.RS 4
+Disable some caching\&. This means winbindd will often have to wait for a response from the domain controller before it can respond to a client and this thus makes things slower\&. The results will however be more accurate, since results from the cache might not be up\-to\-date\&. This might also temporarily hang winbindd if the DC doesn\*(Aqt respond\&. This does not disable the samlogon cache, which is required for group membership tracking in trusted environments\&.
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL, \-\-debug\-stdout
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 0\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+This will redirect debug output to STDOUT\&. By default server daemons are logging to a log file\&.
+.RE
+.PP
+\-\-configfile=CONFIGFILE
+.RS 4
+The file specified contains the configuration details required by the server\&. The information in this file includes server\-specific information such as what printcap file to use, as well as descriptions of all the services that the server is to provide\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.SH "NAME AND ID RESOLUTION"
+.PP
+Users and groups on a Windows NT server are assigned a security id (SID) which is globally unique when the user or group is created\&. To convert the Windows NT user or group into a unix user or group, a mapping between SIDs and unix user and group ids is required\&. This is one of the jobs that
+winbindd
+performs\&.
+.PP
+As winbindd users and groups are resolved from a server, user and group ids are allocated from a specified range\&. This is done on a first come, first served basis, although all existing users and groups will be mapped as soon as a client performs a user or group enumeration command\&. The allocated unix ids are stored in a database and will be remembered\&.
+.PP
+WARNING: The SID to unix id database is the only location where the user and group mappings are stored by winbindd\&. If this store is deleted or corrupted, there is no way for winbindd to determine which user and group ids correspond to Windows NT user and group rids\&.
+.SH "CONFIGURATION"
+.PP
+Configuration of the
+winbindd
+daemon is done through configuration parameters in the
+\fBsmb.conf\fR(5)
+file\&. All parameters should be specified in the [global] section of smb\&.conf\&.
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\m[blue]\fBwinbind separator\fR\m[]
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\m[blue]\fBidmap config * : range\fR\m[]
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\m[blue]\fBidmap config * : backend\fR\m[]
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\m[blue]\fBwinbind cache time\fR\m[]
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\m[blue]\fBwinbind enum users\fR\m[]
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\m[blue]\fBwinbind enum groups\fR\m[]
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\m[blue]\fBtemplate homedir\fR\m[]
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\m[blue]\fBtemplate shell\fR\m[]
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\m[blue]\fBwinbind use default domain\fR\m[]
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\m[blue]\fBwinbind: rpc only\fR\m[]
+Setting this parameter forces winbindd to use RPC instead of LDAP to retrieve information from Domain Controllers\&.
+.RE
+.SH "EXAMPLE SETUP"
+.PP
+To setup winbindd for user and group lookups plus authentication from a domain controller use something like the following setup\&. This was tested on an early Red Hat Linux box\&.
+.PP
+In
+/etc/nsswitch\&.conf
+put the following:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+passwd: files winbind
+group:  files winbind
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+In
+/etc/pam\&.d/*
+replace the
+\fI auth\fR
+lines with something like this:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+auth  required    /lib/security/pam_securetty\&.so
+auth  required	  /lib/security/pam_nologin\&.so
+auth  sufficient  /lib/security/pam_winbind\&.so
+auth  required    /lib/security/pam_unix\&.so \e
+                  use_first_pass shadow nullok
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+.if n \{\
+.sp
+.\}
+.RS 4
+.it 1 an-trap
+.nr an-no-space-flag 1
+.nr an-break-flag 1
+.br
+.ps +1
+\fBNote\fR
+.ps -1
+.br
+.PP
+The PAM module pam_unix has recently replaced the module pam_pwdb\&. Some Linux systems use the module pam_unix2 in place of pam_unix\&.
+.sp .5v
+.RE
+.PP
+Note in particular the use of the
+\fIsufficient \fR
+keyword and the
+\fIuse_first_pass\fR
+keyword\&.
+.PP
+Now replace the account lines with this:
+.PP
+account required /lib/security/pam_winbind\&.so
+.PP
+The next step is to join the domain\&. To do that use the
+net
+program like this:
+.PP
+net join \-S PDC \-U Administrator
+.PP
+The username after the
+\fI\-U\fR
+can be any Domain user that has administrator privileges on the machine\&. Substitute the name or IP of your PDC for "PDC"\&.
+.PP
+Next copy
+libnss_winbind\&.so
+to
+/lib
+and
+pam_winbind\&.so
+to
+/lib/security\&. A symbolic link needs to be made from
+/lib/libnss_winbind\&.so
+to
+/lib/libnss_winbind\&.so\&.2\&. If you are using an older version of glibc then the target of the link should be
+/lib/libnss_winbind\&.so\&.1\&.
+.PP
+Finally, setup a
+\fBsmb.conf\fR(5)
+containing directives like the following:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+[global]
+	winbind separator = +
+        winbind cache time = 10
+        template shell = /bin/bash
+        template homedir = /home/%D/%U
+        idmap config * : range = 10000\-20000
+        workgroup = DOMAIN
+        security = domain
+        password server = *
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Now start winbindd and you should find that your user and group database is expanded to include your NT users and groups, and that you can login to your unix box as a domain user, using the DOMAIN+user syntax for the username\&. You may wish to use the commands
+getent passwd
+and
+getent group
+to confirm the correct operation of winbindd\&.
+.SH "NOTES"
+.PP
+The following notes are useful when configuring and running
+winbindd:
+.PP
+PAM is really easy to misconfigure\&. Make sure you know what you are doing when modifying PAM configuration files\&. It is possible to set up PAM such that you can no longer log into your system\&.
+.PP
+If more than one UNIX machine is running
+winbindd, then in general the user and groups ids allocated by winbindd will not be the same\&. The user and group ids will only be valid for the local machine, unless a shared
+\m[blue]\fBidmap config * : backend\fR\m[]
+is configured\&.
+.PP
+If the Windows NT SID to UNIX user and group id mapping file is damaged or destroyed then the mappings will be lost\&.
+.SH "SIGNALS"
+.PP
+The following signals can be used to manipulate the
+winbindd
+daemon\&.
+.PP
+SIGHUP
+.RS 4
+Reload the
+\fBsmb.conf\fR(5)
+file and apply any parameter changes to the running version of winbindd\&. This signal also clears any cached user and group information\&. The list of other domains trusted by winbindd is also reloaded\&.
+.sp
+Instead of sending a SIGHUP signal, a request to reload configuration file may be sent using
+\fBsmbcontrol\fR(1)
+program\&.
+.RE
+.PP
+SIGUSR2
+.RS 4
+The SIGUSR2 signal will cause
+winbindd
+to write status information to the winbind log file\&.
+.sp
+Log files are stored in the filename specified by the log file parameter\&.
+.RE
+.SH "FILES"
+.PP
+/etc/nsswitch\&.conf(5)
+.RS 4
+Name service switch configuration file\&.
+.RE
+.PP
+/tmp/\&.winbindd/pipe
+.RS 4
+The UNIX pipe over which clients communicate with the
+winbindd
+program\&. For security reasons, the winbind client will only attempt to connect to the winbindd daemon if both the
+/tmp/\&.winbindd
+directory and
+/tmp/\&.winbindd/pipe
+file are owned by root\&.
+.RE
+.PP
+$LOCKDIR/winbindd_privileged/pipe
+.RS 4
+The UNIX pipe over which \*(Aqprivileged\*(Aq clients communicate with the
+winbindd
+program\&. For security reasons, access to some winbindd functions \- like those needed by the
+ntlm_auth
+utility \- is restricted\&. By default, only users in the \*(Aqroot\*(Aq group will get this access, however the administrator may change the group permissions on $LOCKDIR/winbindd_privileged to allow programs like \*(Aqsquid\*(Aq to use ntlm_auth\&. Note that the winbind client will only attempt to connect to the winbindd daemon if both the
+$LOCKDIR/winbindd_privileged
+directory and
+$LOCKDIR/winbindd_privileged/pipe
+file are owned by root\&.
+.RE
+.PP
+/lib/libnss_winbind\&.so\&.X
+.RS 4
+Implementation of name service switch library\&.
+.RE
+.PP
+$LOCKDIR/winbindd_idmap\&.tdb
+.RS 4
+Storage for the Windows NT rid to UNIX user/group id mapping\&. The lock directory is specified when Samba is initially compiled using the
+\fI\-\-with\-lockdir\fR
+option\&. This directory is by default
+/usr/local/samba/var/locks\&.
+.RE
+.PP
+$LOCKDIR/winbindd_cache\&.tdb
+.RS 4
+Storage for cached user and group information\&.
+.RE
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "SEE ALSO"
+.PP
+nsswitch\&.conf(5),
+\fBsamba\fR(7),
+\fBwbinfo\fR(1),
+\fBntlm_auth\fR(8),
+\fBsmb.conf\fR(5),
+\fBpam_winbind\fR(8)
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+wbinfo
+and
+winbindd
+were written by Tim Potter\&.
+.PP
+The conversion to DocBook for Samba 2\&.2 was done by Gerald Carter\&. The conversion to DocBook XML 4\&.2 for Samba 3\&.0 was done by Alexander Bokovoy\&.
diff --git a/docs/manpages/winexe.1 b/docs/manpages/winexe.1
new file mode 100644
index 0000000000..cbdb88b148
--- /dev/null
+++ b/docs/manpages/winexe.1
@@ -0,0 +1,476 @@
+'\" t
+.\"     Title: winexe
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 09/20/2021
+.\"    Manual: User Commands
+.\"    Source: Samba 4.15.0
+.\"  Language: English
+.\"
+.TH "WINEXE" "1" "09/20/2021" "Samba 4\&.15\&.0" "User Commands"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+winexe \- Winexe is a Remote Windows\-command executor
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+winexe [\-\-uninstall] [\-\-reinstall] [\-\-runas\ [DOMAIN/]USERNAME[%PASSWORD]] [\-\-runas\-file\ FILE] [\-\-interactive\ [0|1]] [\-\-ostype\ [0|1]] [\-d|\-\-debuglevel=DEBUGLEVEL] [\-\-debug\-stdout] [\-\-configfile=CONFIGFILE] [\-\-option=name=value] [\-l|\-\-log\-basename=LOGFILEBASE] [\-\-leak\-report] [\-\-leak\-report\-full] [\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER] [\-O|\-\-socket\-options=SOCKETOPTIONS] [\-m|\-\-max\-protocol=MAXPROTOCOL] [\-n|\-\-netbiosname=NETBIOSNAME] [\-\-netbios\-scope=SCOPE] [\-W|\-\-workgroup=WORKGROUP] [\-\-realm=REALM] [\-U|\-\-user=[DOMAIN/]USERNAME%[PASSWORD]] [\-N|\-\-no\-pass] [\-\-password=STRING] [\-\-pw\-nt\-hash] [\-A|\-\-authentication\-file=FILE] [\-P|\-\-machine\-pass] [\-\-simple\-bind\-dn=DN] [\-\-use\-kerberos=desired|required|off] [\-\-use\-krb5\-ccache=CCACHE] [\-\-use\-winbind\-ccache] [\-\-client\-protection=sign|encrypt|off] [\-V|\-\-version] [\-?|\-\-help] [\-\-usage]
+.SH "DESCRIPTION"
+.PP
+This tool is part of the
+\fBsamba\fR(7)
+suite\&.
+.PP
+The
+winexe
+allows remote command execution on native Windows operating systems\&.
+.SH "OPTIONS"
+.PP
+\-\-uninstall
+.RS 4
+Uninstall winexe service after remote execution\&.
+.RE
+.PP
+\-\-reinstall
+.RS 4
+Reinstall winexe service before remote execution\&.
+.RE
+.PP
+\-\-runas \fI[DOMAIN/]USERNAME[%PASSWORD]]\fR
+.RS 4
+Run as the given user (BEWARE: this password is sent in cleartext over the network!)
+.RE
+.PP
+\-\-runas\-file \fIFILE\fR
+.RS 4
+Run as user options defined in a file\&.
+.RE
+.PP
+\-\-interactive \fI[0|1]\fR
+.RS 4
+Desktop interaction\&.
+.sp
+There are two options:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+0 \- disallow
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+1 \- allow\&. If allow, also use the \-\-system switch (Windows requirement)\&. Vista does not support this optoin\&.
+.RE
+.sp
+.RE
+.RE
+.PP
+\-\-ostype \fI[0|1|2]\fR
+.RS 4
+Determines which version (32\-bit or 64\-bit) of service will be installed\&.
+.sp
+There are three options:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+0 \- 32\-bit
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+1 \- 64\-bit
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+2 \- winexe will decide
+.RE
+.sp
+.RE
+.RE
+.PP
+\-d|\-\-debuglevel=DEBUGLEVEL
+.RS 4
+\fIlevel\fR
+is an integer from 0 to 10\&. The default value if this parameter is not specified is 1 for client applications\&.
+.sp
+The higher this value, the more detail will be logged to the log files about the activities of the server\&. At level 0, only critical errors and serious warnings will be logged\&. Level 1 is a reasonable level for day\-to\-day running \- it generates a small amount of information about operations carried out\&.
+.sp
+Levels above 1 will generate considerable amounts of log data, and should only be used when investigating a problem\&. Levels above 3 are designed for use only by developers and generate HUGE amounts of log data, most of which is extremely cryptic\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBlog level\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-debug\-stdout
+.RS 4
+This will redirect debug output to STDOUT\&. By default all clients are logging to STDERR\&.
+.RE
+.PP
+\-\-configfile=<configuration file>
+.RS 4
+The file specified contains the configuration details required by the client\&. The information in this file can be general for client and server or only provide client specific like options such as
+\m[blue]\fBclient smb encrypt\fR\m[]\&. See
+smb\&.conf
+for more information\&. The default configuration file name is determined at compile time\&.
+.RE
+.PP
+\-\-option=<name>=<value>
+.RS 4
+Set the
+\fBsmb.conf\fR(5)
+option "<name>" to value "<value>" from the command line\&. This overrides compiled\-in defaults and options read from the configuration file\&. If a name or a value includes a space, wrap whole \-\-option=name=value into quotes\&.
+.RE
+.PP
+\-l|\-\-log\-basename=logdirectory
+.RS 4
+Base directory name for log/debug files\&. The extension
+\fB"\&.progname"\fR
+will be appended (e\&.g\&. log\&.smbclient, log\&.smbd, etc\&.\&.\&.)\&. The log file is never removed by the client\&.
+.RE
+.PP
+\-\-leak\-report
+.RS 4
+Enable talloc leak reporting on exit\&.
+.RE
+.PP
+\-\-leak\-report\-full
+.RS 4
+Enable full talloc leak reporting on exit\&.
+.RE
+.PP
+\-V|\-\-version
+.RS 4
+Prints the program version number\&.
+.RE
+.PP
+\-R|\-\-name\-resolve=NAME\-RESOLVE\-ORDER
+.RS 4
+This option is used to determine what naming services and in what order to resolve host names to IP addresses\&. The option takes a space\-separated string of different name resolution options\&. The best ist to wrap the whole \-\-name\-resolve=NAME\-RESOLVE\-ORDER into quotes\&.
+.sp
+The options are: "lmhosts", "host", "wins" and "bcast"\&. They cause names to be resolved as follows:
+.RS
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBlmhosts\fR: Lookup an IP address in the Samba lmhosts file\&. If the line in lmhosts has no name type attached to the NetBIOS name (see the
+\fBlmhosts\fR(5)
+for details) then any name type matches for lookup\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBhost\fR: Do a standard host name to IP address resolution, using the system
+/etc/hosts, NIS, or DNS lookups\&. This method of name resolution is operating system dependent, for instance on IRIX or Solaris this may be controlled by the
+/etc/nsswitch\&.conf
+file)\&. Note that this method is only used if the NetBIOS name type being queried is the 0x20 (server) name type, otherwise it is ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBwins\fR: Query a name with the IP address listed in the
+\fIwins server\fR
+parameter\&. If no WINS server has been specified this method will be ignored\&.
+.RE
+.sp
+.RS 4
+.ie n \{\
+\h'-04'\(bu\h'+03'\c
+.\}
+.el \{\
+.sp -1
+.IP \(bu 2.3
+.\}
+\fBbcast\fR: Do a broadcast on each of the known local interfaces listed in the
+\fIinterfaces\fR
+parameter\&. This is the least reliable of the name resolution methods as it depends on the target host being on a locally connected subnet\&.
+.RE
+.sp
+.RE
+If this parameter is not set then the name resolve order defined in the
+smb\&.conf
+file parameter (\m[blue]\fBname resolve order\fR\m[]) will be used\&.
+.sp
+The default order is lmhosts, host, wins, bcast\&. Without this parameter or any entry in the
+\m[blue]\fBname resolve order\fR\m[]
+parameter of the
+smb\&.conf
+file, the name resolution methods will be attempted in this order\&.
+.RE
+.PP
+\-O|\-\-socket\-options=SOCKETOPTIONS
+.RS 4
+TCP socket options to set on the client socket\&. See the socket options parameter in the
+smb\&.conf
+manual page for the list of valid options\&.
+.RE
+.PP
+\-m|\-\-max\-protocol=MAXPROTOCOL
+.RS 4
+The value of the parameter (a string) is the highest protocol level that will be supported by the client\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient max protocol\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-n|\-\-netbiosname=NETBIOSNAME
+.RS 4
+This option allows you to override the NetBIOS name that Samba uses for itself\&. This is identical to setting the
+\m[blue]\fBnetbios name\fR\m[]
+parameter in the
+smb\&.conf
+file\&. However, a command line setting will take precedence over settings in
+smb\&.conf\&.
+.RE
+.PP
+\-\-netbios\-scope=SCOPE
+.RS 4
+This specifies a NetBIOS scope that
+nmblookup
+will use to communicate with when generating NetBIOS names\&. For details on the use of NetBIOS scopes, see rfc1001\&.txt and rfc1002\&.txt\&. NetBIOS scopes are
+\fIvery\fR
+rarely used, only set this parameter if you are the system administrator in charge of all the NetBIOS systems you communicate with\&.
+.RE
+.PP
+\-W|\-\-workgroup=WORKGROUP
+.RS 4
+Set the SMB domain of the username\&. This overrides the default domain which is the domain defined in smb\&.conf\&. If the domain specified is the same as the servers NetBIOS name, it causes the client to log on using the servers local SAM (as opposed to the Domain SAM)\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBworkgroup\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-r|\-\-realm=REALM
+.RS 4
+Set the realm for the domain\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBrealm\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-U|\-\-user=[DOMAIN\e]USERNAME[%PASSWORD]
+.RS 4
+Sets the SMB username or username and password\&.
+.sp
+If %PASSWORD is not specified, the user will be prompted\&. The client will first check the
+\fBUSER\fR
+environment variable (which is also permitted to also contain the password seperated by a %), then the
+\fBLOGNAME\fR
+variable (which is not permitted to contain a password) and if either exists, the value is used\&. If these environmental variables are not found, the username found in a Kerberos Credentials cache may be used\&.
+.sp
+A third option is to use a credentials file which contains the plaintext of the username and password\&. This option is mainly provided for scripts where the admin does not wish to pass the credentials on the command line or via environment variables\&. If this method is used, make certain that the permissions on the file restrict access from unwanted users\&. See the
+\fI\-A\fR
+for more details\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-N|\-\-no\-pass
+.RS 4
+If specified, this parameter suppresses the normal password prompt from the client to the user\&. This is useful when accessing a service that does not require a password\&.
+.sp
+Unless a password is specified on the command line or this parameter is specified, the client will request a password\&.
+.sp
+If a password is specified on the command line and this option is also defined the password on the command line will be silently ignored and no password will be used\&.
+.RE
+.PP
+\-\-password
+.RS 4
+Specify the password on the commandline\&.
+.sp
+Be cautious about including passwords in scripts or passing user\-supplied values onto the command line\&. For security it is better to let the Samba client tool ask for the password if needed, or obtain the password once with
+kinit\&.
+.sp
+If \-\-password is not specified, the tool will check the
+\fBPASSWD\fR
+environment variable, followed by
+\fBPASSWD_FD\fR
+which is expected to contain an open file descriptor (FD) number\&.
+.sp
+Finally it will check
+\fBPASSWD_FILE\fR
+(containing a file path to be opened)\&. The file should only contain the password\&. Make certain that the permissions on the file restrict access from unwanted users!
+.sp
+While Samba will attempt to scrub the password from the process title (as seen in ps), this is after startup and so is subject to a race\&.
+.RE
+.PP
+\-\-pw\-nt\-hash
+.RS 4
+The supplied password is the NT hash\&.
+.RE
+.PP
+\-A|\-\-authentication\-file=filename
+.RS 4
+This option allows you to specify a file from which to read the username and password used in the connection\&. The format of the file is:
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+				username = <value>
+				password = <value>
+				domain   = <value>
+			
+.fi
+.if n \{\
+.RE
+.\}
+.sp
+Make certain that the permissions on the file restrict access from unwanted users!
+.RE
+.PP
+\-P|\-\-machine\-pass
+.RS 4
+Use stored machine account password\&.
+.RE
+.PP
+\-\-simple\-bind\-dn=DN
+.RS 4
+DN to use for a simple bind\&.
+.RE
+.PP
+\-\-use\-kerberos=desired|required|off
+.RS 4
+This parameter determines whether Samba client tools will try to authenticate using Kerberos\&. For Kerberos authentication you need to use dns names instead of IP addresses when connnecting to a service\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient use kerberos\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.RE
+.PP
+\-\-use\-krb5\-ccache=CCACHE
+.RS 4
+Specifies the credential cache location for Kerberos authentication\&.
+.sp
+This will set \-\-use\-kerberos=required too\&.
+.RE
+.PP
+\-\-use\-winbind\-ccache
+.RS 4
+Try to use the credential cache by winbind\&.
+.RE
+.PP
+\-\-client\-protection=sign|encrypt|off
+.RS 4
+Sets the connection protection the client tool should use\&.
+.sp
+Note that specifying this parameter here will override the
+\m[blue]\fBclient protection\fR\m[]
+parameter in the
+smb\&.conf
+file\&.
+.sp
+In case you need more fine grained control you can use:
+\-\-option=clientsmbencrypt=OPTION,
+\-\-option=clientipcsigning=OPTION,
+\-\-option=clientsigning=OPTION\&.
+.RE
+.PP
+\-?|\-\-help
+.RS 4
+Print a summary of command line options\&.
+.RE
+.PP
+\-\-usage
+.RS 4
+Display brief usage message\&.
+.RE
+.SH "EXIT STATUS"
+.PP
+The winexe program returns 0 if the operation succeeded, or 1 if the operation failed\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.15\&.0 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
+.PP
+The
+winexe
+and it\*(Aqs native Windows counterpart were written by Andrzej Hajda\&. The Samba client tool winexe was later rewritten by Volker Lendecke\&.
+.PP
+This manpage was written by Guenther Deschner\&.
